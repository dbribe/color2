{"version":3,"file":"bundle.js","sources":["../../../node_modules/stem-core/src/base/PageTitleManager.js","../../js/AppConfig.js","../../../node_modules/stem-core/src/base/Utils.js","../../../node_modules/stem-core/src/base/Dispatcher.js","../../../node_modules/stem-core/src/ui/NodeAttributes.js","../../../node_modules/stem-core/src/ui/Debug.js","../../../node_modules/stem-core/src/ui/UIBase.js","../../../node_modules/stem-core/src/ui/Constants.js","../../../node_modules/stem-core/src/ui/Utils.js","../../../node_modules/stem-core/src/ui/StyleElement.jsx","../../../node_modules/stem-core/src/decorators/Utils.js","../../../node_modules/stem-core/src/decorators/LazyInitialize.js","../../../node_modules/stem-core/src/decorators/Style.js","../../../node_modules/stem-core/src/ui/Style.js","../../../node_modules/stem-core/src/base/Device.js","../../../node_modules/stem-core/src/ui/Draggable.js","../../../node_modules/stem-core/src/ui/Color.js","../../../node_modules/stem-core/src/ui/style/Theme.js","../../../node_modules/stem-core/src/ui/GlobalStyle.js","../../../node_modules/stem-core/src/ui/Bootstrap3.jsx","../../../node_modules/stem-core/src/ui/UIPrimitives.jsx","../../../node_modules/stem-core/src/ui/input/Style.js","../../../node_modules/stem-core/src/ui/input/Input.jsx","../../../node_modules/stem-core/src/ui/form/Style.js","../../../node_modules/stem-core/src/ui/form/Form.jsx","../../../node_modules/stem-core/src/ui/svg/SVGNodeAttributes.js","../../../node_modules/stem-core/src/ui/svg/SVGBase.js","../../../node_modules/stem-core/src/ui/svg/SVGText.jsx","../../../node_modules/stem-core/src/math.js","../../../node_modules/stem-core/src/ui/svg/SVGPrimitives.js","../../../node_modules/stem-core/src/ui/Transition.js","../../../node_modules/stem-core/src/ui/svg/Animations.js","../../../node_modules/stem-core/src/ui/Switcher.jsx","../../../node_modules/stem-core/src/ui/Router.jsx","../../../node_modules/stem-core/src/ui/Translation.js","../../../node_modules/stem-core/src/ui/horizontal-overflow/Style.js","../../../node_modules/stem-core/src/ui/tabs/Style.js","../../../node_modules/stem-core/src/ui/tabs/TabArea.jsx","../../../node_modules/stem-core/src/ui/FontAwesome.jsx","../../../node_modules/stem-core/src/ui/horizontal-overflow/HorizontalOverflow.jsx","../../../node_modules/stem-core/src/ui/tabs/FlatTabArea.jsx","../../../node_modules/stem-core/src/data-structures/MultiMap.js","../../../node_modules/stem-core/src/polyfill/Headers.js","../../../node_modules/stem-core/src/polyfill/URLSearchParams.js","../../../node_modules/stem-core/src/polyfill/Body.js","../../../node_modules/stem-core/src/polyfill/Request.js","../../../node_modules/stem-core/src/polyfill/Response.js","../../../node_modules/stem-core/src/base/Fetch.js","../../../node_modules/stem-core/src/base/Ajax.js","../../../node_modules/stem-core/src/ui/button/ButtonStyle.js","../../../node_modules/stem-core/src/ui/button/Button.jsx","../../../node_modules/stem-core/src/ui/button/ButtonGroup.jsx","../../../node_modules/stem-core/src/ui/CardPanel.jsx","../../../node_modules/stem-core/src/ui/RowList.jsx","../../../node_modules/stem-core/src/ui/collapsible/Style.js","../../../node_modules/stem-core/src/ui/collapsible/CollapsibleMixin.jsx","../../../node_modules/stem-core/src/ui/collapsible/CollapsiblePanel.jsx","../../../node_modules/stem-core/src/ui/modal/Style.js","../../../node_modules/stem-core/src/ui/modal/FloatingWindow.jsx","../../../node_modules/stem-core/src/ui/modal/Modal.jsx","../../../node_modules/stem-core/src/ui/global-container/Style.js","../../../node_modules/stem-core/src/ui/global-container/GlobalContainer.jsx","../../../node_modules/stem-core/src/ui/section-divider/Divider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Style.js","../../../node_modules/stem-core/src/ui/section-divider/SectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/TitledSectionDivider.jsx","../../../node_modules/stem-core/src/ui/section-divider/Accordion.jsx","../../../node_modules/stem-core/src/ui/Carousel.jsx","../../../node_modules/stem-core/src/ui/RangePanelStyle.js","../../../node_modules/stem-core/src/ui/RangePanel.jsx","../../../node_modules/stem-core/src/ui/table/Style.js","../../../node_modules/stem-core/src/ui/table/Table.jsx","../../../node_modules/stem-core/src/ui/table/CollapsibleTable.jsx","../../../node_modules/stem-core/src/ui/table/SortableTable.jsx","../../../node_modules/stem-core/src/time/Duration.js","../../../node_modules/stem-core/src/time/Date.js","../../../node_modules/stem-core/src/time/Time.js","../../../node_modules/stem-core/src/ui/DateTimePicker.jsx","../../../node_modules/stem-core/src/base/EnqueueableMethodMixin.js","../../../node_modules/stem-core/src/ui/CodeEditor.jsx","../../js/game/Tile.jsx","../../js/game/Board.jsx","../../js/game/Game.jsx","../../js/IndexPage.jsx","../../../node_modules/stem-core/src/markup/MarkupParser.js","../../../node_modules/stem-core/src/markup/MarkupRenderer.js","../../../establishment/content/js/markup/MarkupEditor.jsx","../../../node_modules/stem-core/src/ui/ConcentricCirclesLoadingScreen.jsx","../../../node_modules/stem-core/src/base/Require.js","../../../node_modules/stem-core/src/ui/DelayedElement.js","../../../node_modules/stem-core/src/state/State.js","../../../node_modules/stem-core/src/ui/StateDependentElement.jsx","../../../node_modules/stem-core/src/state/StoreMixins.js","../../../node_modules/stem-core/src/state/Store.js","../../../establishment/accounts/js/state/UserStore.js","../../../establishment/accounts/js/UserHandle.jsx","../../../establishment/localization/js/state/LanguageStore.js","../../../establishment/content/js/state/ArticleStore.js","../../../establishment/content/js/ArticleManager.jsx","../../../establishment/content/js/ArticleRenderer.jsx","../../../establishment/content/js/ArticleEditor.jsx","../../../establishment/accounts/js/state/UserReactionStore.js","../../../establishment/chat/js/state/MessageThreadStore.js","../../../node_modules/stem-core/src/base/Plugin.js","../../../establishment/content/js/Popup.jsx","../../../establishment/content/js/markup/MarkupEditorModal.jsx","../../../establishment/chat/js/ChatMarkupRenderer.jsx","../../../establishment/localization/js/state/CountryStore.js","../../../establishment/socialaccount/js/state/SocialAppStore.js","../../../establishment/socialaccount/js/SocialAccountManager.js","../../../establishment/accounts/js/GoogleManager.js","../../../establishment/accounts/js/FacebookManager.js","../../../establishment/accounts/js/GithubManager.js","../../../establishment/accounts/js/LoginStyle.js","../../../establishment/accounts/js/Login.jsx","../../../establishment/accounts/js/LoginModal.jsx","../../../establishment/chat/js/VotingWidgetStyle.js","../../../establishment/chat/js/VotingWidget.jsx","../../../establishment/chat/js/ChatStyle.js","../../../establishment/chat/js/ChatWidget.jsx","../../../establishment/blog/js/BlogStyle.js","../../../establishment/chat/js/CommentWidgetStyle.js","../../../establishment/chat/js/CommentWidget.jsx","../../../establishment/blog/js/state/BlogStore.js","../../../establishment/blog/js/BlogArticleRenderer.jsx","../../../establishment/blog/js/BlogPanel.jsx","../../../establishment/forum/js/state/ForumStore.js","../../../establishment/forum/js/EditThreadReplyButton.jsx","../../../establishment/forum/js/DeleteThreadReplyButton.jsx","../../../establishment/forum/js/ForumStyle.js","../../../establishment/forum/js/CreateThreadReplyButton.jsx","../../../establishment/localization/js/state/TranslationStore.js","../../../establishment/errors/js/state/ErrorMessageStore.js","../../../establishment/errors/js/ErrorHandlers.js","../../../establishment/forum/js/ForumThread.jsx","../../../establishment/forum/js/ForumPanel.jsx","../../js/Routes.js","../../../node_modules/stem-core/src/ui/navmanager/NavStyle.js","../../../node_modules/stem-core/src/base/StorageMap.js","../../../node_modules/stem-core/src/ui/navmanager/NavElement.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavIcon.jsx","../../../node_modules/stem-core/src/ui/navmanager/NavSwipeDetection.js","../../../node_modules/stem-core/src/ui/navmanager/NavManager.jsx","../../../establishment/accounts/js/Logout.js","../../js/AppNavManager.jsx","../../../node_modules/stem-core/src/app/StemApp.jsx","../../../establishment/funnel/js/websocket/WebsocketStreamHandler.js","../../../establishment/funnel/js/websocket/WebsocketSubscriber.js","../../../establishment/webapp/js/GlobalStyleSheet.js","../../../establishment/webapp/js/EstablishmentApp.js","../../js/App.jsx"],"sourcesContent":["export class PageTitleManager {\n    static title = null;\n    static defaultTitle = \"Website\";\n    static prefix = null;\n\n    static getPrefix() {\n        return this.prefix ? \"(\" + this.prefix + \") \" : \"\";\n    }\n\n    static setPrefix(prefix) {\n        this.prefix = prefix;\n        this.updatePageTitle();\n    }\n\n    static setDefaultTitle(defaultTitle) {\n        this.defaultTitle = defaultTitle;\n    }\n\n    static getTitle() {\n        return this.title || this.defaultTitle;\n    }\n\n    static setTitle(title) {\n        this.title = title;\n        this.updatePageTitle();\n    }\n\n    static getFullPageTitle() {\n        return this.getPrefix() + this.getTitle();\n    }\n\n    static updatePageTitle() {\n        document.title = this.getFullPageTitle();\n    }\n\n    static setIcon() {\n        throw Error(\"Not implemented yet!\");\n    }\n}\n","import {PageTitleManager} from \"base/PageTitleManager\";\n\nPageTitleManager.setDefaultTitle(\"\");","// TODO: should this be renamed to \"toUnwrappedArray\"?\nexport function unwrapArray(elements) {\n    if (!elements) {\n        return [];\n    }\n\n    if (!Array.isArray(elements)) {\n        // In case this is an iterable, convert to array\n        if (elements[Symbol.iterator]) {\n            return unwrapArray(Array.from(elements));\n        } else {\n            return [elements];\n        }\n    }\n\n    // Check if the passed in array is valid, and try to return it if possible to preserve references\n    let allProperElements = true;\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i]) || elements[i] == null) {\n            allProperElements = false;\n            break;\n        }\n    }\n\n    if (allProperElements) {\n        // Return the exact same array as was passed in\n        return elements;\n    }\n\n    let result = [];\n    for (let i = 0; i < elements.length; i++) {\n        if (Array.isArray(elements[i])) {\n            let unwrappedElement = unwrapArray(elements[i]);\n            for (let j = 0; j < unwrappedElement.length; j += 1) {\n                result.push(unwrappedElement[j]);\n            }\n        } else {\n            if (elements[i] != null) {\n                result.push(elements[i]);\n            }\n        }\n    }\n    return result;\n}\n\nexport function isLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    // Empty url is considered local\n    if (!url) {\n        return true;\n    }\n    // Protocol-relative url is local if the host matches\n    if (url.startsWith(\"//\")) {\n        return url.startsWith(\"//\" + host);\n    }\n    // Absolute url is local if the origin matches\n    let r = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n    if (r.test(url)) {\n        return url.startsWith(origin);\n    }\n    // Root-relative and document-relative urls are always local\n    return true;\n}\n\n// Trims a local url to root-relative or document-relative url.\n// If the url is protocol-relative, removes the starting \"//\"+host, transforming it in a root-relative url.\n// If the url is absolute, removes the origin, transforming it in a root-relative url.\n// If the url is root-relative or document-relative, leaves it as is.\nexport function trimLocalUrl(url, host=self.location.host, origin=self.location.origin) {\n    if (!isLocalUrl(url, host, origin)) {\n        throw Error(\"Trying to trim non-local url!\");\n    }\n    if (!url) {\n        return url;\n    }\n    if (url.startsWith(\"//\" + host)) {\n        return url.slice((\"//\" + host).length);\n    }\n    if (url.startsWith(origin)) {\n        return url.slice(origin.length);\n    }\n    return url;\n}\n\n// Split the passed in array into arrays with at most maxChunkSize elements\nexport function splitInChunks(array, maxChunkSize) {\n    let chunks = [];\n    while (array.length > 0) {\n        chunks.push(array.splice(0, maxChunkSize));\n    }\n    return chunks;\n}\n\nexport function isIterable(obj) {\n    if (obj == null) {\n        return false;\n    }\n    return obj[Symbol.iterator] !== undefined;\n}\n\nexport function defaultComparator(a, b) {\n    if (a == null && b == null) {\n        return 0;\n    }\n\n    if (b == null) {\n        return 1;\n    }\n\n    if (a == null) {\n        return -1;\n    }\n\n    // TODO: might want to use valueof here\n    if (isNumber(a) && isNumber(b)) {\n        return a - b;\n    }\n\n    let aStr = a.toString();\n    let bStr = b.toString();\n\n    if (aStr === bStr) {\n        return 0;\n    }\n    return aStr < bStr ? -1 : 1;\n}\n\nexport function slugify(string) {\n    string = string.trim();\n\n    string = string.replace((/[^a-zA-Z0-9-\\s]/g), \"\"); // remove anything non-latin alphanumeric\n    string = string.replace((/\\s+/g), \"-\"); // replace whitespace with dashes\n    string = string.replace((/-{2,}/g), \"-\"); // remove consecutive dashes\n    string = string.toLowerCase();\n\n    return string;\n}\n\n// If the first argument is a number, it's returned concatenated with the suffix, otherwise it's returned unchanged\nexport function suffixNumber(value, suffix) {\n    if (typeof value === \"number\" || value instanceof Number) {\n        return value + suffix;\n    }\n    return value;\n}\n\nexport function setObjectPrototype(obj, Class) {\n    obj.__proto__ = Class.prototype;\n    return obj;\n}\n\nexport function isNumber(obj) {\n    return (typeof obj === \"number\") || (obj instanceof Number);\n}\n\nexport function isString(obj) {\n    return (typeof obj === \"string\") || (obj instanceof String);\n}\n\nexport function isPlainObject(obj) {\n    if (!obj || typeof obj !== \"object\" || obj.nodeType) {\n        return false;\n    }\n    if (obj.constructor && obj.constructor != Object) {\n        return false;\n    }\n    return true;\n}\n\nexport function deepCopy() {\n\tlet target = arguments[0] || {};\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== \"object\" && typeof target !== \"function\") {\n\t\ttarget = {};\n\t}\n\n\tfor (let i = 1; i < arguments.length; i += 1) {\n        let obj = arguments[i];\n        if (obj == null) {\n            continue;\n        }\n\n        // Extend the base object\n        for (let [key, value] of Object.entries(obj)) {\n            // Recurse if we're merging plain objects or arrays\n            if (value && isPlainObject(value) || Array.isArray(value)) {\n                let clone;\n                let src = target[key];\n\n                if (Array.isArray(value)) {\n                    clone = (src && Array.isArray(src)) ? src : [];\n                } else {\n                    clone = (src && isPlainObject(src)) ? src : {};\n                }\n\n                target[key] = deepCopy(clone, value);\n            } else {\n                // TODO: if value has .clone() method, use that?\n                target[key] = value;\n            }\n        }\n\t}\n\n\treturn target;\n}\n\nexport function objectFromKeyValue(key, value) {\n    return {\n        [key]: value,\n    }\n}\n\nexport function dashCase(str) {\n    let rez = \"\";\n    for (let i = 0; i < str.length; i++) {\n        if (\"A\" <= str[i] && str[i] <= \"Z\") {\n            if (i > 0) {\n                rez += \"-\";\n            }\n            rez += str[i].toLowerCase();\n        } else {\n            rez += str[i];\n        }\n    }\n    return (rez == str) ? str : rez;\n}\n\n// TODO: have a Cookie helper file\nexport function getCookie(name) {\n    let cookies = (document.cookie || \"\").split(\";\");\n    for (let cookie of cookies) {\n        cookie = cookie.trim();\n        if (cookie.startsWith(name + \"=\")) {\n            return decodeURIComponent(cookie.substring(name.length + 1));\n        }\n    }\n    return null;\n}\n\nexport function uniqueId(obj) {\n    if (!uniqueId.objectWeakMap) {\n        uniqueId.objectWeakMap = new WeakMap();\n        uniqueId.constructorWeakMap = new WeakMap();\n        uniqueId.totalObjectCount = 0;\n    }\n    let objectWeakMap = uniqueId.objectWeakMap;\n    let constructorWeakMap = uniqueId.constructorWeakMap;\n    if (!objectWeakMap.has(obj)) {\n        const objConstructor = obj.constructor || obj.__proto__ || Object;\n        // Increment the object count\n        const objIndex = (constructorWeakMap.get(objConstructor) || 0) + 1;\n        constructorWeakMap.set(objConstructor, objIndex);\n\n        const objUniqueId = objIndex + \"-\" + (++uniqueId.totalObjectCount);\n        objectWeakMap.set(obj, objUniqueId);\n    }\n    return objectWeakMap.get(obj);\n}\n\n// TODO: should be done with String.padLeft\nexport function padNumber(num, minLength) {\n    let strNum = String(num);\n    while (strNum.length < minLength) {\n        strNum = \"0\" + strNum;\n    }\n    return strNum;\n}\n\n// Returns the english ordinal suffix of a number\nexport function getOrdinalSuffix(num) {\n    let suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n    let lastDigit = num % 10;\n    let isTeen = Math.floor(num / 10) % 10 === 1;\n    return (!isTeen && suffixes[lastDigit]) || suffixes[0];\n}\n\nexport function suffixWithOrdinal(num) {\n    return num + getOrdinalSuffix(num);\n}\n\nexport function instantiateNative(BaseClass, NewClass, ...args) {\n    let obj = new BaseClass(...args);\n    obj.__proto__ = NewClass.prototype;\n    return obj;\n}\n\n// This function can be used as a decorator in case we're extending native classes (Map/Set/Date)\n// and we want to fix the way babel breaks this scenario\n// WARNING: it destroys the code in constructor\n// If you want a custom constructor, you need to implement a static create method that generates new objects\n// Check the default constructor this code, or an example where this is done.\nexport function extendsNative(targetClass) {\n    if (targetClass.toString().includes(\" extends \")) {\n        // Native extended classes are cool, leave them as they are\n        return;\n    }\n    let BaseClass = targetClass.__proto__;\n    let allKeys = Object.getOwnPropertySymbols(targetClass).concat(Object.getOwnPropertyNames(targetClass));\n\n    // Fill in the default constructor\n    let newClass = targetClass.create || function create() {\n        return instantiateNative(BaseClass, newClass, ...arguments);\n        };\n    for (const key of allKeys) {\n        let property = Object.getOwnPropertyDescriptor(targetClass, key);\n        Object.defineProperty(newClass, key, property);\n    }\n    newClass.prototype = targetClass.prototype;\n    newClass.__proto__ = targetClass.__proto__;\n\n    newClass.prototype.constructor = newClass;\n\n    return newClass;\n}\n\nexport const NOOP_FUNCTION = () => undefined;\n\n// Helpers to wrap iterators, to wrap all values in a function or to filter them\nexport function* mapIterator(iter, func) {\n    for (let value of iter) {\n        yield func(value);\n    }\n}\n\nexport function* filterIterator(iter, func) {\n    for (let value of iter) {\n        if (func(value)) {\n            yield value;\n        }\n    }\n}\n\nexport class CallModifier {\n    wrap(func) {\n        throw Error(\"Implement wrap method\");\n    }\n\n    call(func) {\n        return this.wrap(func)();\n    }\n\n    toFunction() {\n        return (func) => this.wrap(func);\n    }\n}\n\nexport class UnorderedCallDropper extends CallModifier {\n    index = 1;\n    lastExecuted = 0;\n\n    wrap(callback) {\n        const currentIndex = this.index++;\n        return (...args) => {\n            if (currentIndex > this.lastExecuted) {\n                this.lastExecuted = currentIndex;\n                return callback(...args);\n            }\n        }\n    }\n}\n\n/*\nCallThrottler acts both as a throttler and a debouncer, allowing you to combine both types of functionality.\nAvailable options:\n    - debounce (ms): delays the function call by x ms, each call extending the delay\n    - throttle (ms): keeps calls from happening with at most x ms between them. If debounce is also set, will make sure to\n    fire a debounced even if over x ms have passed. If equal to CallTimer.ON_ANIMATION_FRAME, means that we want to use\n    requestAnimationFrame instead of setTimeout, to execute before next frame redraw()\n    - dropThrottled (boolean, default false): any throttled function call is not delayed, but dropped\n */\nexport class CallThrottler extends CallModifier {\n    static ON_ANIMATION_FRAME = Symbol();\n    static AUTOMATIC = Symbol();\n\n    lastCallTime = 0;\n    pendingCall = null;\n    pendingCallArgs = [];\n    pendingCallExpectedTime = 0;\n    numCalls = 0;\n    totalCallDuration = 0;\n\n    constructor(options={}) {\n        super();\n        Object.assign(this, options);\n    }\n\n    isThrottleOnAnimationFrame() {\n        return this.throttle === this.constructor.ON_ANIMATION_FRAME;\n    }\n\n    clearPendingCall() {\n        this.pendingCall = null;\n        this.pendingCallArgs = [];\n        this.pendingCallExpectedTime = 0;\n    }\n\n    cancel() {\n        this.pendingCall && this.pendingCall.cancel();\n        this.clearPendingCall();\n    }\n\n    flush() {\n        this.pendingCall && this.pendingCall.flush();\n        this.clearPendingCall();\n    }\n\n    // API compatibility with cleanup jobs\n    cleanup() {\n        this.cancel();\n    }\n\n    computeExecutionDelay(timeNow) {\n        let executionDelay = null;\n        if (this.throttle != null) {\n            executionDelay = Math.max(this.lastCallTime + this.throttle - timeNow, 0);\n        }\n        if (this.debounce != null) {\n            executionDelay = Math.min(executionDelay != null ? executionDelay : this.debounce, this.debounce);\n        }\n        return executionDelay;\n    }\n\n    replacePendingCall(wrappedFunc, funcCall, funcCallArgs) {\n        this.cancel();\n        if (this.isThrottleOnAnimationFrame()) {\n            const cancelHandler = requestAnimationFrame(funcCall);\n            wrappedFunc.cancel = () => cancelAnimationFrame(cancelHandler);\n            return;\n        }\n\n        const timeNow = Date.now();\n        let executionDelay = this.computeExecutionDelay(timeNow);\n\n        if (this.dropThrottled) {\n            return executionDelay == 0 && funcCall();\n        }\n\n        const cancelHandler = setTimeout(funcCall, executionDelay);\n        wrappedFunc.cancel = () => clearTimeout(cancelHandler);\n        this.pendingCall = wrappedFunc;\n        this.pendingCallArgs = funcCallArgs;\n        this.pendingCallExpectedTime = timeNow + executionDelay;\n    }\n\n    updatePendingCall(args) {\n        this.pendingCallArgs = args;\n        if (!this.isThrottleOnAnimationFrame()) {\n            const timeNow = Date.now();\n            this.pendingCallExpectedTime = timeNow + this.computeExecutionDelay(timeNow);\n        }\n    }\n\n    wrap(func) {\n        const funcCall = () => {\n            const timeNow = Date.now();\n            // The expected time when the function should be executed next might have been changed\n            // Check if that's the case, while allowing a 1ms error for time measurement\n            if (!this.isThrottleOnAnimationFrame() &&\n                timeNow + 1 < this.pendingCallExpectedTime) {\n                this.replacePendingCall(wrappedFunc, funcCall, this.pendingCallArgs);\n            } else {\n                this.lastCallTime = timeNow;\n                this.clearPendingCall();\n                func(...this.pendingCallArgs);\n            }\n        };\n\n        const wrappedFunc = (...args) => {\n            // Check if it's our function, and update the arguments and next execution time only\n            if (this.pendingCall && func === this.pendingCall.originalFunc) {\n                // We only need to update the arguments, and maybe mark that we want to executed later than scheduled\n                // It's an optimization to not invoke too many setTimeout/clearTimeout pairs\n                return this.updatePendingCall(args);\n            }\n            return this.replacePendingCall(wrappedFunc, funcCall, args);\n        };\n\n        wrappedFunc.originalFunc = func;\n        wrappedFunc.cancel = NOOP_FUNCTION;\n        wrappedFunc.flush = () => {\n            if (wrappedFunc === this.pendingCall) {\n                this.cancel();\n                wrappedFunc();\n            }\n        };\n        return wrappedFunc;\n    }\n}\n\n// export function benchmarkThrottle(options={}) {\n//     const startTime = performance.now();\n//     const calls = options.calls || 100000;\n//\n//     const throttler = new CallThrottler({throttle: options.throttle || 300, debounce: options.debounce || 100});\n//\n//     const func = options.func || NOOP_FUNCTION;\n//\n//     const wrappedFunc = throttler.wrap(func);\n//\n//     for (let i = 0; i < calls; i += 1) {\n//         wrappedFunc();\n//     }\n//     console.warn(\"Throttle benchmark:\", performance.now() - startTime, \"for\", calls, \"calls\");\n// }","class DispatcherHandle {\n    constructor(dispatcher, callback) {\n        this.dispatcher = dispatcher;\n        this.callback = callback;\n    }\n\n    remove() {\n        if (!this.dispatcher) {\n            console.warn(\"Removing a dispatcher twice\");\n            return;\n        }\n        this.dispatcher.removeListener(this.callback);\n        this.dispatcher = undefined;\n        this.callback = undefined;\n    }\n\n    cleanup() {\n        this.remove();\n    }\n}\n\nclass Dispatcher {\n    constructor(options = {}) {\n        this.options = options;\n        this.listeners = [];\n    }\n\n    callbackExists(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    addListener(callback) {\n        if (!(typeof callback === \"function\")) {\n            console.error(\"The listener needs to be a function: \", callback);\n            return;\n        }\n        if (this.callbackExists(callback)) {\n            console.error(\"Can't re-register for the same callback: \", this, \" \", callback);\n            return;\n        }\n\n        this.listeners.push(callback);\n        return new DispatcherHandle(this, callback);\n    };\n\n    addListenerOnce(callback) {\n        let handler = this.addListener(function () {\n            callback(...arguments);\n            handler.remove();\n        });\n        return handler;\n    }\n\n    removeListener(callback) {\n        for (let i = 0; i < this.listeners.length; i += 1) {\n            if (this.listeners[i] === callback) {\n                // Erase and return\n                return this.listeners.splice(i, 1)[0];\n            }\n        }\n    };\n\n    removeAllListeners() {\n        this.listeners = [];\n    }\n\n    dispatch(payload) {\n        for (let i = 0; i < this.listeners.length; ) {\n            let listener = this.listeners[i];\n            // TODO: optimize common cases\n            listener(...arguments);\n            // In case the current listener deleted itself, keep the loop counter the same\n            // If it deleted listeners that were executed before it, that's just wrong and there are no guaranteed about\n            if (listener === this.listeners[i]) {\n                i++;\n            }\n        }\n    };\n}\n\nexport const DispatchersSymbol = Symbol(\"Dispatchers\");\n\nclass Dispatchable {\n    get dispatchers() {\n        return this[DispatchersSymbol] || (this[DispatchersSymbol] = new Map());\n    }\n\n    getDispatcher(name) {\n        return this.dispatchers.get(name);\n    }\n\n    dispatch(name, payload) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            // Optimize the average case\n            if (arguments.length <= 2) {\n                dispatcher.dispatch(payload);\n            } else {\n                let args = Array.prototype.slice.call(arguments, 1);\n                dispatcher.dispatch(...args);\n            }\n        }\n    }\n\n    addListener(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListener(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListener(callback);\n    }\n\n    // TODO: remove some duplicated logic with method above\n    addListenerOnce(name, callback) {\n        if (Array.isArray(name)) {\n            return new CleanupJobs(name.map(x => this.addListenerOnce(x, callback)));\n        }\n        let dispatcher = this.getDispatcher(name);\n        if (!dispatcher) {\n            dispatcher = new Dispatcher();\n            this.dispatchers.set(name, dispatcher);\n        }\n        return dispatcher.addListenerOnce(callback);\n    }\n\n    removeListener(name, callback) {\n        let dispatcher = this.getDispatcher(name);\n        if (dispatcher) {\n            dispatcher.removeListener(callback);\n        }\n    }\n\n    cleanup() {\n        this.runCleanupJobs();\n        delete this[DispatchersSymbol];\n    }\n\n    // These function don't really belong here, but they don't really hurt here and I don't want a long proto chain\n    // Add anything that needs to be called on cleanup here (dispatchers, etc)\n    addCleanupJob(cleanupJob) {\n        if (!this.hasOwnProperty(\"_cleanupJobs\")) {\n            this._cleanupJobs = new CleanupJobs();\n        }\n        this._cleanupJobs.add(cleanupJob);\n        return cleanupJob;\n    }\n\n    runCleanupJobs() {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.cleanup();\n        }\n    }\n\n    detachListener(dispatcherHandle) {\n        if (this._cleanupJobs) {\n            this._cleanupJobs.remove(dispatcherHandle);\n        } else {\n            dispatcherHandle.remove();\n        }\n    }\n}\n\n// Creates a method that calls the method methodName on obj, and adds the result as a cleanup task\nfunction getAttachCleanupJobMethod(methodName) {\n    return function (obj) {\n        let args = Array.prototype.slice.call(arguments, 1);\n        let handler = obj[methodName](...args);\n        this.addCleanupJob(handler);\n        return handler;\n    }\n}\n\n// Not sure if these should be added here, but meh\nDispatchable.prototype.attachListener       = getAttachCleanupJobMethod(\"addListener\");\nDispatchable.prototype.attachEventListener  = getAttachCleanupJobMethod(\"addEventListener\");\nDispatchable.prototype.attachCreateListener = getAttachCleanupJobMethod(\"addCreateListener\");\nDispatchable.prototype.attachUpdateListener = getAttachCleanupJobMethod(\"addUpdateListener\");\nDispatchable.prototype.attachDeleteListener = getAttachCleanupJobMethod(\"addDeleteListener\");\n\nDispatcher.Global = new Dispatchable();\n\nclass RunOnce {\n    run(callback, timeout = 0) {\n        if (this.timeout) {\n            return;\n        }\n        this.timeout = setTimeout(() => {\n            callback();\n            this.timeout = undefined;\n        }, timeout);\n    }\n}\n\nclass CleanupJobs {\n    constructor(jobs = []) {\n        this.jobs = jobs;\n    }\n\n    add(job) {\n        this.jobs.push(job);\n    }\n\n    cleanup() {\n        for (let job of this.jobs) {\n            if (typeof job.cleanup === \"function\") {\n                job.cleanup();\n            } else if (typeof job.remove === \"function\" ) {\n                job.remove();\n            } else {\n                job();\n            }\n        }\n        this.jobs = [];\n    }\n\n    remove(job) {\n        if (job) {\n            const index = this.jobs.indexOf(job);\n            if (index >= 0) {\n                this.jobs.splice(index, 1);\n            }\n            job.remove();\n        } else {\n            this.cleanup();\n        }\n    }\n}\n\n// Class that can be used to pass around ownership of a resource.\n// It informs the previous owner of the change (once) and dispatches the new element for all listeners\n// TODO: a better name\nclass SingleActiveElementDispatcher extends Dispatcher {\n    setActive(element, addChangeListener, forceDispatch) {\n        if (!forceDispatch && element === this._active) {\n            return;\n        }\n        this._active = element;\n        this.dispatch(element);\n        if (addChangeListener) {\n            this.addListenerOnce((newElement) => {\n                if (newElement != element) {\n                    addChangeListener(newElement);\n                }\n            });\n        }\n    }\n\n    getActive() {\n        return this._active;\n    }\n}\n\nexport {Dispatcher, Dispatchable, RunOnce, CleanupJobs, SingleActiveElementDispatcher, getAttachCleanupJobMethod};\n","import {dashCase, setObjectPrototype} from \"../base/Utils\";\n\nexport const defaultToPixelsAttributes = new Set([\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-right-width\",\n    \"border-top-width\",\n    \"border-width\",\n    \"bottom\",\n    \"font-size\",\n    \"font-stretch\",\n    \"height\",\n    \"layer-grid-char\",\n    \"layer-grid-char-spacing\",\n    \"layer-grid-line\",\n    \"left\",\n    \"letter-spacing\",\n    \"line-height\",\n    \"margin\",\n    \"margin-bottom\",\n    \"margin-left\",\n    \"margin-right\",\n    \"margin-top\",\n    \"marker-offset\",\n    \"max-height\",\n    \"max-width\",\n    \"min-height\",\n    \"min-width\",\n    \"outline-width\",\n    \"padding\",\n    \"padding-bottom\",\n    \"padding-left\",\n    \"padding-right\",\n    \"padding-top\",\n    \"right\",\n    \"size\",\n    \"top\",\n    \"width\",\n    \"word-spacing\",\n]);\n\nexport function CreateNodeAttributesMap(oldAttributesMap, allowedAttributesArray) {\n    let allowedAttributesMap = new Map(oldAttributesMap);\n\n    for (let attribute of allowedAttributesArray || []) {\n        if (!attribute) continue;\n        if (!Array.isArray(attribute)) {\n            attribute = [attribute];\n        }\n        allowedAttributesMap.set(attribute[0], attribute[1] || {});\n    }\n\n    allowedAttributesMap.reverseNameMap = new Map();\n\n    for (let [key, value] of allowedAttributesMap) {\n        value = value || {};\n\n        value.domName = value.domName || key;\n\n        allowedAttributesMap.reverseNameMap.set(value.domName, key);\n\n        allowedAttributesMap.set(key, value);\n    }\n    return allowedAttributesMap;\n}\n\n// A class that can be used to work with a className field as with a Set, while having a toString() usable in the DOM\n// It's used when a UI object has a className attribute, that a string, but we still want it to be modified if we call addClass and removeClass\n// In that case, the string gets converted to a ClassNameSet\nexport class ClassNameSet extends Set {\n    // Can't use classic super in constructor since Set is build-in type and will throw an error\n    // TODO: see if could still be made to have this as constructor\n    static create(className) {\n        let value = new Set(String(className || \"\").split(\" \"));\n        return setObjectPrototype(value, this);\n    }\n\n    toString() {\n        return Array.from(this).join(\" \");\n    }\n}\n\nexport class NodeAttributes {\n    constructor(obj) {\n        Object.assign(this, obj);\n        // className and style should be deep copied to be modifiable, the others shallow copied\n        if (this.className instanceof ClassNameSet) {\n            this.className = ClassNameSet.create(String(this.className));\n        }\n        if (this.style) {\n            this.style = Object.assign({}, this.style);\n        }\n    }\n\n    // TODO: should this use the domName or the reverseName? Still needs work\n    setAttribute(key, value, node, attributesMap=this.constructor.defaultAttributesMap) {\n        // TODO: might want to find a better way than whitelistAttributes field to do this\n        if (!attributesMap.has(key)) {\n            this.whitelistedAttributes = this.whitelistedAttributes || {};\n            this.whitelistedAttributes[key] = true;\n        }\n        this[key] = value;\n        if (node) {\n            this.applyAttribute(key, node, attributesMap);\n        }\n    }\n\n    applyStyleToNode(key, value, node) {\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if ((value instanceof Number || typeof value === \"number\") &&\n            value != 0 && defaultToPixelsAttributes.has(dashCase(key))) {\n            value = value + \"px\";\n        }\n        if (node && node.style[key] !== value) {\n            node.style[key] = value;\n        }\n    }\n\n    setStyle(key, value, node) {\n        if (!(typeof key === \"string\" || key instanceof String)) {\n            // If the key is not a string, it should be a plain object\n            for (const styleKey of Object.keys(key)) {\n                this.setStyle(styleKey, key[styleKey], node);\n            }\n            return;\n        }\n        if (value === undefined) {\n            this.removeStyle(key, node);\n            return;\n        }\n        this.style = this.style || {};\n        this.style[key] = value;\n        this.applyStyleToNode(key, value, node);\n    }\n\n    removeStyle(key, node) {\n        if (this.style) {\n            delete this.style[key];\n        }\n        if (node && node.style[key]) {\n            delete node.style[key];\n        }\n    }\n\n    static getClassArray(classes) {\n        if (!classes) {\n            return [];\n        }\n        if (Array.isArray(classes)) {\n            return classes.map(x => String(x).trim());\n        } else {\n            return String(classes).trim().split(\" \");\n        }\n    }\n\n    getClassNameSet() {\n        if (!(this.className instanceof ClassNameSet)) {\n            this.className = ClassNameSet.create(this.className || \"\");\n        }\n        return this.className;\n    }\n\n    addClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().add(cls);\n            if (node) {\n                node.classList.add(cls);\n            }\n        }\n    }\n\n    removeClass(classes, node) {\n        classes = this.constructor.getClassArray(classes);\n\n        for (let cls of classes) {\n            this.getClassNameSet().delete(cls);\n            if (node) {\n                node.classList.remove(cls);\n            }\n        }\n    }\n\n    hasClass(className) {\n        return this.getClassNameSet().has(className);\n    }\n\n    applyAttribute(key, node, attributesMap) {\n        let attributeOptions = attributesMap.get(key);\n        if (!attributeOptions) {\n            if (this.whitelistedAttributes && (key in this.whitelistedAttributes)) {\n                attributeOptions = {\n                    domName: key,\n                }\n            } else {\n                return;\n            }\n        }\n        let value = this[key];\n        if (typeof value === \"function\") {\n            value = value();\n        }\n        if (attributeOptions.noValue) {\n            if (value) {\n                value = \"\";\n            } else {\n                value = undefined;\n            }\n        }\n        if (typeof value !== \"undefined\") {\n            node.setAttribute(attributeOptions.domName, value);\n        } else {\n            node.removeAttribute(attributeOptions.domName);\n        }\n    }\n\n    applyClassName(node) {\n        if (this.className) {\n            const className = String(this.className);\n            if (node.className != className) {\n                node.className = className;\n            }\n        } else {\n            if (node.className) {\n                node.removeAttribute(\"class\");\n            }\n        }\n    }\n\n    apply(node, attributesMap) {\n        let addedAttributes = {};\n        let whitelistedAttributes = this.whitelistedAttributes || {};\n\n        // First update existing node attributes and delete old ones\n        // TODO: optimize to not run this if the node was freshly created\n        let nodeAttributes = node.attributes;\n        for (let i = nodeAttributes.length - 1; i >= 0; i--) {\n            let attr = nodeAttributes[i];\n            let attributeName = attr.name;\n            if (attributeName === \"style\" || attributeName === \"class\") {\n                // TODO: maybe should do work here?\n                continue;\n            }\n\n            let key = attributesMap.reverseNameMap.get(attributeName);\n\n            if (this.hasOwnProperty(key)) {\n                let value = this[key];\n                let attributeOptions = attributesMap.get(key);\n                if (attributeOptions && attributeOptions.noValue) {\n                    if (value) {\n                        value = \"\";\n                    } else {\n                        value = undefined;\n                    }\n                }\n                if (value != null) {\n                    node.setAttribute(attributeName, value);\n                    addedAttributes[key] = true;\n                } else {\n                    node.removeAttribute(attributeName);\n                }\n            } else {\n                node.removeAttribute(attributeName);\n            }\n        }\n        // Add new attributes\n        for (let key in this) {\n            if (addedAttributes[key]) {\n                continue;\n            }\n            this.applyAttribute(key, node, attributesMap);\n            // TODO: also whitelist data- and aria- keys here\n        }\n\n        this.applyClassName(node);\n\n        node.removeAttribute(\"style\");\n        if (this.style) {\n            for (let key in this.style) {\n                this.applyStyleToNode(key, this.style[key], node);\n            }\n        }\n    }\n}\n\n// Default node attributes, should be as few of these as possible\nNodeAttributes.defaultAttributesMap = CreateNodeAttributesMap([\n    [\"id\"],\n    [\"action\"],\n    [\"colspan\"],\n    [\"default\"],\n    [\"disabled\", {noValue: true}],\n    [\"fixed\"],\n    [\"forAttr\", {domName: \"for\"}], // TODO: have a consistent nomenclature for there!\n    [\"hidden\"],\n    [\"href\"],\n    [\"rel\"],\n    [\"minHeight\"],\n    [\"minWidth\"],\n    [\"role\"],\n    [\"target\"],\n    [\"HTMLtitle\", {domName: \"title\"}],\n    [\"type\"],\n    [\"placeholder\"],\n    [\"src\"],\n    [\"height\"],\n    [\"width\"],\n    //[\"value\"], // Value is intentionally disabled\n]);\n","export function applyDebugFlags(element) {\n    if (document.STEM_DEBUG) {\n        element.node.stemElement = element;\n        setTimeout(() => {\n            if (element.node.setAttribute) {\n                if (element.constructor.name !== \"UIElement\") {\n                    element.node.setAttribute(\"_\", element.constructor.name);\n                }\n            }\n        }, 0);\n    }\n}\n","import {unwrapArray, setObjectPrototype, suffixNumber, NOOP_FUNCTION} from \"../base/Utils\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {NodeAttributes} from \"./NodeAttributes\";\nimport {applyDebugFlags} from \"./Debug\";\n\nvar UI = {\n    renderingStack: [], //keeps track of objects that are redrawing, to know where to assign refs automatically\n};\n\nclass BaseUIElement extends Dispatchable {\n    canOverwrite(existingChild) {\n        return this.constructor === existingChild.constructor &&\n               this.getNodeType() === existingChild.getNodeType();\n    }\n\n    applyRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            obj[name] = this;\n        }\n    }\n\n    removeRef() {\n        if (this.options && this.options.ref) {\n            let obj = this.options.ref.parent;\n            let name = this.options.ref.name;\n            if (obj[name] === this) {\n                obj[name] = undefined;\n            }\n        }\n    }\n\n    // Lifecycle methods, called when the element was first inserted in the DOM, and before it's removed\n    onMount() {}\n\n    onUnmount() {}\n\n    destroyNode() {\n        this.onUnmount();\n        this.cleanup();\n        this.removeRef();\n        this.node && this.node.remove();\n        delete this.node; // Clear for gc\n    }\n}\n\nUI.TextElement = class UITextElement extends BaseUIElement {\n    constructor(value=\"\") {\n        super();\n        if (value && value.hasOwnProperty(\"value\")) {\n            this.value = value.value;\n            this.options = value;\n        } else {\n            this.value = (value != null) ? value : \"\";\n        }\n    }\n\n    mount(parent, nextSibling) {\n        this.parent = parent;\n        if (!this.node) {\n            this.createNode();\n            this.applyRef();\n        } else {\n            this.redraw();\n        }\n        parent.node.insertBefore(this.node, nextSibling);\n        this.onMount();\n    }\n\n    getNodeType() {\n        return Node.TEXT_NODE;\n    }\n\n    copyState(element) {\n        this.value = element.value;\n        this.options = element.options;\n    }\n\n    createNode() {\n        this.node = document.createTextNode(this.getValue());\n        applyDebugFlags(this);\n        return this.node;\n    }\n\n    setValue(value) {\n        this.value = (value != null) ? value : \"\";\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    getValue() {\n        return String(this.value);\n    }\n\n    redraw() {\n        if (this.node) {\n            let newValue = this.getValue();\n            // TODO: check if this is best for performance\n            if (this.node.nodeValue !== newValue) {\n                this.node.nodeValue = newValue;\n            }\n        }\n        this.applyRef();\n    }\n};\n\n// TODO: rename to Element\nclass UIElement extends BaseUIElement {\n    constructor(options={}) {\n        super();\n        this.children = [];\n        this.options = options; // TODO: this is a hack, to not break all the code that references this.options in setOptions\n        this.setOptions(options);\n    };\n\n    getDefaultOptions(options) {}\n\n    getPreservedOptions() {}\n\n    setOptions(options) {\n        let defaultOptions = this.getDefaultOptions(options);\n        if (defaultOptions) {\n            options = Object.assign(defaultOptions, options);\n        }\n        this.options = options;\n    }\n\n    updateOptions(options) {\n        this.setOptions(Object.assign(this.options, options));\n        this.redraw();\n    }\n\n    setChildren(...args) {\n        this.updateOptions({children: unwrapArray(args)})\n    }\n\n    // Used when we want to reuse the current element, with the options from the passed in argument\n    // Is only called when element.canOverwrite(this) is true\n    copyState(element) {\n        let options = element.options;\n        let preservedOptions = this.getPreservedOptions();\n        if (preservedOptions) {\n            options = Object.assign({}, options, preservedOptions);\n        }\n        this.setOptions(options);\n        this.addListenersFromOptions();\n    }\n\n    getNodeType() {\n        return this.options.nodeType || \"div\";\n    }\n\n    static create(parentNode, options) {\n        let uiElement = new this(options);\n        uiElement.mount(parentNode, null);\n        return uiElement;\n    }\n\n    // TODO: should be renamed to renderContent\n    getGivenChildren() {\n        return this.options.children || [];\n    }\n\n    render() {\n        return this.options.children;\n    };\n\n    createNode() {\n        this.node = document.createElement(this.getNodeType());\n        applyDebugFlags(this);\n        return this.node;\n    }\n\n    // Abstract, gets called when removing DOM node associated with the\n    cleanup() {\n        this.runCleanupJobs();\n        for (let child of this.children) {\n            child.destroyNode();\n        }\n        this.clearNode();\n        super.cleanup();\n    }\n\n    overwriteChild(existingChild, newChild) {\n        existingChild.copyState(newChild);\n        return existingChild;\n    }\n\n    getElementKeyMap(elements) {\n        if (!elements || !elements.length) {\n            return;\n        }\n        let childrenKeyMap = new Map();\n\n        for (let i = 0; i < elements.length; i += 1) {\n            let childKey = (elements[i].options && elements[i].options.key) || (\"autokey\" + i);\n\n            childrenKeyMap.set(childKey, elements[i]);\n        }\n\n        return childrenKeyMap;\n    }\n\n    getChildrenToRender() {\n        return this.render();\n    }\n\n    getChildrenForRedraw() {\n        UI.renderingStack.push(this);\n        let children = unwrapArray(this.getChildrenToRender());\n        UI.renderingStack.pop();\n        return children;\n    }\n\n    redraw() {\n        if (!this.node) {\n            console.error(\"Element not yet mounted. Redraw aborted!\", this);\n            return false;\n        }\n\n        let newChildren = this.getChildrenForRedraw();\n\n        if (newChildren === this.children) {\n            for (let i = 0; i < newChildren.length; i += 1) {\n                newChildren[i].redraw();\n            }\n            this.applyNodeAttributes();\n            this.applyRef();\n            return true;\n        }\n\n        let domNode = this.node;\n        let childrenKeyMap = this.getElementKeyMap(this.children);\n\n        for (let i = 0; i < newChildren.length; i++) {\n            let newChild = newChildren[i];\n            let prevChildNode = (i > 0) ? newChildren[i - 1].node : null;\n            let currentChildNode = (prevChildNode) ? prevChildNode.nextSibling : domNode.firstChild;\n\n            // Not a UIElement, to be converted to a TextElement\n            if (!newChild.getNodeType) {\n                newChild = newChildren[i] = new UI.TextElement(newChild);\n            }\n\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = childrenKeyMap && childrenKeyMap.get(newChildKey);\n\n            if (existingChild && newChildren[i].canOverwrite(existingChild)) {\n                // We're replacing an existing child element, it might be the very same object\n                if (existingChild !== newChildren[i]) {\n                    newChildren[i] = this.overwriteChild(existingChild, newChildren[i]);\n                }\n                newChildren[i].redraw();\n                if (newChildren[i].node !== currentChildNode) {\n                    domNode.insertBefore(newChildren[i].node, currentChildNode);\n                }\n            } else {\n                // Getting here means we are not replacing anything, should just render\n                newChild.mount(this, currentChildNode);\n            }\n        }\n\n        if (this.children.length) {\n            // Remove children that don't need to be here\n            let newChildrenSet = new Set(newChildren);\n\n            for (let i = 0; i < this.children.length; i += 1) {\n                if (!newChildrenSet.has(this.children[i])) {\n                    this.children[i].destroyNode();\n                }\n            }\n        }\n\n        this.children = newChildren;\n\n        this.applyNodeAttributes();\n\n        this.applyRef();\n\n        return true;\n    }\n\n    getOptionsAsNodeAttributes() {\n        return setObjectPrototype(this.options, NodeAttributes);\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new NodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    extraNodeAttributes(attr) {}\n\n    applyNodeAttributes() {\n        let attr;\n        if (this.extraNodeAttributes != NOOP_FUNCTION) {\n            // Create a copy of options, that is modifiable\n            attr = this.getNodeAttributes(true);\n            this.extraNodeAttributes(attr);\n        } else {\n            attr = this.getNodeAttributes(false);\n        }\n        attr.apply(this.node, this.constructor.domAttributesMap);\n    }\n\n    setAttribute(key, value) {\n        this.getOptionsAsNodeAttributes().setAttribute(key, value, this.node, this.constructor.domAttributesMap);\n    }\n\n    setStyle(key, value) {\n        this.getOptionsAsNodeAttributes().setStyle(key, value, this.node);\n    }\n\n    removeStyle(key) {\n        this.getOptionsAsNodeAttributes().removeStyle(key, this.node);\n    }\n\n    addClass(className) {\n        this.getOptionsAsNodeAttributes().addClass(className, this.node);\n    }\n\n    removeClass(className) {\n        this.getOptionsAsNodeAttributes().removeClass(className, this.node);\n    }\n\n    hasClass(className) {\n        return this.getOptionsAsNodeAttributes().hasClass(className);\n    }\n\n    toggleClass(className) {\n        if (!this.hasClass(className)) {\n            this.addClass(className);\n        } else {\n            this.removeClass(className);\n        }\n    }\n\n    get styleSheet() {\n        return this.getStyleSheet();\n    }\n\n    set styleSheet(value) {\n        this.options.styleSheet = value;\n        this.redraw();\n    }\n\n    addListenersFromOptions() {\n        for (const key in this.options) {\n            if (typeof key === \"string\" && key.startsWith(\"on\") && key.length > 2) {\n                const eventType = key.substring(2);\n\n                const addListenerMethodName = \"add\" + eventType + \"Listener\";\n                const handlerMethodName = \"on\" + eventType + \"Handler\";\n\n                // The handlerMethod might have been previously added\n                // by a previous call to this function or manually by the user\n                if (typeof this[addListenerMethodName] === \"function\" && !this.hasOwnProperty(handlerMethodName)) {\n                    this[handlerMethodName] = (event) => {\n                        UI.event = event;\n                        if (this.options[key]) {\n                            // TODO: arguments should be (event, this)!\n                            this.options[key](this, event);\n                        }\n                    };\n\n                    // Actually add the listener\n                    this[addListenerMethodName](this[handlerMethodName]);\n                }\n            }\n        }\n    }\n\n    refLink(name) {\n        return {parent: this, name: name};\n    }\n\n    refLinkArray(arrayName, index) {\n        if (!this.hasOwnProperty(arrayName)) {\n            this[arrayName] = [];\n        }\n        return {parent: this[arrayName], name: index};\n    }\n\n    bindToNode(node, doRedraw) {\n        this.node = node;\n        if (doRedraw) {\n            this.clearNode();\n            this.redraw();\n        }\n        return this;\n    }\n\n    mount(parent, nextSiblingNode) {\n        if (!parent.node) {\n            parent = new UI.Element().bindToNode(parent);\n        }\n        this.parent = parent;\n        if (this.node) {\n            parent.insertChildNodeBefore(this, nextSiblingNode);\n            this.dispatch(\"changeParent\", this.parent);\n            return;\n        }\n\n        this.createNode();\n        this.redraw();\n\n        parent.insertChildNodeBefore(this, nextSiblingNode);\n\n        this.addListenersFromOptions();\n\n        this.onMount();\n    }\n\n    // You need to overwrite the next child manipulation rutines if this.options.children !== this.children\n    appendChild(child) {\n        // TODO: the next check should be done with a decorator\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle appendChild, you need to implement it for \" + this.constructor;\n        }\n        this.options.children.push(child);\n        child.mount(this, null);\n        return child;\n    }\n\n    insertChild(child, position) {\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle insertChild, you need to implement it for \" + this.constructor;\n        }\n        position = position || 0;\n\n        this.options.children.splice(position, 0, child);\n\n        const nextChildNode = position + 1 < this.options.children.length ? this.children[position + 1].node : null;\n\n        child.mount(this, nextChildNode);\n\n        return child;\n    }\n\n    eraseChild(child, destroy = true) {\n        let index = this.options.children.indexOf(child);\n\n        if (index < 0) {\n            // child not found\n            return null;\n        }\n        return this.eraseChildAtIndex(index, destroy);\n    }\n\n    eraseChildAtIndex(index, destroy=true) {\n        if (index < 0 || index >= this.options.children.length) {\n            console.error(\"Erasing child at invalid index \", index, this.options.children.length);\n            return;\n        }\n        if (this.children !== this.options.children) {\n            throw \"Can't properly handle eraseChild, you need to implement it for \" + this.constructor;\n        }\n        let erasedChild = this.options.children.splice(index, 1)[0];\n        if (destroy) {\n            erasedChild.destroyNode();\n        } else {\n            this.node.removeChild(erasedChild.node);\n        }\n        return erasedChild;\n    }\n\n    eraseAllChildren() {\n        while (this.children.length > 0) {\n            this.eraseChildAtIndex(this.children.length - 1);\n        }\n    }\n\n    show() {\n        this.removeClass(\"hidden\");\n    }\n\n    hide() {\n        this.addClass(\"hidden\");\n    }\n\n    insertChildNodeBefore(childElement, nextSiblingNode) {\n        this.node.insertBefore(childElement.node, nextSiblingNode);\n    }\n\n    // TODO: should be renamed emptyNode()\n    clearNode() {\n        while (this.node && this.node.lastChild) {\n            this.node.removeChild(this.node.lastChild);\n        }\n    }\n\n    isInDocument() {\n        return document.body.contains(this.node);\n    }\n\n    // TODO: this method also doesn't belong here\n    getWidthOrHeight(parameter) {\n        let node = this.node;\n        if (!node) {\n            return 0;\n        }\n        let value = parseFloat(parameter === \"width\" ? node.offsetWidth : node.offsetHeight);\n        return value || 0;\n    }\n\n    getHeight() {\n        return this.getWidthOrHeight(\"height\");\n    };\n\n    getWidth() {\n        return this.getWidthOrHeight(\"width\");\n    }\n\n    setHeight(value) {\n        this.setStyle(\"height\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    };\n\n    setWidth(value) {\n        this.setStyle(\"width\", suffixNumber(value, \"px\"));\n        this.dispatch(\"resize\");\n    }\n\n    addNodeListener(name, callback, ...args) {\n        this.node.addEventListener(name, callback, ...args);\n        const handler = {\n            remove: () => {\n                this.removeNodeListener(name, callback, ...args);\n            }\n        };\n        this.addCleanupJob(handler);\n        return handler;\n    }\n\n    removeNodeListener(name, callback) {\n        this.node.removeEventListener(name, callback);\n    }\n\n    // TODO: methods can be automatically generated by addNodeListener(UI.Element, \"dblclick\", \"DoubleClick\") for instance\n    addClickListener(callback) {\n        return this.addNodeListener(\"click\", callback);\n    }\n\n    removeClickListener(callback) {\n        this.removeNodeListener(\"click\", callback);\n    }\n\n    addDoubleClickListener(callback) {\n        return this.addNodeListener(\"dblclick\", callback);\n    }\n\n    removeDoubleClickListener(callback) {\n        this.removeNodeListener(\"dblclick\", callback);\n    }\n\n    addChangeListener(callback) {\n        return this.addNodeListener(\"change\", callback);\n    }\n}\n\nUI.createElement = function (tag, options, ...children) {\n    if (!tag) {\n        console.error(\"Create element needs a valid object tag, did you mistype a class name?\");\n        return;\n    }\n\n    options = options || {};\n\n    options.children = unwrapArray(children);\n\n    if (options.ref) {\n        if (typeof options.ref === \"string\") {\n            if (UI.renderingStack.length > 0) {\n                options.ref = {\n                    parent: UI.renderingStack[UI.renderingStack.length - 1],\n                    name: options.ref\n                };\n            } else {\n                throw Error(\"Failed to automatically link ref, there needs to be an element in the rendering stack\");\n            }\n        }\n\n        if (options.key) {\n            console.error(\"Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\\n\" +\n                          \"Are you using the options from another object? Shame!\", options);\n        }\n\n        options.key = \"_ref\" + options.ref.name;\n    }\n\n    if (options.hasOwnProperty(\"class\")) {\n        console.error(\"Invalid UI Element attribute: class. Did you mean className?\");\n    }\n\n    if (typeof tag === \"string\") {\n        options.nodeType = tag;\n        tag = UIElement;\n    }\n\n    return new tag(options);\n};\n\nUIElement.domAttributesMap = NodeAttributes.defaultAttributesMap;\n\n// Explicitly know that extraNodeAttributes doesn't do anything, but have it to be callable when doing inheritance\nUIElement.prototype.extraNodeAttributes = NOOP_FUNCTION;\n\nUI.Element = UIElement;\n\nUI.str = function (value) {\n    return new UI.TextElement(value);\n};\n\n// Keep a map for every base class, and for each base class keep a map for each nodeType, to cache classes\nlet primitiveMap = new WeakMap();\n\nUI.Primitive = (BaseClass, nodeType) => {\n    if (!nodeType) {\n        nodeType = BaseClass;\n        BaseClass = UI.Element;\n    }\n    let baseClassPrimitiveMap = primitiveMap.get(BaseClass);\n    if (!baseClassPrimitiveMap) {\n        baseClassPrimitiveMap = new Map();\n        primitiveMap.set(BaseClass, baseClassPrimitiveMap);\n    }\n    let resultClass = baseClassPrimitiveMap.get(nodeType);\n    if (resultClass) {\n        return resultClass;\n    }\n    resultClass = class Primitive extends BaseClass {\n        getNodeType() {\n            return nodeType;\n        }\n    };\n    baseClassPrimitiveMap.set(nodeType, resultClass);\n    return resultClass;\n};\n\nexport {UIElement, UI};\n","export const Orientation = {\n    HORIZONTAL: 1,\n    VERTICAL: 2,\n};\n\nexport const Direction = {\n    UP: \"up\",\n    LEFT: \"left\",\n    DOWN: \"down\",\n    RIGHT: \"right\",\n};\n\nexport const Level = {\n    NONE: null,\n    DEFAULT: \"default\",\n    INFO: \"info\",\n    PRIMARY: \"primary\",\n    SECONDARY: \"secondary\",\n    SUCCESS: \"success\",\n    WARNING: \"warning\",\n    DANGER: \"danger\",\n    ERROR: \"danger\",\n};\n\nexport const Size = {\n    NONE: null,\n    EXTRA_SMALL: \"xs\",\n    SMALL: \"sm\",\n    MEDIUM: \"default\",\n    DEFAULT: \"default\",\n    LARGE: \"lg\",\n    EXTRA_LARGE: \"xl\",\n};\n\nexport const VoteStatus = {\n    NONE: null,\n    LIKE: 1,\n    DISLIKE: 0,\n};\n\nexport const ActionStatus = {\n    DEFAULT: 1,\n    RUNNING: 2,\n    SUCCESS: 3,\n    FAILED: 4,\n};\n","import {UI} from \"./UIBase\";\n\nexport function getOffset(node) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    if (!node) {\n        return {left: 0, top: 0};\n    }\n    let nodePosition = node.style && node.style.position;\n    let left = 0;\n    let top = 0;\n    while (node) {\n        let nodeStyle = node.style || {};\n        if (nodePosition === \"absolute\" && nodeStyle.position === \"relative\") {\n            return {left: left, top: top};\n        }\n        left += node.offsetLeft;\n        top += node.offsetTop;\n        node = node.offsetParent;\n    }\n    return {left: left, top: top};\n}\n\nexport function getComputedStyle(node, attribute) {\n    if (node instanceof UI.Element) {\n        node = node.node;\n    }\n    let computedStyle = window.getComputedStyle(node, null);\n    return (attribute) ? computedStyle.getPropertyValue(attribute) : computedStyle;\n}\n\nexport function changeParent(element, newParent) {\n    const currentParent = element.parent;\n    currentParent.eraseChild(element, false);\n    newParent.appendChild(element);\n}\n","import {UI} from \"./UIBase\";\nimport {dashCase} from \"../base/Utils\";\nimport {NodeAttributes, defaultToPixelsAttributes} from \"./NodeAttributes\";\n\n// TODO: should this be actually better done throught the dynamic CSS API, without doing through the DOM?\n// So far it's actually better like this, since browsers like Chrome allow users to edit classes\nclass StyleInstance extends UI.TextElement {\n    constructor(options) {\n        super(options);\n        this.setOptions(options);\n    }\n\n    setOptions(options) {\n        this.options = options;\n        this.options.attributes = this.options.attributes || {};\n        this.attributes = new Map();\n        for (let key in this.options.attributes) {\n            this.attributes.set(key, this.options.attributes[key]);\n        }\n    }\n\n    getValue() {\n        let str = this.options.selector + \"{\";\n        for (let [key, value] of this.attributes) {\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            // Ignore keys with null or undefined value\n            if (value == null) {\n                continue;\n            }\n\n            key = dashCase(key);\n\n            // If it's a size property, and the value is a number, assume it's in pixels\n            if ((value instanceof Number || typeof value === \"number\") &&\n                value != 0 && defaultToPixelsAttributes.has(key)) {\n                value = value + \"px\";\n            }\n\n            // TODO: if key starts with vendor-, replace it with the browser specific one (and the plain one)\n            str += key + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    copyState(element) {\n        this.setOptions(element.options);\n    }\n\n    setAttribute(name, value) {\n        this.attributes.set(name, value);\n        this.redraw();\n    }\n\n    deleteAttribute(name) {\n        this.attributes.delete(name);\n        this.redraw();\n    }\n}\n\nclass StyleElement extends UI.Primitive(\"style\") {\n    getNodeAttributes() {\n        // TODO: allow custom style attributes (media, scoped, etc)\n        let attr = new NodeAttributes({});\n        if (this.options.name) {\n            attr.setAttribute(\"name\", this.options.name);\n        }\n        return attr;\n    }\n}\n\nconst ALLOWED_SELECTOR_STARTS = new Set([\":\", \">\", \" \", \"+\", \"~\", \"[\", \".\"]);\n\n// TODO: figure out how to work with animation frames, this only creates a wrapper class\nclass DynamicStyleElement extends StyleElement {\n    toString() {\n        return this.getClassName();\n    }\n\n    // Overwrite valueOf, so when using the + operator should seamlessly concatenate to create a valid className\n    valueOf() {\n        return \" \" + this.getClassName();\n    }\n\n    // TODO: use a cached decorator here\n    getClassName() {\n        if (this.className) {\n            return this.className;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.className = (this.options.name ||  \"autocls\") + \"-\" + this.constructor.instanceCounter;\n        return this.className;\n    }\n\n    getSelector() {\n        return this.options.selectorName || \".\" + this.getClassName();\n    }\n\n    // A cyclic dependency in the style object will cause an infinite loop here\n    getStyleInstances(selector, style) {\n        let result = [];\n        let ownStyle = {}, haveOwnStyle = false;\n        for (let key in style) {\n            let value = style[key];\n            if (value == null) {\n                continue;\n            }\n            let isProperValue = (typeof value === \"string\" || value instanceof String\n                              || typeof value === \"number\" || value instanceof Number\n                              || typeof value === \"function\");\n            if (isProperValue) {\n                ownStyle[key] = value;\n                haveOwnStyle = true;\n            } else {\n                // Check that this actually is a valid subselector\n                let firstChar = String(key).charAt(0);\n                if (!ALLOWED_SELECTOR_STARTS.has(firstChar)) {\n                    console.error(\"First character of your selector is invalid.\");\n                    continue;\n                }\n                // TODO: maybe optimize for waste here?\n                let subStyle = this.getStyleInstances(selector + key, value);\n                result.push(...subStyle);\n            }\n        }\n\n        if (haveOwnStyle) {\n            result.unshift(new StyleInstance({selector: selector, key: selector, attributes: ownStyle}));\n        }\n        return result;\n    }\n\n    render() {\n        let style = this.options.style || {};\n        if (typeof style === \"function\") {\n            style = style();\n        }\n        if (style.selectorName) {\n            this.options.selectorName = style.selectorName;\n            delete style.selectorName;\n        }\n        return this.getStyleInstances(this.getSelector(), style);\n    }\n\n    setStyle(key, value) {\n        this.options.style[key] = value;\n        this.children[0].setAttribute(key, value);\n    }\n\n    setSubStyle(selector, key, value) {\n        throw Error(\"Implement me!\");\n    }\n\n    getStyleObject() {\n        return this.options.style;\n    }\n}\n\nclass KeyframeElement extends StyleElement {\n    toString() {\n        return this.getKeyframeName();\n    }\n\n    getKeyframeName() {\n        if (this.keyframeName) {\n            return this.keyframeName;\n        }\n        this.constructor.instanceCounter = (this.constructor.instanceCounter || 0) + 1;\n        this.keyframeName = (this.options.name || \"autokeyframe\") + \"-\" + this.constructor.instanceCounter;\n        return this.keyframeName;\n    }\n\n    getValue(style) {\n        let str = \"{\";\n        for (let key in style) {\n            let value = style[key];\n            if (typeof value === \"function\") {\n                value = value();\n            }\n            if (value == null) {\n                continue;\n            }\n            str += dashCase(key) + \":\" + value + \";\";\n        }\n        return str + \"}\";\n    }\n\n    getKeyframeInstance(keyframe) {\n        let result = \"{\";\n        for (let key in keyframe) {\n            let value = keyframe[key];\n            result += key + \" \" + this.getValue(value);\n        }\n        return result + \"}\";\n    }\n\n    render() {\n        return \"@keyframes \" + this.getKeyframeName() + this.getKeyframeInstance(this.options.keyframe || {});\n    }\n}\n\nexport {StyleInstance, StyleElement, KeyframeElement, DynamicStyleElement}\n","export function isDescriptor(desc) {\n    if (!desc || !desc.hasOwnProperty) {\n        return false;\n    }\n\n    const keys = ['value', 'initializer', 'get', 'set'];\n\n    for (let key of keys) {\n        if (desc.hasOwnProperty(key)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function decorate(handleDescriptor, entryArgs) {\n    if (isDescriptor(entryArgs[entryArgs.length - 1])) {\n        return handleDescriptor(...entryArgs, []);\n    } else {\n        return function () {\n            return handleDescriptor(...arguments, entryArgs);\n        };\n    }\n}\n\nexport function createDefaultSetter(key) {\n    return function set(newValue) {\n        Object.defineProperty(this, key, {\n            configurable: true,\n            writable: true,\n            // IS enumerable when reassigned by the outside word\n            enumerable: true,\n            value: newValue\n        });\n\n        return newValue;\n    };\n}\n","import {decorate, createDefaultSetter} from './Utils';\n\nfunction handleDescriptor(target, key, descriptor) {\n    const { configurable, enumerable, initializer, value } = descriptor;\n    // The \"key\" property is constructed with accessor descriptor (getter / setter),\n    // but the first time the getter is used, the property is reconstructed with data descriptor.\n    return {\n        configurable,\n        enumerable,\n\n        get() {\n            // This happens if someone accesses the property directly on the prototype\n            if (this === target) {\n                return;\n            }\n\n            const ret = initializer ? initializer.call(this) : value;\n\n            Object.defineProperty(this, key, {\n                configurable,\n                enumerable,\n                writable: true,\n                value: ret\n            });\n\n            return ret;\n        },\n\n        set: createDefaultSetter(key)\n    };\n}\n\nexport function lazyInitialize(...args) {\n    return decorate(handleDescriptor, args);\n}\n\nlet lazyInit = lazyInitialize;\n\nexport {lazyInit};\n","import {deepCopy} from \"../base/Utils\";\nimport {lazyInit} from \"./LazyInitialize\";\n\nfunction evaluateStyleRuleObject(target, initializer, value, options) {\n    let result = initializer ? initializer.call(target) : value;\n    if (typeof result === \"function\") {\n        result = result();\n    }\n    if (Array.isArray(result)) {\n        result = Object.assign({}, ...result);\n    }\n    return result;\n}\n\nfunction getStyleRuleKey(key) {\n    return \"__style__\" + key;\n}\n\nfunction getKeyframesRuleKey(key) {\n    return \"__keyframes__\" + key;\n}\n\n// TODO: this function can be made a lot more generic, to wrap plain object initializer with inheritance support\nfunction styleRuleWithOptions() {\n    let options = Object.assign({}, ...arguments); //Simpler notation?\n    // TODO: Remove this if you don't think it's appropiate, I thought a warning would do no harm\n    if (!options.targetMethodName) {\n        console.error(\"WARNING: targetMethodName not specified in the options (default is \\\"css\\\")\");\n    }\n    let targetMethodName = options.targetMethodName || \"css\";\n\n    function styleRuleDecorator(target, key, descriptor) {\n        const {initializer, value} = descriptor;\n\n        descriptor.objInitializer = function () {\n            let style = evaluateStyleRuleObject(this, initializer, value, options);\n\n            // TODO: a bit of a hack, clean this up\n            style[\"prefferedClassName\"] = key;\n\n            if (options.selector) {\n                style[\"selectorName\"] = options.selector;\n            }\n\n            if (options.inherit) {\n                // Get the value we set in the prototype of the parent class\n                let parentDesc = Object.getPrototypeOf(target)[getStyleRuleKey(key)];\n                if (!parentDesc) {\n                    console.error(\"You're trying to inherit a rule that isn't implemented in the parent: \" + key);\n                }\n                let parentStyle = evaluateStyleRuleObject(this, parentDesc.objInitializer, parentDesc.value, options);\n                style = deepCopy({}, parentStyle, style);\n                return style;\n            }\n\n            return style;\n        };\n\n        // Change the prototype of this object to be able to access the old descriptor/value\n        target[options.getKey(key)] = Object.assign({}, descriptor);\n\n        descriptor.initializer = function () {\n            let style = descriptor.objInitializer.call(this);\n            return this[targetMethodName](style);\n        };\n\n        delete descriptor.value;\n\n        return lazyInit(target, key, descriptor);\n    }\n\n    return styleRuleDecorator;\n}\n\n// TODO: Second argument is mostly useless (implied from targetMethodName)\nlet styleRule = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: false,\n});\n\nlet styleRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"css\",\n    getKey: getStyleRuleKey,\n    inherit: true,\n});\n\nexport function styleRuleCustom(options) {\n    return styleRuleWithOptions(Object.assign({\n        targetMethodName: \"css\",\n        getKey: getStyleRuleKey,\n        inherit: false,\n    }, options));\n}\n\nlet keyframesRule = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: false,\n});\n\n// TODO: This is currently not working (I think)\nlet keyframesRuleInherit = styleRuleWithOptions({\n    targetMethodName: \"keyframes\",\n    getKey: getKeyframesRuleKey,\n    inherit: true,\n});\n\nexport {styleRule, styleRuleInherit, keyframesRule, keyframesRuleInherit, styleRuleWithOptions}\n\n","import {StyleElement, KeyframeElement, DynamicStyleElement} from \"./StyleElement\";\nimport {Dispatchable} from \"../base/Dispatcher\";\n\n// Class meant to group multiple classes inside a single <style> element, for convenience\n// TODO: pattern should be more robust, to be able to only update classes\nclass StyleSheet extends Dispatchable {\n    constructor(options={}) {\n        super();\n        this.options = Object.assign({\n            parent: document.head,\n            name: options.name || this.constructor.getElementName(), // call only if needed\n        }, options);\n        this.elements = new Set();\n        if (!this.options.delayedMount) {\n            this.ensureMounted();\n        }\n        this.getTheme().addStyleSheet(this);\n    }\n\n    ensureMounted() {\n        if (this.styleElement) {\n            return;\n        }\n        const styleElementOptions = {\n            children: [],\n            name: this.options.name,\n        };\n        this.styleElement = StyleElement.create(this.options.parent, styleElementOptions);\n    }\n\n    static getInstance() {\n        if (!this.hasOwnProperty(\"singletonInstance\")) {\n            this.singletonInstance = new this();\n        }\n        return this.singletonInstance;\n    }\n\n    // Generate an instance, and also make sure to instantiate all style elements\n    static initialize() {\n        const styleSheet = this.getInstance();\n\n        for (const key in this.prototype) {\n            // Just hit the getter to instantiate the style\n            if (!styleSheet[key]) {\n                console.log(\"This is here to prevent a bundling optimization bug\");\n            }\n        }\n    }\n\n    static getElementName() {\n        this.elementNameCounter = (this.elementNameCounter || 0) + 1;\n        let name = this.name;\n        if (this.elementNameCounter > 1) {\n            name += \"-\" + this.elementNameCounter;\n        }\n        return name;\n    }\n\n    getTheme() {\n        return this.options.theme || this.constructor.theme;\n    }\n\n    setTheme(theme) {\n        this.options.theme = theme;\n    }\n\n    getThemeProperty(key, defaultValue) {\n        const theme = this.getTheme();\n        return (theme && theme.getProperty(key, defaultValue)) || defaultValue;\n    }\n\n    get themeProperties() {\n        const theme = this.getTheme();\n        return (theme && theme.getProperties()) || {};\n    }\n\n    ensureFirstUpdate() {\n        if (this._firstUpdate) {\n            return;\n        }\n\n        this._firstUpdate = true;\n        this.ensureMounted();\n        // Call all listeners before update for the very first time, to update any possible variables\n        this.dispatch(\"beforeUpdate\", this);\n    }\n\n    css(style) {\n        this.ensureFirstUpdate();\n        if (arguments.length > 1) {\n            style = Object.assign({}, ...arguments);\n        }\n        let elementOptions = {style: style};\n\n        // Get the preferred name, maybe cleanup later\n        const nameKey = \"prefferedClassName\";\n        if (style[nameKey]) {\n            elementOptions.name = style[nameKey];\n            delete style[nameKey];\n        }\n\n        let element = new DynamicStyleElement(elementOptions);\n        this.elements.add(element);\n        let styleInstances = element.render();\n        for (let styleInstance of styleInstances) {\n            this.styleElement.appendChild(styleInstance);\n        }\n        return element;\n    }\n\n    keyframes(keyframes) {\n        this.ensureFirstUpdate();\n        // This is not really necessarily as I don't believe it will ever be used\n        if (arguments.length > 1) {\n            keyframes = Object.assign({}, ...arguments);\n        }\n        let element = new KeyframeElement({keyframe: keyframes});\n        this.elements.add(element);\n        this.styleElement.appendChild(element);\n        return element;\n    }\n\n    addBeforeUpdateListener(callback) {\n        return this.addListener(\"beforeUpdate\", callback);\n    }\n\n    update() {\n        if (!this._firstUpdate) {\n            return;\n        }\n        this.dispatch(\"beforeUpdate\", this);\n\n        for (const key of Object.keys(this)) {\n            if (this[key] instanceof DynamicStyleElement) {\n                const desc = this[\"__style__\" + key];\n                const func = desc && desc.objInitializer;\n                if (func) {\n                    this[key].options.style = func.call(this);\n                }\n            }\n        }\n\n        let children = [];\n        for (let value of this.elements) {\n            if (value instanceof StyleElement) {\n                let styleElements = value.render();\n                children.push(...styleElements);\n            }\n        }\n        this.styleElement.options.children = children;\n        this.styleElement.redraw();\n    }\n}\n\n// Helper class, meant to only keep one class active for an element from a set of classes\n// TODO: move to another file\nclass ExclusiveClassSet {\n    constructor(classList, element) {\n        // TODO: check that classList is an array (or at least iterable)\n        this.classList = classList;\n        this.element = element;\n    }\n\n    static fromObject(obj, element) {\n        let classList = [];\n        for (let key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                classList.push(obj[key]);\n            }\n        }\n        return Object.assign(new ExclusiveClassSet(classList, element), obj);\n    }\n\n    set(element, classInstance) {\n        if (!classInstance) {\n            classInstance = element;\n            element = this.element;\n        }\n        for (let cls of this.classList) {\n            if (cls === classInstance) {\n                element.addClass(cls);\n            } else {\n                element.removeClass(cls);\n            }\n        }\n    }\n}\n\nfunction wrapCSS(context, style) {\n    return {\n        [context]: style\n    };\n}\n\nfunction hover(style) {\n    return wrapCSS(\":hover\", style);\n}\n\nfunction active(style) {\n    return wrapCSS(\":active\", style);\n}\n\nfunction focus(style) {\n    return wrapCSS(\":focus\", style);\n}\n\nlet styleMap = new WeakMap();\n\nexport {StyleSheet, ExclusiveClassSet, styleMap, wrapCSS, hover, focus, active};\n\nexport * from \"../decorators/Style\";\n","// Primitive utils for wrapping browser info\nclass Device {\n    static isTouchDevice() {\n        if (!this.hasOwnProperty(\"_isTouchDevice\")) {\n            this._isTouchDevice = !!((\"createTouch\" in window.document) ||\n                                            (navigator.MaxTouchPoints > 0) ||\n                                            (navigator.msMaxTouchPoints > 0) ||\n                                            (\"ontouchstart\" in window));\n        }\n        return this._isTouchDevice;\n    }\n\n    static isMobileDevice() {\n        if (!this.hasOwnProperty(\"_isMobileDevice\")) {\n            const mobileDevices = [\"Android\", \"webOS\", \"iPad\", \"iPhone\", \"iPod\", \"BlackBerry\", \"Windows Phone\"];\n            this._isMobileDevice = false;\n            for (let device of mobileDevices) {\n                if (navigator.userAgent.indexOf(device) !== -1) {\n                    this._isMobileDevice = true;\n                }\n            }\n        }\n        return this._isMobileDevice;\n    }\n\n    static getEventTouchIdentifier(event) {\n        return Math.min(...[...event.touches].map(touch => touch.identifier));\n    }\n\n    static getEventTouch(event) {\n        const identifier = this.getEventTouchIdentifier(event);\n        return [...event.touches].find(touch => touch.identifier === identifier);\n    }\n\n    static getEventCoord(event, axis, reference=\"client\") {\n        let coordName = reference + axis;\n        if (event[coordName]) {\n            return event[coordName];\n        }\n        if (event.touches) {\n            return this.getEventTouch(event)[coordName];\n        }\n        if (event.originalEvent) {\n            return this.getEventCoord(event.originalEvent, axis, reference);\n        }\n\n        console.warn(\"Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)\");\n    }\n\n    static getEventX(event, reference=\"client\") {\n        return this.getEventCoord(event, \"X\", reference);\n    }\n\n    static getEventY(event, reference=\"client\") {\n        return this.getEventCoord(event, \"Y\", reference);\n    }\n\n    static getBrowser() {\n        // TODO: should try to use navigator\n        if ((!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {\n            return \"Opera\";\n        }\n        if (typeof InstallTrigger !== 'undefined') {\n            return \"Firefox\";\n        }\n        if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {\n            return \"Safari\";\n        }\n        if (document.documentMode) {\n            return \"Internet Explorer\";\n        }\n        if (window.StyleMedia) {\n            return \"Edge\";\n        }\n        if (window.chrome && window.chrome.webstore) {\n            return \"Chrome\";\n        }\n        return \"Unknown\";\n    }\n\n    static supportsEvent(eventName) {\n        if (!this.cachedSupportedValues.has(eventName)) {\n            var element = document.createElement(\"div\");\n            let onEventName = \"on\" + eventName;\n            var isSupported = (onEventName in element);\n            if (!isSupported) {\n                element.setAttribute(onEventName, \"return;\");\n                isSupported = typeof element[onEventName] === \"function\";\n            }\n            element = null;\n            this.cachedSupportedValues.set(eventName, isSupported);\n        }\n        return this.cachedSupportedValues.get(eventName);\n    }\n}\n\nDevice.cachedSupportedValues = new Map();\n\nexport {Device};","import {Device} from \"../base/Device\";\n\nexport const Draggable = (BaseClass) => class Draggable extends BaseClass {\n    _clickCallbacks = new Map();\n    _clickDragListeners = new Map();\n\n    addClickListener(callback) {\n        if (this._clickCallbacks.has(callback)) {\n            return;\n        }\n        let callbackWrapper = () => {\n            if (this._okForClick) {\n                callback();\n            }\n        };\n        this._clickCallbacks.set(callback, callbackWrapper);\n        super.addClickListener(callbackWrapper);\n\n        if (this._clickDragListeners.has(callback)) {\n            return;\n        }\n        let clickDragListener = {\n            onStart: () => { this.dragForClickStarted(); },\n            onDrag: () => { this.dragForClick(); }\n        };\n        this._clickDragListeners.set(callback, clickDragListener);\n        this.addDragListener(clickDragListener);\n    }\n\n    dragForClickStarted() {\n        this._okForClick = true;\n    }\n\n    dragForClick() {\n        this._okForClick = false;\n    }\n\n    removeClickListener(callback) {\n        let callbackWrapper = this._clickCallbacks.get(callback);\n        if (callbackWrapper) {\n            this._clickCallbacks.delete(callback);\n            super.removeClickListener(callbackWrapper);\n        }\n        if (!this._clickDragListeners) {\n            return;\n        }\n        let clickDragListener = this._clickDragListeners.get(callback);\n        if (clickDragListener) {\n            this._clickDragListeners.delete(callback);\n            this.removeDragListener(clickDragListener);\n        }\n    }\n\n    createDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"mousemove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    createTouchDragListenerWrapper(listeners) {\n        let listenerWrapper = Object.assign({}, listeners);\n\n        listenerWrapper.onWrapperDrag = (event) => {\n            const eventX = Device.getEventX(event), eventY = Device.getEventY(event);\n\n            let deltaX = eventX - listenerWrapper._lastX;\n            listenerWrapper._lastX = eventX;\n\n            let deltaY = eventY - listenerWrapper._lastY;\n            listenerWrapper._lastY = eventY;\n\n            listeners.onDrag(deltaX, deltaY);\n        };\n\n        listenerWrapper.onWrapperStart = (event) => {\n            listenerWrapper._lastX = Device.getEventX(event);\n            listenerWrapper._lastY = Device.getEventY(event);\n            listenerWrapper.touchEventIdentifier = Device.getEventTouchIdentifier(event);\n\n            if (listeners.onStart) {\n                listeners.onStart(event);\n            }\n            event.preventDefault();\n\n            // TODO: Replace with our body\n            document.body.addEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n\n        listenerWrapper.onWrapperEnd = (event) => {\n            if (event.touches.length && Device.getEventTouchIdentifier(event) === listenerWrapper.touchEventIdentifier) {\n                return;\n            }\n            if (listeners.onEnd) {\n                listeners.onEnd(event);\n            }\n            // TODO: Replace with our body\n            document.body.removeEventListener(\"touchmove\", listenerWrapper.onWrapperDrag);\n        };\n        return listenerWrapper;\n    }\n\n    addDragListener(listeners) {\n        let listenerWrapper = this.createDragListenerWrapper(listeners);\n        let touchListenerWrapper = this.createTouchDragListenerWrapper(listeners);\n        this.addNodeListener(\"touchstart\", touchListenerWrapper.onWrapperStart);\n        this.addNodeListener(\"mousedown\", listenerWrapper.onWrapperStart);\n        // TODO: Replace with our body\n        document.body.addEventListener(\"touchend\", touchListenerWrapper.onWrapperEnd);\n        document.body.addEventListener(\"mouseup\", listenerWrapper.onWrapperEnd);\n\n        if (!this.hasOwnProperty(\"_dragListeners\")) {\n            this._dragListeners = [];\n        }\n        this._dragListeners.push(touchListenerWrapper);\n        this._dragListeners.push(listenerWrapper);\n    }\n\n    removeDragListener(listeners) {\n        if (this._dragListeners) {\n            for (let i = this._dragListeners.length - 1; i >= 0; i -= 1) {\n                if (this._dragListeners[i].onStart === listeners.onStart &&\n                    this._dragListeners[i].onDrag === listeners.onDrag &&\n                    this._dragListeners[i].onEnd === listeners.onEnd) {\n\n                    this.removeNodeListener(\"touchstart\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"touchmove\", this._dragListeners[i].onWrapperEnd);\n                    this.removeNodeListener(\"mousedown\", this._dragListeners[i].onWrapperStart);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperDrag);\n                    document.body.removeEventListener(\"mousemove\", this._dragListeners[i].onWrapperEnd);\n\n                    this._dragListeners.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n","export const COLORS_BY_NAME = {\n    aliceblue: \"#f0f8ff\",\n    antiquewhite: \"#faebd7\",\n    aqua: \"#00ffff\",\n    aquamarine: \"#7fffd4\",\n    azure: \"#f0ffff\",\n    beige: \"#f5f5dc\",\n    bisque: \"#ffe4c4\",\n    black: \"#000000\",\n    blanchedalmond: \"#ffebcd\",\n    blue: \"#0000ff\",\n    blueviolet: \"#8a2be2\",\n    brown: \"#a52a2a\",\n    burlywood: \"#deb887\",\n    cadetblue: \"#5f9ea0\",\n    chartreuse: \"#7fff00\",\n    chocolate: \"#d2691e\",\n    coral: \"#ff7f50\",\n    cornflowerblue: \"#6495ed\",\n    cornsilk: \"#fff8dc\",\n    crimson: \"#dc143c\",\n    cyan: \"#00ffff\",\n    darkblue: \"#00008b\",\n    darkcyan: \"#008b8b\",\n    darkgoldenrod: \"#b8860b\",\n    darkgray: \"#a9a9a9\",\n    darkgreen: \"#006400\",\n    darkkhaki: \"#bdb76b\",\n    darkmagenta: \"#8b008b\",\n    darkolivegreen: \"#556b2f\",\n    darkorange: \"#ff8c00\",\n    darkorchid: \"#9932cc\",\n    darkred: \"#8b0000\",\n    darksalmon: \"#e9967a\",\n    darkseagreen: \"#8fbc8f\",\n    darkslateblue: \"#483d8b\",\n    darkslategray: \"#2f4f4f\",\n    darkturquoise: \"#00ced1\",\n    darkviolet: \"#9400d3\",\n    deeppink: \"#ff1493\",\n    deepskyblue: \"#00bfff\",\n    dimgray: \"#696969\",\n    dodgerblue: \"#1e90ff\",\n    firebrick: \"#b22222\",\n    floralwhite: \"#fffaf0\",\n    forestgreen: \"#228b22\",\n    fuchsia: \"#ff00ff\",\n    gainsboro: \"#dcdcdc\",\n    ghostwhite: \"#f8f8ff\",\n    gold: \"#ffd700\",\n    goldenrod: \"#daa520\",\n    gray: \"#808080\",\n    green: \"#008000\",\n    greenyellow: \"#adff2f\",\n    honeydew: \"#f0fff0\",\n    hotpink: \"#ff69b4\",\n    indianred: \"#cd5c5c\",\n    indigo: \"#4b0082\",\n    ivory: \"#fffff0\",\n    khaki: \"#f0e68c\",\n    lavender: \"#e6e6fa\",\n    lavenderblush: \"#fff0f5\",\n    lawngreen: \"#7cfc00\",\n    lemonchiffon: \"#fffacd\",\n    lightblue: \"#add8e6\",\n    lightcoral: \"#f08080\",\n    lightcyan: \"#e0ffff\",\n    lightgoldenrodyellow: \"#fafad2\",\n    lightgray: \"#d3d3d3\",\n    lightgreen: \"#90ee90\",\n    lightpink: \"#ffb6c1\",\n    lightsalmon: \"#ffa07a\",\n    lightseagreen: \"#20b2aa\",\n    lightskyblue: \"#87cefa\",\n    lightslategray: \"#778899\",\n    lightsteelblue: \"#b0c4de\",\n    lightyellow: \"#ffffe0\",\n    lime: \"#00ff00\",\n    limegreen: \"#32cd32\",\n    linen: \"#faf0e6\",\n    magenta: \"#ff00ff\",\n    maroon: \"#800000\",\n    mediumaquamarine: \"#66cdaa\",\n    mediumblue: \"#0000cd\",\n    mediumorchid: \"#ba55d3\",\n    mediumpurple: \"#9370db\",\n    mediumseagreen: \"#3cb371\",\n    mediumslateblue: \"#7b68ee\",\n    mediumspringgreen: \"#00fa9a\",\n    mediumturquoise: \"#48d1cc\",\n    mediumvioletred: \"#c71585\",\n    midnightblue: \"#191970\",\n    mintcream: \"#f5fffa\",\n    mistyrose: \"#ffe4e1\",\n    moccasin: \"#ffe4b5\",\n    navajowhite: \"#ffdead\",\n    navy: \"#000080\",\n    oldlace: \"#fdf5e6\",\n    olive: \"#808000\",\n    olivedrab: \"#6b8e23\",\n    orange: \"#ffa500\",\n    orangered: \"#ff4500\",\n    orchid: \"#da70d6\",\n    palegoldenrod: \"#eee8aa\",\n    palegreen: \"#98fb98\",\n    paleturquoise: \"#afeeee\",\n    palevioletred: \"#db7093\",\n    papayawhip: \"#ffefd5\",\n    peachpuff: \"#ffdab9\",\n    peru: \"#cd853f\",\n    pink: \"#ffc0cb\",\n    plum: \"#dda0dd\",\n    powderblue: \"#b0e0e6\",\n    purple: \"#800080\",\n    red: \"#ff0000\",\n    rosybrown: \"#bc8f8f\",\n    royalblue: \"#4169e1\",\n    saddlebrown: \"#8b4513\",\n    salmon: \"#fa8072\",\n    sandybrown: \"#f4a460\",\n    seagreen: \"#2e8b57\",\n    seashell: \"#fff5ee\",\n    sienna: \"#a0522d\",\n    silver: \"#c0c0c0\",\n    skyblue: \"#87ceeb\",\n    slateblue: \"#6a5acd\",\n    slategray: \"#708090\",\n    snow: \"#fffafa\",\n    springgreen: \"#00ff7f\",\n    steelblue: \"#4682b4\",\n    tan: \"#d2b48c\",\n    teal: \"#008080\",\n    thistle: \"#d8bfd8\",\n    tomato: \"#ff6347\",\n    turquoise: \"#40e0d0\",\n    violet: \"#ee82ee\",\n    wheat: \"#f5deb3\",\n    white: \"#ffffff\",\n    whitesmoke: \"#f5f5f5\",\n    yellow: \"#ffff00\",\n    yellowgreen: \"#9acd32\"\n};\n\n\n/*\n * This class contains methods for operating with colors. Its objects are kept in hsva format with normalized\n * attributes (each attribute has value between 0 and 1 inclusive), and can be converted from/to rgba.\n */\nexport class Color {\n    constructor(color) {\n        if (color) {\n            this.setColor(color);\n        }\n    }\n\n    setColor(color) {\n        this.color = this.constructor.parseColor(color);\n    }\n\n    getColor() {\n        let rgba = this.getRgba();\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    /*\n     * @param color A color string of the types: native name, hex3, hex6, rgb, rgba, hsl, hsla\n     *              or a Color object, or a hsla color array\n     */\n    static parseColor(color) {\n        if (color instanceof Color) {\n            return color.color;\n        } else if (color instanceof Array) {\n            // Add the alpha parameter at the end\n            if (color.length === 3) {\n                color.push(1);\n            }\n            return color;\n        }\n\n        color = color.trim().toLowerCase();\n\n        // Check if color is given by name\n        if (COLORS_BY_NAME.hasOwnProperty(color)) {\n            color = COLORS_BY_NAME[color];\n        }\n\n        let values = [];\n\n        // Check for hex3 (e.g. \"#f00\")\n        let hex3 = color.match(/^#([0-9a-f]{3})$/i);\n        if (hex3) {\n            values = [\n                parseInt(hex3[1].charAt(0), 16) * 0x11,\n                parseInt(hex3[1].charAt(1), 16) * 0x11,\n                parseInt(hex3[1].charAt(2), 16) * 0x11,\n                1\n            ];\n        }\n\n        // Check for hex6 (e.g. \"#ff0000\")\n        let hex6 = color.match(/^#([0-9a-f]{6})$/i);\n        if (hex6) {\n            values = [\n                parseInt(hex6[1].substr(0, 2), 16),\n                parseInt(hex6[1].substr(2, 2), 16),\n                parseInt(hex6[1].substr(4, 2), 16),\n                1\n            ];\n        }\n\n        // Check for rgba (e.g. \"rgba(255, 0, 0, 0.5)\")\n        let rgba = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+.*\\d*)\\s*\\)$/i);\n        if (rgba) {\n            values = [\n                parseInt(rgba[1]),\n                parseInt(rgba[2]),\n                parseInt(rgba[3]),\n                parseFloat(rgba[4])\n            ];\n        }\n\n        // Check for rgb (e.g. \"rgb(255, 0, 0)\")\n        let rgb = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\n        if (rgb) {\n            values = [\n                parseInt(rgb[1]),\n                parseInt(rgb[2]),\n                parseInt(rgb[3]),\n                1\n            ];\n        }\n        return values;\n    }\n\n    // TODO: this should be implemented as a factory that generates an interpolator object, that just takes in a t\n    static interpolate(firstColor, secondColor, t = 0.5) {\n        let firstColorArray = Color.parseColor(firstColor);\n        let secondColorArray = Color.parseColor(secondColor);\n\n        return Color.convertToRgba([\n            parseInt(firstColorArray[0] * (1 - t) + secondColorArray[0] * t),\n            parseInt(firstColorArray[1] * (1 - t) + secondColorArray[1] * t),\n            parseInt(firstColorArray[2] * (1 - t) + secondColorArray[2] * t),\n            parseInt(firstColorArray[3] * (1 - t) + secondColorArray[3] * t)\n        ]);\n    }\n\n    static addOpacity(color, opacity) {\n        let colorArray = Color.parseColor(color);\n        return Color.convertToRgba([\n            parseInt(colorArray[0]),\n            parseInt(colorArray[1]),\n            parseInt(colorArray[2]),\n            opacity\n        ]);\n    }\n\n    static convertToRgba(rgba) {\n        return `rgba(${rgba[0]}, ${rgba[1]}, ${rgba[2]}, ${rgba[3]})`;\n    }\n\n    static isLight(color) {\n        let values = Color.parseColor(color);\n        return values[0] * 0.3 + values[1] * 0.59 + values[2] * 0.11 > 188;\n    }\n}\n\n\nexport function lighten(color, amount) {\n    if (amount >= 0) {\n        return Color.interpolate(color, \"#fff\", amount);\n    } else {\n        return darken(color, -amount);\n    }\n}\n\n\nexport function darken(color, amount) {\n    if (amount >= 0) {\n        let rgba = Color.parseColor(Color.interpolate(color, \"#000\", amount));\n        for (let i = 0; i < 3; i += 1) {\n            let root = Math.pow(255 - rgba[i], 0.7);\n            rgba[i] = parseInt(rgba[i] - root * amount);\n            if (rgba[i] < 0) {\n                rgba[i] = 0;\n            }\n        }\n        return Color.convertToRgba(rgba);\n    } else {\n        return lighten(color, -amount);\n    }\n}\n\n\nexport function enhance(color, amount) {\n    if (Color.isLight(color)) {\n        return darken(color, amount);\n    } else {\n        return lighten(color, amount);\n    }\n}\n\n\nexport function buildColors(color, dark=true) {\n    let colors = [];\n    let darkenPercents;\n    if (!dark) {\n        darkenPercents = [0.1, 0, -0.2, -0.3, -0.35, -0.2, -1];\n    } else if (Color.isLight(color)) {\n        darkenPercents = [0.05, 0, 0.05, 0.1, 0.15, 0.3, 0.8];\n    } else {\n        darkenPercents = [-0.3, 0, 0.1, 0.2, 0.23, 0.1, -1];\n    }\n    for (let i = 0; i < darkenPercents.length; i += 1) {\n        colors.push(darken(color, darkenPercents[i]));\n    }\n    return colors;\n}\n\n\nexport class ColorGenerator {\n    static FIRST_COLORS = [\"#337ab7\", \"#5cb85c\",  \"#f0ad4e\", \"#5bc0de\", \"#d9534f\"];\n    static cache = new Map();\n\n    static getPersistentColor(uniqueId) {\n        if (uniqueId < this.FIRST_COLORS.length) {\n            return this.FIRST_COLORS[uniqueId];\n        }\n        if (!this.cache.has(uniqueId)) {\n            this.cache.set(uniqueId, this.getRandomColor());\n        }\n        return this.cache.get(uniqueId);\n    }\n\n    static getRandomColor() {\n        const allowed = \"3456789ABC\";\n        let color = \"#\";\n        for (let i = 0; i < 6; i += 1) {\n            color += allowed.charAt(parseInt(Math.random() * allowed.length));\n        }\n        return color;\n    }\n}\n","import {Dispatchable} from \"../../base/Dispatcher\";\nimport {UI} from \"../UIBase\";\nimport {StyleSheet} from \"../Style\";\nimport {CallThrottler} from \"../../base/Utils\";\n\nfunction getInstance(styleSheet) {\n    if (typeof styleSheet === \"function\") {\n        if (typeof styleSheet.getInstance === \"function\") {\n            styleSheet = styleSheet.getInstance();\n        } else {\n            styleSheet = styleSheet();\n        }\n    }\n    return styleSheet;\n}\n\nfunction getInstanceForObject(obj) {\n    if (!obj) {\n        return null;\n    }\n    let styleSheet = (obj.theme && obj.theme.get(obj)) || obj.styleSheet;\n    return getInstance(styleSheet);\n}\n\nclass Theme extends Dispatchable {\n    constructor(name=\"\") {\n        super();\n        this.styleSheetSymbol = Symbol(\"Theme\" + name);\n        this.classSet = new Set();\n        this.styleSheetSet = new Set();\n        this.properties = {};\n        this.updateThrottler = new CallThrottler({throttle: 50});\n        this.updateThrottled = this.updateThrottler.wrap(() => this.updateStyleSheets());\n        window.addEventListener(\"resize\", this.updateThrottled);\n    }\n\n    register(cls, styleSheet) {\n        cls.theme = this;\n        if (!cls.styleSheet) {\n            cls.styleSheet = styleSheet;\n        }\n        this.set(cls, styleSheet);\n    }\n\n    set(cls, styleSheet) {\n        cls[this.styleSheetSymbol] = styleSheet;\n        this.classSet.add(cls);\n    }\n\n    get(cls) {\n        if (!(typeof cls === \"function\")) {\n            cls = cls.constructor;\n        }\n        return cls[this.styleSheetSymbol];\n    }\n\n    getProperties() {\n        return this.properties;\n    }\n\n    getProperty(key, defaultValue) {\n        const value = this.properties[key] || defaultValue;\n        return (typeof value === \"function\") ? value() : value;\n    }\n\n    setProperties(properties, update=true) {\n        Object.assign(this.properties, properties);\n        if (update) {\n            this.updateThrottled();\n        }\n    }\n\n    setProperty(key, value) {\n        this.properties[key] = value;\n    }\n\n    getAllStyleSheets() {\n        let styleSheetSet = new Set(this.styleSheetSet);\n        for (const cls of this.classSet.values()) {\n            styleSheetSet.add(this.get(cls));\n        }\n        return Array.from(styleSheetSet).map(styleSheet => {\n            if (styleSheet.getInstance) {\n                return styleSheet.getInstance();\n            }\n            return styleSheet;\n        });\n    }\n\n    addStyleSheet(styleSheet) {\n        this.styleSheetSet.add(styleSheet);\n    }\n\n    removeStyleSheet(styleSheet) {\n        this.styleSheetSet.delete(styleSheet);\n    }\n\n    updateStyleSheets() {\n        for (const styleSheet of this.getAllStyleSheets()) {\n            if (styleSheet.update) {\n                styleSheet.update();\n            }\n\n        }\n    }\n\n    static register(cls, styleSheet) {\n        return this.Global.register(...arguments);\n    }\n\n    static get(cls) {\n        return this.Global.get(...arguments);\n    }\n\n    static addStyleSheet(styleSheet) {\n        this.Global.addStyleSheet(styleSheet);\n    }\n\n    static setProperties(properties) {\n        this.Global.setProperties(...arguments);\n    }\n\n    static getProperties() {\n        return this.Global.getProperties();\n    }\n}\n\nTheme.Global = new Theme(\"Global\");\n\nUI.Element.prototype.getStyleSheet = function styleSheetGetter() {\n    return getInstanceForObject(this.options) || getInstanceForObject(this.constructor);\n};\n\nfunction registerStyle(styleClass, theme=Theme.Global) {\n    return (target) => {\n        theme.register(target, styleClass);\n    }\n}\n\nStyleSheet.theme = Theme.Global;\n\nexport {Theme, registerStyle};\n","import {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {enhance} from \"./Color\";\nimport {Device} from \"../base/Device\";\nimport {Orientation, Level, Size} from \"./Constants\";\nimport {Theme} from \"./style/Theme\";\n\n// TODO: export these properly, don't use a namespace here\nlet GlobalStyle = {\n};\n\nexport function getTextColor(backgroundColor) {\n    return enhance(backgroundColor, 1);\n}\n\nTheme.setProperties({\n    COLOR_BACKGROUND: \"#fff\",\n    COLOR_BACKGROUND_ALTERNATIVE: \"#eee\",\n    COLOR_BACKGROUND_BODY: \"#f8f8f8\",\n    COLOR_FOREGROUND_BODY: \"#f2f2f2\",\n    COLOR_BACKGROUND_BADGE: \"#777\",\n    COLOR_PRIMARY: \"#337ab7\",\n    COLOR_SECONDARY: \"#358ba4\",\n    COLOR_SUCCESS: \"#5cb85c\",\n    COLOR_INFO: \"#5bc0de\",\n    COLOR_WARNING: \"#f0ad4e\",\n    COLOR_DANGER: \"#d9534f\",\n\n    COLOR_LINK: \"#337ab7\",\n\n    FONT_SIZE_EXTRA_SMALL: \"10px\",\n    FONT_SIZE_SMALL: \"12px\",\n    FONT_SIZE_DEFAULT: \"14px\",\n    FONT_SIZE_LARGE: \"17px\",\n    FONT_SIZE_EXTRA_LARGE: \"21px\",\n\n    BASE_BORDER_RADIUS: 0,\n    BASE_BOX_SHADOW: \"0px 0px 10px rgb(160, 162, 168)\",\n    BASE_BORDER_WIDTH: 0,\n    BASE_BORDER_STYLE: \"solid\",\n    BASE_BORDER_COLOR: \"#ddd\",\n\n    BUTTON_BORDER_RADIUS: \"0.2rem\",\n\n    CARD_PANEL_HEADER_HEIGHT: 30,\n    CARD_PANEL_HEADER_HEIGHT_LARGE: 40,\n    CARD_PANEL_HEADING_PADDING: 10,\n    CARD_PANEL_HEADING_PADDING_LARGE: 20,\n    CARD_PANEL_TEXT_TRANSFORM: \"inherit\",\n\n    DARK_BOX_SHADOW: \"0px 0px 10px rgba(0, 0, 0, .6)\",\n\n    ROW_LIST_ROW_HEIGHT: 30,\n    ROW_LIST_ROW_HEIGHT_LARGE: 40,\n    ROW_LIST_ROW_PADDING: 10,\n    ROW_LIST_ROW_PADDING_LARGE: 20,\n    ROW_LIST_ROW_BORDER_WIDTH: 1,\n\n    FONT_FAMILY_SANS_SERIF: \"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif\",\n    FONT_FAMILY_SERIF: \"serif\",\n    FONT_FAMILY_MONOSPACE: \"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace\",\n    FONT_FAMILY_DEFAULT: () => Theme.getProperties().FONT_FAMILY_SANS_SERIF,\n\n    NAV_MANAGER_NAVBAR_HEIGHT: 50,\n    NAV_MANAGER_BOX_SHADOW_NAVBAR: \"0px 0px 10px rgb(0, 0, 0)\",\n    NAV_MANAGER_BOX_SHADOW_SIDE_PANEL: \"0px 0px 10px #202e3e\",\n\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP: 0,\n    MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE: 0,\n\n    FLAT_TAB_AREA_COLOR_BACKGROUND: \"#f3f3f3\",\n    FLAT_TAB_AREA_LINE_HEIGHT: 30,\n    FLAT_TAB_AREA_PADDING_SIDES: 10,\n});\n\nexport class BasicLevelSizeStyleSheet extends StyleSheet {\n    Level(level) {\n        if (this[level]) {\n            return this[level];\n        }\n        for (let type of Object.keys(Level)) {\n            if (level == Level[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n        return \"\";\n    }\n}\n\nexport const BasicLevelStyleSheet = (colorToStyleFunction) => class BasicLevelStyleClass extends BasicLevelSizeStyleSheet {\n    colorStyleRule(color, textColor) {\n        return colorToStyleFunction(color, textColor || getTextColor(color));\n    }\n\n    @styleRule\n    BASE = this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND);\n\n    @styleRule\n    PRIMARY = this.colorStyleRule(this.themeProperties.COLOR_PRIMARY);\n\n    @styleRule\n    SECONDARY = this.colorStyleRule(this.themeProperties.COLOR_SECONDARY);\n\n    @styleRule\n    SUCCESS = this.colorStyleRule(this.themeProperties.COLOR_SUCCESS);\n\n    @styleRule\n    INFO = this.colorStyleRule(this.themeProperties.COLOR_INFO);\n\n    @styleRule\n    WARNING = this.colorStyleRule(this.themeProperties.COLOR_WARNING);\n\n    @styleRule\n    DANGER = this.colorStyleRule(this.themeProperties.COLOR_DANGER);\n};\n\n\nclass FlexContainerStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        display: \"flex\",\n        \">*\": {\n            marginLeft: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginLeft: \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">*\": {\n            marginTop: \"20px\",\n            flex: \"1\",\n        },\n        \">:first-child\": {\n            marginTop: \"0px\",\n        }\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nclass ContainerStyle extends StyleSheet {\n    getSizeStyle(mobilePixels, desktopPercent) {\n        return {\n            margin: Device.isMobileDevice() ? `0 ${mobilePixels}px` : `0% ${desktopPercent}%`,\n        }\n    }\n\n    @styleRule\n    EXTRA_SMALL = this.getSizeStyle(6, 15);\n\n    @styleRule\n    SMALL = this.getSizeStyle(4, 10);\n\n    @styleRule\n    MEDIUM = this.getSizeStyle(4, 6);\n\n    @styleRule\n    LARGE = this.getSizeStyle(2, 3);\n\n    @styleRule\n    EXTRA_LARGE = this.getSizeStyle(2, 1);\n\n    Size(size) {\n        for (let type of Object.keys(Size)) {\n            if (size == Size[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\n\nclass Utils extends StyleSheet {\n    extraTop = () => this.themeProperties[Device.isMobileDevice() ? \"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE\" :\n        \"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\"];\n\n    @styleRule\n    fullHeight = {\n        height: \"100%\",\n    };\n\n    @styleRule\n    hidden = {\n        display: \"hidden\"\n    };\n\n    // Use this class for content that has no space between it and the navbar.\n    @styleRule\n    fullContainer = {\n        width: \"100%\",\n        height: () => \"calc(100% + \" + this.extraTop() + \"px)\",\n        marginTop: () => -this.extraTop()\n    }\n}\n\nGlobalStyle.FlexContainer = FlexContainerStyle.getInstance();\nGlobalStyle.Container = ContainerStyle.getInstance();\nGlobalStyle.Utils = Utils.getInstance();\n\nexport {GlobalStyle};\n","import {UI} from \"./UIBase\";\nimport {BasicLevelStyleSheet} from \"./GlobalStyle\";\nimport {Orientation} from \"./Constants\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\n\nclass SimpleStyledElement extends UI.Element {\n    getLevel() {\n        return this.options.level || (this.parent && this.parent.getLevel && this.parent.getLevel());\n    }\n\n    setLevel(level) {\n        this.updateOptions({level});\n    }\n\n    getSize() {\n        return this.options.size || (this.parent && this.parent.getSize && this.parent.getSize());\n    }\n\n    setSize(size) {\n        this.updateOptions({size});\n    }\n}\n\n\nclass IconableInterface extends SimpleStyledElement {\n    render() {\n        return [this.beforeChildren(), this.getLabel(), super.render()];\n    };\n\n    getLabel() {\n        return (this.options.label != null) ? this.options.label : \"\";\n    }\n\n    setLabel(label) {\n        this.updateOptions({label: label});\n    }\n\n    //TODO: this should live in a base iconable class, of which you'd only use this.beforeChildren\n    getFaIcon() {\n        return this.options.faIcon;\n    }\n\n    setFaIcon(value) {\n        this.options.faIcon = value;\n        this.redraw();\n    }\n\n    beforeChildren() {\n        if (!this.getFaIcon()) {\n            return null;\n        }\n        let iconOptions = {\n            className: \"fa fa-\" + this.getFaIcon(),\n        };\n        if (this.getLabel()) {\n            iconOptions.style = {\n                marginRight: \"5px\",\n            }\n        }\n\n        return <span {...iconOptions} />;\n    }\n}\n\nlet labelColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker = {\n        backgroundColor: colors[2],\n        color: colors[6],\n        textDecoration: \"none\",\n    };\n    let regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    return Object.assign({}, regular, {\n        \":hover\": darker,\n        \":hover:disabled\": regular,\n        \":focus\": darker,\n        \":active\": darker,\n    });\n};\n\nexport class LabelStyle extends BasicLevelStyleSheet(labelColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        fontWeight: \"bold\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.07em 0.4em\",\n        borderRadius: \"0.3em\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"bottom\",\n        lineHeight: 4/3 + \"\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.05em 0.2em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.05em 0.2em\",\n    };\n}\n\n\n@registerStyle(LabelStyle)\nclass Label extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet badgeColorToStyle = (color) => {\n    const colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n};\n\nexport class BadgeStyle extends BasicLevelStyleSheet(badgeColorToStyle) {\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [{\n        display: \"inline-block\",\n        padding: \"0.25em 0.55em\",\n        fontWeight: \"700\",\n        lineHeight: \"1\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        backgroundColor: \"#777\",\n        borderRadius: \"0.8em\",\n    }, {\n        \"font-size\": \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND_BADGE)];\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"10px\",\n        padding: \"0.1em 0.2em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n\n@registerStyle(BadgeStyle)\nclass Badge extends UI.Primitive(IconableInterface, \"span\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n}\n\nlet progressBarColorToStyle = (color) => {\n    let colors = buildColors(color);\n    return {\n        backgroundColor: colors[1],\n    };\n};\n\nclass ProgressBarStyle extends BasicLevelStyleSheet(progressBarColorToStyle) {\n    @styleRule\n    container = {\n        height: \"20px\",\n        marginBottom: \"20px\",\n        overflow: \"hidden\",\n        backgroundColor: \"#f5f5f5\",\n        borderRadius: \"4px\",\n        boxShadow: \"inset 0 1px 2px rgba(0, 0, 0, .1)\",\n    };\n\n    @styleRule\n    DEFAULT = [{\n        float: \"left\",\n        width: \"0\",\n        height: \"100%\",\n        lineHeight: \"20px\",\n        color: \"#fff\",\n        textAlign: \"center\",\n        backgroundColor: \"#337ab7\",\n        boxShadow: \"inset 0 -1px 0 rgba(0, 0, 0, .15)\",\n        transition: \"width .6s ease\",\n        fontColor: \"#ffffff\",\n    }, {\n        fontSize: \"12px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_PRIMARY)];\n\n    @styleRule\n    striped = {\n        backgroundImage: \"linear-gradient(45deg, rgba(255, 255, 255, .15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .15) 50%, rgba(255, 255, 255, .15) 75%, transparent 75%, transparent)\",\n        backgroundSize: \"40px 40px\",\n    };\n\n    @styleRule\n    active = {\n        animation: \"progress-bar-stripes 2s linear infinite\",\n    };\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"8px\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"10px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"17px\",\n        padding: \"0.1em 0.2em\",\n    };\n}\n\n@registerStyle(ProgressBarStyle)\nclass ProgressBar extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        let valueInPercent = (this.options.value || 0) * 100;\n        let orientation = Orientation.HORIZONTAL;\n        if (this.options.hasOwnProperty(\"orientation\")) {\n            orientation = this.options.orientation;\n        }\n        let barStyle;\n        if (orientation === Orientation.HORIZONTAL) {\n            barStyle = {\n                width: valueInPercent + \"%\",\n                height: this.options.height + \"px\",\n            };\n        } else {\n            barStyle = {\n                height: valueInPercent + \"%\",\n                width: \"5px\",\n            }\n        }\n        let barOptions = {\n            className: this.styleSheet.DEFAULT,\n            style: barStyle,\n        };\n\n        if (this.options.disableTransition) {\n            Object.assign(barOptions.style, {\n                transition: \"none\",\n            });\n        }\n\n        if (this.options.level) {\n            barOptions.className += \" \" + this.styleSheet.Level(this.getLevel());\n        }\n        if (this.options.striped) {\n            barOptions.className += \" \" + this.styleSheet.striped;\n        }\n        if (this.options.active) {\n            barOptions.className += \" \" + this.styleSheet.active;\n        }\n        if (this.options.color) {\n            barOptions.style.backgroundColor = this.options.color;\n        }\n\n        return <div {...barOptions}>\n            <span>{this.options.label}</span>\n        </div>;\n    }\n\n    set(value) {\n        if (value < 0)\n            value = 0;\n        else if (value > 1)\n            value = 1;\n        this.options.value = value;\n        this.redraw();\n    }\n}\n\n\nexport {SimpleStyledElement, IconableInterface, Label, Badge, ProgressBar};\n","// TODO: this file existed to hold generic classes in a period of fast prototyping, has a lot of old code\nimport {UI} from \"./UIBase\";\nimport {Device} from \"../base/Device\";\nimport {Draggable} from \"./Draggable\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {getOffset} from \"./Utils\";\nimport {Orientation} from \"./Constants\";\nimport {ProgressBar} from \"./Bootstrap3\";\n\n// A very simple class, all this does is implement the `getTitle()` method\nclass Panel extends UI.Element {\n    getTitle() {\n        return this.options.title;\n    }\n}\n\nclass SlideBar extends Draggable(UI.Element) {\n    getDefaultOptions() {\n        return {\n            value: 0,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"display\", \"inline-block\");\n        attr.setStyle(\"position\", \"relative\");\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getSliderValue() {\n        return this.options.value * this.options.size - (this.options.barSize / 2);\n    }\n\n    render() {\n        return [\n            <ProgressBar ref=\"progressBar\" active=\"true\" value={this.options.value} disableTransition={true}\n                            orientation={this.getOrientation()}\n                            style={Object.assign({\n                                position: \"relative\",\n                            }, this.getProgressBarStyle())}\n            />,\n            <div ref=\"slider\" style={Object.assign({\n                                backgroundColor: \"black\",\n                                position: \"absolute\",\n                            }, this.getSliderStyle())}>\n            </div>\n        ];\n    }\n\n    setValue(value) {\n        value = Math.max(value, 0);\n        value = Math.min(value, 1);\n\n        this.options.value = value;\n        this.progressBar.set(this.options.value);\n        this.slider.setStyle(this.getOrientationAttribute(), this.getSliderValue() + \"px\");\n\n        this.dispatch(\"change\", this.options.value);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    onMount() {\n        this.addDragListener(this.getDragConfig());\n    }\n}\n\nclass HorizontalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.width || 100;\n        options.barSize = options.barSize || options.barWidth || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: \"5px\",\n            width: this.options.size + \"px\",\n            top: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            width: this.options.barSize + \"px\",\n            height: \"20px\",\n            left: this.getSliderValue() + \"px\",\n            top: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"left\";\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventX(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaX / this.options.size);\n            },\n        };\n    }\n}\nclass VerticalSlideBar extends SlideBar {\n    setOptions(options) {\n        options.size = options.size || options.height || 100;\n        options.barSize = options.barSize || options.barHeight || 5;\n        super.setOptions(options);\n    }\n\n    getProgressBarStyle() {\n        return {\n            height: this.options.size + \"px\",\n            width: \"5px\",\n            left: \"15px\",\n        };\n    }\n\n    getSliderStyle() {\n        return {\n            height: this.options.barSize + \"px\",\n            width: \"20px\",\n            top: this.getSliderValue() + \"px\",\n            left: \"7.5px\"\n        };\n    }\n\n    getOrientationAttribute() {\n        return \"top\";\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n    getDragConfig() {\n        return {\n            onStart: (event) => {\n                this.setValue((Device.getEventY(event) - getOffset(this.progressBar)[this.getOrientationAttribute()]) / this.options.size);\n            },\n            onDrag: (deltaX, deltaY) => {\n                this.setValue(this.options.value + deltaY / this.options.size);\n            },\n        };\n    }\n}\n\nclass Link extends UI.Primitive(\"a\") {\n    extraNodeAttributes(attr) {\n        // TODO: do we want this as a default?\n        attr.setStyle(\"cursor\", \"pointer\");\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n\n        if (this.options.newTab) {\n            this.options.target = \"_blank\";\n        }\n\n        return options;\n    }\n\n    render() {\n        if (this.options.value) {\n            return [this.options.value];\n        }\n        return super.render();\n    }\n}\n\nclass Image extends UI.Primitive(\"img\") {\n}\n\n// Beware coder: If you ever use this class, you should have a well documented reason\nclass RawHTML extends UI.Element {\n    getInnerHTML() {\n        return this.options.innerHTML || this.options.__innerHTML;\n    }\n\n    redraw() {\n        this.node.innerHTML = this.getInnerHTML();\n        this.applyNodeAttributes();\n        this.applyRef();\n    }\n}\n\nclass ViewportMeta extends UI.Primitive(\"meta\") {\n    getDefaultOptions() {\n        return {\n            scale: this.getDesiredScale(),\n            initialScale: 1,\n            maximumScale: 1,\n        }\n    }\n\n    getDesiredScale() {\n        const MIN_WIDTH = this.options.minDeviceWidth;\n        return (MIN_WIDTH) ? Math.min(window.screen.availWidth, MIN_WIDTH) / MIN_WIDTH : 1;\n    }\n\n    getContent() {\n        let rez = \"width=device-width\";\n        rez += \",initial-scale=\" + this.options.scale;\n        rez += \",maximum-scale=\" + this.options.scale;\n        rez += \",user-scalable=no\";\n        return rez;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setAttribute(\"name\", \"viewport\");\n        attr.setAttribute(\"content\", this.getContent());\n    }\n\n    maybeUpdate() {\n        const desiredScale = this.getDesiredScale();\n        if (desiredScale != this.options.scale) {\n            this.updateOptions({scale: desiredScale});\n        }\n    }\n\n    onMount() {\n        window.addEventListener(\"resize\", () => this.maybeUpdate());\n    }\n}\n\nclass TemporaryMessageArea extends UI.Primitive(\"span\") {\n    getDefaultOptions() {\n        return {\n            margin: 10\n        };\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.value || \"\"}/>];\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        // TODO: nope, not like this\n        attr.setStyle(\"marginLeft\", this.options.margin + \"px\");\n        attr.setStyle(\"marginRight\", this.options.margin + \"px\");\n        return attr;\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.textElement.setValue(value);\n    }\n\n    setColor(color) {\n        this.setStyle(\"color\", color);\n    }\n\n    showMessage(message, color=\"black\", displayDuration=2000) {\n        this.setColor(color);\n        this.clear();\n        this.setValue(message);\n        if (displayDuration) {\n            this.clearValueTimeout = setTimeout(() => this.clear(), displayDuration);\n        }\n    }\n\n    clear() {\n        this.setValue(\"\");\n        if (this.clearValueTimeout) {\n            clearTimeout(this.clearValueTimeout);\n            this.clearValueTimeout = null;\n        }\n    }\n}\n\n// Just putting in a lot of methods, to try to think of an interface\nclass ScrollableMixin extends UI.Element {\n    getDesiredExcessHeightTop() {\n        return 600;\n    }\n\n    getDesiredExcessHeightBottom() {\n        return 600;\n    }\n\n    getHeightScrollPercent() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        if (scrollHeight === height) {\n            return 0;\n        }\n        return this.node.scrollTop / (scrollHeight - height);\n    }\n\n    getExcessTop() {\n        return this.node.scrollTop;\n    }\n\n    getExcessBottom() {\n        let scrollHeight = this.node.scrollHeight;\n        let height = this.node.clientHeight;\n        return scrollHeight - height - this.node.scrollTop;\n    }\n\n    haveExcessTop() {\n        return this.getExcessTop() > this.getDesiredExcessHeightTop();\n    }\n\n    haveExcessBottom() {\n        return this.getExcessBottom() > this.getDesiredExcessHeightBottom();\n    }\n\n    popChildTop() {\n        this.eraseChildAtIndex(0);\n    }\n\n    popChildBottom() {\n        this.eraseChildAtIndex(this.children.length - 1);\n    }\n\n    removeExcessTop() {\n        while (this.haveExcessTop()) {\n            this.popChildTop();\n        }\n    }\n\n    removeExcessBottom() {\n        while (this.haveExcessBottom()) {\n            this.popChildBottom();\n        }\n    }\n\n    pushChildTop(element, removeExcessBottom=true) {\n        if (removeExcessBottom) {\n            this.removeExcessBottom();\n        }\n        this.insertChild(element, 0);\n    }\n\n    pushChildBottom(element, removeExcessTop=true) {\n        if (removeExcessTop) {\n            this.removeExcessTop();\n        }\n        this.appendChild(element);\n        this.appendChild(element);\n    }\n\n    saveScrollPosition() {\n        // If at top or bottom, save that\n        // If anywhere in the middle, save the offset of the first child with a positive offset, and keep that constant\n        this.options.scrollTop = this.node.scrollTop;\n        let maxScrollTop = this.node.scrollHeight - this.node.clientHeight;\n        this.options.scrollInfo = {\n            scrollAtTop: (this.options.scrollTop === 0),\n            scrollAtBottom: (this.options.scrollTop === maxScrollTop),\n            // visibleChildrenOffsets: {}\n        };\n    }\n\n    applyScrollPosition() {\n        this.node.scrollTop = this.options.scrollTop || this.node.scrollTop;\n    }\n\n    scrollToHeight(height) {\n        this.node.scrollTop = height;\n    }\n\n    scrollToTop() {\n        this.scrollToHeight(0);\n    }\n\n    scrollToBottom() {\n        this.scrollToHeight(this.node.scrollHeight);\n    }\n};\n\n//TODO: this class would need some binary searches\nclass InfiniteScrollable extends ScrollableMixin {\n    setOptions(options) {\n        options = Object.assign({\n            entries: [],\n            entryComparator: (a, b) => {\n                return a.id - b.id;\n            },\n            firstRenderedEntry: 0,\n            lastRenderedEntry: -1,\n        }, options);\n        super.setOptions(options);\n        // TODO: TEMP for testing\n        this.options.children = [];\n        if (this.options.staticTop) {\n            this.options.children.push(this.options.staticTop);\n        }\n        for (let entry of this.options.entries) {\n            this.options.children.push(this.renderEntry(entry));\n        }\n    }\n\n    getFirstVisibleIndex() {\n    }\n\n    getLastVisibleIndex() {\n    }\n\n    renderEntry(entry) {\n        if (this.options.entryRenderer) {\n            return this.options.entryRenderer(entry);\n        } else {\n            console.error(\"You need to pass option entryRenderer or overwrite the renderEntry method\");\n        }\n    }\n\n    pushEntry(entry) {\n        this.insertEntry(entry, this.options.entries.length);\n    }\n\n    insertEntry(entry, index) {\n        let entries = this.options.entries;\n        if (index == null) {\n            index = 0;\n            while (index < entries.length &&\n                this.options.entryComparator(entries[index], entry) <= 0) {\n                index++;\n            }\n        }\n        entries.splice(index, 0, entry);\n\n        // Adjust to the children\n        if (this.options.staticTop) {\n            index += 1;\n        }\n\n        // TODO: only if in the rendered range, insert in options.children;\n        let uiElement = this.renderEntry(entry);\n        this.insertChild(uiElement, index);\n    }\n}\n\nclass TimePassedSpan extends UI.Primitive(\"span\") {\n    render() {\n        return this.getTimeDeltaDisplay(this.options.timeStamp);\n    }\n\n    getDefaultOptions() {\n        return {\n            style: {\n                color: \"#aaa\"\n            }\n        }\n    }\n\n    getTimeDeltaDisplay(timeStamp) {\n        let timeNow = Date.now();\n        let timeDelta = parseInt((timeNow - timeStamp * 1000) / 1000);\n        let timeUnitsInSeconds = [31556926, 2629743, 604800, 86400, 3600, 60];\n        let timeUnits = [\"year\", \"month\", \"week\", \"day\", \"hour\", \"minute\"];\n        if (timeDelta < 0) {\n            timeDelta = 0;\n        }\n        for (let i = 0; i < timeUnits.length; i += 1) {\n            let value = parseInt(timeDelta / timeUnitsInSeconds[i]);\n            if (timeUnitsInSeconds[i] <= timeDelta) {\n                return value + \" \" + timeUnits[i] + (value > 1 ? \"s\" : \"\") + \" ago\";\n            }\n        }\n        return \"Few seconds ago\";\n    }\n\n    static addIntervalListener(callback) {\n        if (!this.updateFunction) {\n            this.TIME_DISPATCHER = new Dispatchable();\n            this.updateFunction = setInterval(() => {\n                this.TIME_DISPATCHER.dispatch(\"updateTimeValue\");\n            }, 5000);\n        }\n        return this.TIME_DISPATCHER.addListener(\"updateTimeValue\", callback);\n    }\n\n    onMount() {\n        this._updateListener = this.constructor.addIntervalListener(() => {\n            this.redraw();\n        })\n    }\n\n    onUnmount() {\n        this._updateListener && this._updateListener.remove();\n    }\n};\n\n\nexport {Link, Panel, Image, RawHTML, TimePassedSpan, TemporaryMessageArea, SlideBar, VerticalSlideBar,\n    HorizontalSlideBar, ScrollableMixin, InfiniteScrollable, ViewportMeta};","import {StyleSheet, styleRule} from \"../Style\";\n\nclass InputStyle extends StyleSheet {\n    @styleRule\n    inputElement = {\n        transition: \"border-color ease-in-out .15s, box-shadow ease-in-out .15s\",\n        padding: \"0.4em 0.54em\",\n        border: \"1px solid #ccc\",\n        borderRadius: \"4px\",\n        fontSize: \"90%\",\n        \":focus\": {\n            outline: \"0\",\n            borderColor: \"#66afe9\",\n            boxShadow: \"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6)\",\n        },\n    };\n\n    @styleRule\n    checkboxInput = {\n        marginLeft: \"0.2em\",\n        display: \"inline-block\",\n        width: \"initial !important\",\n        marginRight:\"0.5em\",\n        marginBottom: \"-.1em\",\n        height: \"1em\",\n    };\n\n    @styleRule\n    select = {\n        height: \"2.12em\",\n    };\n}\n\nexport {InputStyle};\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {InputStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n\n@registerStyle(InputStyle)\nclass InputableElement extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.inputElement);\n    }\n}\n\n\nclass Input extends UI.Primitive(InputableElement, \"input\") {\n    extraNodeAttributes(attr) {\n        let type = this.getInputType();\n        if (type) {\n            attr.setAttribute(\"type\", type);\n        }\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.setValue(this.options.value);\n        }\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    setValue(newValue) {\n        this.node.value = newValue;\n    }\n\n    getInputType() {\n        // Must be overloaded\n        return null;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\nInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"autocomplete\"],\n    [\"autofocus\", {noValue: true}],\n    [\"formaction\"],\n    [\"maxLength\", {domName: \"maxlength\"}],\n    [\"minLength\", {domName: \"minlength\"}],\n    [\"name\"],\n    [\"placeholder\"],\n    [\"readonly\"],\n    [\"required\"],\n    [\"value\"],\n]);\n\n\nclass SubmitInput extends Input {\n    getInputType() {\n        return \"submit\";\n    }\n}\nSubmitInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"formenctype\"],\n    [\"formmethod\"],\n    [\"formnovalidate\"],\n    [\"formtarget\"]\n]);\n\n\nclass TextInput extends Input {\n    getInputType() {\n        return \"text\";\n    }\n}\n\n\nclass NumberInput extends Input {\n    getInputType() {\n        return \"number\";\n    }\n\n    getValue() {\n        let val = super.getValue();\n        return parseInt(val) || parseFloat(val);\n    }\n}\nNumberInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"min\"],\n    [\"max\"],\n    [\"step\"],\n]);\n\n\nclass EmailInput extends Input {\n    getInputType() {\n        return \"email\";\n    }\n}\n\n\nclass PasswordInput extends Input {\n    getInputType() {\n        return \"password\";\n    }\n}\n\n\nclass FileInput extends Input {\n    getInputType() {\n        return \"file\";\n    }\n\n    getFiles() {\n        return this.node.files;\n    }\n\n    getFile() {\n        // TODO: this is valid only if multipleFiles is false\n        return this.getFiles()[0];\n    }\n\n    getAsFormData() {\n        let formData = new FormData();\n        for (let file of this.getFiles()) {\n            formData.append(file.name, file);\n        }\n        return formData;\n    }\n}\nFileInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"multipleFiles\", {domName: \"multiple\", noValue: true}],\n    [\"fileTypes\", {domName: \"accept\"}],\n]);\n\n\nclass CheckboxInput extends Input {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.checkboxInput);\n    }\n\n    getInputType() {\n        return \"checkbox\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nCheckboxInput.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"checked\", {noValue: true}]\n]);\n\n\nclass RadioInput extends CheckboxInput {\n    getInputType() {\n        return \"radio\";\n    }\n\n    getValue() {\n        return this.node.checked;\n    }\n\n    setValue(newValue) {\n        this.node.checked = newValue;\n    }\n}\nRadioInput.domAttributesMap = CreateNodeAttributesMap(CheckboxInput.domAttributesMap, [\n    [\"name\"]\n]);\n\n\nclass TextArea extends UI.Primitive(InputableElement, \"textarea\") {\n    applyNodeAttributes() {\n        super.applyNodeAttributes();\n        this.node.readOnly = this.options.readOnly || false;\n    }\n\n    setReadOnly(value) {\n        this.options.readOnly = value;\n        this.node.readOnly = value;\n    }\n\n    getValue() {\n        return this.node.value;\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.hasOwnProperty(\"value\")) {\n            this.node.value = this.options.value + \"\";\n        }\n    }\n\n    setValue(value) {\n        this.options.value = value;\n        this.node.value = value;\n    }\n\n    onInput(callback) {\n        this.addNodeListener(\"input change\", callback);\n    }\n\n    onKeyUp(callback) {\n        this.addNodeListener(\"keyup\", callback);\n    }\n}\n\n\nclass Select extends UI.Primitive(InputableElement, \"select\") {\n    render() {\n        this.givenOptions = this.options.options || [];\n        let selectOptions = [];\n\n        for (let i = 0; i < this.givenOptions.length; i += 1) {\n            let options = {\n                key: i\n            };\n            if (this.givenOptions[i] == this.options.selected) {\n                options.selected = true;\n            }\n            selectOptions.push(<option {...options}>{this.givenOptions[i].toString()}</option>);\n        }\n\n        return selectOptions;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.select);\n    }\n\n    get() {\n        let selectedIndex = this.getIndex();\n        return this.givenOptions[selectedIndex];\n    }\n\n    set(value) {\n        for (let i = 0; i < this.givenOptions.length; i++) {\n            if (this.givenOptions[i] === value) {\n                this.setIndex(i);\n                return;\n            }\n        }\n        console.error(\"Can't set the select option \", value, \"\\nAvailable options: \", this.givenOptions);\n    }\n\n    getIndex() {\n        return this.node.selectedIndex;\n    }\n\n    setIndex(index) {\n        this.node.selectedIndex = index;\n        this.options.selected = this.givenOptions[index];\n    }\n\n    redraw() {\n        super.redraw();\n        if (this.options.selected) {\n            this.set(this.options.selected);\n        }\n    }\n}\n\nexport {InputStyle, Input, SubmitInput, TextInput, NumberInput, EmailInput, PasswordInput, FileInput,\n        CheckboxInput, RadioInput, TextArea, Select};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FormStyle extends StyleSheet {\n    @styleRule\n    form = {\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    formGroup = {\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    formField = {\n        \">label\": {\n            width: \"100%\",\n        },\n        display: \"block\",\n        padding: \"6px 0px\",\n        lineHeight: \"1.42857143\",\n        color: \"#555\",\n        maxWidth: \"600px\",\n        margin: \"0 auto\",\n        \"[disabled]\": {\n            opacity: \"1\",\n            cursor: \"not-allowed\",\n        },\n        \"[readonly]\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    sameLine = {\n        \">label>*:nth-child(1)\": {\n            display: \"inline-block\",\n            textAlign: \"right\",\n            paddingRight: \"1em\",\n            width: \"30%\",\n            verticalAlign: \"middle\",\n        },\n        \">label>*:nth-child(2)\": {\n            display: \"inline-block\",\n            width: \"70%\",\n            verticalAlign: \"middle\",\n        },\n    };\n\n    separatedLineInputStyle = {\n        marginRight: \"0.5em\",\n        width: \"100%\",\n        height: \"2.4em\",\n    };\n\n    @styleRule\n    separatedLine = {\n        padding: \"6px 10px\",\n        \">label>*:nth-child(1)\": {\n            verticalAlign: \"sub\",\n        },\n        \">label>input\": this.separatedLineInputStyle,\n        \">label>select\": this.separatedLineInputStyle,\n        \">label>textarea\": this.separatedLineInputStyle,\n        \">label>input[type='checkbox']\": {\n            marginLeft: \"10px\",\n            verticalAlign: \"middle\",\n        }\n    };\n\n    @styleRule\n    hasError = {\n        color: \"#a94442\",\n    };\n}\n\nexport {FormStyle};\n","import {FormStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FormStyle)\nclass Form extends UI.Primitive(\"form\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.form);\n    }\n\n    onMount() {\n        // Form elements by default refresh the page when a button inside them is clicked, so we prevent that.\n        this.addNodeListener(\"submit\", (event) => event.preventDefault());\n    }\n}\n\n@registerStyle(FormStyle)\nclass FormGroup extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formGroup);\n    }\n\n    setError(errorMessage) {\n        this.errorField.node.textContent = errorMessage;\n        this.addClass(this.styleSheet.hasError);\n    }\n\n    removeError() {\n        this.errorField.node.textContent = \"\";\n        this.removeClass(this.styleSheet.hasError);\n    }\n\n    getErrorField() {\n        return <span ref=\"errorField\" style={{float: \"right\"}}></span>;\n    }\n\n    getChildrenToRender() {\n        return [this.render(), this.getErrorField()];\n    }\n}\n\n\nclass FormField extends FormGroup {\n    inline() {\n        return !(this.options.inline === false ||\n                 (this.parent && this.parent.options && this.parent.options.inline === false));\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.formField);\n        if (this.inline()) {\n            attr.addClass(this.styleSheet.sameLine);\n        } else {\n            attr.addClass(this.styleSheet.separatedLine);\n        }\n    }\n\n    getLabel() {\n        if (this.options.label) {\n            return <strong>{this.options.label}</strong>;\n        }\n        return null;\n    }\n\n    render() {\n        if (this.options.contentFirst) {\n            return [<label>{[super.render(),this.getLabel()]}</label>];\n        } else {\n            return [<label>{[this.getLabel(),super.render()]}</label>];\n        }\n    }\n}\n\nexport {Form, FormGroup, FormField};\n","import {NodeAttributes} from \"../NodeAttributes\";\n\n// Setting these attributes as styles in mozilla has no effect.\n// To maintain compatibility between moz and webkit, whenever\n// one of these attributes is set as a style, it is also set as a\n// node attribute.\nconst MozStyleElements = new Set([\"width\", \"height\", \"rx\", \"ry\", \"cx\", \"cy\", \"x\", \"y\"]);\n\nexport class SVGNodeAttributes extends NodeAttributes {\n    fixMozAttributes(node) {\n        if (this.hasOwnProperty(\"style\")) {\n            for (let attributeName of MozStyleElements.values()) {\n                if (this.style.hasOwnProperty(attributeName) && !this.hasOwnProperty(attributeName)) {\n                    this.setAttribute(attributeName, this.style[attributeName], node);\n                }\n            }\n        }\n    }\n\n    setStyle(attributeName, value, node) {\n        super.setStyle(attributeName, value, node);\n        if (MozStyleElements.has(attributeName)) {\n            this.setAttribute(attributeName, value, node);\n        }\n    }\n\n    applyClassName(node) {\n        // SVG elements have a different API for setting the className than regular DOM nodes\n        if (this.className) {\n            node.setAttribute(\"class\", String(this.className));\n        } else {\n            node.removeAttribute(\"class\");\n        }\n    }\n\n    apply(node, attributesMap) {\n        this.transform = this.transform || this.translate;\n        super.apply(node, attributesMap);\n        this.fixMozAttributes(node);\n    }\n}\n","import {UI} from \"../UIBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {uniqueId} from \"../../base/Utils\";\nimport {SVGNodeAttributes} from \"./SVGNodeAttributes\";\nimport {Device} from \"../../base/Device\";\nimport {applyDebugFlags} from \"../Debug\";\n\n\nlet SVG = {};\n\nSVG.Element = class SVGElement extends UI.Element {\n    createNode() {\n        this.node = document.createElementNS(\"http://www.w3.org/2000/svg\", this.getNodeType());\n        applyDebugFlags(this);\n        return this.node;\n    }\n\n    getScreenCoordinatedForPoint(point) {\n        const node = this.node;\n        // TODO: this is a good argument to always keep a reference to the Stem element in the nodes\n        const svgNode = node.ownerSVGElement || node;\n\n        if (svgNode.createSVGPoint) {\n            // Using native SVG transformations\n            // See https://msdn.microsoft.com/en-us/library/hh535760(v=vs.85).aspx\n            let svgPoint = svgNode.createSVGPoint();\n            svgPoint.x = point.x;\n            svgPoint.y = point.y;\n            return svgPoint.matrixTransform(node.getScreenCTM().inverse());\n        }\n\n        const rect = this.getBoundingClientRect();\n        return {\n        \tx: point.x - rect.left - node.clientLeft,\n        \ty: point.y - rect.top - node.clientTop,\n        };\n    }\n\n    getMouseCoordinatesForEvent(event=window.event) {\n        return this.getScreenCoordinatedForPoint({x: Device.getEventX(event), y: Device.getEventY(event)});\n    }\n\n    saveState() {\n        let state = {};\n        state.options = Object.assign({}, this.options);\n        return state;\n    }\n\n    setState(state) {\n        this.setOptions(state.options);\n    }\n\n    getOptionsAsNodeAttributes() {\n        let attr = this.options;\n        attr.__proto__ = SVGNodeAttributes.prototype;\n        return attr;\n    }\n\n    getNodeAttributes(returnCopy=true) {\n        if (returnCopy) {\n            return new SVGNodeAttributes(this.options);\n        } else {\n            return this.getOptionsAsNodeAttributes();\n        }\n    }\n\n    translate(x=0, y=0) {\n        this.options.translate = \"translate(\" + x + \",\" + y + \")\";\n    }\n\n    getHashCode() {\n        return uniqueId(this);\n    }\n\n    //TODO(@all) : getBoundingClientRect is unreliable, reimplement it.\n    getBoundingClientRect() {\n        let element = this.node;\n        let x = 0;\n        let y = 0;\n        while(element && element !== document.body) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n            element = element.offsetParent || element.parentNode;\n        }\n        if (element) {\n            x -= element.scrollLeft;\n            y -= element.scrollTop;\n        }\n        let pos = this.node.getBoundingClientRect();\n        return {\n            top: pos.top - y,\n            left: pos.left - x,\n            width: pos.width,\n            bottom: pos.bottom - y,\n            height: pos.height,\n            right: pos.right - x\n        };\n    }\n\n    getBBox() {\n        return this.node.getBBox();\n    }\n\n    getHeight() {\n        return this.getBoundingClientRect().height;\n    }\n\n    getWidth() {\n        return this.getBoundingClientRect().width;\n    }\n\n    toFront() {\n        const parentNode = this.node && this.node.parentElement;\n        if (parentNode) {\n            parentNode.removeChild(this.node);\n            parentNode.appendChild(this.node);\n        }\n    }\n\n    toBack() {\n    }\n\n    setOpacity(newOpacity) {\n        this.options.opacity = newOpacity;\n        if (this.node) {\n            this.node.setAttribute(\"opacity\", newOpacity);\n        }\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"stroke\", color);\n            this.node.setAttribute(\"fill\", color)\n        }\n    }\n\n    remove() {\n    }\n\n    getSvg() {\n        return this.parent.getSvg();\n    }\n};\n\nSVG.Element.domAttributesMap = CreateNodeAttributesMap(UI.Element.domAttributesMap, [\n    [\"fill\"],\n    [\"height\"],\n    [\"opacity\"],\n    [\"stroke\"],\n    [\"strokeWidth\", {domName: \"stroke-width\"}],\n    [\"clipPath\", {domName: \"clip-path\"}],\n    [\"transform\"],\n    [\"width\"],\n    [\"cx\"],\n    [\"cy\"],\n    [\"rx\"],\n    [\"ry\"],\n    [\"x\"],\n    [\"y\"],\n    [\"x1\"],\n    [\"y1\"],\n    [\"x2\"],\n    [\"y2\"],\n    [\"offset\"],\n    [\"stopColor\", {domName: \"stop-color\"}],\n    [\"strokeDasharray\", {domName: \"stroke-dasharray\"}],\n    [\"strokeLinecap\", {domName: \"stroke-linecap\"}],\n    [\"viewBox\", {domName: \"viewBox\"}],\n]);\n\nexport {SVG};\n","import {SVG} from \"./SVGBase\";\nimport {CreateNodeAttributesMap} from \"../NodeAttributes\";\nimport {UI} from \"../UIBase\";\n\nSVG.Text = class SVGText extends SVG.Element {\n    getNodeType() {\n        return \"text\";\n    }\n\n    getDefaultOptions() {\n        return {\n            text: \"\",\n            fontSize: \"15px\",\n            color: \"black\",\n            dy: \"0.35em\",\n            textAnchor: \"middle\",\n            selectable: false\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        // TODO: For some reason, still selectable in mozilla...\n        if (!this.options.selectable) {\n            attr.setStyle(\"-webkit-user-select\", \"none\");\n            attr.setStyle(\"-khtml-user-select\", \"none\");\n            attr.setStyle(\"-moz-user-select\", \"none\");\n            attr.setStyle(\"-ms-user-select\", \"none\");\n            attr.setStyle(\"user-select\", \"none\");\n        }\n    }\n\n    render() {\n        return [<UI.TextElement ref=\"textElement\" value={this.options.text + \"\"} />];\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    setText(text) {\n        this.options.text = text;\n        this.textElement.setValue(text + \"\");\n    }\n\n    getText() {\n        return this.options.text;\n    }\n\n    setPosition(x, y) {\n        this.setX(x);\n        this.setY(y);\n    }\n\n    getColor() {\n        return this.options.color;\n    }\n\n    setColor(color, fillOnly=false) {\n        this.options.color = color;\n        if (this.node) {\n            this.node.setAttribute(\"fill\", color);\n            if (!fillOnly) {\n                this.node.setAttribute(\"stroke\", color);\n            }\n        }\n    }\n};\n\nSVG.Text.domAttributesMap = CreateNodeAttributesMap(SVG.Element.domAttributesMap, [\n    [\"dx\"],\n    [\"dy\"],\n    [\"fontFamily\", {domName: \"font-family\"}],\n    [\"fontSize\", {domName: \"font-size\"}],\n    [\"textAnchor\", {domName: \"text-anchor\"}]\n]);","// TODO: this whole file is mosly here to not break compatibility with pre-Stem code, need refactoring\nexport var EPS = 1e-6;\n\n// Check if a value is equal to zero. Use epsilon check.\nexport var isZero = function (val, epsilon=EPS) {\n    return (Math.abs(val) < epsilon);\n};\n\n// Simulate C/C++ rand() function\nexport var rand = function (mod) {\n    return Math.floor(Math.random() * mod);\n};\n\nexport var equal = function (val1, val2, epsilon=EPS) {\n    return isZero(val1-val2, epsilon);\n};\n\nexport var equalPoints = function (p1, p2, epsilon=EPS) {\n    return isZero(p1.x - p2.x, epsilon) && isZero(p1.y - p2.y, epsilon);\n};\n\n// Compute square of a number\nexport var sqr = function (x) {\n    return x * x;\n};\n\n// Compute the distance between 2 points\nexport var distance = function (p1, p2) {\n    return Math.sqrt(sqr(p1.x - p2.x) + sqr(p1.y - p2.y));\n};\n\nexport var signedDistancePointLine = function (point, line) {\n    return (line.a * point.x + line.b * point.y + line.c) / Math.sqrt(sqr(line.a) + sqr(line.b));\n};\n\nexport var distancePointLine = function (point, line) {\n    return Math.abs(signedDistancePointLine(point, line));\n};\n\nexport var pointOnSegment = function (point, segmentStart, segmentEnd, epsilon) {\n    epsilon = epsilon || EPS;\n    return Math.abs(distance(point, segmentStart) + distance(point, segmentEnd) -\n        distance(segmentStart, segmentEnd)) <= epsilon;\n};\n\nexport var perpendicularFoot = function (point, line) {\n    var distance = (line.a * point.x + line.b * point.y + line.c) / (sqr(line.a) + sqr(line.b));\n    return {\n        x: point.x - line.a * distance,\n        y: point.y - line.b * distance\n    }\n};\n\nexport var lineEquation = function (A, B) {\n    return {\n        a: B.y - A.y,\n        b: A.x - B.x,\n        c: A.y * B.x - A.x * B.y\n    }\n};\n\n// Compute angle between 2 points in grad\nexport var angleGrad = function (p1, p2) {\n    return gradian(angleRad(p1, p2));\n};\n\n// Transform gradian in radian\nexport var radian = function (angle) {\n    return angle * Math.PI / 180;\n};\n\n// Transform radian in gradian\nexport var gradian = function (angle) {\n    return angle * 180 / Math.PI;\n};\n\n// Compute angle between 2 points in rad\nexport var angleRad = function (p1, p2) {\n    p2 = p2 || {'x': 0, 'y': 0};\n    return Math.atan2(p1.y - p2.y, p1.x - p2.x);\n};\n\n// TODO: lots of these should be methods of the point class, not global functions\nexport var crossProduct = function (p1, p2, p0) {\n    p0 = p0 || {x:0, y:0};\n    return (p1.x - p0.x) * (p2.y - p0.y) - (p1.y - p0.y) * (p2.x - p0.x);\n};\n\nexport var rotatePoint = function (point, orig, angle) {\n    // TODO: WTF, default argument value in the middle of argument list?\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: Math.cos(angle) * (point.x - orig.x) - Math.sin(angle) * (point.y - orig.y) + orig.x,\n        y: Math.sin(angle) * (point.x - orig.x) + Math.cos(angle) * (point.y - orig.y) + orig.y\n    };\n};\n\nexport var translatePoint = function (point, dx, dy) {\n    return {\n        x: point.x + dx,\n        y: point.y + dy\n    };\n};\n\nexport var scalePoint = function (point, orig, sx, sy) {\n    sy = sy || sx;\n    return {\n        x: (point.x - orig.x) * sx + orig.x,\n        y: (point.y - orig.y) * sy + orig.y\n    }\n};\n\nexport var polarToCartesian = function (angle, radius, orig) {\n    orig = orig || {x: 0, y: 0};\n    return {\n        x: radius * Math.cos(angle) + orig.x,\n        y: radius * Math.sin(angle) + orig.y\n    };\n};\n\nexport var circlesIntersection = function (circle1, circle2) {\n    var points;\n    var centerDistance;\n    // TODO(@all) These vars are magic. Find out what they do and add comments\n    var l;\n    var h;\n\n    centerDistance = distance(circle1, circle2);\n    if (centerDistance > circle1.r + circle2.r) {\n        return [];\n    }\n\n    l = (sqr(circle1.r)- sqr(circle2.r) + sqr(centerDistance)) / (2 * centerDistance);\n    if (sqr(circle1.r) - sqr(l) < 0) {\n        return [];\n    }\n\n    h = Math.sqrt(sqr(circle1.r) - sqr(l));\n\n    points = [];\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) + h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) - h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n    points.push({\n        x: l / centerDistance * (circle2.x - circle1.x) - h / centerDistance * (circle2.y - circle1.y) + circle1.x,\n        y: l / centerDistance * (circle2.y - circle1.y) + h / centerDistance * (circle2.x - circle1.x) + circle1.y\n    });\n\n    return points;\n};\n\nexport var bound = function (value, minValue, maxValue) {\n    if (value < minValue) {\n        return minValue;\n    }\n    if (value > maxValue) {\n        return maxValue;\n    }\n    return value;\n};\n\nexport var getVector = function (startPoint, endPoint) {\n    return {\n        x: endPoint.x - startPoint.x,\n        y: endPoint.y - startPoint.y\n    };\n};\n\nexport var vectorLength = function (vector) {\n    return distance({x:0, y:0}, vector);\n};\n\nexport var normalizeVector = function (vector) {\n    let len = vectorLength(vector);\n    if (Math.abs(len) < EPS) {\n        return {\n            x: 0,\n            y: 0\n        };\n    }\n    return {\n        x: vector.x / len,\n        y: vector.y / len\n    };\n};\n\nexport var scaleVector = function (vector, scalar) {\n    return {\n        x: vector.x * scalar,\n        y: vector.y * scalar\n    };\n};\n\nexport var addVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n};\n\nexport var subtractVectors = function (vector1, vector2) {\n    return {\n        x: vector1.x - vector2.x,\n        y: vector1.y - vector2.y\n    };\n};\n\nexport var triangleArea = function (point1, point2, point3) {\n    return 0.5 * Math.abs(crossProduct(point1, point2, point3));\n};\n\nexport var inRange = function (value, minValue, maxValue) {\n    if (isNaN(value)) {\n        return false;\n    }\n    return minValue <= value && value <= maxValue;\n};\n\nexport var interpolationValue = function (interpolationArray, X) {\n    var Y = 0;\n    var aux;\n    var i;\n    var j;\n\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        if (interpolationArray.x === X) {\n           return interpolationArray.y;\n        }\n    }\n    for (i = 0; i < interpolationArray.length; i += 1) {\n        aux = interpolationArray[i].y;\n        for (j = 0; j < interpolationArray.length; j += 1) {\n            if (i !== j) {\n                aux = aux * (X - interpolationArray[j].x) / (interpolationArray[i].x - interpolationArray[j].x);\n            }\n        }\n        Y += aux;\n    }\n\n    return Y;\n};\n","import {SVG} from \"./SVGBase\";\nimport * as math from \"../../math\";\n\nSVG.SVGRoot = class SVGRoot extends SVG.Element {\n    getNodeType() {\n        return \"svg\";\n    }\n\n    getSvg() {\n        return this;\n    }\n};\n\nSVG.RawSVG = class RawSVG extends SVG.SVGRoot {\n    redraw() {\n        super.redraw();\n        this.node.innerHTML = this.options.innerHTML;\n    }\n};\n\nSVG.Group = class SVGGroup extends SVG.Element {\n    getNodeType() {\n        return \"g\";\n    }\n\n    setColor(color) {\n        for (let i = 0; i < this.children.length; i += 1) {\n            this.children[i].setColor(color);\n        }\n    }\n};\n\nSVG.Defs = class SVGDefs extends SVG.Element {\n    getNodeType() {\n        return \"defs\";\n    }\n};\n\nSVG.ClipPath = class ClipPath extends SVG.Element {\n    getNodeType() {\n        return \"clipPath\";\n    }\n};\n\nSVG.Path = class SVGPath extends SVG.Element {\n    getNodeType() {\n        return \"path\";\n    }\n\n    getDefaultOptions() {\n        return {\n            d: \"\"\n        }\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPath());\n        return attr;\n    }\n\n    getPath() {\n        return this.options.d;\n    }\n\n    setPath(newPath) {\n        this.options.d = newPath;\n        this.node.setAttribute(\"d\", this.options.d);\n    }\n\n    getLength() {\n        return this.node.getTotalLength();\n    }\n\n    getPointAtLength(len) {\n        return this.node.getPointAtLength(len);\n    }\n\n    getPointAtLengthWithAngle(len) {\n        let totalLength = this.getLength();\n        let epsilon;\n        if (totalLength <= 1) {\n            epsilon = totalLength / 1000;\n        } else {\n            epsilon = Math.min(totalLength / 1000, Math.log(totalLength), 1);\n        }\n        let p1 = this.getPointAtLength(len);\n        let p2 = this.getPointAtLength(Math.min(len + epsilon, totalLength));\n        let p3 = this.getPointAtLength(Math.max(len - epsilon, 0));\n        return {\n            x: p1.x,\n            y: p1.y,\n            alpha: 180 * Math.atan2(p3.y - p2.y, p3.x - p2.x) / Math.PI\n        };\n    }\n};\n\nSVG.Circle = class SVGCircle extends SVG.Element {\n    getNodeType() {\n        return \"circle\";\n    }\n\n    getDefaultOptions() {\n        return {\n            radius: 0,\n            center: {x: 0, y: 0}\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"r\", this.options.radius);\n        attr.setAttribute(\"cx\", this.options.center.x);\n        attr.setAttribute(\"cy\", this.options.center.y);\n        return attr;\n    }\n\n    getRadius() {\n        return this.options.radius;\n    }\n\n    setRadius(radius) {\n        this.options.radius = radius;\n\n        this.setAttribute(\"r\", radius);\n    }\n\n    setCenter(x, y) {\n        this.options.center.x = x;\n        this.options.center.y = y;\n\n        this.setAttribute(\"cx\", x);\n        this.setAttribute(\"cy\", y);\n    }\n\n    getCenter() {\n        return this.options.center;\n    }\n\n    toPath() {\n        let r = this.options.radius;\n        let cx = this.options.center.x;\n        let cy = this.options.center.y;\n        let pathString = \"M\" + (cx - r) + \" \" + cy +            // Starting point is W\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + (-r) +    // Move to N\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + r + \" \" + r +       // Move to E\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + r +    // Move to S\n                \"a\" + r + \" \" + r + \" 0 0 1 \" + (-r) + \" \" + (-r);  // Finally, move back to W\n        return new SVG.Path({d: pathString});\n    }\n};\n\nSVG.Stop = class SVGStop extends SVG.Element {\n    getNodeType() {\n        return \"stop\";\n    }\n};\n\nSVG.RadialGradient = class SVGRadialGradient extends SVG.Element {\n    getNodeType() {\n        return \"radialGradient\";\n    }\n};\n\nSVG.LinearGradient = class SVGLinearGradient extends SVG.Element {\n    getNodeType() {\n        return \"linearGradient\";\n    }\n};\n\n//TODO Complete this class\nSVG.Ellipse = class SVGEllipse extends SVG.Element {\n    getNodeType() {\n        return \"ellipse\";\n    }\n};\n\nSVG.CircleArc = class SVGCircleArc extends SVG.Path {\n    getPath() {\n        let startAngle = this.options.startAngle;\n        let endAngle = this.options.endAngle;\n        let radius = this.options.radius;\n        let center = this.options.center;\n\n        var angleDiff = endAngle - startAngle + (endAngle < startAngle ? (2 * Math.PI) : 0);\n        var startPoint = math.polarToCartesian(startAngle, radius, center);\n        var endPoint = math.polarToCartesian(endAngle, radius, center);\n        var sweepFlag;\n        var largeArcFlag;\n\n        // Set largeArcFlag and sweepFlag\n        if (angleDiff <= Math.PI) {\n            largeArcFlag = 0;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 0;\n            } else {\n                sweepFlag = 1;\n            }\n        } else {\n            largeArcFlag = 1;\n            if (math.crossProduct(startPoint, endPoint, center) <= 0) {\n                sweepFlag = 1;\n            } else {\n                sweepFlag = 0;\n            }\n        }\n\n        return \"M \" + startPoint.x + \" \" + startPoint.y +\n            \" A \" + radius + \" \" + radius + \" 0 \" + largeArcFlag + \" \" + sweepFlag + \" \" +\n            endPoint.x + \" \" + endPoint.y;\n    }\n};\n\nSVG.Rect = class SVGRect extends SVG.Element {\n    getNodeType() {\n        return \"rect\";\n    }\n\n    getX() {\n        return this.options.x;\n    }\n\n    setX(x) {\n        this.options.x = x;\n        this.node.setAttribute(\"x\", this.options.x);\n    }\n\n    getY() {\n        return this.options.y;\n    }\n\n    setY(y) {\n        this.options.y = y;\n        this.node.setAttribute(\"y\", this.options.y);\n    }\n\n    getWidth() {\n        return this.options.width;\n    }\n\n    setWidth(width) {\n        this.options.width = width;\n        this.node.setAttribute(\"width\", this.options.width);\n    }\n\n    getHeight() {\n        return this.options.height;\n    }\n\n    setHeight(height) {\n        this.options.height = height;\n        this.node.setAttribute(\"height\", this.options.height);\n    }\n};\n\nSVG.Line = class SVGLine extends SVG.Element {\n    getNodeType() {\n        return \"line\";\n    }\n\n    getDefaultOptions() {\n        return {\n            fill: \"black\",\n            stroke: \"black\"\n        };\n    }\n\n    //TODO(@all): Make the getters for x1, y1, x2, y2\n\n    setLine(x1, y1, x2, y2) {\n        this.options.x1 = x1;\n        this.options.y1 = y1;\n        this.options.x2 = x2;\n        this.options.y2 = y2;\n\n        this.setAttribute(\"x1\", x1);\n        this.setAttribute(\"y1\", y1);\n        this.setAttribute(\"x2\", x2);\n        this.setAttribute(\"y2\", y2);\n    }\n};\n\nSVG.Polygon = class Polygon extends SVG.Path {\n    getDefaultOptions() {\n        return {\n            points: []\n        };\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setAttribute(\"d\", this.getPolygonPath());\n        return attr;\n    }\n\n    getPolygonPath() {\n        let pathString = \"\";\n        for (let i = 0; i < this.options.points.length; ++i) {\n            if (i == 0) {\n                pathString += \"M \";\n            }\n            else {\n                pathString += \"L \";\n            }\n            pathString += this.options.points[i].x + \" \" + this.options.points[i].y + \" \";\n        }\n        pathString += \"Z\";\n        return pathString;\n    }\n\n    setPoints(points) {\n        this.options.points = points;\n        this.setPath(this.getPolygonPath());\n    }\n};","import {equal} from \"../math\";\n\nclass Transition {\n    constructor(options) {\n        this.func = options.func;\n        this.context = options.context;\n        this.duration = options.duration || 0;\n        this.startTime = options.startTime || 0;\n        this.dependsOn = options.dependsOn || [];\n        this.speedFactor = 1;\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    hasDependencyOn(t) {\n        for (let transition of this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    setStartTime(time) {\n        this.startTime = time;\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        return this;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += (now - this.pauseTime);\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    forceStart() {\n        this.restart();\n        this.func(0.0, this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(1.0, this.context);\n        this.stop();\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n    }\n\n    restart() {\n        delete this.stopped;\n        return this;\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    nextStep(now=Date.now()) {\n        // Return if transition is stopped\n        if (this.isStopped()) {\n            return this;\n        }\n        this.lastT = this.getFraction(now);\n        // Return if transitions not started yet\n        if (this.lastT < 0) {\n            return this;\n        }\n        // Call the animation function\n        this.func(this.lastT, this.context);\n        // Stop the animation if it's the last step\n        if (this.lastT === 1) {\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime + this.duration / this.speedFactor;\n    }\n}\n\nclass Modifier extends Transition {\n    constructor(options) {\n        super(options);\n        this.reverseFunc = options.reverseFunc;\n        this.context = options.context;\n    }\n\n    // WTF, so basically JSON.stringify??\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   func: \" + this.func.toString() + \"\\n\"+\n                \"   reverseFunc: \" + this.reverseFunc.toString() + \"\\n\"+\n                \"}\\n\";\n    }\n\n    forceStart() {\n        this.restart();\n        this.reverseFunc(this.context);\n        return this;\n    }\n\n    forceFinish() {\n        this.func(this.context);\n        this.stop();\n        return this;\n    }\n\n    nextStep(now=Date.now()) {\n        if (this.isStopped()) {\n            return this;\n        }\n        if (now >= this.startTime) {\n            this.func(this.context);\n            this.stop();\n        }\n        return this;\n    }\n\n    getEndTime() {\n        return this.startTime;\n    }\n}\n\nclass TransitionList {\n    constructor(startTime=0) {\n        this.startTime = startTime;\n        this.speedFactor = 1;\n        this.transitions = [];\n        this.dependsOn = [];\n    }\n\n    toString() {\n        return  \"{\\n\"+\n                \"   context: \" + this.context + \"\\n\"+\n                \"   duration: \" + this.duration + \"\\n\"+\n                \"   startTime: \" + this.startTime + \"\\n\"+\n                \"   dependsOn: \" + this.dependsOn + \"\\n\"+\n                \"   transitions: [\" + (this.transitions.length ? this.transitions[0].toString() : \"\") + \" ...]\\n\"+\n                \"}\\n\";\n    }\n\n    add(transition, forceFinish=true) {\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    push(transition, forceFinish=true) {\n        transition.setStartTime(this.getLength());\n        for (let i = 0; i < transition.dependsOn.length; i += 1) {\n            if (transition.dependsOn[i].getEndTime() > transition.startTime) {\n                console.error(transition.toString() + \"\\ndepends on\\n\" + transition.dependsOn[i].toString() + \"\\n\" + \"which ends after its start!\");\n            }\n        }\n        if (forceFinish) {\n            transition.forceFinish();\n        }\n        this.transitions.push(transition);\n        return this;\n    }\n\n    getFraction(now=Date.now()) {\n        return Math.min((now - this.startTime) / this.getLength(), 1);\n    }\n\n    setStartTime(startTime) {\n        let timeDelta = startTime - this.startTime;\n        this.startTime = startTime;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.setStartTime(transition.startTime + timeDelta);\n        }\n    }\n\n    start(now=Date.now()) {\n        if (this.stopped) {\n            delete this.stopped;\n        }\n        this.setStartTime(now);\n        let functionWrapper = () => {\n            if (this.stopped) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            requestAnimationFrame(functionWrapper);\n        };\n        requestAnimationFrame(functionWrapper);\n        return this;\n    }\n\n    stop() {\n        this.stopped = true;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.stop();\n        }\n    }\n\n    isStopped() {\n        return this.stopped === true;\n    }\n\n    pause(now=Date.now()) {\n        if (!this.pauseTime) {\n            this.pauseTime = now;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].pause(now);\n            }\n        }\n        return this;\n    }\n\n    resume(now=Date.now()) {\n        if (this.pauseTime) {\n            this.startTime += now - this.pauseTime;\n            for (let i = 0; i < this.transitions.length; i += 1) {\n                this.transitions[i].resume(now);\n            }\n            this.pauseTime = 0;\n        }\n        return this;\n    }\n\n    nextStep() {\n        // Return if transition list is stopped\n        if (this.isStopped()) {\n            return;\n        }\n\n        if (this.onNewFrame) {\n            this.onNewFrame(this.getFraction());\n        }\n\n        let finished = true;\n        let stk = [];\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (!transition.isStopped()) {\n                if (transition.canAdvance()) {\n                    transition.nextStep();\n                    while (stk.length !== 0 && this.transitions[stk[stk.length - 1]].canAdvance()) {\n                        this.transitions[stk[stk.length - 1]].nextStep();\n                        stk.pop();\n                    }\n                } else {\n                    stk.push(i);\n                }\n                finished = false;\n            }\n        }\n        if (finished) {\n            this.stop();\n        }\n        return this;\n    }\n\n    setSpeedFactor(speedFactor, now=Date.now()) {\n        let ratio = speedFactor / this.speedFactor;\n        this.startTime = (this.startTime - now) / ratio + now;\n        if (this.pauseTime) {\n            this.pauseTime = (this.pauseTime - now) / ratio + now;\n        }\n        this.speedFactor = speedFactor;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            this.transitions[i].setSpeedFactor(speedFactor, now);\n        }\n        return this;\n    }\n\n    restart() {\n        delete this.stopped;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            transition.restart();\n        }\n        this.sortByEndTime();\n        return this;\n    }\n\n    getLength() {\n        return this.getEndTime() - this.startTime;\n    }\n\n    getEndTime() {\n        let endTime = 0;\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transitionEndTime = this.transitions[i].getEndTime();\n            if (transitionEndTime > endTime) {\n                endTime = transitionEndTime;\n            }\n        }\n        return endTime;\n    }\n\n    hasDependencyOn(t) {\n        for (let transition in this.dependsOn) {\n            if (transition === t) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    canAdvance() {\n        for (let i = 0; i < this.dependsOn.length; i += 1) {\n            if (!this.dependsOn[i].isStopped()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    sortByStartTime() {\n        // TODO: this comparator should be global\n        this.transitions.sort((a, b) => {\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return b.startTime - a.startTime;\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return b.getEndTime() - a.getEndTime();\n            }\n            if (a.hasDependencyOn(b)) {\n                return 1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    sortByEndTime() {\n        this.transitions.sort((a, b) => {\n            if (!equal(a.getEndTime(), b.getEndTime(), 0.001)) {\n                return a.getEndTime() - b.getEndTime();\n            }\n            //not a hack, works in all conflict cases\n            if (!equal(a.startTime, b.startTime, 0.001)) {\n                return a.startTime - b.startTime;\n            }\n            if (a.hasDependencyOn(b)) {\n                return -1;\n            }\n            if (b.hasDependencyOn(a)) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n\n    forceStart(now=Date.now()) {\n        this.sortByStartTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.startTime <= now) {\n                transition.forceStart(now);\n            }\n        }\n        return this;\n    }\n\n    forceFinish(now=Date.now(), startTime=-1) {\n        this.sortByEndTime();\n        for (let i = 0; i < this.transitions.length; i += 1) {\n            let transition = this.transitions[i];\n            if (transition.getEndTime() >= startTime) {\n                if (transition instanceof TransitionList) {\n                transition.forceFinish(now, startTime);\n                } else {\n                    if (typeof now === \"undefined\" || transition.getEndTime() < now) {\n                        transition.forceFinish();\n                    }\n                }\n            }\n        }\n        return this;\n    }\n\n    startAtPercent(startPercent, now=Date.now()) {\n        cancelAnimationFrame(this.animationFrameId);\n        this.restart();\n        // TODO(@wefgef): Buggy\n        let paused = this.pauseTime;\n        if (paused) {\n            this.resume();\n        }\n        this.forceStart(now);\n        this.setStartTime(now - startPercent * this.getLength());\n        this.forceFinish(now);\n        // TODO(@wefgef): Huge hack to deal with force transition\n        this.nextStep();\n        this.nextStep();\n        if (paused) {\n            this.pause();\n        }\n\n        let functionWrapper = () => {\n            if (this.isStopped()) {\n                return;\n            }\n            if (!this.pauseTime) {\n                this.nextStep();\n            }\n            this.animationFrameId = requestAnimationFrame(functionWrapper);\n        };\n        this.animationFrameId = requestAnimationFrame(functionWrapper);\n    }\n}\n\nexport {Transition, Modifier, TransitionList};","import {SVG} from \"./SVGBase\";\nimport {Transition} from \"../Transition\";\nimport {Color} from \"../Color\";\n\nSVG.AnimatedSVG = class AnimatedSVG extends SVG.SVGRoot {\n    onMount() {\n        if (this.options.transition) {\n            this.options.transition.setStartTime(Date.now());\n            let animationWrapper = () => {\n                if (this.options.transition.isStopped()) {\n                    if (this.options.repeat) {\n                        this.options.transition.setStartTime(Date.now());\n                        this.options.transition.restart();\n                        requestAnimationFrame(animationWrapper);\n                    }\n                    return;\n                }\n                if (!this.options.transition.pauseTime) {\n                    this.options.transition.nextStep();\n                }\n                requestAnimationFrame(animationWrapper);\n            };\n            requestAnimationFrame(animationWrapper);\n        }\n    }\n};\n\nSVG.Element.prototype.blinkTransition = function (options) {\n    let config = {\n        duration: 2000,\n        times: 2,\n        firstColor: \"grey\",\n        secondColor: \"black\",\n        executeLastStep: true,\n        startTime: 0,\n        dependsOn: []\n    };\n    Object.assign(config, options);\n    return new Transition({\n        func: (t, context) => {\n            if (t > 1 - context.interval && !context.executeLastStep) {\n                this.setColor(context.firstColor);\n            } else {\n                this.setColor(Math.floor((1 - t) / context.interval) % 2 === 1 ? context.firstColor : context.secondColor);\n            }\n        },\n        context: {\n            firstColor: config.firstColor,\n            secondColor: config.secondColor,\n            interval: 1 / (2 * config.times),\n            executeLastStep: config.executeLastStep\n        },\n        duration: config.duration,\n        startTime: config.startTime,\n        dependsOn: config.dependsOn\n    });\n};\nSVG.Element.prototype.changeOpacityTransition = function(opacity, duration, dependsOn=[], startTime=0) {\n    if (!this.options.hasOwnProperty(\"opacity\")) {\n        this.options.opacity = 1;\n    }\n    return new Transition({\n        func: (t, context) => {\n            this.setOpacity((1 - t) * context.opacity + t * opacity);\n        },\n        context: {\n            opacity: this.options.opacity\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};\nSVG.Element.prototype.changeColorTransition = function(color, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setColor(Color.interpolate(context.color, color, t));\n            },\n            context: {\n                color: this.getColor()\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\n\nSVG.Text.prototype.moveTransition = function(coords, duration, dependsOn=[], startTime=0) {\n        return new Transition({\n            func: (t, context) => {\n                this.setPosition(\n                    (1 - t) * context.x + t * coords.x,\n                    (1 - t) * context.y + t * coords.y\n                );\n            },\n            context: {\n                x: this.options.x,\n                y: this.options.y\n            },\n            duration: duration,\n            startTime: startTime,\n            dependsOn: dependsOn\n        });\n    };\nSVG.Text.prototype.changeFillTransition = function(color, duration, dependsOn=[], startTime=0) {\n    return new Transition({\n        func: (t, context) => {\n            this.setColor(Color.interpolate(context.color, color, t), true);\n        },\n        context: {\n            color: this.getColor()\n        },\n        duration: duration,\n        startTime: startTime,\n        dependsOn: dependsOn\n    });\n};","import {UI} from \"./UIBase\";\nimport {GlobalStyle} from \"./GlobalStyle\";\n\nclass Switcher extends UI.Element {\n    constructor(options) {\n        super(options);\n        this.childMap = new WeakMap();\n        this.numRedraws = 0;\n    }\n\n    getDefaultOptions() {\n        return {\n            fullHeight: false,\n            preserveScroll: true,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.fullHeight) {\n            attr.addClass(GlobalStyle.Utils.fullHeight);\n        }\n    }\n\n    copyState(element) {\n        let options = Object.assign({}, element.options, {\n            children: this.overwriteElements(this.options.children || [], element.options.children || []),\n        });\n\n        this.setOptions(options);\n\n        for (let child of this.options.children) {\n            if (child.options.active) {\n                this.activeChild = child;\n            }\n        }\n    }\n\n    render() {\n        return this.activeChild || this.options.children[0];\n    }\n\n    overwriteElements(existingElements, newElements) {\n        let keyMap = this.getElementKeyMap(existingElements) || new Map();\n        for (let i = 0; i < newElements.length; i += 1) {\n            let newChild = newElements[i];\n            let newChildKey = (newChild.options && newChild.options.key) || (\"autokey\" + i);\n            let existingChild = keyMap.get(newChildKey);\n            if (existingChild === newChild) {\n                continue;\n            }\n            if (existingChild && newChild.canOverwrite(existingChild)) {\n                newElements[i] = newChild = this.overwriteChild(existingChild, newChild);\n            }\n        }\n        return newElements;\n    }\n\n    redraw() {\n        this.numRedraws += 1;\n\n        //basic things for our current node\n        this.applyNodeAttributes();\n        this.applyRef();\n\n        // This render may be required to update this.options.children\n        UI.renderingStack.push(this);\n        this.render();\n        UI.renderingStack.pop();\n\n        if (this.options.children.length == 0) {\n            return;\n        }\n\n        for (let child of this.options.children) {\n            if (this.options.lazyRender) {\n                this.getChildProperties(child).isUpToDate = false;\n                child.applyRef();\n            } else {\n                this.updateChild(child);\n            }\n        }\n\n        this.updateActiveChild(this.activeChild || this.options.children[0]);\n    }\n\n    getChildProperties(child) {\n        if (!this.childMap.has(child)) {\n            this.childMap.set(child, {\n                isMounted: !!child.node,\n                redrawIndex: -1,\n            });\n        }\n        return this.childMap.get(child);\n    }\n\n    updateChild(child) {\n        if (this.getChildProperties(child).redrawIndex < this.numRedraws) {\n            if (!child.node) {\n                child.mount(this);\n            } else {\n                child.redraw();\n            }\n            this.getChildProperties(child).redrawIndex = this.numRedraws;\n        }\n    }\n\n    appendChild(child, doMount=false) {\n        this.options.children.push(child);\n        if (doMount) {\n            child.mount(this);\n        }\n        if (this.options.children.length == 1) {\n            this.setActive(child);\n        }\n        return child;\n    }\n\n    getActive() {\n        return this.activeChild;\n    }\n\n    insertChildNodeBefore(child, nextSibling) {\n        let childProperties = this.getChildProperties(child);\n        childProperties.isMounted = true;\n        childProperties.redrawIndex = this.numRedraws;\n    }\n\n    updateActiveChild(element) {\n        while (this.node.firstChild) {\n            //TODO: would be useful here to be able to access the matching UI Element\n            this.node.removeChild(this.node.firstChild);\n        }\n\n        if (element == null) {\n            this.activeChild = null;\n            return;\n        }\n\n        this.updateChild(element);\n\n        this.node.appendChild(element.node);\n        this.children[0] = this.activeChild = element;\n    }\n\n    deactivateChild(child) {\n        child.dispatch(\"hide\");\n        child.dispatch(\"setActive\", false);\n        if (this.options.preserveScroll) {\n            this.getChildProperties(child).scrollTop = this.node.scrollTop;\n        }\n    }\n\n    activateChild(child) {\n        child.dispatch(\"setActive\", true);\n        child.dispatch(\"show\");\n        if (this.options.preserveScroll) {\n            this.node.scrollTop = this.getChildProperties(child).scrollTop || 0;\n        }\n    }\n\n    setActive(element) {\n        if (this.activeChild === element) {\n            return;\n        }\n        if (this.activeChild) {\n            this.deactivateChild(this.activeChild);\n        }\n        this.updateActiveChild(element);\n        if (this.activeChild) {\n            this.activateChild(this.activeChild);\n        }\n    }\n\n    hasChild(element) {\n        return this.childMap.has(element);\n    }\n\n    onMount() {\n        this.addListener(\"shouldRedrawChild\", (event) => {\n            if (event.child.isInDocument()) {\n                event.child.redraw();\n            } else {\n                this.getChildProperties(event.child).isUpToDate = false;\n            }\n        });\n    }\n}\n\nexport {Switcher};\n","import {UI} from \"./UIBase\";\nimport {Switcher} from \"./Switcher\";\nimport {Dispatcher} from \"../base/Dispatcher\";\nimport {PageTitleManager} from \"../base/PageTitleManager\";\nimport {unwrapArray} from \"../base/Utils\";\n\nexport class Router extends Switcher {\n    static parseURL(path=location.pathname) {\n        if (!Array.isArray(path)) {\n            path = path.split(\"/\");\n        }\n        return path.filter(str => str != \"\");\n    }\n\n    static joinURLParts(urlParts) {\n        if (urlParts.length) {\n            return \"/\" + urlParts.join(\"/\") + \"/\";\n        } else {\n            return \"/\";\n        }\n    }\n\n    static changeURL(url, replaceHistory=false) {\n        if (Array.isArray(url)) {\n            url = this.joinURLParts(url);\n        }\n\n        if (url === window.location.pathname) {\n            return;\n        }\n        const historyArgs = [{}, PageTitleManager.getTitle(), url];\n        if (replaceHistory) {\n            window.history.replaceState(...historyArgs);\n        } else {\n            window.history.pushState(...historyArgs);\n        }\n\n        this.updateURL();\n    }\n\n    static updateURL() {\n        this.Global.setURL(this.parseURL());\n    }\n\n    static setGlobalRouter(router) {\n        this.Global = router;\n        window.onpopstate = () => {\n            this.updateURL();\n            Dispatcher.Global.dispatch(\"externalURLChange\");\n        };\n\n        this.updateURL();\n    }\n\n    clearCache() {\n        this.getRoutes().clearCache();\n    }\n\n    // TODO: should be named getRootRoute() :)\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getPageNotFound() {\n        const element = UI.createElement(\"h1\", {children: [\"Can't find url, make sure you typed it correctly\"]});\n        element.pageTitle = \"Page not found\";\n        return element;\n    }\n\n    getPageToRender(urlParts) {\n        return this.getRoutes().getPage(urlParts) || this.getPageNotFound();\n    }\n\n    setURL(urlParts) {\n        urlParts = unwrapArray(urlParts);\n\n        const page = this.getPageToRender(urlParts);\n\n        const activePage = this.getActive();\n\n        if (activePage !== page) {\n            activePage && activePage.dispatch(\"urlExit\");\n            this.setActive(page);\n            page.dispatch(\"urlEnter\");\n        }\n\n        if (this === this.constructor.Global) {\n            PageTitleManager.setTitle(page.pageTitle);\n        }\n\n        this.dispatch(\"change\", urlParts, page, activePage);\n    }\n\n    addChangeListener(callback) {\n        return this.addListener(\"change\", callback);\n    }\n\n    onMount() {\n        if (!Router.Global) {\n            this.constructor.setGlobalRouter(this);\n        }\n    }\n}\n\nexport class Route {\n    static ARG_KEY = \"%s\";\n    cachedPages = new Map();\n\n    constructor(expr, pageGenerator, subroutes=[], options={}) {\n        this.expr = (expr instanceof Array) ? expr : [expr];\n        this.pageGenerator = pageGenerator;\n        this.subroutes = unwrapArray(subroutes);\n        if (typeof options === \"string\") {\n            options = {title: options}\n        }\n        this.options = options;\n        this.cachedPages = new Map();\n    }\n\n    clearCache() {\n        this.cachedPages.clear();\n        for (const subroute of this.subroutes) {\n            subroute.clearCache();\n        }\n    }\n\n    matches(urlParts) {\n        if (urlParts.length < this.expr.length) {\n            return null;\n        }\n        let args = [];\n        for (let i = 0; i < this.expr.length; i += 1) {\n            const isArg = this.expr[i] === this.constructor.ARG_KEY;\n            if (urlParts[i] != this.expr[i] && !isArg) {\n                return null;\n            }\n            if (isArg) {\n                args.push(urlParts[i]);\n            }\n        }\n        return {\n            args: args,\n            urlParts: urlParts.slice(this.expr.length)\n        }\n    }\n\n    getPageTitle() {\n        return this.options.title;\n    }\n\n    generatePage(...argsArray) {\n        if (!this.pageGenerator) {\n            return null;\n        }\n\n        const serializedArgs = argsArray.toString();\n        if (!this.cachedPages.has(serializedArgs)) {\n            const pageGenerator = this.pageGenerator;\n            const args = unwrapArray(argsArray);\n            const generatorArgs = {args, argsArray};\n            const page = (pageGenerator.prototype instanceof UI.Element) ? new pageGenerator(generatorArgs) : pageGenerator(generatorArgs);\n            if (!page.pageTitle) {\n                const myPageTitle = this.getPageTitle();\n                if (myPageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n            }\n            this.cachedPages.set(serializedArgs, page);\n        }\n        return this.cachedPages.get(serializedArgs);\n    }\n\n    matchesOwnNode(urlParts) {\n        return urlParts.length === 0;\n    }\n\n    getPage(urlParts, router, ...argsArray) {\n        if (this.matchesOwnNode(urlParts)) {\n            return this.generatePage(...argsArray);\n        }\n        for (const subroute of this.subroutes) {\n            const match = subroute.matches(urlParts);\n            if (match) {\n                if (match.args.length) {\n                    argsArray.push(match.args);\n                }\n                let page = subroute.getPage(match.urlParts, router, ...argsArray);\n                if (page && !page.pageTitle) {\n                    page.pageTitle = this.getPageTitle();\n                }\n                return page;\n            }\n        }\n    }\n}\n\nexport class TerminalRoute extends Route {\n    constructor(expr, pageGenerator, options={}) {\n        super(expr, pageGenerator, [], options);\n    }\n\n    matchesOwnNode(urlParts) {\n        return true;\n    }\n\n    getPage(urlParts, router) {\n        const page = super.getPage(...arguments);\n        setTimeout(() => {\n            page.setURL(urlParts);\n        });\n        return page;\n    }\n}\n","import {UI} from \"./UIBase\";\n\n// This is the object that will be used to translate text\nlet translationMap = null;\n\n// Keep a set of all UI Element that need to be updated when the language changes\n// Can't use a weak set here unfortunately because we need iteration\n// That's why we must make sure to remove all nodes from the set when destroying them\nUI.TranslationElements = new Set();\n\nUI.TranslationTextElement = class TranslationTextElement extends UI.TextElement {\n    constructor(value) {\n        if (arguments.length === 1) {\n            super(value);\n        } else {\n            super(\"\");\n            this.setValue(...arguments);\n        }\n    }\n\n    setValue(value) {\n        if (arguments.length > 1) {\n            this.value = Array.from(arguments);\n        } else {\n            this.value = value;\n        }\n        if (this.node) {\n            this.redraw();\n        }\n    }\n\n    evaluateSprintf(str, ...values) {\n        throw Error(\"Not yet implemented\");\n    }\n\n    evaluate(strings, ...values) {\n        if (!Array.isArray(strings)) {\n            return this.evaluateSprintf(...arguments);\n            // This means strings is a string with the sprintf pattern\n        } else {\n            // Using template literals https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Template_literals\n            if (arguments.length != strings.length) {\n                console.error(\"Invalid arguments to evaluate \", Array.from(arguments));\n            }\n            let result = strings[0];\n            for (let i = 1; i < arguments.length; i++) {\n                result += arguments[i];\n                result += strings[i];\n            }\n            return result;\n        }\n    }\n\n    getValue() {\n        let value = this.value;\n        if (Array.isArray(this.value)) {\n            value = (translationMap && translationMap.get(...value)) || this.evaluate(...value);\n        } else {\n            // TODO: if translationMap.get() returns \"\", keep, skip only if returning null\n            value = (translationMap && translationMap.get(value)) || value;\n        }\n        return value;\n    }\n\n    onMount() {\n        UI.TranslationElements.add(this);\n    }\n\n    onUnmount() {\n        UI.TranslationElements.delete(this);\n    }\n};\n\n// This method is a shorthand notation to create a new translatable text element\n// TODO: should also support being used as a string template\nUI.T = (str) => {\n    return new UI.TranslationTextElement(str);\n};\n\n// TODO @mciucu this should be wrapped in a way that previous requests that arrive later don't get processed\n// TODO: should this be done with promises?\n// Function to be called with a translation map\n// The translationMap object needs to implement .get(value) to return the translation for value\nfunction setTranslationMap(_translationMap) {\n    if (translationMap === _translationMap) {\n        return;\n    }\n    translationMap = _translationMap;\n    for (let textElement of UI.TranslationElements.values()) {\n        textElement.redraw();\n    }\n}\n\nlet languageStore = null;\n\n// This function should be called to set the language store to watch for changes\n// The languageStore argumenent needs to implement .getLocale(), addListener(\"localChange\", (language) =>{})\n// The language objects need to implement .buildTranslation(callback), where callback should be called with a translationMap\nfunction setLanguageStore(_languageStore) {\n    languageStore = _languageStore;\n\n    let currentLocale = languageStore.getLocale();\n    // If there's a default language already set, build the translation table for it\n    if (currentLocale) {\n        currentLocale.buildTranslation(setTranslationMap);\n    }\n\n    // Add a listener for whenever the language changes\n    languageStore.addListener(\"localeChange\", (language) => {\n        language.buildTranslation(setTranslationMap);\n    });\n}\n\nfunction getTranslationMap() {\n    return translationMap;\n}\n\nexport {setLanguageStore, setTranslationMap, getTranslationMap};\n","import {StyleSheet, styleRule} from \"../Style\";\nimport {enhance} from \"../Color\";\nimport {Device} from \"../../base/Device\";\n\n\n\nexport class HorizontalOverflowStyle extends StyleSheet {\n    baseColor = () =>  this.themeProperties.COLOR_PRIMARY;\n    arrowColor = () => enhance(this.baseColor(), .8);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), 1);\n    arrowHoverBackground = () => enhance(this.baseColor(), -.3);\n\n    transitionTime = .15;\n\n    arrow = {\n        zIndex: \"1\",\n        alignItems: \"center\",\n        padding: \".3em\",\n        fontSize: \"150% !important\",\n        height: \"100%\",\n        position: \"absolute\",\n        cursor: \"pointer\",\n        top: 0,\n        color: () => this.arrowColor(),\n        backgroundColor: () => this.arrowBackground(),\n        \":hover\": {\n            color: () => this.arrowHoverColor(),\n            backgroundColor: () => this.arrowHoverBackground(),\n        }\n    };\n\n    @styleRule\n    leftArrow = Object.assign({}, this.arrow, {\n        left: 0,\n        borderRight: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    rightArrow = Object.assign({}, this.arrow, {\n        right: 0,\n        borderLeft: () => \"2px solid \" + this.arrowHoverBackground(),\n    });\n\n    @styleRule\n    horizontalOverflow = {\n        position: \"relative\",\n        width: \"100%\",\n        \">:first-child\": {\n            display: \"flex\",\n        },\n        \">:last-child\": {\n            display: \"flex\",\n        },\n    };\n\n    @styleRule\n    childrenContainer = {\n        width: \"100%\",\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    swipeAnimation = {\n        transition: \"margin-left \" + this.transitionTime + \"s ease\",\n    };\n\n    @styleRule\n    hiddenArrow = {\n        display: \"none !important\",\n    };\n\n    @styleRule\n    pusherContainer = {\n        overflow: Device.isMobileDevice() ? \"auto\" : \"hidden\",\n        position: \"relative\",\n        display: \"flex\",\n        width: \"100%\",\n    }\n}\n","import {enhance} from \"../Color\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\nimport {HorizontalOverflowStyle} from \"../horizontal-overflow/Style\";\n\nclass BaseTabAreaStyle extends StyleSheet {\n    @styleRule\n    tab = {\n        userSelect: \"none\",\n        display: \"inline-block\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    activeTab = {};\n\n    @styleRule\n    nav = {\n        listStyle: \"none\",\n    };\n\n    @styleRule\n    switcher = {\n        flex: \"1\",\n        overflow: \"auto\",\n    };\n\n    @styleRule\n    tabArea = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nclass DefaultTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        marginBottom: \"-1px\",\n        textDecoration: \"none !important\",\n        marginRight: \"2px\",\n        lineHeight: \"1.42857143\",\n        border: \"1px solid transparent\",\n        borderRadius: \"4px 4px 0 0\",\n        padding: \"8px\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        \":hover\": {\n            cursor: \"pointer\",\n            backgroundColor: \"#eee\",\n            color: \"#555\",\n            border: \"1px solid #ddd\",\n            borderBottomColor: \"transparent\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: \"#555 !important\",\n        cursor: \"default !important\",\n        backgroundColor: \"#fff !important\",\n        border: \"1px solid #ddd !important\",\n        borderBottomColor: \"transparent !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        borderBottom: \"1px solid #ddd\",\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n    };\n}\n\nclass MinimalistTabAreaStyle extends BaseTabAreaStyle {\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        lineHeight: \"1.42857143\",\n        paddingTop: \"6px\",\n        paddingLeft: \"8px\",\n        paddingRight: \"8px\",\n        paddingBottom: \"4px\",\n        color: \"#666\",\n        borderBottom: \"2px solid transparent\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: \"rgba(51,122,183,1)\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        fontWeight: \"bold\",\n        color: \"rgba(51,122,183,1)\",\n        cursor: \"default !important\",\n        borderBottom: \"2px solid rgba(51,122,183,1) !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        position: \"relative\",\n        borderBottom: \"1px solid #aaa\",\n    };\n}\n\nclass FlatTabAreaStyle extends BaseTabAreaStyle {\n    transitionTime = .3;\n\n    @styleRuleInherit\n    tab = {\n        textDecoration: \"none !important\",\n        padding: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES,\n        letterSpacing: \"0.5px\",\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.4) + \"!important\",\n        fontWeight: \"bold\",\n        \":hover\": {\n            cursor: \"pointer\",\n            color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.6) + \"!important\",\n        },\n    };\n\n    @styleRuleInherit\n    activeTab = {\n        color: () => enhance(this.themeProperties.COLOR_FOREGROUND_BODY, 0.8) + \"!important\",\n        cursor: \"default !important\",\n    };\n\n    @styleRuleInherit\n    nav = {\n        whiteSpace: \"nowrap\",\n        position: \"relative\",\n        paddingTop: \"4px\",\n        backgroundColor: () => this.themeProperties.COLOR_FOREGROUND_BODY,\n    };\n\n    @styleRule\n    activeBar = {\n        height: 3,\n        backgroundColor: () => this.themeProperties.COLOR_PRIMARY,\n        position: \"absolute\",\n        left: 0,\n        bottom: 0,\n    };\n\n    @styleRule\n    activeBarAnimated = {\n        transition: `${this.transitionTime}s width, ${this.transitionTime}s left`,\n    };\n\n    @styleRule\n    activeOnRender = {\n        paddingBottom: () => this.themeProperties.FLAT_TAB_AREA_PADDING_SIDES - 3,\n        borderBottom: () => \"3px solid \" + this.themeProperties.COLOR_PRIMARY,\n    };\n}\n\nclass FlatTabAreaHorizontalOverflowStyle extends HorizontalOverflowStyle {\n    baseColor = () => this.themeProperties.COLOR_FOREGROUND_BODY;\n    arrowColor = () => enhance(this.baseColor(), .4);\n    arrowBackground = () => this.baseColor();\n    arrowHoverColor = () => enhance(this.baseColor(), .8);\n    arrowHoverBackground = () => enhance(this.baseColor(), .1);\n}\n\nexport {BaseTabAreaStyle, DefaultTabAreaStyle, MinimalistTabAreaStyle, FlatTabAreaStyle,\n    FlatTabAreaHorizontalOverflowStyle};\n","import {UI} from \"../UIBase\";\nimport {Switcher} from \"../Switcher\";\nimport {Link} from \"../UIPrimitives\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {DefaultTabAreaStyle} from \"./Style\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\nclass BasicTabTitle extends Link {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tab);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.activeTab);\n        }\n    }\n\n    getDefaultOptions() {\n        return {\n            newTab: false,\n        }\n    }\n\n    canOverwrite(existingElement) {\n        // Disable reusing with different panels, since we want to attach listeners to the panel\n        return super.canOverwrite(existingElement) && this.options.panel === existingElement.options.panel;\n    }\n\n    setActive(active) {\n        this.options.active = active;\n        this.redraw();\n        if (active) {\n            this.options.activeTabDispatcher.setActive(this.getPanel(), () => {\n                this.setActive(false);\n            });\n        }\n    }\n\n    getPanel() {\n        return this.options.panel;\n    }\n\n    getTitle() {\n        if (this.options.title) {\n            return this.options.title;\n        }\n        let panel = this.getPanel();\n        if (typeof panel.getTitle === \"function\") {\n            return panel.getTitle();\n        }\n        return panel.options.title;\n    }\n\n    render() {\n        return [this.getTitle()];\n    }\n\n    onMount() {\n        super.onMount();\n\n        if (this.options.active) {\n            this.setActive(true);\n        }\n\n        this.addClickListener(() => {\n            this.setActive(true);\n        });\n\n        if (this.options.panel && this.options.panel.addListener) {\n            this.attachListener(this.options.panel, \"show\", () => {\n                this.setActive(true);\n            });\n        }\n    }\n}\n\n\nclass TabTitleArea extends UI.Element {\n}\n\n\n@registerStyle(DefaultTabAreaStyle)\nclass TabArea extends UI.Element {\n    activeTabDispatcher = new SingleActiveElementDispatcher();\n\n    getDefaultOptions() {\n        return {\n            autoActive: true, // means the first Tab will be automatically selected\n            // lazyRender: true, // TODO: should be true by default\n            panelClass: null, // Custom css class can be added to panels\n            titleAreaClass: null, // Custom css class can be added to title area\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.tabArea);\n    }\n\n    createTabPanel(panel) {\n        let tab = <BasicTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                 active={panel.options.active} href={panel.options.tabHref}\n                                 styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n\n    appendChild(panel, doMount) {\n        let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n        this.options.children.push(panel);\n\n        this.titleArea.appendChild(tabTitle);\n        this.switcherArea.appendChild(tabPanel, doMount || !this.options.lazyRender);\n    };\n\n    getTitleArea(tabTitles) {\n        let titleAreaClass = this.styleSheet.nav;\n        if (this.options.titleAreaClass) {\n            titleAreaClass += \" \" + this.options.titleAreaClass;\n        }\n        return <TabTitleArea ref=\"titleArea\" className={titleAreaClass}>\n            {tabTitles}\n        </TabTitleArea>;\n    }\n\n    getSwitcher(tabPanels) {\n        let switcherClass = this.styleSheet.switcher;\n        if (this.options.panelClass) {\n            switcherClass += \" \" + this.options.panelClass;\n        }\n        return <Switcher className={switcherClass} ref=\"switcherArea\" lazyRender={this.options.lazyRender}>\n            {tabPanels}\n        </Switcher>;\n    }\n\n    getChildrenToRender() {\n        let tabTitles = [];\n        let tabPanels = [];\n        let activeTab;\n\n        for (const panel of unwrapArray(this.render())) {\n            let [tabTitle, tabPanel] = this.createTabPanel(panel);\n\n            if (this.activePanel === tabPanel) {\n                activeTab = tabTitle;\n            }\n\n            tabTitles.push(tabTitle);\n            tabPanels.push(tabPanel);\n        }\n\n        if (!activeTab) {\n            for (const tabTitle of tabTitles) {\n                if (tabTitle.options.active) {\n                    activeTab = tabTitle;\n                }\n            }\n        } else {\n            for (let i = 0; i < tabPanels.length; i += 1) {\n                const tabTitle = tabTitles[i];\n                const tabPanel = tabPanels[i];\n\n                if (tabTitle.options.active) {\n                    tabTitle.options.active = false;\n                }\n                if (tabPanels.options.active) {\n                    tabPanels.options.active = false;\n                }\n\n                if (activeTab === tabTitle) {\n                    tabPanel.options.active = true;\n                    tabTitle.options.active = true;\n                }\n            }\n        }\n\n        if (this.options.autoActive && !activeTab && tabTitles.length > 0) {\n            tabTitles[0].options.active = true;\n        }\n\n        return [\n            this.getTitleArea(tabTitles),\n            this.getSwitcher(tabPanels),\n        ];\n    };\n\n    setActive(panel) {\n        this.activeTabDispatcher.setActive(panel);\n    }\n\n    getActive() {\n        return this.activeTabDispatcher.getActive();\n    }\n\n    onSetActive(panel) {\n        this.switcherArea.setActive(panel);\n        this.activePanel = panel;\n    }\n\n    onMount() {\n        this.attachListener(this.activeTabDispatcher, (panel) => {\n            this.onSetActive(panel);\n        });\n\n        this.addListener(\"resize\", () => {\n            this.switcherArea.dispatch(\"resize\");\n        });\n    }\n}\n\nexport * from \"./Style\";\nexport {TabTitleArea, BasicTabTitle, TabArea};\n","// Contains classes to abstract some generic Font Awesome usecases.\nimport {UI} from \"./UIBase\";\nimport {Direction} from \"./Constants\";\n\nclass FAIcon extends UI.Primitive(\"i\") {\n    getIcon() {\n        return this.options.icon;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(\"fa\");\n        attr.addClass(\"fa-\" + this.getIcon());\n        if (this.options.size) {\n            attr.addClass(\"fa-\" + this.options.size);\n        }\n    }\n\n    setIcon(icon) {\n        this.options.icon = icon;\n        this.redraw();\n    }\n}\n\nclass FACollapseIcon extends FAIcon {\n    getIcon() {\n        if (this.options.collapsed) {\n            return \"angle-right\";\n        } else {\n            return \"angle-down\";\n        }\n    }\n\n    setCollapsed(collapsed) {\n        this.options.collapsed = collapsed;\n        this.redraw();\n    }\n\n    toggleCollapsed() {\n        this.setCollapsed(!this.options.collapsed);\n    }\n}\n\nclass FASortIcon extends FAIcon {\n    getIcon() {\n        if (this.options.direction === Direction.UP) {\n            return \"sort-asc\";\n        } else if (this.options.direction === Direction.DOWN){\n            return \"sort-desc\";\n        } else {\n            return \"sort\";\n        }\n    }\n\n    setDirection(direction) {\n        this.options.direction = direction;\n        this.redraw();\n    }\n}\n\nexport {FAIcon, FACollapseIcon, FASortIcon};\n","import {UI} from \"../UIBase\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {registerStyle} from \"../style/Theme\";\nimport {HorizontalOverflowStyle} from \"./Style\";\n\n\n\n@registerStyle(HorizontalOverflowStyle)\nexport class HorizontalOverflow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            swipePercent: .5,\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.horizontalOverflow);\n    }\n\n    getChildrenToRender() {\n        return [\n            <FAIcon ref=\"leftArrow\" icon=\"chevron-left\" className={`${this.styleSheet.leftArrow} ${this.styleSheet.hiddenArrow}`}/>,\n            <div ref=\"childrenContainer\" className={this.styleSheet.childrenContainer}>\n                <div ref=\"swipeHelperChild\"/>\n                <div ref=\"pusherContainer\" className={this.styleSheet.pusherContainer}>\n                    {this.render()}\n                </div>\n            </div>,\n            <FAIcon ref=\"rightArrow\" icon=\"chevron-right\" className={`${this.styleSheet.rightArrow} ${this.styleSheet.hiddenArrow}`}/>\n        ];\n    }\n\n    appendChild(...args) {\n        this.pusherContainer.appendChild(...args);\n    }\n\n    eraseChild(...args) {\n        this.pusherContainer.eraseChild(...args);\n    }\n\n    checkForOverflow() {\n        const children = this.pusherContainer.children;\n\n        if (!children.length) {\n            return;\n        }\n\n        let shouldOverflowRight = false;\n        let shouldOverflowLeft = false;\n\n        const elementRect = this.node.getBoundingClientRect();\n\n        for (let child of children) {\n            const childRect = child.node.getBoundingClientRect();\n            shouldOverflowRight |= elementRect.left + elementRect.width < childRect.left + childRect.width - 1;\n            shouldOverflowLeft |= elementRect.left > childRect.left;\n        }\n\n        const leftArrowHidden = !this.leftArrow.getWidth();\n        if (shouldOverflowLeft && leftArrowHidden) {\n            this.leftArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowLeft && !leftArrowHidden) {\n            this.leftArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n\n        const rightArrowHidden = !this.rightArrow.getWidth();\n        if (shouldOverflowRight && rightArrowHidden) {\n            this.rightArrow.removeClass(this.styleSheet.hiddenArrow);\n        } else if (!shouldOverflowRight && !rightArrowHidden) {\n            this.rightArrow.addClass(this.styleSheet.hiddenArrow);\n        }\n    }\n\n    scrollContent(amount) {\n        let scrollLeft;\n        const containerNode = this.pusherContainer.node;\n        if (amount < 0) {\n            scrollLeft = Math.max(0, containerNode.scrollLeft + amount * this.getWidth());\n        } else {\n            scrollLeft = Math.min(containerNode.scrollWidth - this.getWidth(), containerNode.scrollLeft + amount * this.getWidth());\n        }\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", scrollLeft - containerNode.scrollLeft);\n            containerNode.scrollLeft = scrollLeft;\n        }\n\n        this.pusherContainer.setWidth(\"fit-content\");\n        this.swipeHelperChild.addClass(this.styleSheet.swipeAnimation);\n\n        if (amount < 0) {\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n        } else {\n            this.swipeHelperChild.setStyle(\"marginLeft\", containerNode.scrollLeft - scrollLeft);\n        }\n\n        setTimeout(() => {\n            this.pusherContainer.setWidth(\"100%\");\n            this.swipeHelperChild.removeClass(this.styleSheet.swipeAnimation);\n            containerNode.scrollLeft = scrollLeft;\n            this.swipeHelperChild.setStyle(\"marginLeft\", 0);\n            this.checkForOverflow();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    scrollContentLeft() {\n        this.scrollContent(-this.options.swipePercent);\n    }\n\n    scrollContentRight() {\n        this.scrollContent(this.options.swipePercent);\n    }\n\n    // This method should be overwritten, and it is called whenever the position of the elements is changed.\n    handleEventAndHandlePositionChange(callback) {\n        callback();\n    }\n\n    onMount() {\n        this.pusherContainer.addNodeListener(\"scroll\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.addListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        this.rightArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentRight()));\n        this.leftArrow.addClickListener(() => this.handleEventAndHandlePositionChange(() => this.scrollContentLeft()));\n\n        // TODO: Create a resizeable-aware UI Element to be extended by this class and manage these listeners.\n        window.addEventListener(\"resize\", () => this.handleEventAndHandlePositionChange(() => this.checkForOverflow()));\n\n        setTimeout(() => this.checkForOverflow());\n    }\n}","import {UI} from \"../UIBase\";\nimport {FlatTabAreaStyle, FlatTabAreaHorizontalOverflowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\nimport {SingleActiveElementDispatcher} from \"../../base/Dispatcher\";\nimport {TabTitleArea, BasicTabTitle, TabArea} from \"./TabArea\";\nimport {HorizontalOverflow} from \"../horizontal-overflow/HorizontalOverflow\";\nimport {unwrapArray} from \"../../base/Utils\";\n\n\n\nexport class FlatTabTitle extends BasicTabTitle {\n    setActive(active) {\n        super.setActive(active);\n        if (active) {\n            this.options.activeTabTitleDispatcher.setActive(this, () => {\n                this.setActive(false);\n            });\n        }\n    }\n}\n\n\n// This class displays a bottom bar on the active tab, and when changing tabs it also moves the bottom bar.\n@registerStyle(FlatTabAreaStyle)\nexport class FlatTabTitleArea extends TabTitleArea {\n    constructor(...args) {\n        super(...args);\n        // Active bar left and width must be cached so the redraw is done seamlessly.\n        this.barLeft = 0;\n        this.barWidth = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.nav);\n    }\n\n    getChildrenToRender() {\n        for (const child of this.render()) {\n            if (child.options.active) {\n                child.addClass(this.styleSheet.activeOnRender);\n            }\n        }\n        return [\n            <HorizontalOverflow ref=\"horizontalOverflow\" styleSheet={FlatTabAreaHorizontalOverflowStyle}>\n                {this.render()}\n                <div ref=\"bar\" className={this.styleSheet.activeBar}\n                     style={{left: this.barLeft, width: this.barWidth}}/>\n            </HorizontalOverflow>,\n        ]\n    }\n\n    setActiveBar(activeTab) {\n        let barLeft = 0;\n        let barWidth = 0;\n        for (const tab of unwrapArray(this.render())) {\n            const tabWidth = tab.getWidth();\n            if (tab === activeTab) {\n                barWidth = tabWidth;\n                break;\n            }\n            barLeft += tabWidth;\n        }\n        this.bar.setStyle({\n            left: barLeft,\n            width: barWidth,\n        });\n        this.barLeft = barLeft;\n        this.barWidth = barWidth;\n    }\n\n    setActive(activeTab) {\n        if (this.activeTab) {\n            // Remove the border from the active tab and \"prepare\" the bar on the current active tab.\n            this.setActiveBar(this.activeTab);\n            this.activeTab.removeClass(this.styleSheet.activeOnRender);\n        }\n\n        // Animate the bar.\n        setTimeout(() => {\n            this.bar.addClass(this.styleSheet.activeBarAnimated);\n            this.setActiveBar(activeTab);\n        });\n\n        setTimeout(() => {\n            // Sometimes, another tab has been clicked between the start and end of an animation, so remove the\n            // active class on that tab, just in case.\n            if (this.activeTab) {\n                this.activeTab.removeClass(this.styleSheet.activeOnRender);\n            }\n            // Add the active class on the current tab.\n            activeTab.addClass(this.styleSheet.activeOnRender);\n            // Restore the bar to its \"unused\" state.\n            this.bar.removeClass(this.styleSheet.activeBarAnimated);\n            this.bar.setWidth(0);\n            // Update the active tab.\n            this.activeTab = activeTab;\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    onMount() {\n        super.onMount();\n        for (const child of this.options.children) {\n            if (child.options.active) {\n                this.setActive(child);\n            }\n        }\n        this.attachListener(this.options.activeTabTitleDispatcher, (tab) => this.setActive(tab));\n        this.addListener(\"resize\", () => this.horizontalOverflow.dispatch(\"resize\"));\n    }\n}\n\n\n@registerStyle(FlatTabAreaStyle)\nexport class FlatTabArea extends TabArea {\n    activeTabTitleDispatcher = new SingleActiveElementDispatcher();\n\n    getTitleArea(tabTitles) {\n        return <FlatTabTitleArea ref=\"titleArea\" activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                 className={this.options.titleAreaClass || \"\"}>\n            {tabTitles}\n        </FlatTabTitleArea>;\n    }\n\n    createTabPanel(panel) {\n        let tab = <FlatTabTitle panel={panel} activeTabDispatcher={this.activeTabDispatcher}\n                                activeTabTitleDispatcher={this.activeTabTitleDispatcher}\n                                active={panel.options.active} href={panel.options.tabHref}\n                                styleSheet={this.styleSheet} />;\n\n        return [tab, panel];\n    }\n}\n","import {mapIterator} from \"../base/Utils\";\n\n// A map that supports multiple values to the same key\nclass MultiMap {\n    constructor() {\n        this.map = new Map();\n    }\n\n    static iterator(items) {\n        return items[Symbol.iterator];\n    }\n\n    // Methods that are called before every access inside\n    // the internal map\n    normalizeKey(key) {\n        return key;\n    }\n    \n    normalizeValue(value) {\n        return value;\n    }\n\n    append(key, value) {\n        let nKey = this.normalizeKey(key);\n        let nValue = this.normalizeValue(value);\n        if (this.map.has(nKey)) {\n            this.map.get(nKey).push(nValue);\n        } else {\n            this.map.set(nKey, [nValue]);\n        }\n    }\n\n    has(key) {\n        return this.map.has(this.normalizeKey(key));\n    }\n\n    delete(key) {\n        this.map.delete(this.normalizeKey(key));\n    }\n\n    set(key, value) {\n        this.map.set(this.normalizeKey(key), [this.normalizeValue(value)]);\n    }\n\n    get(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey)[0];\n        }\n        return null;\n    }\n\n    getAll(key) {\n        let nKey = this.normalizeKey(key);\n        if (this.map.has(nKey)) {\n            return this.map.get(nKey).slice();\n        }\n        return null;\n    }\n\n    forEach(callback, context) {\n        for (let [key, value] of this.entries()) {\n            callback.call(context, value, key, this);\n        }\n    }\n\n    keys() {\n        return mapIterator(this.entries(), entry => entry[0]);\n    }\n\n    values() {\n        return mapIterator(this.entries(), entry => entry[1]);\n    }\n\n    *entries() {\n        for (let [key, values] of this.map.entries()) {\n            for (let value of values) {\n                yield [key, value];\n            }\n        }\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n}\n\nexport {MultiMap};\n","import {MultiMap} from \"../data-structures/MultiMap\";\n\n// This class currently mirrors the functionality of Headers on Chrome at the time of implementation\n// TODO: It is specified that the function get() should return the result of getAll() and getAll() deprecated\nclass Headers extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj) {\n        super();\n        if (obj instanceof Headers) {\n            for (let [key, value] of obj) {\n                this.append(key, value);\n            }\n        } else if (obj) {\n            for (let key of Object.keys(obj)) {\n                this.append(key, obj[key]);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        if (typeof key !== 'string') {\n            key = String(key);\n        }\n        if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(key)) {\n            throw new TypeError('Invalid character in header field name');\n        }\n        return key.toLowerCase();\n    }\n\n    normalizeValue(value) {\n        if (typeof value !== \"string\") {\n            value = String(value);\n        }\n        return value;\n    }\n}\n\nfunction polyfillHeaders(global) {\n    global.Headers = global.Headers || Headers;\n}\n\nexport {Headers, polyfillHeaders};","import {MultiMap} from \"../data-structures/MultiMap\";\n\nclass URLSearchParams extends MultiMap {\n    static polyfill = true;\n\n    constructor(obj=\"\") {\n        super(obj);\n        let str = String(obj);\n        if (str.indexOf(\"?\") === 0) {\n            str = str.slice(1);\n        }\n        for (let parameter of str.split(\"&\")) {\n            let index = parameter.indexOf(\"=\");\n            if (index !== -1) {\n                let key = this.constructor.decode(parameter.slice(0, index));\n                let value = this.constructor.decode(parameter.slice(index + 1));\n                this.append(key, value);\n            }\n        }\n    }\n\n    normalizeKey(key) {\n        return key.toString();\n    }\n\n    normalizeValue(value) {\n        return value.toString();\n    }\n\n    static encode(str) {\n        let replace = {\n            '!': '%21',\n            \"'\": '%27',\n            '(': '%28',\n            ')': '%29',\n            '~': '%7E',\n            '%20': '+',\n            '%00': '\\x00'\n        };\n        return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, (match) => {\n            return replace[match];\n        });\n    }\n\n    static decode(str) {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    }\n\n    toString() {\n        let query = [];\n        for (let [key, values] of this.map.entries()) {\n            let name = this.constructor.encode(key);\n            for (let value of values) {\n                query.push(name + \"=\" + this.constructor.encode(value));\n            }\n        }\n        return query.join(\"&\");\n    }\n}\n\nfunction polyfillURLSearchParams(global) {\n    global.URLSearchParams = global.URLSearchParams || URLSearchParams;\n}\n\nexport {URLSearchParams, polyfillURLSearchParams};","import {polyfillHeaders} from \"./Headers\";\nimport {polyfillURLSearchParams} from \"./URLSearchParams\";\n\nfunction fileReaderReady(reader) {\n    return new Promise((resolve, reject) => {\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(reader.error);\n        };\n    });\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise;\n}\n\nfunction readBlobAsText(blob) {\n    let reader = new FileReader();\n    let promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise;\n}\n\nclass Body {\n    constructor() {\n        this.bodyUsed = false;\n    }\n\n    setBodyUsed() {\n        if (this.bodyUsed) {\n            return Promise.reject(new TypeError(\"Already read\"));\n        }\n        this.bodyUsed = true;\n    }\n\n    static decode(body) {\n        let form = new FormData();\n        for (let bytes of body.trim().split('&')) {\n            if (bytes) {\n                let split = bytes.split('=');\n                let name = split.shift().replace(/\\+/g, ' ');\n                let value = split.join('=').replace(/\\+/g, ' ');\n                form.append(decodeURIComponent(name), decodeURIComponent(value));\n            }\n        }\n        return form;\n    }\n\n    static cloneBuffer(buffer) {\n        if (buffer.slice) {\n            return buffer.slice();\n        } else {\n            let view = new Uint8Array(buffer.byteLength);\n            view.set(new Uint8Array(buffer));\n            return view.buffer;\n        }\n    }\n\n    initialize(bodyInit) {\n        this._bodyInit = bodyInit;\n        if (!bodyInit) {\n            this._bodyText = \"\";\n        } else if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n            this._bodyText = bodyInit;\n        } else if (Blob.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyBlob = bodyInit;\n        } else if (FormData.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyFormData = bodyInit;\n        } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyText = bodyInit.toString();\n        } else if (DataView.prototype.isPrototypeOf(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit.buffer);\n            this._bodyInit = new Blob([this._bodyArrayBuffer]);\n        } else if (ArrayBuffer.prototype.isPrototypeOf(bodyInit) || ArrayBuffer.isView(bodyInit)) {\n            this._bodyArrayBuffer = this.constructor.cloneBuffer(bodyInit);\n        } else {\n            throw new Error(\"unsupported BodyInit type\");\n        }\n\n        if (!this.headers.get(\"content-type\")) {\n            if ((typeof bodyInit === \"string\") || (bodyInit instanceof String)) {\n                this.headers.set(\"content-type\", \"text/plain;charset=UTF-8\");\n            } else if (this._bodyBlob && this._bodyBlob.type) {\n                this.headers.set(\"content-type\", this._bodyBlob.type);\n            } else if (URLSearchParams.prototype.isPrototypeOf(bodyInit)) {\n                this.headers.set(\"content-type\", \"application/x-www-form-urlencoded;charset=UTF-8\");\n            }\n        }\n    }\n\n    blob() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return Promise.resolve(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(new Blob([this._bodyArrayBuffer]));\n        }\n        if (this._bodyFormData) {\n            // I know this is technically wrong, but only we can create this scenario\n            return Promise.resolve(this._bodyFormData);\n        }\n        return Promise.resolve(new Blob([this._bodyText]));\n    }\n\n    arrayBuffer() {\n        if (this._bodyArrayBuffer) {\n            return this.setBodyUsed() || Promise.resolve(this._bodyArrayBuffer);\n        } else {\n            return this.blob().then(readBlobAsArrayBuffer);\n        }\n    }\n\n    readArrayBufferAsText() {\n        let view = new Uint8Array(this._bodyArrayBuffer);\n        let chars = new Array(view.length);\n\n        for (let i = 0; i < view.length; i++) {\n            chars[i] = String.fromCharCode(view[i]);\n        }\n        return chars.join(\"\");\n    }\n\n    text() {\n        let rejected = this.setBodyUsed();\n        if (rejected) {\n            return rejected;\n        }\n\n        if (this._bodyBlob) {\n            return readBlobAsText(this._bodyBlob);\n        }\n        if (this._bodyArrayBuffer) {\n            return Promise.resolve(this.readArrayBufferAsText());\n        }\n        if (this._bodyFormData) {\n            throw new Error(\"could not read FormData body as text\");\n        }\n        return Promise.resolve(this._bodyText);\n    }\n\n    formData() {\n        return this.text().then(this.constructor.decode);\n    }\n\n    json() {\n        return this.text().then(JSON.parse);\n    }\n}\n\nfunction polyfillBody(global) {\n    // TODO: Might want to polyfill other stuff\n    polyfillURLSearchParams(global);\n    polyfillHeaders(global);\n    global.Body = global.Body || Body;\n}\n\nexport {Body, polyfillBody};","import {Body} from \"./Body\";\n\nclass Request extends Body {\n    constructor(input, options={}) {\n        super();\n        let body = options.body;\n\n        if ((typeof input === \"string\") || (input instanceof String)) {\n            input = {\n                url: input\n            };\n        }\n\n        if (input.bodyUsed) {\n            throw new TypeError(\"Already read\");\n        }\n        if (!body && input.hasOwnProperty(\"_bodyInit\") && input._bodyInit != null) {\n            body = input._bodyInit;\n            input.bodyUsed = true;\n        }\n\n        this.method = this.constructor.normalizeMethod(options.method || input.method || \"GET\");\n        this.url = input.url;\n\n        let headerArgs = options.headers || input.headers || null;\n        this.headers = headerArgs ? new Headers(headerArgs) : new Headers();\n        this.context = options.context || input.context || \"\";\n        this.referrer = options.referrer || input.referrer || \"about:client\";\n        this.referrerPolicy = options.referrerPolicy || input.referrerPolicy || \"\";\n        this.mode = options.mode || input.mode || null;\n        this.credentials = options.credentials || input.credentials || \"omit\";\n        this.cache = options.cache || input.cache || \"default\";\n\n        if ((this.method === \"GET\" || this.method === \"HEAD\") && body) {\n            throw new TypeError(\"Body not allowed for GET or HEAD requests\");\n        }\n        this.initialize(body);\n    }\n\n    static methods = [\"DELETE\", \"GET\", \"HEAD\", \"OPTIONS\", \"POST\", \"PUT\"];\n    static normalizeMethod(method) {\n        let upcased = method.toUpperCase();\n        return (this.methods.indexOf(upcased) > -1) ? upcased : method;\n    }\n\n    clone() {\n        return new Request(this, {body: this._bodyInit});\n    }\n}\n\nfunction polyfillRequest(global) {\n    global.Request = global.Request || Request;\n}\n\nexport {Request, polyfillRequest};","import {Body} from \"./Body\";\n\nclass Response extends Body {\n    constructor(bodyInit, options) {\n        super();\n        options = options || {};\n\n        this.type = \"default\";\n        if (options.hasOwnProperty(\"status\")) {\n            this.status = options.status;\n        } else {\n            this.status = 200;\n        }\n        this.ok = (this.status >= 200 && this.status < 300);\n        if (options.hasOwnProperty(\"statusText\")) {\n            this.statusText = options.statusText;\n        } else {\n            this.statusText = \"OK\";\n        }\n        this.headers = new Headers(options.headers);\n        this.url = options.url || \"\";\n        this.initialize(bodyInit);\n    }\n\n    clone() {\n        return new Response(this._bodyInit, {\n            status: this.status,\n            statusText: this.statusText,\n            headers: new Headers(this.headers),\n            url: this.url\n        });\n    }\n\n    static error() {\n        let response = new Response(null, {status: 0, statusText: \"\"});\n        response.type = \"error\";\n        return response;\n    }\n    static redirectStatuses = [301, 302, 303, 307, 308];\n    static redirect(url, status) {\n        if (this.redirectStatuses.indexOf(status) === -1) {\n            throw new RangeError(\"Invalid status code\");\n        }\n        return new Response(null, {status: status, headers: {location: url}});\n    }\n}\n\nfunction polyfillResponse(global) {\n    global.Response = global.Response || Response;\n}\n\nexport {Response, polyfillResponse};","// Tries to be a more flexible implementation of fetch()\n// Still work in progress\n\nimport {isPlainObject} from \"./Utils\";\n\n// May need to polyfill Headers, Request, Response, Body, URLSearchParams classes, so import them\nimport {polyfillRequest} from \"../polyfill/Request\";\nimport {polyfillResponse} from \"../polyfill/Response\";\nimport {polyfillHeaders} from \"../polyfill/Headers\";\nimport {polyfillURLSearchParams} from \"../polyfill/URLSearchParams\";\n\n// TODO: should only call this in the first call to fetch, to not create unneeded dependencies?\nif (window) {\n    polyfillRequest(window);\n    polyfillResponse(window);\n    polyfillHeaders(window);\n    polyfillURLSearchParams(window);\n}\n\n// Parse the headers from an xhr object, to return a native Headers object\nfunction parseHeaders(xhr) {\n    const rawHeader = xhr.getAllResponseHeaders() || \"\";\n    const rawHeaderLines = rawHeader.split(/\\r?\\n/);\n    let headers = new Headers();\n\n    for (let line of rawHeaderLines) {\n        let parts = line.split(\":\");\n        let key = parts.shift().trim();\n        if (key) {\n            let value = parts.join(\":\").trim();\n            headers.append(key, value);\n        }\n    }\n    return headers;\n}\n\n// Creates a new URLSearchParams object from a plain object\n// Fields that are arrays are spread\nfunction getURLSearchParams(data) {\n    if (!isPlainObject(data)) {\n        return data;\n    }\n\n    let urlSearchParams = new URLSearchParams();\n    for (const key of Object.keys(data)) {\n        let value = data[key];\n        if (Array.isArray(value)) {\n            for (let instance of value) {\n                urlSearchParams.append(key + \"[]\", instance);\n            }\n        } else {\n            urlSearchParams.set(key, value);\n        }\n    }\n    return urlSearchParams;\n}\n\n// Appends search parameters from an object to a given URL or Request, and returns the new URL\nfunction composeURL(url, params) {\n    if (url.url) {\n        url = url.url;\n    }\n    // TODO: also extract the preexisting arguments in the url\n    if (params) {\n        url += \"?\" + getURLSearchParams(params);\n    }\n    return url;\n}\n\nexport function toFormData(data) {\n    let formData = new FormData();\n    for (const key of Object.keys(data)) {\n        formData.append(key, data[key]);\n    }\n    return formData;\n}\n\nclass XHRPromise {\n    constructor(request, options = {}) {\n        request = new Request(request, options);\n        let xhr = new XMLHttpRequest();\n        this.options = options;\n        this.request = request;\n        this.xhr = xhr;\n\n        this.promise = new Promise((resolve, reject) => {\n            this.promiseResolve = resolve;\n            this.promiseReject = reject;\n\n            xhr.onload = () => {\n                let headers = this.getResponseHeaders();\n\n                let body = xhr.response || xhr.responseText;\n                let responseInit = {\n                    status: xhr.status,\n                    statusText: xhr.statusText,\n                    headers: headers,\n                    url: xhr.responseURL || headers.get(\"X-Request-URL\"),\n                };\n                let response = new Response(body, responseInit);\n                // In case dataType is \"arrayBuffer\", \"blob\", \"formData\", \"json\", \"text\"\n                // Response has methods to return these as promises\n                if (typeof response[options.dataType] === \"function\") {\n                    // TODO: should whitelist dataType to json, blob\n                    response[options.dataType]().then((data) => {\n                        this.resolve(data);\n                    });\n                } else {\n                    this.resolve(response);\n                }\n            };\n\n            // TODO: also dispatch all arguments here on errors\n            xhr.onerror = () => {\n                this.reject(new TypeError(\"Network error\"));\n            };\n\n            // TODO: need to have an options to pass setting to xhr (like timeout value)\n            xhr.ontimeout = () => {\n                this.reject(new TypeError(\"Network timeout\"));\n            };\n\n            xhr.open(request.method, request.url, true);\n\n            if (request.credentials === \"include\") {\n                xhr.withCredentials = true;\n            }\n\n            // TODO: come back to this\n            xhr.responseType = \"blob\";\n\n            request.headers.forEach((value, name) => {\n                if (options.body instanceof FormData && name.toLowerCase() === \"content-type\") {\n                    return;\n                }\n                xhr.setRequestHeader(name, value);\n            });\n\n            // TODO: there's no need to send anything on a GET or HEAD\n            if (options.body instanceof FormData) {\n                this.send(options.body);\n            } else {\n                request.blob().then((blob) => {\n                    // The blob can be a FormData when we're polyfilling the Request class\n                    let body = ((blob instanceof FormData) || blob.size) ? blob : null;\n                    this.send(body);\n                });\n            }\n        });\n    }\n\n    getResponseHeaders() {\n        return parseHeaders(this.xhr);\n    }\n\n    send(body) {\n        this.getXHR().send(body);\n    }\n\n    getPostprocessors() {\n        return this.options.postprocessors || fetch.defaultPostprocessors;\n    }\n\n    getErrorPostprocessors() {\n        return this.options.errorPostprocessors || fetch.defaultErrorPostprocessors;\n    }\n\n    resolve(payload) {\n        for (const postprocessor of this.getPostprocessors()) {\n            try {\n                payload = postprocessor(payload, this) || payload;\n            } catch (exception) {\n                this.reject(exception);\n                return;\n            }\n        }\n\n        if (this.options.onSuccess) {\n            this.options.onSuccess(...arguments);\n        } else {\n            this.promiseResolve(...arguments);\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    reject(error) {\n        for (const postprocessor of this.getErrorPostprocessors()) {\n            error = postprocessor(error) || error;\n        }\n\n        if (this.options.onError) {\n            this.options.onError(...arguments);\n        } else {\n            if (this._chained) {\n                this.promiseReject(...arguments);\n            } else {\n                if (this.options.errorHandler) {\n                    this.options.errorHandler(...arguments);\n                } else {\n                    console.error(\"Unhandled fetch error\", ...arguments);\n                }\n            }\n        }\n        if (this.options.onComplete) {\n            this.options.onComplete();\n        }\n    }\n\n    // TODO: next 2 functions should throw an exception if you have onSuccess/onError\n    then(onResolve, onReject) {\n        this._chained = true;\n        onReject = onReject || this.options.errorHandler;\n        return this.getPromise().then(onResolve, onReject);\n    }\n\n    catch() {\n        this._chained = true;\n        return this.getPromise().catch(...arguments);\n    }\n\n    getXHR() {\n        return this.xhr;\n    }\n\n    getPromise() {\n        return this.promise;\n    }\n\n    getRequest() {\n        return this.request;\n    }\n\n    abort() {\n        this.getXHR().abort();\n    }\n\n    addXHRListener(name, callback) {\n        this.getXHR().addEventListener(...arguments);\n    }\n\n    addProgressListener(callback) {\n        this.addXHRListener(\"progress\", ...arguments);\n    }\n}\n\n// TODO: this offers only partial compatibility with $.ajax\nfunction jQueryCompatibilityPreprocessor(options) {\n    if (options.type) {\n        options.method = options.type.toUpperCase();\n    }\n\n    if (options.contentType) {\n        options.headers.set(\"Content-Type\", options.contentType);\n    }\n\n    options.headers.set(\"X-Requested-With\", \"XMLHttpRequest\");\n\n    if (isPlainObject(options.data)) {\n        let method = options.method.toUpperCase();\n        if (method === \"GET\" || method === \"HEAD\") {\n            options.urlParams = options.urlParams || options.data;\n            if (options.cache === false) {\n                options.urlParams = getURLSearchParams(options.urlParams);\n                options.urlParams.set(\"_\", Date.now());\n            }\n        } else {\n            let formData = new FormData();\n            for (const key of Object.keys(options.data)) {\n                const value = options.data[key];\n                if (Array.isArray(value)) {\n                    for (const arrayValue of value) {\n                        formData.append(key + \"[]\", arrayValue);\n                    }\n                } else {\n                    formData.append(key, value);\n                }\n\n            }\n            options.body = formData;\n        }\n    } else {\n        options.body = options.body || options.data;\n    }\n\n    return options;\n}\n\n// Can either be called with\n// - 1 argument: (Request)\n// - 2 arguments: (url/Request, options)\nfunction fetch(input, ...args) {\n    // In case we're being passed in a single plain object (not Request), assume it has a url field\n    if (isPlainObject(input)) {\n        return fetch(input.url, ...arguments);\n    }\n\n    let options = Object.assign({}, ...args);\n\n    // Ensure that there's a .headers field for preprocessors\n    options.headers = new Headers(options.headers || {});\n\n    const preprocessors = options.preprocessors || fetch.defaultPreprocessors || [];\n\n    for (const preprocessor of preprocessors) {\n        options = preprocessor(options) || options;\n    }\n\n    options.onSuccess = options.onSuccess || options.success;\n    options.onError = options.onError || options.error;\n    options.onComplete = options.onComplete || options.complete;\n\n    if (typeof options.cache === \"boolean\") {\n        options.cache = options.cache ? \"force-cache\" : \"reload\";\n        // TODO: cache still isn't fully done\n    }\n\n    options.method = options.method || \"GET\";\n\n    // If there are any url search parameters, update the url from the urlParams or urlSearchParams fields\n    // These fields can be plain objects (jQuery style) or can be URLSearchParams objects\n    const urlParams = options.urlParams || options.urlSearchParams;\n    if (urlParams) {\n        // Change the URL of the request to add a query\n        if (input instanceof Request) {\n            input = new Request(composeURL(input.url, urlParams), input);\n        } else {\n            input = new Request(composeURL(input, urlParams), {});\n        }\n    }\n\n    return new XHRPromise(input, options);\n}\n\nfetch.defaultPreprocessors = [jQueryCompatibilityPreprocessor];\nfetch.defaultPostprocessors = [];\nfetch.defaultErrorPostprocessors = [];\n\nfetch.polyfill = true;\n\nexport {XHRPromise, fetch, composeURL, parseHeaders, getURLSearchParams, jQueryCompatibilityPreprocessor};\n","import {fetch} from \"./Fetch\";\n\nexport class AjaxHandler {\n    constructor(ajaxHandler=Ajax, errorHandler=null) {\n        this.parentHandler = ajaxHandler;\n        this.preprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPreprocessors);\n        this.postprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultPostprocessors);\n        this.errorPostprocessors = (ajaxHandler) ? [] : Array.from(fetch.defaultErrorPostprocessors);\n        this.errorHandler = errorHandler;\n    }\n\n    fetch(request, ...args) {\n        let baseOptions = {\n            preprocessors: this.getPreprocessors(),\n            postprocessors: this.getPostprocessors(),\n            errorPostprocessors: this.getErrorPostprocessors(),\n            errorHandler: this.getErrorHandler(),\n        };\n\n        // Request may be a plain object or a url, not going to duplicate code from fetch\n        for (const key of Object.keys(baseOptions)) {\n            if (request[key]) {\n                delete baseOptions[key];\n            }\n        }\n\n        return fetch(request, baseOptions, ...args);\n    }\n\n    request() {\n        return this.fetch(...arguments)\n    }\n\n    // Feel free to modify the post and get methods for your needs\n    get(url, options) {\n        return this.fetch(...arguments, {method: \"GET\"});\n    }\n\n    getJSON(url, data, ...args) {\n        return this.get(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    post(url, options) {\n        return this.fetch(...arguments, {method: \"POST\"});\n    }\n\n    postJSON(url, data, ...args) {\n        return this.post(url, {dataType: \"json\", data: data}, ...args);\n    }\n\n    addPreprocessor(preprocessor) {\n        this.preprocessors.push(preprocessor);\n    }\n\n    getPreprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPreprocessors()) || [];\n        return [...this.preprocessors, ...inherited];\n    }\n\n    addPostprocessor(postprocessor) {\n        this.postprocessors.push(postprocessor);\n    }\n\n    getPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getPostprocessors()) || [];\n        return [...inherited, ...this.postprocessors];\n    }\n\n    addErrorPostprocessor(postprocessor) {\n        this.errorPostprocessors.push(postprocessor);\n    }\n\n    getErrorPostprocessors() {\n        const inherited = (this.parentHandler && this.parentHandler.getErrorPostprocessors()) || [];\n        return [...inherited, ...this.errorPostprocessors];\n    }\n\n    getErrorHandler() {\n        return this.errorHandler || (this.parentHandler && this.parentHandler.getErrorHandler());\n    }\n}\n\nexport class FixedURLAjaxHandler extends AjaxHandler {\n    constructor(url, ajaxHandler=Ajax, errorHandler=null) {\n        super(ajaxHandler, errorHandler);\n        this.url = url;\n    }\n\n    get(options) {\n        return super.get(this.url, ...arguments);\n    }\n\n    getJSON(data) {\n        return super.getJSON(this.url, data);\n    }\n\n    post(options) {\n        return super.post(this.url, ...arguments);\n    }\n\n    postJSON(data) {\n        return super.postJSON(this.url, data);\n    }\n}\n\nexport let Ajax = new AjaxHandler();","import {buildColors} from \"../Color\";\nimport {BasicLevelStyleSheet} from \"../GlobalStyle\";\nimport {styleRule} from \"../../decorators/Style\";\nimport {StyleSheet} from \"../Style\";\nimport {Orientation} from \"../Constants\";\n\nexport const buttonColorToStyle = (color) => {\n    const colors = buildColors(color);\n    let darker1 = {\n        backgroundColor: colors[2],\n    };\n    let darker2 = {\n        backgroundColor: colors[3],\n    };\n    let darker3 = {\n        backgroundColor: colors[4],\n    };\n    const regular = {\n        backgroundColor: colors[1],\n        borderColor: colors[5],\n        color: colors[6],\n    };\n    const hoverDisabled = Object.assign({}, regular);\n    return Object.assign({}, regular, {\n        \":hover\": darker1,\n        \":hover:disabled\": hoverDisabled,\n        \":focus\": darker1,\n        \":active\": darker2,\n        \":hover:active\": darker3,\n        \":focus:active\": darker3,\n        \".active\": darker3,\n    });\n};\n\nexport class ButtonStyle extends BasicLevelStyleSheet(buttonColorToStyle) {\n    base = {\n        outline: \"0\",\n        border: \"0.1em solid transparent\",\n        padding: \"0.4em 0.8em\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS || this.themeProperties.BASE_BORDER_RADIUS,\n        textAlign: \"center\",\n        whiteSpace: \"nowrap\",\n        verticalAlign: \"middle\",\n        lineHeight: 4/3 + \"\",\n        marginBottom: \"0\",\n        display: \"inline-block\",\n        touchAction: \"manipulation\",\n        userSelect: \"none\",\n        \":disabled\": {\n            opacity: \"0.7\",\n            cursor: \"not-allowed\",\n        },\n    };\n\n    // DEFAULT uses MEDIUM as size and BASE as level\n    @styleRule\n    DEFAULT = [this.base, {\n        fontSize: \"14px\",\n    }, this.colorStyleRule(this.themeProperties.COLOR_BACKGROUND)];\n\n    getLevel(level) {\n        return super.getLevel(level) || this.INFO;\n    }\n\n    @styleRule\n    EXTRA_SMALL = {\n        fontSize: \"12px\",\n        padding: \"0.2em 0.4em\",\n        borderWidth: \"0.05em\",\n    };\n\n    @styleRule\n    SMALL = {\n        fontSize: \"12px\",\n    };\n\n    @styleRule\n    MEDIUM = {};\n\n    @styleRule\n    LARGE = {\n        fontSize: \"17px\",\n    };\n\n    @styleRule\n    EXTRA_LARGE = {\n        fontSize: \"21px\",\n        padding: \"0.2em 0.4em\",\n    };\n}\n\nexport class ButtonGroupStyle extends StyleSheet {\n    @styleRule\n    HORIZONTAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-left\": \"5px\",\n            \"display\": \"inline-block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-left\": \"0px\",\n        },\n    };\n\n    @styleRule\n    VERTICAL = {\n        pointerEvents: \"none\",\n        \">*\": {\n            \"margin-top\": \"5px\",\n            \"display\": \"block\",\n            pointerEvents: \"initial\",\n        },\n        \">:first-child\": {\n            \"margin-top\": \"0px\",\n        },\n    };\n\n    Orientation(orientation) {\n        for (let type of Object.keys(Orientation)) {\n            if (orientation == Orientation[type]) {\n                return this[type];\n            }\n        }\n    }\n}\n\nexport class RadioButtonGroupStyle extends StyleSheet {\n    @styleRule\n    DEFAULT = {\n        pointerEvents: \"none\",\n        \">*\": {\n            pointerEvents: \"initial\",\n            borderRadius: \"0\",\n        },\n        \">:last-child\": {\n            borderTopRightRadius: \"0.3em\",\n            borderBottomRightRadius: \"0.3em\",\n        },\n        \">:first-child\": {\n            borderTopLeftRadius: \"0.3em\",\n            borderBottomLeftRadius: \"0.3em\",\n        }\n    };\n}\n","import {Ajax} from \"../../base/Ajax\";\nimport {IconableInterface} from \"../Bootstrap3\";\nimport {UI} from \"../UIBase\";\nimport {ActionStatus} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonStyle)\nclass Button extends UI.Primitive(IconableInterface, \"button\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n\n        if (this.getSize()) {\n            attr.addClass(this.styleSheet.Size(this.getSize()));\n        }\n\n        if (this.getLevel()) {\n            attr.addClass(this.styleSheet.Level(this.getLevel()));\n        }\n    }\n\n    disable() {\n        this.options.disabled = true;\n        this.node.disabled = true;\n    }\n\n    enable() {\n        this.options.disabled = false;\n        this.node.disabled = false;\n    }\n\n    setEnabled(enabled) {\n        this.options.disabled = !enabled;\n        this.node.disabled = !enabled;\n    };\n}\n\n\nclass StateButton extends Button {\n    setOptions(options) {\n        options.state = (this.options && this.options.state) || options.state || ActionStatus.DEFAULT;\n\n        super.setOptions(options);\n\n        this.options.statusOptions = this.options.statusOptions || [];\n        for (let i = 0; i < 4; i += 1) {\n            if (typeof this.options.statusOptions[i] === \"string\") {\n                let statusLabel = this.options.statusOptions[i];\n                this.options.statusOptions[i] = {\n                    label: statusLabel,\n                    faIcon: \"\"\n                }\n            }\n        }\n    }\n\n    setState(status) {\n        this.options.state = status;\n        if (status === ActionStatus.DEFAULT) {\n            this.enable();\n        } else if (status === ActionStatus.RUNNING) {\n            this.disable();\n        } else if (status === ActionStatus.SUCCESS) {\n        } else if (status === ActionStatus.FAILED) {\n        }\n\n        this.redraw();\n    }\n\n    render() {\n        let stateOptions = this.options.statusOptions[this.options.state - 1];\n\n        this.options.label = stateOptions.label;\n        this.options.faIcon = stateOptions.faIcon;\n\n        return super.render();\n    }\n}\n\n\nclass AjaxButton extends StateButton {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions() || {}, {\n            resetToDefaultTimeout: 1000\n        });\n    }\n\n    getAjaxHandler() {\n        return this.options.ajaxHandler || Ajax;\n    }\n\n    setAjaxHandler(ajaxHandler) {\n        this.options.ajaxHandler = ajaxHandler;\n    }\n\n    clearResetTimeout() {\n        if (this.stateResetTimeout) {\n            clearTimeout(this.stateResetTimeout);\n            delete this.stateResetTimeout;\n        }\n    }\n\n    scheduleStateReset() {\n        this.clearResetTimeout();\n        this.stateResetTimeout = setTimeout(() => {\n            this.setState(ActionStatus.DEFAULT);\n            this.clearResetTimeout();\n        }, this.resetToDefaultTimeout);\n    }\n\n    ajax(methodName, ...args) {\n        this.setState(ActionStatus.RUNNING);\n        let ajaxPromise = this.getAjaxHandler()[methodName](...args);\n        ajaxPromise.getPromise().then(\n            (data) => {\n                this.setState(ActionStatus.SUCCESS);\n                this.scheduleStateReset();\n            },\n            (error) => {\n                this.setState(ActionStatus.FAILED);\n                this.scheduleStateReset();\n            }\n        );\n        return ajaxPromise;\n    }\n\n    ajaxCall(data) {\n        return this.ajax(\"fetch\", data);\n    }\n}\nfor (const methodName of [\"fetch\", \"request\", \"get\", \"post\", \"getJSON\", \"postJSON\"]) {\n    AjaxButton.prototype[methodName] = function(...args) {\n        return this.ajax(methodName, ...args);\n    }\n}\n\nexport {Button, StateButton, AjaxButton};\n","import {UI} from \"../UIBase\";\nimport {Button} from \"./Button\";\nimport {SimpleStyledElement} from \"../Bootstrap3\";\nimport {Orientation} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\nimport {ButtonGroupStyle, RadioButtonGroupStyle} from \"./ButtonStyle\";\n\n@registerStyle(ButtonGroupStyle)\nclass ButtonGroup extends SimpleStyledElement {\n    getDefaultOptions() {\n        return {\n            orientation: Orientation.HORIZONTAL,\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.Orientation(this.options.orientation));\n    }\n}\n\n\n@registerStyle(RadioButtonGroupStyle)\nclass RadioButtonGroup extends SimpleStyledElement {\n    setOptions(options) {\n        super.setOptions(options);\n        this.index = this.options.index || 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.DEFAULT);\n    }\n\n    render() {\n        this.buttons = [];\n        for (let i = 0; i < this.options.givenOptions.length; i += 1) {\n            this.buttons.push(\n                <Button key={i} onClick={() => {this.setIndex(i);}} size={this.getSize()}\n                  label={this.options.givenOptions[i].toString()} level={this.getLevel()}\n                  className={this.index === i ? \"active\" : \"\"}/>);\n        }\n        return this.buttons;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    getValue() {\n        return this.options.givenOptions[this.index];\n    }\n\n    setIndex(index) {\n        this.dispatch(\"setIndex\", {\n            index: index,\n            oldIndex: this.index,\n            value: this.options.givenOptions[index],\n            oldValue: this.options.givenOptions[this.index]\n        });\n        this.buttons[this.index].removeClass(\"active\");\n        this.index = index;\n        this.buttons[this.index].addClass(\"active\");\n    }\n}\n\nexport {ButtonGroup, RadioButtonGroup};\n","import {UI} from \"./UIBase\";\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelStyleSheet} from \"./GlobalStyle\";\nimport {registerStyle} from \"./style/Theme\";\nimport {buildColors} from \"./Color\";\nimport {styleRule} from \"../decorators/Style\";\nimport {Level} from \"./Constants\";\n\nexport function cardPanelColorToStyle(color) {\n    let colors = buildColors(color);\n    return {\n        borderColor: colors[4],\n    };\n}\n\nexport class CardPanelStyle extends BasicLevelStyleSheet(cardPanelColorToStyle) {\n    @styleRule\n    DEFAULT = [{\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n        flexDirection: \"row\",\n        padding: \"5px\",\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT,\n        textTransform: this.themeProperties.CARD_PANEL_TEXT_TRANSFORM,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING,\n    },\n        cardPanelHeaderColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.CARD_PANEL_HEADER_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n        paddingRight: this.themeProperties.CARD_PANEL_HEADING_PADDING_LARGE,\n    };\n\n    @styleRule\n    body = {\n    };\n\n    @styleRule\n    panel = [{\n        borderWidth: this.themeProperties.BASE_BORDER_WIDTH,\n        borderRadius: this.themeProperties.BASE_BORDER_RADIUS,\n        boxShadow: this.themeProperties.BASE_BOX_SHADOW,\n        borderStyle: this.themeProperties.BASE_BORDER_STYLE,\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    },\n        cardPanelColorToStyle(this.themeProperties.COLOR_BACKGROUND)\n    ];\n\n    @styleRule\n    centered = {\n        textAlign: \"center\",\n        justifyContent: \"center\",\n    };\n}\n\nfunction cardPanelHeaderColorToStyle(color){\n    let colors = buildColors(color);\n    return {\n        color: colors[6],\n        backgroundColor: colors[1],\n        borderBottomColor: colors[4],\n    };\n}\n\nexport const CardPanelHeaderStyle = BasicLevelStyleSheet(cardPanelHeaderColorToStyle);\n\n@registerStyle(CardPanelStyle)\nclass CardPanel extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.panel);\n    }\n\n    getLevel() {\n        return super.getLevel() || Level.PRIMARY;\n    }\n\n    getTitle() {\n        return this.options.title;\n    }\n\n    getHeaderStyleSheet() {\n        return CardPanelHeaderStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            headingCentered: true,\n            bodyCentered: false,\n        };\n    }\n\n    getHeadingClasses() {\n        let headingClasses = \"\";\n        const headingLevel = this.getHeaderStyleSheet().Level(this.getLevel()),\n            {headingCentered} = this.options;\n\n        if (headingLevel) {\n            headingClasses = headingClasses + headingLevel;\n        }\n\n        headingClasses = headingClasses + this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            headingClasses = headingClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        if (headingCentered) {\n            headingClasses = headingClasses + this.styleSheet.centered;\n        }\n\n        return headingClasses;\n    }\n\n    getBodyClasses() {\n        const {bodyCentered} = this.options;\n\n        let bodyClasses = this.styleSheet.body;\n        if (bodyCentered) {\n            bodyClasses = bodyClasses + this.styleSheet.centered;\n        }\n\n        return bodyClasses;\n    }\n\n    getChildrenToRender() {\n        const headingClasses = this.getHeadingClasses();\n        const bodyClasses = this.getBodyClasses();\n\n        return [\n            <div ref=\"panelTitle\" className={headingClasses}>\n                {this.getTitle()}\n            </div>,\n            <div ref=\"panelBody\" className={bodyClasses} style={this.options.bodyStyle}>\n                {this.render()}\n            </div>,\n        ];\n    }\n}\n\nexport {CardPanel};\n","import {UI} from \"./UIBase\";\nimport {styleRule} from \"./Style\";\nimport {registerStyle} from \"./style/Theme\"\nimport {SimpleStyledElement} from \"./Bootstrap3\";\nimport {BasicLevelSizeStyleSheet} from \"./GlobalStyle\";\n\n\nclass RowListStyle extends BasicLevelSizeStyleSheet {\n    @styleRule\n    rowList = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    DEFAULT = {\n        display: \"flex\",\n        alignItems: \"center\",\n        width: \"100%\",\n\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING,\n\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND,\n    };\n\n    @styleRule\n    LARGE = {\n        minHeight: this.themeProperties.ROW_LIST_ROW_HEIGHT_LARGE,\n        paddingLeft: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n        paddingRight: this.themeProperties.ROW_LIST_ROW_PADDING_LARGE,\n    };\n\n    @styleRule\n    alternativeColorsOddRow = {\n        backgroundColor: this.themeProperties.COLOR_BACKGROUND_ALTERNATIVE,\n    };\n\n    @styleRule\n    noAlternativeColors = {\n        borderTopWidth: this.themeProperties.ROW_LIST_ROW_BORDER_WIDTH,\n        borderTopStyle: this.themeProperties.BASE_BORDER_STYLE,\n        borderTopColor: this.themeProperties.BASE_BORDER_COLOR,\n    };\n}\n\n\n@registerStyle(RowListStyle)\nexport class RowList extends SimpleStyledElement {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.rowList);\n    }\n\n    getDefaultOptions(options) {\n        return {\n            alternateColors: true,\n        }\n    }\n\n    getRowClasses(index) {\n        let rowClasses = this.styleSheet.DEFAULT;\n        if (this.getSize()) {\n            rowClasses = rowClasses + this.styleSheet.Size(this.getSize());\n        }\n\n        const {alternateColors} = this.options;\n\n        if (alternateColors && index % 2 === 1) {\n            rowClasses = rowClasses + this.styleSheet.alternativeColorsOddRow;\n        } else if (!alternateColors && index > 0) {\n            rowClasses = rowClasses + this.styleSheet.noAlternativeColors;\n        }\n\n        return rowClasses;\n    }\n\n    render() {\n        const {rows, rowParser} = this.options;\n\n        return rows.map((row, index) => {\n            return <div className={this.getRowClasses(index)}>\n                {rowParser(row)}\n            </div>\n        });\n    }\n}","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\nimport {CardPanelStyle} from \"../CardPanel\";\n\nclass CollapsibleStyle extends StyleSheet {\n    transitionDuration = 0.4;\n\n    @styleRule\n    collapsing = {\n        marginTop: \"0\",\n        transitionTimingFunction: \"ease\",\n        transitionDuration: `${this.transitionDuration}s`,\n        transitionProperty: \"margin-top\",\n        transitionDelay: \"-0.15s\",\n    };\n\n    @styleRule\n    collapsed = {\n        marginTop: \"-100% !important\",\n        transitionDelay: \"0s !important\",\n    };\n}\n\n\nclass CollapsiblePanelStyle extends CardPanelStyle {\n    @styleRuleInherit\n    panel = {\n        boxShadow: null,\n        borderWidth: \"1px\",\n        borderColor: \"#ccc !important\",\n        borderRadius: \"3px\",\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        borderBottom: \"1px solid transparent\",\n        borderTopLeftRadius: \"3px\",\n        borderTopRightRadius: \"3px\",\n        backgroundColor: \"#fefefe\",\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        }\n    };\n\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":before\": {\n            transition: \"transform .2s linear\",\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            display: \"inline-block\",\n            lineHeight: \"0.7em\",\n            width: \"0.7em\",\n            fontSize: \"150%\",\n            verticalAlign: \"bottom\",\n            height: \"0.7em\",\n            textAlign: \"center\",\n            transform: \"rotate(0deg)\",\n            marginRight: \".2em\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":before\": {\n            transform: \"rotate(-90deg) !important\",\n        },\n    };\n}\n\nexport {CollapsibleStyle, CollapsiblePanelStyle};\n","import {CollapsibleStyle} from \"./Style\";\n\nfunction CollapsibleMixin(BaseClass, CollapsibleClass = CollapsibleStyle) {\n    class CollapsibleElement extends BaseClass {\n        getDefaultOptions() {\n            return {\n                collapsed: true,\n            };\n        }\n\n        static collapsibleStyleSheet = new CollapsibleClass();\n\n        getCollapsibleStyleSheet() {\n            return this.options.collapsibleStyleSheet || this.constructor.collapsibleStyleSheet;\n        }\n\n        expand(panel) {\n            this.options.collapsed = false;\n            this.dispatch(\"expand\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.removeClass(\"hidden\");\n            setTimeout(() => {\n                panel.removeClass(collapsibleStyle.collapsed);\n            }, 100);\n        }\n\n        collapse(panel) {\n            this.options.collapsed = true;\n            this.dispatch(\"collapse\");\n            const collapsibleStyle = this.getCollapsibleStyleSheet();\n            panel.addClass(collapsibleStyle.collapsing);\n            panel.addClass(collapsibleStyle.collapsed);\n            let transitionEndFunction = () => {\n                if (this.options.collapsed) {\n                    panel.addClass(\"hidden\");\n                }\n            };\n            panel.addNodeListener(\"transitionend\", transitionEndFunction);\n        }\n    }\n\n    return CollapsibleElement;\n}\n\n\nexport {CollapsibleMixin};\n","import {UI} from \"../UIBase\";\nimport {CollapsibleMixin} from \"./CollapsibleMixin\";\nimport {CardPanel} from \"../CardPanel\";\nimport {CollapsiblePanelStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(CollapsiblePanelStyle)\nclass CollapsiblePanel extends CollapsibleMixin(CardPanel) {\n    toggle() {\n        if (this.options.collapsed) {\n            this.expand();\n        } else {\n            this.collapse();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(this.styleSheet.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        this.toggleButton.addClass(this.styleSheet.collapsedButton);\n    }\n\n    setTitle(title) {\n        this.options.title = title;\n        this.toggleButton.setChildren(title);\n    }\n\n    getChildrenToRender() {\n        let collapsedPanelClass = \"\";\n        let collapsedHeadingClass = \"\";\n        let hiddenClass = \"\";\n        let contentStyle = {};\n\n        if (this.options.collapsed) {\n            collapsedHeadingClass = this.styleSheet.collapsedButton;\n            collapsedPanelClass = this.styleSheet.collapsed;\n            hiddenClass = \"hidden\";\n        }\n        if (!this.options.noPadding) {\n            contentStyle = {\n                padding: \"8px 8px\",\n            };\n        }\n\n        return [<div className={this.styleSheet.heading}>\n                    <div ref=\"toggleButton\"  className={`${this.styleSheet.button} ${collapsedHeadingClass}`}\n                        onClick={() => this.toggle()}>\n                        {this.getTitle()}\n                    </div>\n                </div>,\n                <div style={{overflow: \"hidden\"}}>\n                  <div ref=\"contentArea\" className={`${collapsedPanelClass} ${hiddenClass}`}\n                       style={contentStyle}>\n                        {this.render()}\n                    </div>\n                </div>\n        ];\n    }\n}\n\n\nclass DelayedCollapsiblePanel extends CollapsiblePanel {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            UI.renderingStack.push(this);\n            this.contentArea.options.children = this.render();\n            UI.renderingStack.pop();\n            this.contentArea.redraw();\n            this.delayedMount();\n        }\n        super.toggle();\n    }\n\n    render() {\n        if (!this._haveExpanded) {\n            return [];\n        }\n        return this.getDelayedChildren();\n    }\n}\n\nexport {CollapsiblePanel, DelayedCollapsiblePanel};\n","import {StyleSheet, styleRule} from \"../Style\";\n\nclass FloatingWindowStyle extends StyleSheet {\n    @styleRule\n    hiddenAnimated = {\n        visibility: \"hidden\",\n        opacity: \"0\",\n        transition: \"opacity 0.1s linear\",\n    };\n\n    @styleRule\n    visibleAnimated = {\n        visibility: \"visible\",\n        opacity: \"1\",\n        transition: \"opacity 0.1s linear\",\n    };\n}\n\n\nclass ModalStyle extends FloatingWindowStyle {\n    @styleRule\n    container = {\n        position: \"fixed\",\n        top: \"0px\",\n        left: \"0px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: \"9999\",\n    };\n\n    @styleRule\n    background = {\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        background: \"rgba(0,0,0,0.5)\",\n    };\n\n    @styleRule\n    header = {\n        padding: \"15px\",\n        borderBottom: \"1px solid #e5e5e5\",\n    };\n\n    @styleRule\n    body = {\n        position: \"relative\",\n        padding: \"15px\",\n    };\n\n    @styleRule\n    footer = {\n        padding: \"15px\",\n        textAlign: \"right\",\n        borderTop: \"1px solid #e5e5e5\",\n    };\n}\n\nexport {FloatingWindowStyle, ModalStyle};\n","import {UI} from \"../UIBase\";\nimport {FloatingWindowStyle} from \"./Style\";\nimport {registerStyle} from \"../style/Theme\";\n\n@registerStyle(FloatingWindowStyle)\nclass FloatingWindow extends UI.Element {\n    getDefaultOptions() {\n        return {\n            transitionTime: 0,\n            style: {\n                zIndex: 2016,\n            }\n        };\n    }\n\n    fadeOut() {\n        this.removeClass(this.styleSheet.visibleAnimated);\n        this.addClass(this.styleSheet.hiddenAnimated);\n    }\n\n    fadeIn() {\n        this.removeClass(this.styleSheet.hiddenAnimated);\n        this.addClass(this.styleSheet.visibleAnimated);\n    }\n\n    show() {\n        // TODO: refactor this to use this.parent and UI.Element appendChild\n        if (!this.isInDocument()) {\n            this.parentNode.appendChild(this.node);\n            this.redraw();\n            setTimeout(() => {\n                this.fadeIn();\n            }, 0);\n        }\n    }\n\n    setParentNode(parentNode) {\n        this.options.parentNode = parentNode;\n    }\n\n    get parentNode() {\n        if (!this.options.parentNode) {\n            if (this.parent) {\n                if (this.parent instanceof HTMLElement) {\n                    this.options.parentNode = this.parent;\n                } else {\n                    this.options.parentNode = this.parent.node;\n                }\n            } else {\n                this.options.parentNode = document.body;\n            }\n        }\n        return this.options.parentNode;\n    }\n\n    hide() {\n        // TODO: refactor this to use this.parent and UI.Element removeChild\n        if (this.isInDocument()) {\n            this.fadeOut();\n            setTimeout(() => {\n                if (this.isInDocument()) {\n                    this.parentNode.removeChild(this.node);\n                }\n            }, this.options.transitionTime);\n        }\n    }\n}\n\n\nclass VolatileFloatingWindow extends FloatingWindow {\n    bindWindowListeners() {\n        this.hideListener = this.hideListener || (() => {this.hide();});\n        window.addEventListener(\"click\", this.hideListener);\n    }\n\n    toggle() {\n        if (!this.isInDocument()) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    show() {\n        if (!this.isInDocument()) {\n            this.bindWindowListeners();\n            super.show();\n        }\n    }\n\n    hide() {\n        if (this.isInDocument()) {\n            super.hide();\n        }\n    }\n\n    onUnmount() {\n        super.onUnmount();\n        window.removeEventListener(\"click\", this.hideListener);\n    }\n\n    onMount() {\n        if (!this.options.notVisible) {\n            this.bindWindowListeners();\n        } else {\n            setTimeout(() => {\n                this.hide();\n            });\n        }\n\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\nexport {FloatingWindow, VolatileFloatingWindow};\n","import {ButtonGroup} from \"../button/ButtonGroup\";\nimport {Button} from \"../button/Button\";\nimport {FloatingWindow} from \"./FloatingWindow\";\nimport {ModalStyle} from \"./Style\";\nimport {Panel, TemporaryMessageArea} from \"../UIPrimitives\";\nimport {UI} from \"../UIBase\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {registerStyle} from \"../style/Theme\";\nimport {Level, Size} from \"../Constants\";\n\n@registerStyle(ModalStyle)\nclass Modal extends UI.Element {\n    getDefaultOptions() {\n        return {\n            closeButton: true,\n            destroyOnHide: true,\n            visible: false,\n        };\n    }\n\n    getChildrenToRender() {\n        return [\n            <Panel ref=\"modalContainer\" className={(this.options.visible ? \"\" : \"hidden\") + this.styleSheet.container}>\n                <Panel ref=\"behindPanel\" className={this.styleSheet.hiddenAnimated + this.styleSheet.background} onClick={() => this.hide()}/>\n                {this.getModalWindow()}\n            </Panel>\n        ];\n    }\n\n    getModalWindow() {\n        let closeButton = null;\n        if (this.options.closeButton) {\n            // TODO: this should be in a method\n            closeButton = <div style={{right: \"10px\", zIndex: \"10\", position: \"absolute\"}}>\n                <Button className=\"close\" size={Size.EXTRA_LARGE} style={{border: \"none\"}} label=\"&times;\" onClick={() => this.hide()}/>\n            </div>;\n        }\n\n        return <FloatingWindow ref=\"modalWindow\" style={this.getModalWindowStyle()}>\n            {closeButton}\n            {this.render()}\n        </FloatingWindow>;\n    }\n\n    getModalWindowStyle() {\n        if (this.options.fillScreen) {\n            this.options.width = \"85%\";\n        }\n        // TODO(@Rocky): I don't like this very much, honestly...\n        return {\n            position: \"relative\",\n            padding: \"1%\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            borderRadius: \"10px\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: this.options.width || \"50%\",\n            height: this.options.height || \"auto\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    isVisible() {\n        return this.options.visible;\n    }\n\n    hide() {\n        if (!this.isVisible()) {\n            return;\n        }\n\n        this.options.visible = false;\n        this.modalWindow.fadeOut();\n\n        setTimeout(() => {\n            this.behindPanel.removeClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.addClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalContainer.addClass(\"hidden\");\n                if (this.options.destroyOnHide) {\n                    this.destroyNode();\n                }\n            }, this.modalWindow.options.transitionTime || 0);\n\n            this.detachListener(this.closeListenerHandler);\n        }, this.modalWindow.options.transitionTime || 0);\n        document.body.classList.remove(\"unscrollable\");\n    }\n\n    show() {\n        this.options.visible = true;\n        if (!this.node) {\n            this.mount(document.body);\n        }\n        this.modalContainer.removeClass(\"hidden\");\n        setTimeout(() => {\n            this.behindPanel.addClass(this.styleSheet.visibleAnimated);\n            this.behindPanel.removeClass(this.styleSheet.hiddenAnimated);\n\n            setTimeout(() => {\n                this.modalWindow.fadeIn();\n            }, this.modalWindow.options.transitionTime);\n        }, 0);\n        this.closeListenerHandler = this.attachListener(Dispatcher.Global, \"closeAllModals\", () => {\n            this.hide();\n        });\n        document.body.classList.add(\"unscrollable\");\n    }\n\n    static show(options={}) {\n        let modal = new this(options);\n        modal.show();\n        return modal;\n    }\n}\n\n\nclass ActionModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            closeButton: false\n        });\n    }\n\n    getActionName() {\n        return this.options.actionName;\n    }\n\n    getActionLevel() {\n        return this.options.level || Level.DEFAULT;\n    }\n\n    getCloseName() {\n        return this.options.closeName || \"Close\";\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>{this.getHeader()}</div>,\n            (this.getBody() ? <div className={this.styleSheet.body}>{this.getBody()}</div> : null),\n            (this.getFooter() ? <div className={this.styleSheet.footer}>{this.getFooter()}</div> : null)\n        ];\n    }\n\n    getHeader() {\n        return <h4>{this.getTitle()}</h4>;\n    }\n\n    getTitle() {\n        return this.options.title || this.getActionName();\n    }\n\n    getBody() {\n        return null;\n    }\n\n    getActionButton() {\n        return <Button level={this.getActionLevel()} label={this.getActionName()}\n                       onClick={() => this.action()} ref=\"actionButton\" />;\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label={this.getCloseName()} onClick={() => this.hide()}/>\n                  {this.getActionButton()}\n            </ButtonGroup>\n        ];\n    }\n\n    action() {}\n}\n\n\nconst ActionModalButton = (ActionModal) => class ActionModalButton extends Button {\n    getModalOptions() {\n        let modalOptions = {\n            actionName: this.options.label,\n            level: this.options.level\n        };\n\n        Object.assign(modalOptions, this.options.modalOptions);\n        return modalOptions;\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            ActionModal.show(this.getModalOptions());\n        });\n    }\n};\n\n\nclass ErrorModal extends ActionModal {\n    getTitle() {\n        return \"An Error occurred\";\n    }\n\n    getBody() {\n        return this.options.error.message || this.options.error;\n    }\n\n    getFooter() {\n        return <Button level={Level.DANGER} label=\"Dismiss\" onClick={() => this.hide()}/>;\n    }\n}\n\nexport {Modal, ErrorModal, ActionModal, ActionModalButton};\n","import {styleRule, StyleSheet} from \"../Style\";\nimport {Device} from \"../../base/Device\";\n\nclass GlobalContainerStyle extends StyleSheet {\n    constructor() {\n        super({updateOnResize: Device.isMobileDevice()});\n    }\n\n    @styleRule\n    default = {\n        height: () => {return Device.isMobileDevice() ? `${window.innerHeight}px` : \"100vh\"},\n        paddingTop: this.themeProperties.NAV_MANAGER_NAVBAR_HEIGHT,\n        background: this.themeProperties.COLOR_BACKGROUND_BODY,\n        width: \"100%\",\n        \">*\": {\n            height: \"100%\",\n            width: \"100%\",\n            paddingTop:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP\n                ),\n            paddingBottom:\n                (Device.isMobileDevice() ? this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE :\n                                           this.themeProperties.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP\n                ),\n            overflow: Device.isMobileDevice() ? \"\" : \"auto\",\n        }\n    };\n}\n\nexport {GlobalContainerStyle};","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {GlobalContainerStyle} from \"./Style\";\nimport {Device} from \"../../base/Device\";\n\n@registerStyle(GlobalContainerStyle)\nclass GlobalContainer extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.default);\n    }\n\n    onMount() {\n        if (!Device.isTouchDevice() || !Device.isMobileDevice()) {\n            Object.assign(document.body.style, {\n                overflow: \"hidden\",\n            });\n        }\n        GlobalContainer.Global = GlobalContainer.Global || this;\n    }\n}\n\nexport {GlobalContainer};","import {UI} from \"../UIBase\";\n\nclass Divider extends UI.Element {\n    dragMousedown(event) {};\n\n    dragMousemove(event) {};\n\n    dragMouseup(event) {};\n\n    dividerMousedownFunction(event) {\n        this.dragMousedown(event);\n        this.parent.dispatch(\"dividerMousedown\", {divider: this, domEvent: event});\n\n        let dragMousemoveFunction = (event) => {\n            this.dragMousemove(event);\n            event.preventDefault(); // for touch devices\n            this.parent.dispatch(\"dividerMousemove\", event);\n        };\n\n        this.parent.addNodeListener(\"touchmove\", dragMousemoveFunction);\n        this.parent.addNodeListener(\"mousemove\", dragMousemoveFunction);\n\n        let dragMouseupFunction = (event) => {\n            this.dragMouseup(event);\n            this.parent.dispatch(\"dividerMouseup\", event);\n            this.parent.removeNodeListener(\"touchmove\", dragMousemoveFunction);\n            window.removeEventListener(\"touchend\", dragMouseupFunction);\n            this.parent.removeNodeListener(\"mousemove\", dragMousemoveFunction);\n            window.removeEventListener(\"mouseup\", dragMouseupFunction);\n        };\n\n        window.addEventListener(\"touchend\", dragMouseupFunction);\n        window.addEventListener(\"mouseup\", dragMouseupFunction);\n    }\n\n    onMount() {\n        // TODO: fix this hack when Device.isTouchDevice works\n        this.addNodeListener(\"touchstart\", (event) => {this.touchDeviceTriggered = true; this.dividerMousedownFunction(event);});\n        this.addNodeListener(\"mousedown\", (event) => {if (!this.touchDeviceTriggered) {this.dividerMousedownFunction(event);}});\n    }\n}\n\nexport {Divider};\n","import {StyleSheet, styleRule, styleRuleInherit} from \"../Style\";\n\nclass DividerStyle extends StyleSheet {\n    @styleRule\n    noTextSelection = {\n        \"-webkit-user-select\": \"none\",\n        \"-moz-user-select\": \"none\",\n        \"-ms-user-select\": \"none\",\n        \"-o-user-select\": \"none\",\n        userSelect: \"none\",\n    };\n}\n\nclass AccordionStyle extends DividerStyle {\n    @styleRule\n    accordion = {\n        display: \"flex\",\n        flexDirection: \"column\",\n        \">:nth-of-type(even)\": {\n            flexGrow: \"1\",\n            flexShrink: \"1\",\n            flexBasis: \"auto\",\n            overflow: \"auto\",\n            position: \"relative\",\n        },\n        \">:nth-of-type(odd)\": {\n            fontSize: \"1em\",\n            textTransform: \"uppercase\",\n            padding: \"8px 8px\",\n        }\n    };\n\n    @styleRule\n    grab = {\n        cursor: \"grab\",\n        cursor: \"-moz-grab\",\n        cursor: \"-webkit-grab\",\n    };\n\n    @styleRule\n    grabbing = {\n        cursor: \"grabbing\",\n        cursor: \"-moz-grabbing\",\n        cursor: \"-webkit-grabbing\",\n    };\n\n    @styleRule\n    collapseIcon = {\n        width: \"0.7em\",\n        fontSize: \"120% !important\",\n        fontWeight: \"900 !important\",\n        textAlign: \"center\",\n        marginRight: \"0.2em\",\n    };\n}\n\n\nclass SectionDividerStyle extends DividerStyle {\n    barThickness = 2;\n    barPadding = 3;\n    dividerColor = () => \"#DDD\";\n\n    @styleRule\n    horizontalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        height: \"100%\",\n        cursor: \"col-resize\",\n        width: this.barThickness + 2 * this.barPadding + \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderLeft: `${this.barPadding}px solid transparent`,\n        borderRight: `${this.barPadding}px solid transparent`,\n        marginLeft: `${-this.barThickness / 2 - this.barPadding}px`,\n        marginRight: `${-this.barThickness / 2}px`,\n        display: \"inline-block\",\n    };\n\n    @styleRule\n    verticalDivider = {\n        zIndex: \"10\",\n        position: \"absolute\",\n        cursor: \"row-resize\",\n        width: \"100%\",\n        height: this.barThickness + 2 * this.barPadding +  \"px\",\n        background: () => this.dividerColor(),\n        backgroundClip: \"padding-box\",\n        borderBottom: `${this.barPadding}px solid transparent`,\n        borderTop: `${this.barPadding}px solid transparent`,\n        marginBottom: `${-this.barThickness / 2  - this.barPadding}px`,\n        marginTop: `${-this.barThickness / 2 - this.barPadding}px`,\n    };\n\n    @styleRule\n    horizontalSection = {\n        position: \"relative\",\n        whiteSpace: \"nowrap\",\n        \">*\": {\n            whiteSpace: \"initial\",\n            verticalAlign: \"top\",\n            paddingLeft: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingRight: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingLeft: \"0\",\n        },\n        \">:last-child\": {\n            paddingRight: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n        \">:nth-of-type(odd)\": {\n            display: \"inline-block\",\n        }\n    };\n\n    @styleRule\n    verticalSection = {\n        position: \"relative\",\n        \">*\": {\n            paddingTop: `${this.barThickness / 2 + this.barPadding}px`,\n            paddingBottom: `${this.barThickness / 2 + this.barPadding}px`,\n        },\n        \">:first-child\": {\n            paddingTop: \"0\",\n        },\n        \">:last-child\": {\n            paddingBottom: \"0\",\n        },\n        \">:nth-of-type(even)\": {\n            padding: \"0\",\n        },\n    };\n}\n\nclass TitledDividerStyle extends SectionDividerStyle {\n    barThickness = 16;\n    barPadding = 1;\n    transitionTime = .3;\n\n    dividerStyle = {\n        backgroundColor: \"white\",\n        borderColor: \"#DDD !important\",\n    };\n\n    @styleRuleInherit\n    horizontalDivider = Object.assign(this.dividerStyle, {\n        display: \"inline-flex\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        \">*\": {\n            flex: \"1\",\n            display: \"flex\",\n            color: \"rgba(0,0,0, .4)\",\n        },\n        \">:first-child\": {\n            alignItems: \"flex-end\",\n        },\n        \">:last-child\": {\n            alignItems: \"flex-start\",\n        },\n        \">:nth-child(2)\": {\n            flex: \".2\",\n            alignItems: \"center\",\n        }\n    });\n\n    @styleRule\n    horizontalDots = {\n        transform: \"rotate(90deg) scaleX(5)\",\n    };\n\n    @styleRuleInherit\n    verticalDivider = Object.assign(this.dividerStyle, {\n        display: \"flex\",\n        alignItems: \"center\",\n    });\n\n    @styleRule\n    verticalDots = {\n        flex: \"1\",\n        fontSize: \"70% !important\",\n        height: 0,\n        textAlign: \"center\",\n        transform: \"scaleX(10) translateY(-.4em)\",\n    };\n\n    @styleRule\n    arrowButton = {\n        fontSize: \"230% !important\",\n        padding: \"1em .2em\",\n        color: \"rgba(0,0,0, .4)\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"black\",\n        }\n    };\n\n    @styleRule\n    buttonsDisabled = {\n        \">:first-child\": {\n            pointerEvents: \"none\",\n        },\n        \">:last-child\": {\n            pointerEvents: \"none\",\n        },\n    };\n\n    @styleRule\n    barCollapsePanel = {\n        position: \"relative\",\n        \">:first-child\": {\n            width: \"100%\",\n            height: \"100%\",\n        },\n        \">:nth-child(2)\": {\n            display: \"none\",\n            opacity: \"0\",\n            transition: \"opacity \" + this.transitionTime + \"s ease\",\n        },\n    };\n\n    @styleRule\n    hiddenContent = {\n        \">:first-child\": {\n            display: \"none\",\n        },\n        \">:nth-child(2)\": {\n            opacity: \"1\",\n        },\n    };\n\n    @styleRule\n    collapsedBarTitle = {\n        cursor: \"pointer\",\n        borderLeft: \"1px solid #ccc\",\n        borderRight: \"1px solid #ccc\",\n        width: \"100%\",\n        height: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        backgroundColor: \"#fff\",\n        flexDirection: \"column\",\n        zIndex: 5,\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        \":hover\": {\n            backgroundColor: \"#f3f3f3\",\n        },\n        \">:nth-child(2)\": {\n            flex: \"1\",\n            transform: \"rotate(90deg)\",\n        },\n        \">:nth-child(2)>:first-child\": {\n            textTransform: \"uppercase\",\n            fontWeight: \"bold\",\n            fontSize: \"130%\",\n            whiteSpace: \"nowrap\",\n            marginTop: \"-.4em\",\n            transform: \"translateY(10%)\",\n        },\n        \">*\": {\n            display: \"flex\",\n            alignItems: \"center\",\n        },\n        \">:first-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n        \">:last-child\": {\n            flex: \".5\",\n            fontSize: \"180%\",\n        },\n    };\n\n    @styleRule\n    animatedSectionDivider = {\n        \">*\": {\n            transition: this.transitionTime + \"s height ease, \" + this.transitionTime + \"s width ease\",\n        }\n    };\n\n    @styleRule\n    paddingRemoved = {\n        \">*\": {\n            padding: \"0 !important\",\n            overflow: \"hidden\",\n        },\n        \">:nth-of-type(even)\": {\n            display: \"none !important\",\n        }\n    };\n}\n\nexport {AccordionStyle, SectionDividerStyle, TitledDividerStyle};\n","// TODO: Too much \"hidden\"\nimport {Device} from \"../../base/Device\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Divider} from \"./Divider\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {SectionDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\n\n\n\n// options.orientation is the orientation of the divided elements\n@registerStyle(SectionDividerStyle)\nexport class DividerBar extends Divider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            orientation: Orientation.HORIZONTAL,\n        });\n    }\n\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalDivider);\n        } else {\n            attr.addClass(this.styleSheet.horizontalDivider);\n        }\n    }\n}\n\n\n/* SectionDivider class should take in:\n    - Vertical or horizontal separation\n    - All the children it's dividing\n    - An option on how to redivide the sizes of the children\n */\n@registerStyle(SectionDividerStyle)\nexport class SectionDivider extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({\n            autoCollapse: false,\n        }, super.getDefaultOptions())\n    }\n\n    constructor(options) {\n        super(options);\n        this.uncollapsedSizes = new WeakMap();\n    }\n\n    getDividerBarClass() {\n        return DividerBar;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.VERTICAL) {\n            attr.addClass(this.styleSheet.verticalSection);\n        } else {\n            attr.addClass(this.styleSheet.horizontalSection);\n        }\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n\n    getDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            return element.getWidth();\n        } else {\n            return element.getHeight();\n        }\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    getMinDimension(element) {\n        if (this.getOrientation() === Orientation.HORIZONTAL && element.options.hasOwnProperty(\"minWidth\")) {\n            return element.options.minWidth;\n        } else if (this.getOrientation() === Orientation.VERTICAL && element.options.hasOwnProperty(\"minHeight\")) {\n            return element.options.minHeight;\n        } else {\n            return this.getDimension(this) / this.panels.length / 4;\n        }\n    }\n\n    getHiddenDivider(index) {\n        let divider;\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i + 1].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        divider = null;\n        for(let i = index - 1; i >= 0; i -= 1) {\n            if (this.dividers[i].hasClass(\"hidden\")) {\n                divider = this.dividers[i];\n            } else if (!this.dividers[i].hasClass(\"hidden\")) {\n                break;\n            }\n            if (divider && !this.panels[i].hasClass(\"hidden\")) {\n                return divider;\n            }\n        }\n        return null;\n    }\n\n    getVisibleDivider(index) {\n        for (let i = index; i < this.panels.length - 1; i += 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.dividers[i].hasClass(\"hidden\")) {\n                return this.dividers[i];\n            }\n        }\n        return null;\n    }\n\n    collapseChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getVisibleDivider(index);\n        if (divider) {\n            divider.hide();\n        }\n\n        this.setDimension(child, \"0\");\n        child.hide();\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) !== 0 && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + childSize / unCollapsedCount) * 100\n                                  / parentSize - 0.5 / this.children.length + \"%\");\n            }\n        }\n\n        this.recalculateDimensions();\n    }\n\n    expandChild(index) {\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let divider = this.getHiddenDivider(index);\n        if (divider) {\n            divider.show();\n        }\n\n        child.show();\n        let childSize = this.uncollapsedSizes.get(child);\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - childSize / (unCollapsedCount - 1)) * 100\n                                  / parentSize - this.panels.length / 2 + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n        this.recalculateDimensions();\n    }\n\n    isCollapsed(child) {\n        return !this.getDimension(child);\n    }\n\n    toggleChild(index) {\n        if (this.isCollapsed(this.panels[index])) {\n            this.expandChild(index);\n        } else {\n            this.collapseChild(index);\n        }\n    }\n\n    recalculateDimensions() {\n        if (!this.isInDocument()) {\n            return;\n        }\n        let parentSize = this.getDimension(this);\n        let fixedTotalSize = 0;\n        let unfixedTotalSize = 0;\n        for (let panel of this.panels) {\n            if (panel.options.fixed) {\n                fixedTotalSize += this.getDimension(panel);\n            } else {\n                unfixedTotalSize += this.getDimension(panel);\n            }\n        }\n        let ratio = (parentSize - fixedTotalSize) / parentSize;\n        for (let panel of this.panels) {\n            if (!panel.options.fixed && !panel.hasClass(\"hidden\")) {\n                this.setDimension(panel, this.getDimension(panel) * 100 * ratio / unfixedTotalSize + \"%\");\n            }\n        }\n    }\n\n    getPreviousUnfixedChild(index) {\n        for (let i = index; i >= 0 ; i -= 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    getNextUnfixedChild(index) {\n        for (let i = index + 1; i < this.panels.length; i += 1) {\n            let panel = this.panels[i];\n            if (!panel.hasClass(\"hidden\") && !panel.options.fixed) {\n                return panel;\n            }\n        }\n        return null;\n    }\n\n    dividerMouseDownFunction(dividerEvent) {\n        let previousEvent = dividerEvent.domEvent;\n        const index = this.dividers.indexOf(dividerEvent.divider);\n\n        const previousPanel = this.getPreviousUnfixedChild(index);\n        const nextPanel = this.getNextUnfixedChild(index);\n\n        if (previousPanel && nextPanel) {\n            const parentSize = this.getDimension(this);\n            let panelsSize = parentSize;\n\n            for (let panel of this.panels) {\n                if (panel.options.fixed) {\n                    panelsSize -= this.getDimension(panel);\n                }\n            }\n\n            const deltaFunction = (this.getOrientation() === Orientation.HORIZONTAL ?\n                                 (event) => Device.getEventX(event) :  (event) => Device.getEventY(event));\n\n            const mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n                const delta = deltaFunction(event) - deltaFunction(previousEvent);\n\n                const nextSize = this.getDimension(nextPanel) - delta;\n                const previousSize = this.getDimension(previousPanel) + delta;\n\n                if (this.options.autoCollapse) {\n                    if ((delta > 0 && nextPanel.collapsed) || (delta < 0 && previousPanel.collapsed)) {\n                        return;\n                    }\n\n                    if (delta < 0 && nextPanel.collapsed && this.options.autoCollapse) {\n                        this.expandChild(index + 1);\n                        return;\n                    }\n\n                    if (delta > 0 && previousPanel.collapsed) {\n                        this.expandChild(index);\n                        return;\n                    }\n\n                    if (nextSize < this.getMinDimension(nextPanel)) {\n                        this.collapseChild(index + 1);\n                        return;\n                    }\n\n                    if (previousSize < this.getMinDimension(previousPanel)) {\n                        this.collapseChild(index);\n                        return;\n                    }\n                } else {\n                    if (nextSize < this.getMinDimension(nextPanel) || previousSize < this.getMinDimension(previousPanel)) {\n                        return;\n                    }\n                }\n\n                this.setDimension(nextPanel, nextSize * 100 / parentSize + \"%\");\n                this.setDimension(previousPanel, previousSize * 100 / parentSize + \"%\");\n\n                previousEvent = event;\n            });\n\n            const mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n                if (this.clearListeners) {\n                    this.clearListeners();\n                }\n            });\n\n            this.clearListeners = () => {\n                mouseMoveListener.remove();\n                mouseUpListener.remove();\n                this.clearListeners = null;\n            }\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMouseDownFunction(dividerEvent));\n        setTimeout(() => {\n            this.recalculateDimensions();\n        });\n    }\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        let leftChildVisible = false;\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (let child of unwrapArray(this.render())) {\n            if (this.panels.length) {\n                let hiddenClass = \"hidden\";\n                if (leftChildVisible && !child.hasClass(\"hidden\")) {\n                    hiddenClass = \"\";\n                }\n                let divider = <DividerBarClass className={hiddenClass} orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            leftChildVisible |= !child.hasClass(\"hidden\");\n            children.push(child);\n            this.panels.push(child);\n        }\n        return children;\n    }\n}","// TODO: This class is incomplete for horizontal orientation and more than 2 panels.\n\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {DividerBar, SectionDivider} from \"./SectionDivider\";\nimport {TitledDividerStyle} from \"./Style\";\nimport {Orientation} from \"../Constants\";\nimport {FAIcon} from \"../FontAwesome\";\n\n\n\n@registerStyle(TitledDividerStyle)\nclass TitledSectionDividerBar extends DividerBar {\n    render() {\n        if (this.options.orientation === Orientation.VERTICAL) {\n            return [\n\n                <FAIcon icon=\"ellipsis-h\" className={this.styleSheet.verticalDots} />,\n\n            ]\n        } else {\n            return [\n                <div><FAIcon ref=\"rightButton\" icon=\"caret-right\" className={this.styleSheet.arrowButton}/></div>,\n                <div><FAIcon icon=\"bars\" className={this.styleSheet.horizontalDots}/></div>,\n                <div><FAIcon ref=\"leftButton\" icon=\"caret-left\" className={this.styleSheet.arrowButton} /></div>,\n            ];\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.leftButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.leftButton.addClickListener(() => {\n            this.dispatch(\"collapsePrevious\");\n        });\n        this.rightButton.addNodeListener(\"mousedown\", (event) => {\n            event.stopPropagation();\n        });\n        this.rightButton.addClickListener(() => {\n            this.dispatch(\"collapseNext\");\n        })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nclass BarCollapsePanel extends UI.Element {\n    extraNodeAttributes(attr) {\n        const panelChild = this.getGivenChildren()[0];\n        attr.addClass(this.styleSheet.barCollapsePanel);\n        let panelSize = panelChild.options.size;\n        if (this.collapsed) {\n            attr.addClass(this.styleSheet.hiddenContent);\n            panelSize = this.options.collapsedSize;\n        }\n        if (panelSize) {\n            if (this.options.orientation === Orientation.VERTICAL) {\n                attr.setStyle(\"height\", panelSize);\n            } else {\n                attr.setStyle(\"width\", panelSize);\n            }\n        }\n\n        if (this.options.orientation === Orientation.VERTICAL) {\n            attr.setStyle(\"width\", \"100%\");\n        } else {\n            attr.setStyle(\"height\", \"100%\");\n        }\n    }\n\n    getChildrenToRender() {\n        this.collapsed = this.getGivenChildren()[0].options.collapsed;\n        const isFirst = this.parent.panels.indexOf(this) === 0;\n        const isLast = this.parent.panels.indexOf(this) === this.parent.panels.length - 1;\n        const firstCaret = isLast ? \"left\" : \"right\";\n        const lastCaret = isFirst ? \"right\" : \"left\";\n        return [\n            this.render(),\n            <div ref=\"collapsedBarTitle\" style={{display: this.collapsed ? \"flex\": \" none\"}}\n                 className={this.styleSheet.collapsedBarTitle}>\n                <div><FAIcon icon={\"caret-\" + firstCaret}/></div>\n                <div className={this.styleSheet.title}>\n                    <div>\n                        {this.options.title}\n                    </div>\n                </div>\n                <div><FAIcon icon={\"caret-\" + lastCaret}/></div>\n            </div>\n        ]\n    }\n\n    toggle() {\n        if (this.collapsed) {\n            this.collapsed = false;\n            this.removeClass(this.styleSheet.hiddenContent);\n            this.collapsedBarTitle.setStyle(\"display\", \"none\");\n        } else {\n            this.collapsed = true;\n            this.collapsedBarTitle.setStyle(\"display\", \"flex\");\n            setTimeout(() => {\n                this.addClass(this.styleSheet.hiddenContent);\n            }, 100)\n\n        }\n    }\n\n    onMount() {\n         this.collapsedBarTitle.addClickListener(() => {\n             this.dispatch(\"expand\");\n         });\n         this.addListener(\"resize\", () => {\n             for (const child of unwrapArray(this.render())) {\n                 child.dispatch(\"resize\");\n             }\n         })\n    }\n}\n\n\n@registerStyle(TitledDividerStyle)\nexport class TitledSectionDivider extends SectionDivider {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            collapsedSize: 40,\n            autoCollapse: true,\n        });\n    }\n\n    getDividerBarClass() {\n        return TitledSectionDividerBar;\n    }\n\n    setDimension(element, size) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            element.setWidth(size);\n        } else {\n            element.setHeight(size);\n        }\n    }\n\n    collapseChild(index) {\n        if (this.clearListeners) {\n            this.clearListeners();\n        }\n\n        this.addClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let childSize = this.getDimension(child);\n        this.uncollapsedSizes.set(child, childSize);\n\n        let unCollapsedCount = -1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        this.setDimension(child, this.options.collapsedSize);\n        child.toggle();\n\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) + (childSize - this.options.collapsedSize)/ unCollapsedCount) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n    expandChild(index) {\n        this.removeClass(this.styleSheet.paddingRemoved);\n        this.addClass(this.styleSheet.animatedSectionDivider);\n\n        let parentSize = this.getDimension(this);\n        let child = this.panels[index];\n\n        let unCollapsedCount = 1;\n        for (let panel of this.panels) {\n            if (!panel.collapsed && !panel.options.fixed) {\n                unCollapsedCount += 1;\n            }\n        }\n\n        let childSize = this.uncollapsedSizes.get(child);\n        child.toggle();\n\n\n        for (let panel of this.panels) {\n            if (this.getDimension(panel) && !panel.options.fixed) {\n                this.setDimension(panel, (this.getDimension(panel) - (childSize - this.options.collapsedSize)/ (unCollapsedCount - 1)) * 100\n                                  / parentSize + \"%\");\n            }\n        }\n\n        this.setDimension(child, childSize * 100 / parentSize + \"%\");\n\n\n        setTimeout(() => {\n            this.removeClass(this.styleSheet.animatedSectionDivider);\n            this.recalculateDimensions();\n        }, this.styleSheet.transitionTime * 1000);\n    }\n\n\n    getChildrenToRender() {\n        const children = [];\n        this.dividers = [];\n        this.panels = [];\n        const DividerBarClass = this.getDividerBarClass();\n\n        for (const child of unwrapArray(this.render())) {\n            if (child.options.collapsed) {\n                this.addClass(this.styleSheet.paddingRemoved);\n            }\n            if (this.panels.length) {\n                let divider = <DividerBarClass orientation={this.getOrientation()} />;\n                children.push(divider);\n                this.dividers.push(divider);\n            }\n            const wrappedChild = <BarCollapsePanel orientation={this.options.orientation} collapsedSize={this.options.collapsedSize}\n                                                   title={child.options.title || \"...\"}>{child}</BarCollapsePanel>;\n            children.push(wrappedChild);\n            this.panels.push(wrappedChild);\n        }\n        return children;\n    }\n\n    onMount() {\n        super.onMount();\n        for (let i = 0; i < this.panels.length; i += 1) {\n            const panel = this.panels[i];\n            this.attachListener(panel, \"expand\", () => {\n                this.uncollapsedSizes.set(panel, this.getDimension(this) / this.panels.length);\n                this.expandChild(i);\n            });\n        }\n        for (let i = 0; i < this.dividers.length; i += 1) {\n            this.attachListener(this.dividers[i], \"collapseNext\", () => this.collapseChild(i + 1));\n            this.attachListener(this.dividers[i], \"collapsePrevious\", () => this.collapseChild(i));\n        }\n    }\n}","import {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\nimport {getComputedStyle} from \"../Utils\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Device} from \"../../base/Device\";\nimport {AccordionStyle} from \"./Style\";\nimport {FACollapseIcon} from \"../../ui/FontAwesome\";\nimport {Divider} from \"./Divider\";\n\n@registerStyle(AccordionStyle)\nclass AccordionDivider extends Divider {\n    dragMousedown(event) {\n        document.body.classList.add(this.styleSheet.noTextSelection);\n        this.addClass(this.styleSheet.grabbing);\n    }\n\n    dragMouseup(event) {\n        document.body.classList.remove(this.styleSheet.noTextSelection);\n        this.removeClass(this.styleSheet.grabbing);\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.grab);\n    }\n\n    render() {\n        return [<FACollapseIcon ref=\"collapseIcon\" collapsed={false} className={this.styleSheet.collapseIcon}/>, this.options.children];\n    }\n\n    setCollapsed(value) {\n        this.collapseIcon.setCollapsed(value);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addListener(\"togglePanel\", () => {this.collapseIcon.toggleCollapsed();});\n    }\n}\n\n\n@registerStyle(AccordionStyle)\nclass Accordion extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.accordion);\n    }\n\n    getChildrenToRender() {\n        let children = [];\n        this.dividers = [];\n        this.panels = [];\n        for (let child of unwrapArray(this.render())) {\n            let title = (child.getTitle ? child.getTitle() : (child.options.title ? child.options.title : \"\"));\n            let divider = <AccordionDivider>{title}</AccordionDivider>;\n            this.dividers.push(divider);\n            this.panels.push(child);\n            children.push(divider);\n            children.push(child);\n        }\n        return children;\n    }\n\n    getNextVisibleChild(index) {\n        for (let i = index; i < this.panels.length; i += 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    getPreviousVisibleChild(index) {\n        for (let i = index - 1; i >= 0; i -= 1) {\n            if (!this.panels[i].hasClass(\"hidden\")) {\n                return this.panels[i];\n            }\n        }\n        return null;\n    }\n\n    dividerMousedownFunction(dividerEvent) {\n        let dragTriggered, panelsHeight, totalFlex;\n\n        let previousEvent = dividerEvent.domEvent;\n        let index = this.dividers.indexOf(dividerEvent.divider);\n\n        let previousPanel = this.getPreviousVisibleChild(index);\n        let nextPanel = this.getNextVisibleChild(index);\n\n        panelsHeight = this.getHeight();\n        for (let divider of this.dividers) {\n            panelsHeight -= divider.getHeight();\n        }\n        totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n\n        let mouseMoveListener = this.addListener(\"dividerMousemove\", (event) => {\n            dragTriggered = true;\n            if (index != -1 && nextPanel && previousPanel) {\n                // Calculate the height to transfer from one panel to another\n                let delta = (Device.getEventY(event) - Device.getEventY(previousEvent)) * totalFlex / panelsHeight;\n\n                let nextSize = parseFloat(getComputedStyle(nextPanel.node, \"flex\"));\n                let previousSize = parseFloat(getComputedStyle(previousPanel.node, \"flex\"));\n\n                // Cap the delta value, to at most zero our panels\n                delta = Math.sign(delta) * Math.min(Math.abs(delta), (delta > 0 ? nextSize : previousSize));\n\n                nextPanel.setStyle(\"flex\", nextSize - delta);\n                previousPanel.setStyle(\"flex\", previousSize + delta);\n\n                previousEvent = event;\n\n                this.dispatch(\"dragging\");\n            }\n        });\n\n        let mouseUpListener = this.addListener(\"dividerMouseup\", () => {\n            if (!dragTriggered) {\n                dividerEvent.divider.dispatch(\"togglePanel\");\n                this.toggleChild(this.panels[index]);\n            }\n            mouseMoveListener.remove();\n            mouseUpListener.remove();\n            this.dispatch(\"childrenStatusChange\");\n        });\n    }\n\n    toggleChild(child) {\n        let totalFlex = 0;\n        for (let panel of this.panels) {\n            if (!panel.hasClass(\"hidden\")) {\n                totalFlex += parseFloat(getComputedStyle(panel.node, \"flex\"));\n            }\n        }\n        let sign = child.hasClass(\"hidden\") ? 1 : -1;\n        totalFlex += sign * parseFloat(getComputedStyle(child, \"flex\"));\n        child.toggleClass(\"hidden\");\n        if (totalFlex < 1) {\n            for (let panel of this.panels) {\n                if (!panel.hasClass(\"hidden\") && parseFloat(getComputedStyle(panel.node, \"flex\")) < 1) {\n                    panel.setStyle(\"flex\", 1);\n                }\n            }\n        }\n    }\n\n    getChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: getComputedStyle(panel.node, \"flex\"),\n                collapsed: panel.hasClass(\"hidden\")\n            });\n        }\n        return childrenStatus;\n    }\n\n    getDefaultChildrenStatus() {\n        let childrenStatus = [];\n        for (let panel of this.panels) {\n            childrenStatus.push({\n                flex: 1,\n                collapsed: false\n            })\n        }\n        return childrenStatus;\n    }\n\n    setChildrenStatus(childrenStatus) {\n        for (let i = 0; i < childrenStatus.length; i += 1) {\n            this.panels[i].setStyle(\"flex\", childrenStatus[i].flex);\n            let collapsed = childrenStatus[i].collapsed;\n            if (collapsed) {\n                this.panels[i].addClass(\"hidden\");\n            } else {\n                this.panels[i].removeClass(\"hidden\");\n            }\n            this.dividers[i].setCollapsed(collapsed);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"dividerMousedown\", (dividerEvent) => this.dividerMousedownFunction(dividerEvent));\n    }\n}\n\nexport {Accordion};\n","import {UI} from \"./UIBase\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\nimport {styleRule} from \"../decorators/Style\";\nimport {FAIcon} from \"../ui/FontAwesome\";\nimport {Orientation} from \"./Constants\";\n\nclass CarouselStyle extends StyleSheet {\n    navigatorHeight = \"35px\";\n    hoverColor = \"#364251\";\n    transitionTime = \"0.3\";\n    textColor = \"inherit\";\n    navigatorTransitionTime = \"0s\";\n\n    @styleRule\n    carousel = {\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    container = {\n        whiteSpace: \"nowrap\",\n        height: \"100%\",\n        \">*\": {\n            width: \"100%\",\n            height: \"100%\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n        },\n        \">:first-child\": {\n            width: \"0\",\n            transition: `margin-left ease ${this.transitionTime}s`,\n        }\n    };\n\n    @styleRule\n    navigator = {\n        width: \"100%\",\n        height: this.navigatorHeight,\n        display: \"flex\",\n    };\n\n    @styleRule\n    navigatorIcon = {\n        color: this.textColor,\n        fontSize: \"180% !important\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        flex: \"1\",\n        fontWeight: \"900 !important\",\n        lineHeight: this.navigatorHeight + \" !important\",\n        transition: `background-color ${this.navigatorTransitionTime}`,\n        \":hover\": {\n            backgroundColor: this.hoverColor,\n        },\n    };\n}\n\nclass CarouselNavigator extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navigator);\n    }\n\n    render() {\n        return [\n            <FAIcon icon=\"angle-left\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"previousPage\");}} />,\n            <FAIcon icon=\"angle-right\" className={this.styleSheet.navigatorIcon} onClick={() => {this.parent.dispatch(\"nextPage\");}} />,\n        ];\n    }\n}\n\n\n@registerStyle(CarouselStyle)\nclass Carousel extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.carousel);\n    }\n\n    appendChild(child, doMount) {\n        this.options.children.push(child);\n        if (doMount) {\n            this.setActive(child);\n        }\n        child.mount(this, null);\n        this.redraw();\n    }\n\n    eraseChild(child) {\n        if (this.options.children.indexOf(child) === this.options.children.length - 1) {\n            this.setActiveIndex(Math.max(this.options.children.length - 2, 0));\n        }\n        this.options.children.splice(this.options.children.indexOf(child), 1);\n        this.redraw();\n    }\n\n    render() {\n        if (this.activeIndex == null) {\n            this.activeIndex = 0;\n            for (let i = 0; i < this.options.children.length; i += 1) {\n                if (this.options.children[i].options.active) {\n                    this.activeIndex = i;\n                    break;\n                }\n            }\n        }\n\n        return [<CarouselNavigator className={this.options.children.length > 1 ? \"\" : \"hidden\"}/>,\n            <div className={this.styleSheet.container}>\n                <div ref=\"pusher\" style={{marginLeft: `${-this.activeIndex * 100}%`}}/>\n                {this.options.children}\n            </div>];\n    }\n\n    setActive(panel) {\n        this.setActiveIndex(this.options.children.indexOf(panel));\n    }\n\n    setActiveIndex(index) {\n        this.activeIndex = index;\n        this.pusher.setStyle(\"margin-left\", `${-index * this.getWidth()}px`);\n    }\n\n    getActive() {\n        return this.options.children[this.activeIndex];\n    }\n\n    onMount() {\n        this.addListener(\"nextPage\", () => this.setActiveIndex((this.activeIndex + 1) % this.options.children.length));\n        this.addListener(\"previousPage\", () => this.setActiveIndex((this.activeIndex + this.options.children.length - 1) % this.options.children.length));\n    }\n\n    getOrientation() {\n        return this.options.orientation || Orientation.VERTICAL;\n    }\n}\n\nexport {Carousel, CarouselStyle};\n","import {StyleSheet, styleRule} from \"./Style\";\n\nclass RangePanelStyle extends StyleSheet {\n    rowHeight = 52;\n\n    @styleRule\n    default = {\n        height: \"100%\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        overflow: \"auto\",\n        overflowY: \"hidden\",\n    };\n\n    @styleRule\n    tableContainer = {\n        flex: \"1\",\n        height: \"100%\",\n        width: \"100%\",\n        position: \"relative\",\n    };\n\n    @styleRule\n    scrollablePanel = {\n        overflow: \"auto\",\n        height: \"calc(100% - 30px)\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    fakePanel = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    footer = {\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        position: \"absolute\",\n        bottom: \"0px\",\n        width: \"100%\",\n        whiteSpace: \"nowrap\",\n        paddingBottom: \"15px\",\n        paddingTop: \"3px\",\n    };\n\n    @styleRule\n    jumpToButton = {\n        marginLeft: \"5px\",\n        padding: \"2.3px 10px\",\n        verticalAlign: \"bottom\",\n    };\n\n    @styleRule\n    table = {\n        width: \"calc(100% - 15px)\",\n        marginBottom: \"0px\",\n        top: \"0px\",\n        position: \"absolute\",\n        pointerEvents: \"none\",\n        \">tbody>tr>td\": {\n            height: `${this.rowHeight}px !important`,\n            whiteSpace: \"nowrap !important\",\n        }\n    };\n}\n\nexport {RangePanelStyle};\n","import {UI} from \"./UIBase\";\nimport {Button} from \"./button/Button\";\nimport {NumberInput} from \"./input/Input\";\nimport {RangePanelStyle} from \"./RangePanelStyle\";\nimport {Dispatchable} from \"../base/Dispatcher\";\nimport {Size} from \"./Constants\";\n\nfunction RangePanelInterface(PanelClass) {\n    class RangePanel extends PanelClass {\n    }\n    return RangePanel;\n}\n\n\nclass EntriesManager extends Dispatchable {\n    constructor(entries, options={}) {\n        super();\n        this.rawEntries = entries;\n        this.options = options;\n        this.cacheEntries();\n    }\n\n    getRawEntries() {\n        return this.rawEntries;\n    }\n\n    cacheEntries() {\n        this.cachedEntries = this.sortEntries(this.filterEntries(this.getRawEntries()));\n        this.dispatch(\"update\");\n    }\n\n    getEntries() {\n        return this.cachedEntries;\n    }\n\n    getEntriesCount() {\n        return this.cachedEntries.length;\n    }\n\n    getEntriesRange(low, high) {\n        return this.cachedEntries.slice(low, high);\n    }\n\n    updateEntries(entries) {\n        this.rawEntries = entries;\n        this.cacheEntries();\n    }\n\n    sortEntries(entries) {\n        return this.getComparator() ? entries.sort(this.getComparator()) : entries;\n    }\n\n    filterEntries(entries) {\n        const filter = this.getFilter();\n        return filter ? entries.filter(filter) : entries;\n    }\n\n    getComparator() {\n        return this.options.comparator;\n    }\n\n    setComparator(comparator) {\n        this.options.comparator = comparator;\n        this.cacheEntries();\n    }\n\n    getFilter() {\n        return this.options.filter;\n    }\n\n    setFilter(filter) {\n        this.options.filter = filter;\n        this.cacheEntries();\n    }\n}\n\n\n// A wrapper for tables which optimizes rendering when many entries / updates are involved. It currently has hardcoded\n// row height for functionality reasons.\nfunction RangeTableInterface(TableClass) {\n    class RangeTable extends UI.Primitive(TableClass, \"div\") {\n        constructor(options) {\n            super(options);\n            this.lowIndex = 0;\n            this.highIndex = 0;\n        }\n\n        getRangePanelStyleSheet() {\n            return RangePanelStyle.getInstance();\n        }\n\n        getRowHeight() {\n            return this.options.rowHeight || this.getRangePanelStyleSheet().rowHeight;\n        }\n\n        getEntriesManager() {\n            if (!this.entriesManager) {\n                this.entriesManager = new EntriesManager(super.getEntries());\n            }\n            return this.entriesManager;\n        }\n\n        extraNodeAttributes(attr) {\n            attr.addClass(this.getRangePanelStyleSheet().default);\n        }\n\n        render() {\n            const rangePanelStyleSheet = this.getRangePanelStyleSheet();\n            const fakePanelHeight = (this.getRowHeight() * this.getEntriesManager().getEntriesCount() + 1) + \"px\";\n            const headHeight = this.containerHead ? this.containerHead.getHeight() : 0;\n            this.computeIndices();\n\n            // Margin is added at redraw for the case when the scoreboard has horizontal scrolling during a redraw.\n            const margin = (this.node &&  this.node.scrollLeft) || 0;\n\n            return [\n                <div ref=\"tableContainer\" className={rangePanelStyleSheet.tableContainer}\n                     style={{paddingTop: headHeight + \"px\", marginLeft: margin + \"px\"}}>\n                    <div ref=\"scrollablePanel\" className={rangePanelStyleSheet.scrollablePanel}>\n                        <div ref=\"fakePanel\" className={rangePanelStyleSheet.fakePanel} style={{height: fakePanelHeight}}/>\n                        <table ref=\"container\" className={`${this.styleSheet.table} ${rangePanelStyleSheet.table}`}\n                                               style={{marginLeft: -margin + \"px\"}}>\n                            <thead ref=\"containerHead\">\n                            {this.renderContainerHead()}\n                            </thead>\n                            <tbody ref=\"containerBody\">\n                            {this.renderContainerBody()}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>,\n                <div ref=\"footer\" className={rangePanelStyleSheet.footer} style={{marginLeft: margin + \"px\"}}>\n                    <span ref=\"tableFooterText\">\n                        {this.getFooterContent()}\n                    </span>\n                    <NumberInput ref=\"jumpToInput\" placeholder=\"jump to...\" style={{textAlign: \"center\",}}/>\n                    <Button ref=\"jumpToButton\" size={Size.SMALL} className={rangePanelStyleSheet.jumpToButton}>Go</Button>\n                </div>\n            ];\n        }\n\n        applyScrollState() {\n            this.scrollablePanel.node.scrollTop = this.scrollState;\n        }\n\n        saveScrollState() {\n            if (this.scrollablePanel && this.scrollablePanel.node) {\n                this.scrollState = this.scrollablePanel.node.scrollTop;\n            }\n        }\n\n        renderContainerHead() {\n            return this.renderTableHead();\n        }\n\n        renderContainerBody() {\n            // TODO: this method should not be here, and tables should have a method \"getEntriesToRender\" which will be overwritten in this class.\n            this.rows = [];\n\n            const entries = this.getEntriesManager().getEntriesRange(this.lowIndex, this.highIndex);\n\n            for (let i = 0; i < entries.length; i += 1) {\n                const entry = entries[i];\n                const RowClass = this.getRowClass(entry);\n                this.rows.push(<RowClass key={this.getEntryKey(entry, i + this.lowIndex)} index={i + this.lowIndex}\n                                         {...this.getRowOptions(entry)} parent={this}/>);\n            }\n            return this.rows;\n        }\n\n        getFooterContent() {\n            if (this.lowIndex + 1 > this.highIndex) {\n                return `No results. Jump to `;\n            }\n            return `${this.lowIndex + 1} ➞ ${this.highIndex} of ${this.getEntriesManager().getEntriesCount()}. `;\n        }\n\n        jumpToIndex(index) {\n            // Set the scroll so that the requested position is in the center.\n            const lowIndex = parseInt(index - (this.highIndex - this.lowIndex) / 2 + 1);\n            const scrollRatio = lowIndex / (this.getEntriesManager().getEntriesCount() + 0.5);\n            this.scrollablePanel.node.scrollTop = scrollRatio * this.scrollablePanel.node.scrollHeight;\n        }\n\n        computeIndices() {\n            if (!this.tableContainer || !this.containerHead || !this.footer) {\n                return;\n            }\n            const scrollRatio = this.scrollablePanel.node.scrollTop / this.scrollablePanel.node.scrollHeight;\n            const entriesCount = this.getEntriesManager().getEntriesCount();\n            // Computing of entries range is made using the physical scroll on the fake panel.\n            this.lowIndex = parseInt(scrollRatio * (entriesCount + 0.5));\n            if (isNaN(this.lowIndex)) {\n                this.lowIndex = 0;\n            }\n            this.highIndex = Math.min(this.lowIndex + parseInt((this.getHeight() - this.containerHead.getHeight()\n                    - this.footer.getHeight()) / this.getRowHeight()), entriesCount);\n        }\n\n        setScroll() {\n            // This is the main logic for rendering the right entries. Right now, it best works with a fixed row height,\n            // for other cases no good results are guaranteed. For now, that row height is hardcoded in the class'\n            // stylesheet.\n\n            if (this.inSetScroll) {\n                return;\n            }\n            if (!document.body.contains(this.node)) {\n                this.tableFooterText.setChildren(this.getFooterContent());\n                this.containerBody.setChildren(this.renderContainerBody());\n                return;\n            }\n            this.inSetScroll = true;\n            this.computeIndices();\n            // Ugly hack for chrome stabilization.\n            // This padding top makes the scrollbar appear only on the tbody side\n            this.tableContainer.setStyle(\"paddingTop\", this.containerHead.getHeight() + \"px\");\n            this.fakePanel.setHeight(this.getRowHeight() * this.getEntriesManager().getEntriesCount() + \"px\");\n            // The scrollable panel must have the exact height of the tbody so that there is consistency between entries\n            // rendering and scroll position.\n            this.scrollablePanel.setHeight(this.getRowHeight() * (this.highIndex - this.lowIndex) + \"px\");\n            // Update the entries and the footer info.\n            this.tableFooterText.setChildren(this.getFooterContent());\n            this.containerBody.setChildren(this.renderContainerBody());\n            // This is for setting the scrollbar outside of the table area, otherwise the scrollbar wouldn't be clickable\n            // because of the logic in \"addCompatibilityListeners\".\n            this.container.setWidth(this.fakePanel.getWidth() + \"px\");\n            this.inSetScroll = false;\n        }\n\n        addCompatibilityListeners() {\n            // The physical table has z-index -1 so it does not respond to mouse events, as it is \"behind\" fake panel.\n            // The following listeners repair that.\n            this.addNodeListener(\"mousedown\", () => {\n                this.container.setStyle(\"pointerEvents\", \"all\");\n            });\n            this.container.addNodeListener(\"mouseup\", (event) => {\n                const mouseDownEvent = new MouseEvent(\"click\", event);\n                const domElement = document.elementFromPoint(parseFloat(event.clientX), parseFloat(event.clientY));\n                setTimeout(() => {\n                    this.container.setStyle(\"pointerEvents\", \"none\");\n                    domElement.dispatchEvent(mouseDownEvent);\n                }, 100);\n            });\n\n            // Adding listeners that force resizing\n            this.addListener(\"setActive\", () => {\n                this.setScroll();\n            });\n            this.addListener(\"resize\", () => {\n                this.setScroll();\n            });\n            window.addEventListener(\"resize\", () => {\n                this.setScroll();\n            });\n        }\n\n        addTableAPIListeners() {\n            // This event isn't used anywhere but this is how range updates should be made.\n            this.addListener(\"entriesChange\", (event) => {\n                if (!(event.leftIndex >= this.highIndex || event.rightIndex < this.lowIndex)) {\n                    this.setScroll();\n                }\n            });\n            this.addListener(\"showCurrentUser\", () => {\n                const index = this.getEntriesManager().getEntries().map(entry => entry.userId).indexOf(USER.id) + 1;\n                this.jumpToIndex(index);\n            });\n            // Delay is added for smoother experience of scrolling.\n            this.attachListener(this.getEntriesManager(), \"update\", () => {\n                this.setScroll();\n            });\n        }\n\n        addSelfListeners() {\n            this.scrollablePanel.addNodeListener(\"scroll\", () => {\n                this.setScroll();\n            });\n            this.addNodeListener(\"scroll\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.footer.setStyle(\"marginLeft\", this.node.scrollLeft);\n                this.container.setStyle(\"marginLeft\", -this.node.scrollLeft);\n            });\n            window.addEventListener(\"resize\", () => {\n                this.tableContainer.setStyle(\"marginLeft\", 0);\n                this.footer.setStyle(\"marginLeft\", 0);\n                this.container.setStyle(\"marginLeft\", 0);\n            });\n            this.jumpToInput.addNodeListener(\"keyup\", (event) => {\n                if (event.code === \"Enter\") {\n                    this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n                }\n            });\n            this.jumpToButton.addClickListener(() => {\n                this.jumpToIndex(parseInt(this.jumpToInput.getValue()));\n            });\n        }\n\n        onMount() {\n            super.onMount();\n\n            this.addCompatibilityListeners();\n\n            this.addTableAPIListeners();\n\n            this.addSelfListeners();\n\n            setTimeout(() => {\n                this.redraw();\n            })\n        }\n    }\n    return RangeTable;\n}\n\nexport {RangePanelInterface, RangeTableInterface, EntriesManager};\n","import {StyleSheet} from \"../Style\";\nimport {styleRule, styleRuleInherit} from \"../../decorators/Style\";\n\nclass TableStyle extends StyleSheet {\n    cellStyle =  {\n        padding: \"8px\",\n        lineHeight: \"1.42857143\",\n        verticalAlign: \"top\",\n        borderTop: \"1px solid #ddd\",\n    };\n\n    theadCellStyle = {\n        borderBottom: \"2px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    table = {\n        width: \"100%\",\n        maxWidth: \"100%\",\n        marginBottom: \"20px\",\n        borderSpacing: \"0\",\n        borderCollapse: \"collapse\",\n        \">*>*>td\": this.cellStyle,\n        \">*>*>th\": this.cellStyle,\n        \">*>thead>*>*\": this.theadCellStyle,\n    };\n\n    @styleRule\n    tableStripped = {\n        \">tbody>tr:nth-of-type(odd)\": {\n            backgroundColor: \"#f5f5f5\",\n        }\n    };\n\n}\n\nclass SortableTableStyle extends TableStyle {\n    @styleRule\n    sortIcon = {\n        position: \"absolute\",\n        right: \"0px\",\n        bottom: \"0px\",\n        visibility: \"hidden\",\n        float: \"right\",\n    };\n\n    @styleRuleInherit\n    table = {\n        [\" th:hover .\" + this.sortIcon.getClassName()]: {\n            visibility: \"inherit\",\n        },\n        \" th:hover\": {\n            cursor: \"pointer\",\n        }\n    };\n}\n\nexport {TableStyle, SortableTableStyle};\n","import {TableStyle} from \"./Style\";\nimport {UI} from \"../UIBase\";\nimport {registerStyle} from \"../style/Theme\";\n\n// TODO: the whole table architecture probably needs a rethinking\nclass TableRow extends UI.Primitive(\"tr\") {\n    render() {\n        let rowCells = [];\n\n        for (let column of this.options.columns) {\n            rowCells.push(this.renderEntryCell(column));\n        }\n\n        return rowCells;\n    }\n\n    renderEntryCell(column) {\n        return <td style={column.cellStyle} key={column.id}>{column.value(this.options.entry, this.options.index)}</td>;\n    }\n};\n\n@registerStyle(TableStyle)\nclass Table extends UI.Primitive(\"table\") {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.setColumns(options.columns || []);\n        this.entries = options.entries || [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.table);\n    }\n\n    getRowClass() {\n        return TableRow;\n    }\n\n    getRowOptions(entry) {\n        return {\n            entry: entry,\n            columns: this.columns,\n        };\n    }\n\n    render() {\n        return [\n            <thead>\n                {this.renderTableHead()}\n            </thead>,\n            <tbody>\n                {this.renderTableBody()}\n            </tbody>\n        ];\n    }\n\n    renderTableHead() {\n        return <tr>{this.columns.map(this.renderHeaderCell, this)}</tr>;\n    }\n\n    getEntryKey(entry, index) {\n        return entry.id != null ? entry.id : index;\n    }\n\n    renderTableBody() {\n        this.rows = [];\n\n        let entries = this.getEntries();\n        for (let i = 0; i < entries.length; i += 1) {\n            let entry = entries[i];\n            let RowClass = this.getRowClass(entry);\n            this.rows.push(<RowClass key={this.getEntryKey(entry, i)} index={i} {...this.getRowOptions(entry)} parent={this}/>);\n        }\n        return this.rows;\n    }\n\n    // Renders the whole header cell based on a column\n    renderHeaderCell(column) {\n        return <th style={column.headerStyle} ref={\"columnHeader\" + column.id}>\n                {this.renderColumnHeader(column)}\n            </th>;\n    }\n\n    // Only renders the content of the header cell\n    renderColumnHeader(column) {\n        if (typeof column.headerName === \"function\") {\n            return column.headerName();\n        }\n        return column.headerName;\n    }\n\n    // Original entries should not be modified. Overwrite this function to appy any modification in a new array.\n    getEntries() {\n        return this.entries || [];\n    }\n\n    columnDefaults(column, index) {\n        column.id = index;\n    }\n\n    setColumns(columns) {\n        this.columns = columns;\n        for (let i = 0; i < this.columns.length; i += 1) {\n            this.columnDefaults(this.columns[i], i);\n        }\n    }\n}\n\nexport * from \"./Style\";\nexport {Table, TableRow};\n","import {UI} from \"../UIBase\";\nimport {Table, TableRow} from \"./Table\";\nimport {CollapsibleMixin} from \"../collapsible/CollapsibleMixin\";\nimport {StyleSheet} from \"../Style\";\nimport {styleRule} from \"../../decorators/Style\";\n\nclass TableRowInCollapsibleTable extends TableRow {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    render() {\n        return <tr>{super.render()}</tr>;\n    }\n}\n\nclass CollapsibleTableStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginTop: \"0\",\n        marginBottom: \"0\",\n        fontSize: \"16px\",\n        color: \"inherit\",\n        cursor: \"pointer\",\n        \":hover\": {\n            color: \"inherit\",\n        },\n        \":after\": {\n            fontFamily: \"'FontAwesome'\",\n            content: \"\\\"\\\\f107\\\"\",\n            color: \"grey\",\n            float: \"left\",\n            fontWeight: \"bold\",\n            width: \"0.7em\",\n            fontSize: \"130%\",\n            verticalAlign: \"top\",\n            height: \"0.7em\",\n            marginTop: \"-0.2em\",\n            textAlign: \"center\",\n        }\n    };\n\n    @styleRule\n    collapsedButton = {\n        \":after\": {\n            content: \"\\\"\\\\f105\\\" !important\",\n        },\n    };\n\n    @styleRule\n    heading = {\n        padding: \"10px 15px\",\n        backgroundColor: \"initial !important\",\n    };\n}\n\nlet collapsibleTableStyle = new CollapsibleTableStyle();\n\n// TODO: refactor this to support redraw and render override\nclass CollapsibleTableRow extends CollapsibleMixin(TableRow) {\n    getNodeType() {\n        return \"tbody\";\n    }\n\n    getDefaultOptions() {\n        return {\n            collapsed: true,\n        }\n    }\n\n    onMount() {\n        this.toggleButton.addClickListener(() => this.toggle());\n    }\n\n    toggle() {\n        if (!this.options.collapsed) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        super.expand(this.contentArea);\n        this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n    }\n\n    collapse() {\n        super.collapse(this.contentArea);\n        setTimeout(() => {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n        }, this.getCollapsibleStyleSheet().transitionDuration * 500);\n    }\n\n    // TODO: Very bad redraw practice here\n    redraw() {\n        if (!super.redraw()) {\n            return false;\n        }\n\n        if (this.options.collapsed) {\n            this.toggleButton.addClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.addClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.addClass(\"hidden\");\n        } else {\n            this.toggleButton.removeClass(collapsibleTableStyle.collapsedButton);\n            this.contentArea.removeClass(this.getCollapsibleStyleSheet().collapsed);\n            this.contentArea.removeClass(\"hidden\");\n        }\n        return true;\n    }\n\n    getInitialCollapsedContent() {\n        return this.renderCollapsible(this.options.entry);\n    }\n\n    render() {\n        return [\n            <tr className={collapsibleTableStyle.heading}>{super.render()}</tr>,\n            <tr>\n                <td style={{overflow: \"hidden\", padding: \"0px\"}}\n                    colspan={this.options.columns.length}>\n                    <div ref=\"contentArea\"\n                         className={`${this.getCollapsibleStyleSheet().collapsed} hidden`}>\n                            {this.getInitialCollapsedContent()}\n                    </div>\n                </td>\n            </tr>\n        ];\n    }\n}\n\nclass DelayedCollapsibleTableRow extends CollapsibleTableRow {\n    toggle() {\n        if (!this._haveExpanded) {\n            this._haveExpanded = true;\n            this.redrawCollapsible();\n        }\n        super.toggle();\n    }\n\n    redrawCollapsible() {\n        UI.renderingStack.push(this);\n        this.contentArea.options.children = this.renderCollapsible(this.options.entry);\n        UI.renderingStack.pop();\n        this.contentArea.redraw();\n    }\n\n    getInitialCollapsedContent() {\n        return [];\n    }\n}\n\nfunction CollapsibleTableInterface(BaseTableClass) {\n    return class CollapsibleTable extends BaseTableClass {\n        setOptions(options) {\n            super.setOptions(options);\n\n            if (options.renderCollapsible) {\n                this.renderCollapsible = options.renderCollapsible;\n            }\n        }\n\n        render() {\n            return [\n                <thead>\n                    {this.renderTableHead()}\n                </thead>,\n                this.renderTableBody()\n            ];\n        }\n\n        getRowClass() {\n            return CollapsibleTableRow;\n        }\n\n        setColumns(columns) {\n            let toggleColumn = {\n                value: (entry) => {\n                    let rowClass = this.getRowClass(entry);\n                    // TODO: Fix it lad!\n                    if (rowClass === CollapsibleTableRow || rowClass.prototype instanceof CollapsibleTableRow) {\n                        return <a ref=\"toggleButton\"\n                        className={`${collapsibleTableStyle.button} ${collapsibleTableStyle.collapsedButton}`}/>;\n                    }\n                    return <a ref=\"toggleButton\"/>;\n                },\n                cellStyle: {\n                    width: \"1%\",\n                    \"whiteSpace\": \"nowrap\",\n                }\n            };\n\n            super.setColumns([toggleColumn].concat(columns));\n        }\n    };\n}\n\nlet CollapsibleTable = CollapsibleTableInterface(Table);\n\nexport {CollapsibleTable, CollapsibleTableInterface, CollapsibleTableRow, DelayedCollapsibleTableRow,\n        TableRowInCollapsibleTable, collapsibleTableStyle};\n","import {SortableTableStyle} from \"./Style\";\nimport {FASortIcon} from \"../FontAwesome\";\nimport {UI} from \"../UIBase\";\nimport {Table} from \"./Table\";\nimport {defaultComparator} from \"../../base/Utils\";\nimport {Direction} from \"../Constants\";\nimport {registerStyle} from \"../style/Theme\";\n\nfunction SortableTableInterface(BaseTableClass, SortIconClass = FASortIcon) {\n    @registerStyle(SortableTableStyle)\n    class SortableTable extends BaseTableClass {\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.addClass(this.styleSheet.table);\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n\n            this.columnSortingOrder = options.columnSortingOrder || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            // TODO: fix multiple clicks registered here\n            // Sort table by clicked column\n            for (let column of this.columns) {\n                this[\"columnHeader\" + column.id].addClickListener(() => {\n                    this.sortByColumn(column);\n                    this.dispatch(\"reorder\");\n                });\n            }\n        }\n\n        renderColumnHeader(column) {\n            let sortIcon = <SortIconClass className={this.styleSheet.sortIcon}/>;\n            if (this.sortBy === column) {\n                if (this.sortDescending) {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.DOWN}/>;\n                } else {\n                    sortIcon = <SortIconClass className={this.styleSheet.sortIcon} style={{visibility: \"inherit\"}} direction={Direction.UP}/>;\n                }\n            }\n\n            return <div style={{position: \"relative\"}}>{super.renderColumnHeader(column)} {sortIcon}</div>;\n        }\n\n        sortByColumn(column) {\n            if (column === this.sortBy) {\n                this.sortDescending = (this.sortDescending != true);\n            } else {\n                this.sortDescending = true;\n            }\n\n            this.sortBy = column;\n\n            this.redraw();\n        }\n\n        getComparator() {\n            if (!this.sortBy && this.columnSortingOrder.length === 0) {\n                return null;\n            }\n\n            const colCmp = (a, b, col) => {\n                if (!col) return 0;\n\n                let keyA = col.rawValue ? col.rawValue(a) : col.value(a);\n                let keyB = col.rawValue ? col.rawValue(b) : col.value(b);\n                return col.cmp(keyA, keyB);\n            };\n\n            return (a, b) => {\n                let cmpRes;\n\n                if (this.sortBy) {\n                    cmpRes = colCmp(a, b, this.sortBy);\n                    if (cmpRes !== 0) {\n                        return (this.sortDescending ? -cmpRes : cmpRes);\n                    }\n                }\n\n                for (let i = 0; i < this.columnSortingOrder.length; i += 1) {\n                    cmpRes = colCmp(a, b, this.columnSortingOrder[i]);\n                    if (this.columnSortingOrder[i].sortDescending) {\n                        cmpRes = -cmpRes;\n                    }\n\n                    if (cmpRes !== 0) {\n                        return cmpRes;\n                    }\n                }\n                return 0;\n            }\n        }\n\n        sortEntries(entries) {\n            let sortedEntries = entries.slice();\n\n            if (this.getComparator()) {\n                sortedEntries.sort(this.getComparator());\n            }\n\n            return sortedEntries;\n        }\n\n        getEntries() {\n            return this.sortEntries(super.getEntries());\n        }\n\n        columnDefaults(column, index) {\n            super.columnDefaults(column, index);\n\n            if (!column.hasOwnProperty(\"cmp\")) {\n                column.cmp = defaultComparator;\n            }\n        }\n    }\n    return SortableTable;\n}\n\nlet SortableTable = SortableTableInterface(Table);\n\nexport {SortableTable, SortableTableInterface};\n","import {isPlainObject, isNumber} from \"../base/Utils\";\n\nexport class TimeUnit {\n    static CANONICAL = {};\n    static ALL = [];\n    static FIXED_DURATION = [];\n    static VARIABLE_DURATION = [];\n\n    constructor(name, baseUnit, multiplier, options = {}) {\n        this.name = name;\n        this.pluralName = name + \"s\";\n        this.baseUnit = baseUnit;\n        this.multiplier = multiplier;\n        this.milliseconds = ((baseUnit && baseUnit.getMilliseconds()) || 1) * multiplier;\n        this.variableMultiplier = options.variableMultiplier || false;\n        this.variableDuration = this.variableMultiplier || (baseUnit && baseUnit.isVariable());\n    }\n\n    static toTimeUnit(timeUnit) {\n        if (timeUnit instanceof TimeUnit) {\n            return timeUnit;\n        }\n        return this.CANONICAL[timeUnit];\n    }\n\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getPluralName() {\n        return this.pluralName;\n    }\n\n    getMilliseconds() {\n        return this.milliseconds;\n    }\n\n    isVariable() {\n        return this.variableDuration;\n    }\n\n    hasVariableMultiplier() {\n        return this.variableMultiplier;\n    }\n\n    getDateValue(date) {\n\n    }\n\n    setDateValue(date, value) {\n    }\n}\n\nTimeUnit.MILLISECOND = new TimeUnit(\"millisecond\", null, 1);\nTimeUnit.SECOND = new TimeUnit(\"second\", TimeUnit.MILLISECOND, 1000);\nTimeUnit.MINUTE = new TimeUnit(\"minute\", TimeUnit.SECOND, 60);\nTimeUnit.HOUR = new TimeUnit(\"hour\", TimeUnit.MINUTE, 60);\nTimeUnit.DAY = new TimeUnit(\"day\", TimeUnit.HOUR, 24, {variableMultiplier: true});\nTimeUnit.WEEK = new TimeUnit(\"week\", TimeUnit.DAY, 7);\nTimeUnit.MONTH =  new TimeUnit(\"month\", TimeUnit.DAY, 30, {variableMultiplier: true});\nTimeUnit.QUARTER = new TimeUnit(\"quarter\", TimeUnit.MONTH, 3);\nTimeUnit.TRIMESTER = new TimeUnit(\"trimester\", TimeUnit.MONTH, 4);\nTimeUnit.SEMESTER = new TimeUnit(\"semester\", TimeUnit.MONTH, 6);\nTimeUnit.YEAR = new TimeUnit(\"year\", TimeUnit.DAY, 365, {variableMultiplier: true});\n\nTimeUnit.DAY.dateMethodSuffix = \"Date\";\nTimeUnit.MONTH.dateMethodSuffix = \"Month\";\nTimeUnit.YEAR.dateMethodSuffix = \"FullYear\";\n\nexport class Duration {\n    constructor(duration) {\n        if (duration instanceof self.Date) {\n            throw new Error(\"Can't automatically transform Date to Duration, use date.getTime() if you really want to\");\n        }\n        if (isNumber(duration)) {\n            this.milliseconds = duration;\n            return;\n        }\n        if (duration instanceof Duration) {\n            Object.assign(this, duration);\n            return;\n        }\n        if (isPlainObject(duration)) {\n            this.milliseconds = 0;\n            for (const key of Object.keys(duration)) {\n                let timeUnit = TimeUnit.CANONICAL[key];\n                if (!timeUnit) {\n                    throw Error(\"Unknown time unit:\", key);\n                }\n                // TODO: throw an error if can't parse these values\n                if (timeUnit.isVariable()) {\n                    this[key] = parseInt(duration[key]);\n                    this.relativeDuration = true;\n                } else {\n                    this.milliseconds += parseFloat(duration[key]) * timeUnit.milliseconds;\n                }\n            }\n            return;\n        }\n        if (arguments.length > 0) {\n            throw Error(\"Invalid Duration arguments: \", ...arguments);\n        }\n        this.milliseconds = 0;\n    }\n\n    static toDuration(duration) {\n        if (duration instanceof Duration) {\n            return duration;\n        }\n        return new this(duration);\n    }\n\n    increment(duration) {\n        duration = this.constructor.toDuration(duration);\n        for (const key in duration) {\n            if (!(key in TimeUnit.CANONICAL)) {\n                continue;\n            }\n            if (this.hasOwnProperty(key)) {\n                this[key] += duration[key];\n            } else {\n                this[key] = duration[key];\n            }\n        }\n        return this;\n    }\n\n    add(duration) {\n        return this.clone().increm(duration);\n    }\n\n    subtract(duration) {\n        duration = this.constructor.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    // Returns true if was defined terms of absolute primitives (anything less than a day)\n    isAbsolute() {\n        return !this.isVariable();\n    }\n\n    isVariable() {\n        return this.relativeDuration;\n    }\n\n    negate() {\n        let duration = new Duration(this);\n        for (const key in duration) {\n            if (key in TimeUnit.CANONICAL) {\n                duration[key] = -duration[key];\n            }\n        }\n        return duration;\n    }\n\n    // Returns a new Duration with a positive length\n    abs() {\n        return new Duration(Math.abs(+this));\n    }\n\n    clone() {\n        return new Duration(this);\n    }\n\n    // The primitive value\n    valueOf() {\n        return this.milliseconds;\n    }\n\n    toNanoseconds() {\n        return Math.floor(+this * 1e6);\n    }\n\n    // TODO: for all these units, should have a way to get the float and int value\n    toMilliseconds() {\n        return Math.floor(+this);\n    }\n\n    getMilliseconds() {\n        return this.toMilliseconds() % 1000;\n    }\n\n    toSeconds() {\n        return Math.floor(+this / 1000);\n    }\n\n    getSeconds() {\n        return this.toSeconds() % 60;\n    }\n\n    toMinutes() {\n        return Math.floor(+this / (1000 * 60));\n    }\n\n    getMinutes() {\n        return this.toMinutes() % 60;\n    }\n\n    toHours() {\n        return Math.floor(+this / (1000 * 60 * 60));\n    }\n\n    getHours() {\n        return this.toHours() % 24;\n    }\n\n    toDays() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24));\n    }\n\n    toMonths() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 30));\n    }\n\n    toYears() {\n        return Math.floor(+this / (1000 * 60 * 60 * 24 * 365));\n    }\n\n    toString(locale) {\n        // Humanize the duration (should work with localization)\n    }\n}\n\nexport function addCanonicalTimeUnit(key, timeUnit) {\n    TimeUnit.ALL.push(timeUnit);\n    if (timeUnit.isVariable()) {\n        TimeUnit.VARIABLE_DURATION.push(timeUnit);\n    } else {\n        TimeUnit.FIXED_DURATION.push(timeUnit);\n    }\n\n    TimeUnit.CANONICAL[timeUnit.name] = timeUnit;\n    if (timeUnit.pluralName) {\n        TimeUnit.CANONICAL[timeUnit.pluralName] = timeUnit;\n    }\n\n    const timeUnitsName = timeUnit.pluralName;\n\n    // TODO: not sure about this anymore\n    Duration[key] = new Duration({\n        [timeUnitsName]: 1,\n    });\n}\n\nexport function addCanonicalTimeUnits() {\n    for (const key in TimeUnit) {\n        const timeUnit = TimeUnit[key];\n        if (timeUnit instanceof TimeUnit) {\n            addCanonicalTimeUnit(key, timeUnit);\n        }\n    }\n}\n\naddCanonicalTimeUnits();\n","import {padNumber, suffixWithOrdinal, extendsNative, instantiateNative, isNumber} from \"../base/Utils\";\nimport {TimeUnit, Duration} from \"./Duration\";\n\n// MAX_UNIX_TIME is either ~Feb 2106 in unix seconds or ~Feb 1970 in unix milliseconds\n// Any value less than this is interpreted as a unix time in seconds\n// If you want to go around this behavious, you can use the static method .fromUnixMilliseconds()\n// To disable, set this value to 0\nexport let MAX_AUTO_UNIX_TIME = Math.pow(2, 32);\n\nconst BaseDate = self.Date;\n\n@extendsNative\nclass StemDate extends BaseDate {\n    // Still need to do this mess because of Babel, should be removed when moving to native ES6\n    static create(value) {\n        // Try to do an educated guess if this date is in unix seconds or milliseconds\n        if (arguments.length === 1 && isNumber(value) && value < MAX_AUTO_UNIX_TIME) {\n            return instantiateNative(BaseDate, StemDate, value * 1000.0);\n        } else {\n            return instantiateNative(BaseDate, StemDate, ...arguments);\n        }\n    }\n\n    static toDate(date) {\n        if (date instanceof StemDate) {\n            return date;\n        } else {\n            return new this(date);\n        }\n    }\n\n    static now() {\n        return new this(BaseDate.now());\n    }\n\n    toDate() {\n        return this;\n    }\n\n    static fromUnixMilliseconds(unixMilliseconds) {\n        return this.create(new BaseDate(unixMilliseconds));\n    }\n\n    static fromUnixSeconds(unixSecons) {\n        return this.fromUnixMilliseconds(unixSecons * 1000);\n    }\n\n    // Creates a Date object from an instance of DOMHighResTimeStamp, returned by performance.now() for instance\n    static fromHighResTimestamp(highResTimestamp) {\n        return this.fromUnixMilliseconds(highResTimestamp + self.performance.timing.navigationStart)\n    }\n\n    // You don't usually need to call this in most cases, constructor uses MAX_AUX_UNIX_TIME\n    static unix(unixTime) {\n        return this.fromUnixSeconds(unixTime);\n    }\n\n    set(date) {\n        date = this.constructor.toDate(date);\n        this.setTime(date.setTime());\n    }\n\n    clone() {\n        return new this.constructor(this.getTime());\n    }\n\n    toUnix() {\n        return this.getTime() / 1000;\n    }\n\n    unix() {\n        return Math.floor(this.toUnix());\n    }\n\n    isBefore(date) {\n        return this.getTime() < StemDate.toDate(date).getTime();\n    }\n\n    equals(date) {\n        return this.getTime() === StemDate.toDate(date).getTime();\n    }\n\n    get(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        return timeUnit.getDateValue(this);\n    }\n\n    isSame(date, timeUnit) {\n        if (!timeUnit) {\n            return this.equals(date);\n        }\n\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        date = this.constructor.toDate(date);\n        let diff = this.diff(date);\n        if (diff >= 2 * timeUnit) {\n            // If the distance between the two dates is more than 2 standard lengths of the time unit\n            // This would be wrong if you would have time unit that can sometimes last more than twice their canonical duration\n            // Works correctly for all implemented time units\n            return false;\n        }\n        return this.get(timeUnit) == date.get(timeUnit);\n    }\n\n    isAfter(date) {\n        return this.getTime() > StemDate.toDate(date).getTime();\n    }\n\n    isSameOrBefore(date) {\n        return this.isBefore(date) || this.equals(date);\n    }\n\n    isSameOrAfter(date) {\n        return this.isAfter(date) || this.equals(date);\n    }\n\n    isBetween(a, b) {\n        return this.isSameOrAfter(a) && this.isSameOrBefore(b);\n    }\n\n    getWeekDay() {\n        return this.getDay();\n    }\n\n    addUnit(timeUnit, count = 1) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        count = parseInt(count);\n\n        if (!timeUnit.isVariable()) {\n            this.setTime(this.getTime() + timeUnit.getMilliseconds() * count);\n            return this;\n        }\n\n        while (!timeUnit.dateMethodSuffix) {\n            count *= timeUnit.multiplier;\n            timeUnit = timeUnit.baseUnit;\n        }\n\n        const dateMethodSuffix = timeUnit.dateMethodSuffix;\n        const currentValue = this[\"get\" + dateMethodSuffix]();\n        this[\"set\" + dateMethodSuffix](currentValue + count);\n\n        return this;\n    }\n\n    static min() {\n        // TODO: simplify and remove code duplication\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isBefore(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    static max() {\n        let result = this.constructor.toDate(arguments[0]);\n        for (let index = 1; index < arguments.length; index++) {\n            let candidate = this.constructor.toDate(arguments[index]);\n            if (candidate.isAfter(result)) {\n                result = candidate;\n            }\n        }\n        return result;\n    }\n\n    // Assign the given date if current value if greater than it\n    capUp(date) {\n        date = this.constructor.toDate(date);\n        if (this.isAfter(date)) {\n            this.set(date);\n        }\n    }\n\n    // Assign the given date if current value if less than it\n    capDown(date) {\n        date = this.constructor.toDate(date);\n        if (this.isBefore(date)) {\n            this.set(date);\n        }\n    }\n\n    roundDown(timeUnit) {\n        timeUnit = TimeUnit.toTimeUnit(timeUnit);\n        // TODO: this is wrong for semester, etc, should be different then\n        while (timeUnit = timeUnit.baseUnit) {\n            this[\"set\" + timeUnit.dateMethodSuffix](0);\n        }\n        return this;\n    }\n\n    roundUp(timeUnit) {\n        const roundDown = this.clone().roundDown(timeUnit);\n        if (this.equals(roundDown)) {\n            this.set(roundDown);\n            return this;\n        }\n        this.addUnit(timeUnit);\n        return this.roundDown(timeUnit);\n    }\n\n\n    round(timeUnit) {\n        let roundUp = this.clone().roundUp(timeUnit);\n        let roundDown = this.clone().roundDown(timeUnit);\n        // At a tie, preffer to round up, that's where time's going\n        if (this.diff(roundUp) <= this.diff(roundDown)) {\n            this.setTime(roundUp.getTime());\n        } else {\n            this.setTime(roundDown.getTime());\n        }\n        return this;\n    }\n\n    add(duration) {\n        duration = Duration.toDuration(duration);\n        if (duration.isAbsolute()) {\n            this.setTime(this.getTime() + duration.toMilliseconds());\n            return this;\n        }\n        for (const key in duration) {\n            const timeUnit = TimeUnit.CANONICAL[key];\n            if (timeUnit) {\n                this.addUnit(timeUnit, duration[key]);\n            }\n        }\n        return this;\n    }\n\n    subtract(duration) {\n        duration = Duration.toDuration(duration).negate();\n        return this.add(duration);\n    }\n\n    diffDuration(date) {\n        return new Duration(this.diff(date));\n    }\n\n    // TODO: this should be a duration\n    diff(date) {\n        date = this.constructor.toDate(date);\n        return Math.abs(+this - date);\n    }\n\n    // Just to keep moment compatibility, until we actually implement locales\n    locale(loc) {\n        return this;\n    }\n\n    static splitToTokens(str) {\n        // TODO: \"[HH]HH\" will be split to [\"HH\", \"HH\"], so the escape does not solve the problem\n        let tokens = [];\n        let lastIsLetter = null;\n        let escapeByCurlyBracket = false;\n        let escapeBySquareBracket = false;\n        for (let i = 0; i < str.length; i++) {\n            let charCode = str.charCodeAt(i);\n            if (charCode === 125 && escapeByCurlyBracket) { // '}' ending the escape\n                escapeByCurlyBracket = false;\n                lastIsLetter = null;\n            } else if (charCode === 93 && escapeBySquareBracket) { // ']' ending the escape\n                escapeBySquareBracket = false;\n                lastIsLetter = null;\n            } else if (escapeByCurlyBracket || escapeBySquareBracket) { // The character is escaped no matter what it is\n                tokens[tokens.length - 1] += str[i];\n            } else if (charCode === 123) { // '{' starts a new escape\n                escapeByCurlyBracket = true;\n                tokens.push(\"\");\n            } else if (charCode === 91) { // '[' starts a new escape\n                escapeBySquareBracket = true;\n                tokens.push(\"\");\n            } else {\n                let isLetter = (65 <= charCode && charCode <= 90) || (97 <= charCode && charCode <= 122);\n                if (isLetter === lastIsLetter) {\n                    tokens[tokens.length - 1] += str[i];\n                } else {\n                    tokens.push(str[i]);\n                }\n                lastIsLetter = isLetter;\n            }\n        }\n        if (escapeByCurlyBracket || escapeBySquareBracket) {\n            console.warn(\"Unfinished escaped sequence!\");\n        }\n        return tokens;\n    }\n\n    evalToken(token) {\n        let func = this.constructor.tokenFormattersMap.get(token);\n        if (!func) {\n            return token;\n        }\n        return func(this);\n    }\n\n    format(str=\"ISO\") {\n        let tokens = this.constructor.splitToTokens(str);\n        tokens = tokens.map(token => this.evalToken(token));\n        return tokens.join(\"\");\n    }\n\n    isValid() {\n        return (this.toString() !== \"Invalid Date\");\n    }\n\n    utc() {\n        // Temp hack\n        return this.constructor.fromUnixMilliseconds(+this + this.getTimezoneOffset() * 60 * 1000);\n    }\n\n    isLeapYear() {\n        let year = this.getFullYear();\n        return (year % 4 == 0) && ((year % 100 != 0) || (year % 400 == 0));\n    }\n\n    daysInMonth() {\n        // The 0th day of the next months is actually the last day in the current month\n        let lastDayInMonth = new BaseDate(this.getFullYear(), this.getMonth() + 1, 0);\n        return lastDayInMonth.getDate();\n    }\n\n    getDaysCountPerMonth(index) {\n        const months = [31, 28 + this.isLeapYear(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        return months[index];\n    }\n\n    getDayInYear() {\n        const month = this.getMonth();\n        let totalDays = 0;\n        for (let i = 0; i < month; i += 1) {\n            totalDays += this.getDaysCountPerMonth(i);\n        }\n        return totalDays + this.getDate() - 1;\n    }\n\n    getWeekInYear() {\n        return (this.getDayInYear() - this.getWeekDay()) / 7;\n    }\n}\n\nDuration.prototype.format = function (pattern) {\n    return StemDate.fromUnixMilliseconds(this.toMilliseconds()).utc().format(pattern);\n};\n\nconst miniWeekDays = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\nconst shortWeekDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst longWeekdays = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconst shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconst longMonths = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\nclass DateLocale {\n    constructor(obj={}) {\n        Object.assign(this, obj);\n        this.formats = this.formats || {};\n    }\n\n    getFormat(longDate) {\n        return this.formats[longDate];\n    }\n\n    setFormat(pattern, func) {\n        this.formats[pattern] = func;\n    }\n\n    format(date, pattern) {\n        return date.format(pattern);\n    }\n\n    getRelativeTime() {\n        throw Error(\"Not implemented\");\n    }\n}\n\nStemDate.tokenFormattersMap = new Map([\n    [\"ISO\", date => date.toISOString()],\n\n    [\"Y\", date => date.getFullYear()],\n    [\"YY\", date => padNumber(date.getFullYear() % 100, 2)],\n    [\"YYYY\", date => date.getFullYear()],\n\n    [\"M\", date => (date.getMonth() + 1)],\n    [\"MM\", date => padNumber(date.getMonth() + 1, 2)],\n    [\"MMM\", date => shortMonths[date.getMonth()]],\n    [\"MMMM\", date => longMonths[date.getMonth()]],\n\n    [\"D\", date => date.getDate()],\n    [\"Do\", date => suffixWithOrdinal(date.getDate())],\n    [\"DD\", date => padNumber(date.getDate(), 2)],\n\n    [\"d\", date => date.getWeekDay()],\n    [\"do\", date => suffixWithOrdinal(date.getWeekDay())],\n    [\"dd\", date => miniWeekDays[date.getWeekDay()]],\n    [\"ddd\", date => shortWeekDays[date.getWeekDay()]],\n    [\"dddd\", date => longWeekdays[date.getWeekDay()]],\n\n    [\"H\", date => date.getHours()],\n    [\"HH\", date => padNumber(date.getHours(), 2)],\n    [\"h\", date => date.getHours() % 12],\n    [\"hh\", date => padNumber(date.getHours() % 12, 2)],\n\n    [\"m\", date => date.getMinutes()],\n    [\"mm\", date => padNumber(date.getMinutes(), 2)],\n\n    [\"s\", date => date.getSeconds()],\n    [\"ss\", date => padNumber(date.getSeconds(), 2)],\n\n    [\"S\", date => Math.floor(date.getMilliseconds() / 100)],\n    [\"SS\", date => padNumber(Math.floor(date.getMilliseconds() / 10), 2)],\n    [\"SSS\", date => padNumber(date.getMilliseconds(), 3)],\n    [\"ms\", date => padNumber(date.getMilliseconds(), 3)],\n\n    [\"LL\", date => date.format(\"MMMM Do, YYYY\")],\n]);\n\nlet Date = StemDate;\n\nexport {Date, StemDate};\n","import {StemDate} from \"./Date\";\nimport {TimeUnit} from \"./Duration\"\n\n// File meant to handle server time/client time differences\nlet ServerTime = {\n    now() {\n        return StemDate().subtract(this.getOffset());\n    },\n\n    getOffset() {\n        return this.offset;\n    },\n\n    set(date, onlyIfMissing=false) {\n        if (!onlyIfMissing || this.offset == null) {\n            this.offset = Date.now() - (new StemDate(date));\n        }\n    },\n\n    setPageLoadTime(unixTime, estimatedLatency=0) {\n        this.serverPageLoad = unixTime;\n        this.offset = performance.timing.responseStart - unixTime * 1000;\n    }\n};\n\n// TODO: should use +TimeUnit.DAY\nexport const DAY_IN_MILLISECONDS = 24 * 60 * 60 * 1000;\n\n// TODO: should have a generic method time1.isSame(\"x\", time);\nexport function isDifferentDay(timeA, timeB) {\n    // return !StemDate(timeA).same(TimeUnit.DAY, timeB);\n    timeA = StemDate(timeA);\n    timeB = StemDate(timeB);\n\n    // First check if difference is gre\n    if (timeA.diff(timeB) > +TimeUnit.DAY) {\n        return true;\n    }\n    // Check if different day of the month, when difference is less than a day\n    return (timeA.getDate() !== timeB.getDate());\n}\n\nexport {ServerTime};\n\nexport * from \"./Date\";\nexport * from \"./Duration\";\n","import {UI} from \"./UIBase\";\nimport {TextInput} from \"./input/Input\";\nimport {VolatileFloatingWindow} from \"./modal/FloatingWindow\";\nimport {VerticalSlideBar} from \"./UIPrimitives\";\nimport {StemDate, DAY_IN_MILLISECONDS} from \"../time/Time\";\n\nclass DatePickerTable extends UI.Element {\n\n}\n\nclass TimePickerWidget extends UI.Element {\n    render() {\n        let hours = parseInt(this.options.time / (60 * 60 * 1000));\n        let minutes = parseInt((this.options.time - 60 * 60 * 1000 * hours) / (60 * 1000));\n        let seconds = parseInt((this.options.time - 60 * 60 * 1000 * hours - 60 * 1000 * minutes) / (1000));\n        let textSpanStyle = {\n            display: \"inline-block\",\n            flex: 1,\n            textAlign: \"center\",\n            fontSize: \"1.5em\",\n            fontWeight: \"bold\",\n            padding: \"0 5px\"\n        };\n        return [\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <div style={textSpanStyle} ref=\"hours\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"minutes\" />\n                <div style={textSpanStyle}>:</div>\n                <div style={textSpanStyle} ref=\"seconds\" />\n            </div>,\n            <div style={{width: \"130px\", display: \"flex\"}}>\n                <VerticalSlideBar value={hours / 23} ref=\"hourSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={minutes / 59} ref=\"minuteSlider\" height={200} barHeight={5} style={{flex: 1}}/>\n                <div style={{flex: 1}}></div>\n                <VerticalSlideBar value={seconds / 59} ref=\"secondSlider\" height={200} barHeight={5} style={{flex: 1, marginRight: \"5px\"}}/>\n            </div>\n        ];\n    }\n\n    onMount() {\n        let changeCallback = () => {\n            let hours = parseInt(this.hourSlider.getValue() * 23);\n            let minutes = parseInt(this.minuteSlider.getValue() * 59);\n            let seconds = parseInt(this.secondSlider.getValue() * 59);\n            this.hours.node.innerHTML = (hours < 10 ? \"0\" : \"\") + hours;\n            this.minutes.node.innerHTML = (minutes < 10 ? \"0\" : \"\") + minutes;\n            this.seconds.node.innerHTML = (seconds < 10 ? \"0\" : \"\") + seconds;\n            let time = (hours * 60 * 60  + minutes * 60 + seconds) * 1000;\n            this.dispatch(\"changeTime\", time);\n        };\n        this.hourSlider.addListener(\"change\", changeCallback);\n        this.minuteSlider.addListener(\"change\", changeCallback);\n        this.secondSlider.addListener(\"change\", changeCallback);\n        changeCallback();\n    }\n}\n\nclass DateTimeWindow extends VolatileFloatingWindow {\n    setOptions(options) {\n        options.style = Object.assign({\n            marginBottom: \"5px\",\n            border: \"1px solid #bbb\",\n            borderRadius: \"2px\",\n            position: \"absolute\",\n            overflow: \"auto\",\n            boxShadow: \"0 6px 12px rgba(0,0,0,.175)\",\n            backgroundColor: \"white\",\n            padding: \"10px\",\n            zIndex: 10000\n        }, options.style || {});\n        super.setOptions(options);\n        this.computeInitial();\n    }\n\n    render() {\n        return [\n            <DatePickerTable ref=\"datePicker\" date={this.date} />,\n            <TimePickerWidget ref=\"timePicker\" time={this.time} />\n        ];\n    }\n\n    computeInitial() {\n        let initialDateTime = StemDate.parse(this.formatISO(this.options.initialDateTime)) || StemDate.now();\n        this.time = initialDateTime % DAY_IN_MILLISECONDS;\n        this.date = parseInt(initialDateTime / DAY_IN_MILLISECONDS);\n    }\n\n    formatISO(str) {\n        if (!str) {\n            return \"\";\n        }\n        while (str.indexOf(\"/\") !== -1) {\n            str = str.replace(\"/\", \" \");\n        }\n        while (str.indexOf(\":\") !== -1) {\n            str = str.replace(\":\", \" \");\n        }\n        let tokens = str.split(\" \");\n        return tokens[2] + \"-\" + tokens[1] + \"-\" + tokens[0] + \"T\" + tokens[3] + \":\" + tokens[4] + \":\" + tokens[5] + \".000Z\";\n    }\n\n    getValue() {\n        let currentDate = this.time + DAY_IN_MILLISECONDS * this.date;\n        currentDate = StemDate.create(currentDate);\n        let date = currentDate.toISOString();\n        date = date.slice(8, 10) + \"/\" + date.slice(5, 7) + \"/\" + date.slice(0, 4);\n        return date + \" \" + currentDate.toTimeString().slice(0, 8);\n    }\n\n    onMount() {\n        this.options.output.setValue(this.getValue());\n        this.datePicker.addListener(\"changeDate\", (date) => {\n            this.date = date;\n            this.options.output.setValue(this.getValue());\n        });\n        this.timePicker.addListener(\"changeTime\", (time) => {\n            this.time = time;\n            this.options.output.setValue(this.getValue());\n        });\n    }\n}\n\nclass DateTimePicker extends UI.Element {\n    setOptions(options) {\n        options.format = options.format || \"DD/MM/YYYY HH:mm:ss\";\n        super.setOptions(options);\n        if (this.options.date) {\n            this.setDate(this.options.date);\n        }\n    }\n\n    parseDateFromString(str, format) {\n        if (format !== \"DD/MM/YYYY HH:mm:ss\") {\n            throw Error(\"Format not supported!\");\n        }\n        // Just parsing DD/MM/YYYY HH:mm:ss for now\n        while (str.indexOf('/') !== -1) {\n            str = str.replace('/', ' ');\n        }\n        while (str.indexOf(':') !== -1) {\n            str = str.replace(':', ' ');\n        }\n        let tokens = str.split(' ');\n        let integerTokens = [];\n        for (let token of tokens) {\n            let number = parseFloat(token);\n            if (!isNaN(number)) {\n                integerTokens.push(number);\n            }\n        }\n        let years = (integerTokens.length >= 3 ? integerTokens[2] : 0);\n        let months = (integerTokens.length >= 2 ? integerTokens[1] - 1 : 0);\n        let days = (integerTokens.length >= 1 ? integerTokens[0] : 0);\n        let hours = (integerTokens.length >= 4 ? integerTokens[3] : 0);\n        let minutes = (integerTokens.length >= 5 ? integerTokens[4] : 0);\n        let seconds = (integerTokens.length >= 6 ? integerTokens[5] : 0);\n        let date = new StemDate(years, months, days, hours, minutes, seconds);\n        if (!date.getTime()) {\n            return null;\n        }\n        return date;\n    }\n\n    getDate() {\n        let str = this.textInput.getValue();\n        if (!str) {\n            return null;\n        }\n        let format = this.options.format;\n        return this.parseDateFromString(str, format);\n    }\n\n    setDate(date) {\n        this.options.date = date;\n        this.options.dateString = date.format(this.options.format);\n        if (this.textInput) {\n            this.textInput.setValue(this.options.dateString);\n        }\n    }\n\n    render() {\n        return [\n            <TextInput ref=\"textInput\" placeholder={this.options.format} value={this.options.dateString || \"\"} />,\n            /*<Button ref=\"calendarSpan\" faIcon=\"calendar\"/>*/\n        ]\n    }\n\n    // onMount() {\n    //     this.calendarSpan.addClickListener((event) => {\n    //         if (!this.dateTimeWindow) {\n    //             let textInputOffset = getOffset(this.textInput);\n    //             this.dateTimeWindow = DateTimeWindow.create(document.body, {\n    //                 style: {\n    //                     top: textInputOffset.top + 5 + this.textInput.getHeight() + \"px\",\n    //                     left: textInputOffset.left + 5 + \"px\"\n    //                 },\n    //                 initialDateTime: this.textInput.getValue(),\n    //                 output: this.textInput\n    //             });\n    //         } else {\n    //             this.dateTimeWindow.hide();\n    //             delete this.dateTimeWindow;\n    //         }\n    //         event.stopPropagation();\n    //     });\n    // }\n}\n\nexport {DateTimePicker};\n","export function enqueueIfNotLoaded(target, key, descriptor) {\n    const method = descriptor.value;\n    return Object.assign({}, descriptor, {\n        value: function() {\n            if (this.isLoaded()) {\n                return method.call(this, ...arguments);\n            } else {\n                this.enqueueMethodCall(method, arguments);\n                return null;\n            }\n        }\n    });\n}\n\n\nexport const EnqueueableMethodMixin = (BaseClass) => class EnqueueableMethodClass extends BaseClass {\n    isLoaded() {\n        throw Error(\"Not implemented!\");\n    }\n\n    enqueueMethodCall(method, args) {\n        this.methodCallQueue = this.methodCallQueue || [];\n        this.methodCallQueue.push([method, args]);\n    }\n\n    resolveQueuedMethods() {\n        if (!this.isLoaded()) {\n            throw Error(\"Cannot process scheduled jobs, element not loaded\");\n        }\n        for (let methodCall of this.methodCallQueue || []) {\n            methodCall[0].call(this, ...methodCall[1]);\n        }\n        delete this.methodCallQueue;\n    }\n};\n","// Wrapper over the Ace code editor, needs ace to be loaded\n// TODO: should be renamed to AceCodeEditor?\nimport {UI} from \"./UIBase\";\nimport {StyleSheet, styleRule} from \"./Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {EnqueueableMethodMixin, enqueueIfNotLoaded} from \"../base/EnqueueableMethodMixin\";\n\n\nclass CodeEditor extends EnqueueableMethodMixin(UI.Element) {\n    static requireAce(callback) {\n        throw Error(\"You need to implement requireAce\");\n    }\n\n    isLoaded() {\n        return !!this.getAce();\n    }\n\n    setOptions(options) {\n        let defaultOptions = {\n            aceMode: \"text\",\n            readOnly: false,\n            aceTheme: \"dawn\",\n            aceKeyboardHandler: \"ace\",\n            fontSize: 14,\n            tabSize: 4,\n            showLineNumber: true,\n            showPrintMargin: false,\n            printMarginSize: 80,\n        };\n        options = Object.assign(defaultOptions, options);\n\n        super.setOptions(options);\n\n        if (this.options.aceMode) {\n            this.options.aceMode = this.options.aceMode.toLowerCase();\n        }\n\n        if (this.options.aceMode === \"cpp\" || this.options.aceMode === \"c\") {\n            this.options.aceMode = \"c_cpp\";\n        }\n\n        if (this.getAce()) {\n            this.applyAceOptions();\n        }\n    }\n\n    redraw() {\n        if (this.getAce()) {\n            this.aceResize();\n            this.applyRef();\n            return;\n        }\n        super.redraw();\n    }\n\n    whenLoaded(callback) {\n        if (this.isLoaded()) {\n            callback();\n        } else {\n            this.addListenerOnce(\"aceReady\", callback);\n        }\n    }\n\n    onMount() {\n        // Sometimes when the parent div resizes the ace editor doesn't fully update.\n        this.addListener(\"resize\", () => {\n            this.aceResize();\n        });\n\n        this.addListener(\"change\", () => {\n            this.aceResize();\n        });\n\n        if (!window.ace) {\n            this.constructor.requireAce(() => {\n                this.onDelayedMount();\n            });\n            return;\n        }\n        this.onDelayedMount();\n    }\n\n    onDelayedMount() {\n        this.ace = window.ace.edit(this.node);\n\n        // Removes some warnings\n        this.getAce().$blockScrolling = Infinity;\n\n        this.resolveQueuedMethods();\n\n        this.applyAceOptions();\n\n        //#voodoo was here to automatically redraw when unhiding\n        //This Ace event listener might be useful in the future\n        this.getAce().renderer.$textLayer.addEventListener(\"changeCharacterSize\", (event) => {\n            this.aceResize();\n        });\n        this.dispatch(\"aceReady\");\n    }\n\n    getAce() {\n        return this.ace;\n    }\n\n    getValue() {\n        return this.getAce().getValue();\n    }\n\n    @enqueueIfNotLoaded\n    applyAceOptions() {\n        //set the language mode\n        this.setAceMode(this.options.aceMode);\n        this.setAceKeyboardHandler(this.options.aceKeyboardHandler);\n        this.setAceTheme(this.options.aceTheme);\n        this.setAceFontSize(this.options.fontSize);\n        this.setAceTabSize(this.options.tabSize);\n        this.setAceLineNumberVisible(this.options.showLineNumber);\n        this.setAcePrintMarginVisible(this.options.showPrintMargin);\n        this.setAcePrintMarginSize(this.options.printMarginSize);\n        this.setReadOnly(this.options.readOnly);\n        this.setUseWrapMode(this.options.lineWrapping || false);\n\n        if (this.options.numLines) {\n            this.options.maxLines = this.options.minLines = this.options.numLines;\n        }\n\n        if (this.options.maxLines) {\n            this.setAceOptions({\n                maxLines: this.options.maxLines\n            });\n        }\n\n        if (this.options.minLines) {\n            this.setAceOptions({\n                minLines: this.options.minLines\n            });\n        }\n\n        if (this.options.value) {\n            this.setValue(this.options.value, -1);\n        }\n        if (this.options.hasOwnProperty(\"enableBasicAutocompletion\") ||\n            this.options.hasOwnProperty(\"enableLiveAutocompletion\")) {\n            let langTools =\"/static/js/ext/ace/ext-language_tools.js\";\n            require([langTools], () => {\n                this.setBasicAutocompletion(this.options.enableBasicAutocompletion);\n                this.setLiveAutocompletion(this.options.enableLiveAutocompletion);\n                this.setSnippets(this.options.enableSnippets);\n            });\n        }\n    }\n\n    @enqueueIfNotLoaded\n    aceResize() {\n        this.getAce().resize();\n    }\n\n    @enqueueIfNotLoaded\n    setValue(sourceCode, fakeUserChange) {\n        // We need to wrap the ace call in these flags so any event listeners can know if this change\n        // was done by us or by the user\n        this.apiChange = !fakeUserChange;\n        this.getAce().setValue(sourceCode, -1);\n        this.apiChange = false;\n    }\n\n    @enqueueIfNotLoaded\n    setAceOptions(options) {\n        this.getAce().setOptions(options);\n    }\n\n    // TODO: should this be setEditable?\n    @enqueueIfNotLoaded\n    setReadOnly(value) {\n        this.getAce().setReadOnly(value);\n    };\n\n    @enqueueIfNotLoaded\n    setAceMode(aceMode) {\n        if (aceMode.hasOwnProperty(\"aceMode\")) {\n            aceMode = aceMode.aceMode;\n        }\n        this.getAce().getSession().setMode(\"ace/mode/\" + aceMode);\n    }\n\n    getAceKeyboardHandler() {\n        return this.getAce().$keybindingId;\n    }\n\n    @enqueueIfNotLoaded\n    setAceKeyboardHandler(keyboardHandler) {\n        if (keyboardHandler.hasOwnProperty(\"aceName\")) {\n            keyboardHandler = keyboardHandler.aceName;\n        }\n        this.getAce().setKeyboardHandler(\"ace/keyboard/\" + keyboardHandler);\n    }\n\n    getAceMode() {\n        return this.getAce().getSession().getMode();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTheme(theme) {\n        if (theme.hasOwnProperty(\"aceName\")) {\n            theme = theme.aceName;\n        }\n        this.getAce().setTheme(\"ace/theme/\" + theme);\n    }\n\n    getAceTheme() {\n        return this.getAce().getTheme();\n    }\n\n    @enqueueIfNotLoaded\n    setAceFontSize(fontSize) {\n        this.getAce().setOptions({\n            fontSize: fontSize + \"px\"\n        });\n    }\n\n    getAceFontSize() {\n        return this.getAce().getFontSize();\n    }\n\n    @enqueueIfNotLoaded\n    setAceTabSize(tabSize) {\n        this.getAce().setOptions({\n            tabSize: tabSize\n        });\n    }\n\n    getAceTabSize() {\n        return this.getAce().getOption(\"tabSize\");\n    }\n\n    @enqueueIfNotLoaded\n    setAceLineNumberVisible(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getAceLineNumberVisible() {\n        return this.getAce().renderer.getShowGutter();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginVisible(value) {\n        this.getAce().setShowPrintMargin(value);\n    }\n\n    getAcePrintMarginVisible() {\n        return this.getAce().getShowPrintMargin();\n    }\n\n    @enqueueIfNotLoaded\n    setAcePrintMarginSize(printMarginSize) {\n        this.getAce().setPrintMarginColumn(printMarginSize);\n    }\n\n    getAcePrintMarginSize() {\n        return this.getAce().getPrintMarginColumn();\n    }\n\n    @enqueueIfNotLoaded\n    setBasicAutocompletion(value) {\n        this.getAce().setOptions({\n            enableBasicAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setLiveAutocompletion(value) {\n        this.getAce().setOptions({\n            enableLiveAutocompletion: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setSnippets(value) {\n        this.getAce().setOptions({\n            enableSnippets: value\n        });\n    }\n\n    @enqueueIfNotLoaded\n    setAnnotations(annotations) {\n        this.getAce().getSession().setAnnotations(annotations);\n    }\n\n    @enqueueIfNotLoaded\n    setUseWrapMode(value) {\n        this.getAce().getSession().setUseWrapMode(value);\n    }\n\n    @enqueueIfNotLoaded\n    setIndentedSoftWrap(value) {\n        this.getAce().setOption(\"indentedSoftWrap\", value);\n    }\n\n    @enqueueIfNotLoaded\n    blockScroll() {\n        this.getAce().$blockScrolling = Infinity;\n    }\n\n    @enqueueIfNotLoaded\n    setFoldStyle(foldStyle) {\n        this.getAce().getSession().setFoldStyle(foldStyle);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightActiveLine(value) {\n        this.getAce().setHighlightActiveLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setHighlightGutterLine(value) {\n        this.getAce().setHighlightGutterLine(value);\n    }\n\n    @enqueueIfNotLoaded\n    setShowGutter(value) {\n        this.getAce().renderer.setShowGutter(value);\n    }\n\n    getScrollTop() {\n        return this.getAce().getSession().getScrollTop();\n    }\n\n    @enqueueIfNotLoaded\n    setScrollTop(value) {\n        this.getAce().getSession().setScrollTop(value);\n    }\n\n    @enqueueIfNotLoaded\n    addMarker(startLine, startCol, endLine, endCol, ...args) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().addMarker(new Range(startLine, startCol, endLine, endCol), ...args);\n    }\n\n    @enqueueIfNotLoaded\n    removeMarker(marker) {\n        this.getAce().getSession().removeMarker(marker);\n    }\n\n    getRendererLineHeight() {\n        return this.getAce().renderer.lineHeight;\n    }\n\n    getTextRange(startLine, startCol, endLine, endCol) {\n        const Range = this.constructor.AceRange;\n        return this.getAce().getSession().doc.getTextRange(new Range(startLine, startCol, endLine, endCol));\n    }\n\n    @enqueueIfNotLoaded\n    setTextRange(startLine, startCol, endLine, endCol, text) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().replace(new Range(startLine, startCol, endLine, endCol), text);\n    }\n\n    @enqueueIfNotLoaded\n    removeLine(line) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().remove(new Range(line, 0, line + 1, 0));\n    }\n\n    @enqueueIfNotLoaded\n    insertAtLine(line, str) {\n        let column = this.getAce().session.getLine(line - 1).length;\n        this.getAce().gotoLine(line, column);\n        this.insert(str);\n    }\n\n    @enqueueIfNotLoaded\n    replaceLine(line, str) {\n        const Range = this.constructor.AceRange;\n        this.getAce().getSession().getDocument().replace(new Range(line, 0, line + 1, 0), str);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionEventListener(event, callback) {\n        this.getAce().getSession().addEventListener(event, callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceSessionChangeListener(callback) {\n        this.addAceSessionEventListener(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceChangeListener(callback) {\n        this.getAce().on(\"change\", callback);\n    }\n\n    @enqueueIfNotLoaded\n    addAceEventListener() {\n        this.getAce().addEventListener(...arguments);\n    }\n\n    @enqueueIfNotLoaded\n    focus() {\n        this.getAce().focus();\n    }\n\n    @enqueueIfNotLoaded\n    gotoEnd() {\n        let editor = this.getAce();\n        let editorRow = editor.session.getLength() - 1;\n        let editorColumn = editor.session.getLine(editorRow).length;\n        editor.gotoLine(editorRow + 1, editorColumn);\n    }\n\n    @enqueueIfNotLoaded\n    setUndoManager(undoManager) {\n        this.getAce().getSession().setUndoManager(undoManager);\n    }\n\n    @enqueueIfNotLoaded\n    setAceRendererOption(key, value) {\n        this.getAce().renderer.setOption(key, value);\n    }\n\n    // Inserts the text at the current cursor position\n    @enqueueIfNotLoaded\n    insert(text) {\n        this.getAce().insert(text);\n    }\n\n    // Appends the text at the end of the document\n    @enqueueIfNotLoaded\n    append(text) {\n        var lastRow = this.getAce().getSession().getLength() - 1;\n        if (lastRow < 0) {\n            lastRow = 0;\n        }\n        var lastRowLength = this.getAce().getSession().getLine(lastRow).length;\n        var scrolledToBottom = this.getAce().isRowFullyVisible(lastRow);\n        // console.log(\"Scroll to bottom \", scrolledToBottom);\n        this.getAce().getSession().insert({\n            row: lastRow,\n            column: lastRowLength\n        }, text);\n\n        this.aceResize();\n\n        if (scrolledToBottom) {\n            // TODO: Include scroll lock option!\n            // TODO: See if scrolling to bottom can be done better\n            // TODO: for some reason the scroll bar height is not being updated, this needs to be fixed\n            this.getAce().scrollToLine(this.getAce().getSession().getLength() - 1, true, true, function () {});\n        }\n    }\n\n    copyTextToClipboard() {\n        this.getAce().selectAll();\n        this.getAce().focus();\n        document.execCommand('copy');\n    }\n}\n\n\nclass StaticCodeHighlighterStyle extends StyleSheet {\n    @styleRule\n    hideActive = {\n        \" .ace_gutter-active-line\": {\n            display: \"none\",\n        },\n        \" .ace_active-line\": {\n            display: \"none\",\n        },\n        \" .ace_cursor\": {\n            display: \"none\",\n        }\n    }\n}\n\n\n@registerStyle(StaticCodeHighlighterStyle)\nclass StaticCodeHighlighter extends CodeEditor {\n    setOptions(options) {\n        options = Object.assign({\n            fontSize: 13,\n            readOnly: true,\n            lineWrapping: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.hideActive)\n    }\n}\n\nexport {CodeEditor, StaticCodeHighlighter};\n","import {UI, StyleSheet, registerStyle, styleRule} from \"ui/UI\";\n\n\n\nconst generateHex = () => {\n    return \"0123456789ABCDEF\"[parseInt(Math.random() * 16)];\n};\n\nconst generateColor = () => {\n    return [...\"000000\"].map(generateHex).join``;\n};\n\nclass TileStyle extends StyleSheet {\n    @styleRule\n    tile = {\n        flex: 1,\n        margin: \"4px\",\n        opacity: 1,\n        transform: \"scale(1)\",\n        transitionProperty: \"opacity scale\",\n        transition: \".3s ease-out\",\n\n        perspective: \"1000px\",\n        \">:first-child\": {\n            position: \"relative\",\n            width: \"100%\",\n            height: \"100%\",\n            transition: \"transform 0.8s ease\",\n            transformStyle: \"preserve-3d\",\n        },\n        \">*>*\": {\n            position: \"absolute\",\n            width: \"100%\",\n            height: \"100%\",\n            backfaceVisibility: \"hidden\",\n        },\n        \">*>:nth-child(2)\": {\n            transform: \"rotateY(180deg)\",\n        }\n    };\n\n    @styleRule\n    hidden = {\n        opacity: 0,\n        transform: \"scale(.8)\",\n        \">:first-child\": {\n            transition: \"none\",\n        },\n    };\n\n    @styleRule\n    flip = {\n        \">:first-child\": {\n            transform: \"rotateY(180deg)\",\n        }\n    }\n}\n\n\n@registerStyle(TileStyle)\nexport class Tile extends UI.Element {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.tile);\n        if (this.options.hiddenTile) {\n            attr.addClass(this.styleSheet.hidden);\n        }\n    }\n\n    hide() {\n        this.updateOptions({hiddenTile: true});\n    }\n\n    flip(color) {\n        this.updateOptions({color, oldColor: this.options.color, flip: true});\n    }\n\n    render() {\n        if (!this.options.oldColor) {\n            this.options.oldColor = this.options.color;\n        }\n        if (this.options.flip) {\n            this.options.flip = false;\n            this.options.flipAmount = (~~this.options.flipAmount) + 180;\n            this.options.swap = !this.options.swap;\n        }\n        const styleFace = !this.options.swap ? {background: this.options.color} : {background: this.options.oldColor};\n        const styleBack = this.options.swap ? {background: this.options.color} : {background: this.options.oldColor};\n        return [\n            <div style={{transform: `rotateY(${~~this.options.flipAmount}deg)`}}>\n                <div style={styleFace}/>\n                <div style={styleBack}/>\n            </div>\n        ]\n    }\n\n    onMount() {\n        this.addClickListener(() => this.options.board.dispatch(\"tileClicked\", this));\n    }\n}","import {UI, StyleSheet, styleRule, registerStyle} from \"ui/UI\";\nimport {Tile} from \"./Tile\";\n\n\n\nexport class BoardStyle extends StyleSheet {\n    @styleRule\n    board = {\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\n\nconst COLORS = [\n    \"#3F51B5\",\n    \"#2196F3\",\n    \"#4CAF50\",\n    \"#9C27B0\",\n    \"#673AB7\",\n    \"#F44336\",\n    \"#CDDC39\",\n    \"#795548\",\n];\n\n\n@registerStyle(BoardStyle)\nexport class Board extends UI.Element {\n    getDefaultOptions() {\n        return {\n            rows: 4,\n            columns: 4,\n        }\n    }\n\n    constructor(...args) {\n        super(...args);\n        this.colorIndex = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.board);\n    }\n\n    m(row, column) {\n        return this[\"matrix\" + column + \"on\" + row];\n    }\n\n    render() {\n        let matrixChildren = [];\n        this.tiles = [];\n\n        for (let row = 0; row < this.options.rows; row += 1) {\n            let rowChildren = [];\n            for (let column = 0; column < this.options.columns; column += 1) {\n                const tile = this[\"matrix\" + column + \"on\" + row] = <Tile board={this} hiddenTile={true}/>;\n                rowChildren.push(tile);\n                this.tiles.push(tile);\n            }\n            matrixChildren.push(<div style={{display: \"flex\", flex: \"1\", width: \"100%\", flexDirection: \"row\"}}>{rowChildren}</div>);\n        }\n\n        let colorsIndex = 0;\n\n        for (const pair of this.options.pairs) {\n            this.m(...pair[0]).options.color = COLORS[colorsIndex];\n            this.m(...pair[1]).options.color = COLORS[colorsIndex];\n            this.m(...pair[0]).options.pair = this.m(...pair[1]);\n            this.m(...pair[1]).options.pair = this.m(...pair[0]);\n            colorsIndex++;\n        }\n\n        return matrixChildren;\n    }\n\n    flipTiles() {\n        const visibleTiles = this.tiles.filter(tile => !tile.options.hiddenTile);\n        const tilesColors = visibleTiles.map(tile => ({color: tile.options.color, key: Math.random()}));\n        tilesColors.sort((a, b) => a.key - b.key);\n        while (tilesColors.length) {\n            const pairIndex = tilesColors.findIndex((tileColor, index) => index && tilesColors[0].color === tileColor.color);\n            visibleTiles[0].options.pair = visibleTiles[pairIndex];\n            visibleTiles[pairIndex].options.pair = visibleTiles[0];\n            visibleTiles[0].flip(tilesColors[0].color);\n            visibleTiles[pairIndex].flip(tilesColors[0].color);\n            visibleTiles.splice(pairIndex, 1);\n            visibleTiles.splice(0, 1);\n            tilesColors.splice(pairIndex, 1);\n            tilesColors.splice(0, 1);\n        }\n    }\n\n    onMount() {\n        this.addListener(\"tileClicked\", tile => {\n            console.warn(tile);\n            if (tile.options.color === COLORS[this.colorIndex] && tile.options.pair === this.lastTile) {\n                tile.hide();\n                this.lastTile.hide();\n            }\n            this.lastTile = tile;\n        });\n\n        setInterval(() => this.flipTiles(), 5000);\n    }\n}","import {UI, StyleSheet, styleRule, registerStyle} from \"ui/UI\";\nimport {Board} from \"./Board\";\n\n\n\nclass GameStyle extends StyleSheet {\n    @styleRule\n    game = {\n        display: \"flex\",\n        height: \"100%\",\n        width: \"100%\",\n        \">:first-child\": {\n            flex: 1,\n        }\n    }\n}\n\n\n@registerStyle(GameStyle)\nexport class Game extends UI.Element {\n    getDefaultOptions() {\n        return {\n            rows: 4,\n            columns: 4,\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.game);\n    }\n\n    generatePairs() {\n        const pairs = [];\n        const cells = [];\n        for (let i = 0; i < this.options.rows; i += 1) {\n            for (let j = 0; j < this.options.columns; j += 1) {\n                cells.push([i, j]);\n            }\n        }\n        while (cells.length) {\n            const pairIndex = 1 + parseInt(Math.random() * (cells.length - 1));\n            pairs.push([cells[0], cells[pairIndex]]);\n            cells.splice(pairIndex, 1);\n            cells.splice(0, 1);\n        }\n        return pairs;\n    }\n\n    render() {\n        const {rows, columns} = this.options;\n\n        return <Board pairs={this.generatePairs()} rows={rows} columns={columns}/>;\n    }\n}","import {UI, Link, registerStyle, StyleSheet, styleRule} from \"ui/UI\";\nimport {Game} from \"./game/Game\";\n\n\n\nclass IndexPageStyle extends StyleSheet {\n    @styleRule\n    container = {\n        height: \"500px\",\n        width: \"500px\",\n        display: \"flex\"\n    };\n}\n\n\n@registerStyle(IndexPageStyle)\nexport class IndexPage extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    render() {\n        return [\n            <Game />\n        ];\n    }\n}","// TODO: this file is in dire need of a rewrite\nexport class StringStream {\n    constructor(string, options) {\n        this.string = string;\n        this.pointer = 0;\n    }\n\n    done() {\n        return this.pointer >= this.string.length;\n    }\n\n    advance(steps=1) {\n        this.pointer += steps;\n    }\n\n    char() {\n        let ch = this.string.charAt(this.pointer);\n        this.pointer += 1;\n        return ch;\n    }\n\n    whitespace(whitespaceChar=/\\s/) {\n        let whitespaceStart = this.pointer;\n\n        while (!this.done() && whitespaceChar.test(this.at(0))) {\n            this.pointer += 1;\n        }\n\n        // Return the actual whitespace in case it is needed\n        return this.string.substring(whitespaceStart, this.pointer);\n    }\n\n    // Gets first encountered non-whitespace substring\n    word(validChars=/\\S/, skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let wordStart = this.pointer;\n        while (!this.done() && validChars.test(this.at(0))) {\n            this.pointer += 1;\n        }\n        return this.string.substring(wordStart, this.pointer);\n    }\n\n    number(skipWhitespace=true) {\n        if (skipWhitespace) {\n            this.whitespace();\n        }\n\n        let nanString = \"NaN\";\n        if (this.startsWith(nanString)) {\n            this.advance(nanString.length);\n            return NaN;\n        }\n\n        let sign = \"+\";\n        if (this.at(0) === \"-\" || this.at(0) === \"+\") {\n            sign = this.char();\n        }\n\n        let infinityString = \"Infinity\";\n        if (this.startsWith(infinityString)) {\n            this.advance(infinityString.length);\n            return sign === \"+\" ? Infinity : -Infinity;\n        }\n\n        let isDigit = (char) => {\n            return (char >= \"0\" || char <= \"9\");\n        };\n\n        if (this.at(0) === \"0\" && (this.at(1) === \"X\" || this.at(1) === \"x\")) {\n            // hexadecimal number\n            this.advance(2);\n\n            let isHexDigit = (char) => {\n                return isDigit(char) || (char >= \"A\" && char <= \"F\") ||(char >= \"a\" && char <= \"f\");\n            };\n\n            let numberStart = this.pointer;\n            while (!this.done() && isHexDigit(this.at(0))) {\n                this.pointer += 1;\n            }\n\n            return parseInt(sign + this.string.substring(numberStart), 16);\n        }\n\n        let numberStart = this.pointer;\n        while (!this.done() && isDigit(this.at(1))) {\n            this.pointer += 1;\n            if (this.peek === \".\") {\n                this.advance(1);\n                while (!this.done() && isDigit(this.at(1))) {\n                    this.pointer += 1;\n                }\n                break;\n            }\n        }\n        return parseFloat(sign + this.string.substring(numberStart, this.pointer));\n    }\n\n    // Gets everything up to delimiter, usually end of line, limited to maxLength\n    line(delimiter=/\\r*\\n/, maxLength=Infinity) {\n        if (delimiter instanceof RegExp) {\n            // Treat regex differently. It will probably be slower.\n            let str = this.string.substring(this.pointer);\n            let delimiterMatch = str.match(delimiter);\n\n            let delimiterIndex, delimiterLength;\n            if (delimiterMatch === null) {\n                // End of string encountered\n                delimiterIndex = str.length;\n                delimiterLength = 0;\n            } else {\n                delimiterIndex = delimiterMatch.index;\n                delimiterLength = delimiterMatch[0].length;\n            }\n\n            if (delimiterIndex >= maxLength) {\n                this.pointer += maxLength;\n                return str.substring(0, maxLength);\n            }\n\n            this.advance(delimiterIndex + delimiterLength);\n            return str.substring(0, delimiterIndex);\n        }\n\n        let delimiterIndex = this.string.indexOf(delimiter, this.pointer);\n\n        if (delimiterIndex === -1) {\n            delimiterIndex = this.string.length;\n        }\n\n        if (delimiterIndex - this.pointer > maxLength) {\n            let result = this.string.substring(this.pointer, this.pointer + maxLength);\n            this.advance(maxLength);\n            return result;\n        }\n\n        let result = this.string.substring(this.pointer, delimiterIndex);\n        this.pointer = delimiterIndex + delimiter.length;\n        return result;\n    }\n\n    // The following methods have no side effects\n\n    // Access char at offset position, relative to current pointer\n    at(index) {\n        return this.string.charAt(this.pointer + index);\n    }\n\n    peek(length=1) {\n        return this.string.substring(this.pointer, this.pointer + length);\n    }\n\n    startsWith(prefix) {\n        if (prefix instanceof RegExp) {\n            // we modify the regex to only check for the beginning of the string\n            prefix = new RegExp(\"^\" + prefix.toString().slice(1, -1));\n            return prefix.test(this.string.substring(this.pointer));\n        }\n        return this.peek(prefix.length) === prefix;\n    }\n\n    // Returns first position of match\n    search(pattern) {\n        let position;\n        if (pattern instanceof RegExp) {\n            position = this.string.substring(this.pointer).search(pattern);\n        } else {\n            position = this.string.indexOf(pattern, this.pointer) - this.pointer;\n        }\n        return position < 0 ? -1 : position;\n    }\n\n    clone() {\n        let newStream = new this.constructor(this.string);\n        newStream.pointer = this.pointer;\n        return newStream;\n    }\n}\n\nfunction kmp(input) {\n    if (input.length === 0) {\n        return [];\n    }\n\n    let prefix = [0];\n    let prefixLength = 0;\n\n    for (let i = 1; i < input.length; i += 1) {\n        while (prefixLength > 0 && input[i] !== input[prefixLength]) {\n            prefixLength = prefix[prefixLength];\n        }\n\n        if (input[i] === input[prefixLength]) {\n            prefixLength += 1;\n        }\n\n        prefix.push(prefixLength);\n    }\n    return prefix;\n}\n\nclass ModifierAutomation {\n    // build automaton from string\n    constructor(options) {\n        this.options = options;\n        this.steps = 0;\n        this.startNode = {\n            value: null,\n            startNode: true,\n        };\n        this.node = this.startNode;\n\n        let lastNode = this.startNode;\n\n        let char = options.pattern.charAt(0);\n        let startPatternNode = {\n            value: char,\n            startNode: true,\n        };\n\n        let patternPrefix = kmp(options.pattern);\n        let patternNode = [startPatternNode];\n\n        if (options.leftWhitespace) {\n            // We don't want to match if the first char is not preceeded by whitespace\n            let whitespaceNode = {\n                value: \" \",\n                whitespaceNode: true,\n            };\n            whitespaceNode.next = (input) => {\n                if (input === char) return startPatternNode;\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            lastNode.next = (input) => {\n                return (/\\s/).test(input) ? whitespaceNode : this.startNode;\n            };\n            this.node = whitespaceNode;\n        } else {\n            lastNode.next = (input) => {\n                return input === char ? startPatternNode : this.startNode;\n            }\n        }\n        lastNode = startPatternNode;\n\n        for (let i = 1; i < options.pattern.length; i += 1) {\n            let char = options.pattern[i];\n            let newNode = {\n                value: char,\n            };\n            patternNode.push(newNode);\n\n            let backNode = (patternPrefix[i - 1] === 0) ? this.startNode : patternNode[patternPrefix[i - 1] - 1];\n\n            lastNode.next = (input) => {\n                if (input === char) {\n                    return newNode;\n                }\n\n                return backNode.next(input);\n            };\n            lastNode = newNode;\n        }\n        lastNode.patternLastNode = true;\n\n        if (options.captureContent) {\n            this.capture = [];\n            let captureNode = {\n                value: \"\",\n                captureNode: true,\n            };\n\n            // We treat the first character separately in order to support empty capture\n            let char = options.endPattern.charAt(0);\n            let endCaptureNode = {\n                value: char\n            };\n\n            let endPatternPrefix = kmp(options.endPattern);\n            let endPatternNodes = [endCaptureNode];\n\n            lastNode.next = captureNode.next = (input) => {\n                return input === char ? endCaptureNode : captureNode;\n            };\n\n            lastNode = endCaptureNode;\n            for (let i = 1; i < options.endPattern.length; i += 1) {\n                let char = options.endPattern[i];\n                let newNode = {\n                    value: char,\n                };\n                endPatternNodes.push(newNode);\n\n                let backNode = (endPatternPrefix[i - 1] === 0) ? captureNode : endPatternNodes[endPatternPrefix[i - 1] - 1];\n\n                lastNode.next = (input) => {\n                    if (input === char) {\n                        return newNode;\n                    }\n                    return backNode.next(input);\n                };\n                lastNode = newNode;\n            }\n\n            lastNode.endPatternLastNode = true;\n        }\n\n        lastNode.endNode = true;\n        lastNode.next = (input) => {\n            return this.startNode.next(input);\n        };\n    }\n\n    nextState(input) {\n        this.steps += 1;\n\n        this.node = this.node.next(input);\n\n        if (this.node.startNode) {\n            this.steps = 0;\n            delete this.patternStep;\n            delete this.endPatternStep;\n        }\n\n        if (this.node.patternLastNode) {\n            this.patternStep = this.steps - this.options.pattern.length + 1;\n        }\n        if (this.node.endPatternLastNode) {\n            // TODO(@all): Shouldn't it be this.options.endPattern.length instead of this.options.pattern.length?\n            this.endPatternStep = this.steps - this.options.pattern.length + 1;\n        }\n\n        return this.node;\n    }\n\n    done() {\n        return this.node.endNode;\n    }\n}\n\nclass Modifier {\n    constructor(options) {\n    }\n\n    modify(currentArray, originalString) {\n        let matcher = new ModifierAutomation({\n            pattern: this.pattern,\n            captureContent: this.captureContent, // TODO: some elements should not wrap\n            endPattern: this.endPattern,\n            leftWhitespace: this.leftWhitespace,\n        });\n\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let newArray = [];\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            let char = originalString[i];\n\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                matcher.nextState(\"\\\\\" + char); // prevent char from advancing automata\n                continue;\n            }\n\n            matcher.nextState(char);\n\n            if (matcher.done()) {\n                let modifierStart = i - (matcher.steps - matcher.patternStep);\n                let modifierEnd = i - (matcher.steps - matcher.endPatternStep) + this.endPattern.length;\n\n                let modifierCapture = [];\n\n                while (newArray.length > 0 && modifierStart <= newArray[newArray.length - 1].start) {\n                    let element = newArray.pop();\n\n                    modifierCapture.push(element);\n                }\n\n                if (newArray.length > 0 && modifierStart < newArray[newArray.length - 1].end) {\n                    let element = newArray.pop();\n                    newArray.push({\n                        isString: true,\n                        start: element.start,\n                        end: modifierStart,\n                    });\n                    modifierCapture.push({\n                        isString: true,\n                        start: modifierStart,\n                        end: element.end,\n                    });\n                }\n\n                if (currentElement.start < modifierStart) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: modifierStart,\n                    });\n                }\n                modifierCapture.reverse();\n\n                // this is the end of the capture\n                modifierCapture.push({\n                    isString: true,\n                    start: Math.max(currentElement.start, modifierStart),\n                    end: modifierEnd,\n                });\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(modifierCapture, originalString)),\n                    start: modifierStart,\n                    end: modifierEnd,\n                });\n\n                // We split the current element to in two(one will be captured, one replaces the current element\n                currentElement = {\n                    isString: true,\n                    start: modifierEnd,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n\n        return newArray;\n    }\n\n    processChildren(capture, originalString) {\n        return capture.map((element) => {\n            return this.processChild(element, originalString);\n        });\n    }\n\n    processChild(element, originalString) {\n        if (element.isDummy) {\n            return \"\";\n        } if (element.isString) {\n            return originalString.substring(element.start, element.end);\n        } else {\n            return element.content;\n        }\n    }\n}\n\nfunction InlineModifierMixin(BaseModifierClass) {\n    return class InlineModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.captureContent = true;\n        }\n\n        wrap(content) {\n            if (content.length > 0) {\n                content[0] = content[0].substring(content[0].indexOf(this.pattern) + this.pattern.length);\n\n                let lastElement = content.pop();\n                lastElement = lastElement.substring(0, lastElement.lastIndexOf(this.endPattern));\n                content.push(lastElement);\n\n                return {\n                    tag: this.tag,\n                    children: content\n                };\n            }\n        }\n    }\n}\n\nfunction LineStartModifierMixin(BaseModifierClass) {\n    return class LineStartModifier extends BaseModifierClass {\n        constructor(options) {\n            super(options);\n\n            this.groupConsecutive = false;\n        }\n\n        isValidElement(element) {\n            return element.content &&\n                element.content.tag === \"p\" &&\n                element.content.children.length > 0 &&\n                !element.content.children[0].tag && // child is text string\n                element.content.children[0].startsWith(this.pattern);\n        }\n\n        modify(currentArray, originalString) {\n            let newArray = [];\n\n            for (let i = 0; i < currentArray.length; i += 1) {\n                let element = currentArray[i];\n                if (this.isValidElement(element)) {\n                    if (this.groupConsecutive) {\n                        let elements = [];\n\n                        let start, end;\n                        start = currentArray[i].start;\n                        while (i < currentArray.length && this.isValidElement(currentArray[i])) {\n                            elements.push(this.wrapItem(currentArray[i].content.children));\n\n                            i += 1;\n                        }\n                        // we make sure no elements are skipped\n                        i -= 1;\n\n                        end = currentArray[i].end;\n\n                        newArray.push({\n                            start: start,\n                            end: end,\n                            content: this.wrap(elements)\n                        });\n                    } else {\n                        // We use object assign here to keep the start and end properties. (Maybe along with others)\n                        let newElement = Object.assign({}, element, {\n                            content: this.wrap(element.content.children)\n                        });\n                        newArray.push(newElement);\n                    }\n\n                } else {\n                    newArray.push(element);\n                }\n            }\n            return newArray;\n        }\n\n        wrapItem(content) {\n            let firstChild = content[0];\n\n            let patternIndex = firstChild.indexOf(this.pattern);\n            let patternEnd = patternIndex + this.pattern.length;\n\n            content[0] = firstChild.substring(patternEnd);\n\n            return {\n                tag: this.itemTag,\n                children: content,\n            }\n        }\n\n        wrap(content) {\n            return {\n                tag: this.tag,\n                children: content,\n            }\n        }\n    }\n}\n\nfunction RawContentModifierMixin(BaseModifierClass) {\n    return class RawContentModifier extends BaseModifierClass {\n        processChildren(children, originalString) {\n            if (children.length === 0) {\n                return [];\n            }\n\n            return [originalString.substring(children[0].start, children[children.length - 1].end)];\n        }\n    }\n}\n\nexport class BlockCodeModifier extends Modifier {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"```\";\n        this.endPattern = \"\\n```\";\n        this.leftWhitespace = true;\n        this.captureContent = true;\n    }\n\n    processChildren(capture, originalString) {\n        this.codeOptions = null;\n        if (capture.length > 0) {\n            let codeBlock = originalString.substring(capture[0].start, capture[capture.length - 1].end);\n\n            codeBlock = codeBlock.substring(codeBlock.indexOf(this.pattern) + this.pattern.length);\n            codeBlock = codeBlock.substring(0, codeBlock.lastIndexOf(this.endPattern));\n\n            let firstLineEnd = codeBlock.indexOf(\"\\n\") + 1;\n            let firstLine = codeBlock.substring(0, firstLineEnd).trim();\n            codeBlock = codeBlock.substring(firstLineEnd);\n\n            if (firstLine.length > 0) {\n                this.codeOptions = {};\n                let lineStream = new StringStream(firstLine);\n                this.codeOptions.aceMode = lineStream.word();\n\n                Object.assign(this.codeOptions, MarkupParser.parseOptions(lineStream));\n            }\n\n            return codeBlock;\n        }\n        return \"\";\n    }\n\n    getElement(content) {\n        return {\n            tag: this.constructor.tag || \"pre\",\n            children: [content],\n        }\n    }\n\n    wrap(content, options) {\n        let codeHighlighter = this.getElement(content);\n\n        // TODO: this code should not be here\n        let codeOptions = {\n            aceMode: \"c_cpp\",\n            maxLines: 32,\n        };\n\n        if (this.codeOptions) {\n            Object.assign(codeOptions, this.codeOptions);\n            delete this.codeOptions;\n        }\n\n        Object.assign(codeOptions, codeHighlighter);\n        return codeOptions;\n    }\n}\n\nclass HeaderModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"#\";\n    }\n\n    wrap(content) {\n        let firstChild = content[0];\n\n        let hashtagIndex = firstChild.indexOf(\"#\");\n        let hashtagEnd = hashtagIndex + 1;\n        let headerLevel = 1;\n\n        let nextChar = firstChild.charAt(hashtagEnd);\n        if (nextChar >= \"1\" && nextChar <= \"6\") {\n            headerLevel = parseInt(nextChar);\n            hashtagEnd += 1;\n        } else if (nextChar === \"#\") {\n            while (headerLevel < 6 && firstChild.charAt(hashtagEnd) === \"#\") {\n                headerLevel += 1;\n                hashtagEnd += 1;\n            }\n        }\n\n        content[0] = firstChild.substring(hashtagEnd);\n        return {\n            tag: \"h\" + headerLevel,\n            children: content,\n        };\n    }\n}\n\nclass HorizontalRuleModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"---\";\n    }\n\n    wrap(content) {\n        return {\n            tag: \"hr\"\n        };\n    }\n}\n\nclass UnorderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ul\";\n        this.itemTag = \"li\";\n        this.pattern = \"- \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass OrderedListModifier extends LineStartModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.tag = \"ol\";\n        this.itemTag = \"li\";\n        this.pattern = \"1. \";\n        this.groupConsecutive = true;\n    }\n}\n\nclass ParagraphModifier extends Modifier {\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let capturedContent = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                capturedContent.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if (originalString[i] === \"\\n\") {\n                if (currentElement.start < i) {\n                    capturedContent.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: i,\n                    });\n                }\n\n                newArray.push({\n                    content: this.wrap(this.processChildren(capturedContent, originalString)),\n                    start: lineStart,\n                    end: i + 1,\n                });\n                capturedContent = [];\n                lineStart = i + 1;\n\n                if (originalString[i + 1] === \"\\n\") {\n                    let start, end;\n                    start = i;\n\n                    while (i + 1 < originalString.length && originalString[i + 1] === \"\\n\") {\n                        i += 1;\n                    }\n                    end = i + 1;\n\n                    newArray.push({\n                        content: {\n                            tag: \"br\",\n                        },\n                        start: start,\n                        end: end,\n                    });\n\n                    lineStart = i + 1;\n                } else {\n                    // TODO: these dummies break code. Refactor!\n                    // newArray.push({\n                    //     isDummy: true,\n                    //     start: i,\n                    //     end: i + 1,\n                    // });\n                }\n\n                currentElement = {\n                    isString: true,\n                    start: lineStart,\n                    end: currentElement.end,\n                };\n            }\n        }\n\n        if (currentElement.start < originalString.length) {\n            capturedContent.push(currentElement);\n        }\n        if (capturedContent.length > 0) {\n            newArray.push({\n                content: this.wrap(this.processChildren(capturedContent, originalString)),\n                start: lineStart,\n                end: originalString.length,\n            })\n        }\n        return newArray;\n    }\n\n    wrap(capture) {\n        return {\n            tag: \"p\",\n            children: capture,\n        }\n    }\n}\n\nclass StrongModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"*\";\n        this.endPattern = \"*\";\n        this.tag = \"strong\";\n    }\n}\n\nclass ItalicModifier extends InlineModifierMixin(Modifier) {\n    constructor(options) {\n        super(options);\n\n        this.leftWhitespace = true;\n        this.pattern = \"/\";\n        this.endPattern = \"/\";\n        this.tag = \"em\";\n    }\n}\n\nclass InlineCodeModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"`\";\n        this.endPattern = \"`\";\n        this.tag = \"code\";\n    }\n\n    processChildren(children, originalString) {\n        if (children.length === 0) {\n            return [];\n        }\n\n        return [originalString.substring(children[0].start, children[children.length - 1].end)];\n    }\n}\n\nclass InlineVarModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$\";\n        this.endPattern = \"$\";\n        this.tag = \"var\";\n    }\n}\n\nclass InlineLatexModifier extends RawContentModifierMixin(InlineModifierMixin(Modifier)) {\n    constructor(options) {\n        super(options);\n\n        this.pattern = \"$$\";\n        this.endPattern = \"$$\";\n        this.tag = \"Latex\";\n    }\n}\n\nclass LinkModifier extends Modifier {\n\n    static isCorrectUrl(str) {\n        if (str.startsWith(\"http://\") || str.startsWith(\"https://\")) {\n            return true;\n        }\n    }\n    static trimProtocol(str) {\n        if (str[4] === 's') {\n            return str.substring(8, str.length);\n        }\n        return str.substring(7, str.length);\n    }\n\n    modify(currentArray, originalString) {\n        let newArray = [];\n        let arrayLocation = 0;\n        let currentElement = currentArray[arrayLocation];\n        let lineStart = 0;\n\n        let checkAndAddUrl = (start, end) => {\n            let substr = originalString.substring(start, end);\n            if (this.constructor.isCorrectUrl(substr)) {\n                if (currentElement.start < start) {\n                    newArray.push({\n                        isString: true,\n                        start: currentElement.start,\n                        end: start,\n                    });\n                }\n\n                newArray.push({\n                    isJSX: true,\n                    content: {\n                        tag: \"a\",\n                        href: substr,\n                        children: [this.constructor.trimProtocol(substr)],\n                        target: \"_blank\"\n                    },\n                    start: start,\n                    end: end,\n                });\n\n                currentElement = {\n                    isString: true,\n                    start: end,\n                    end: currentElement.end,\n                };\n            }\n        };\n\n        for (let i = 0; i < originalString.length; i += 1) {\n            if (i >= currentElement.end) {\n                newArray.push(currentElement);\n                arrayLocation += 1;\n                currentElement = currentArray[arrayLocation];\n            }\n\n            if (currentElement.isJSX) {\n                continue;\n            }\n\n            if ((/\\s/).test(originalString[i])) {\n                checkAndAddUrl(lineStart, i);\n                lineStart = i + 1;\n            }\n        }\n        if (lineStart < originalString.length) {\n            checkAndAddUrl(lineStart, originalString.length);\n        }\n        if (currentElement.start < originalString.length) {\n            newArray.push(currentElement);\n        }\n        return newArray;\n    }\n}\n\nlet MarkupModifier = Modifier;\n\nexport {MarkupModifier, HeaderModifier, ParagraphModifier, InlineCodeModifier, InlineLatexModifier, StrongModifier, LinkModifier};\n\nclass MarkupParser {\n    constructor(options) {\n        options = options || {};\n\n        this.modifiers = options.modifiers || this.constructor.modifiers;\n        this.uiElements = options.uiElements || new Map();\n    }\n\n    parse(content) {\n        if (!content) return [];\n\n        let result = [];\n\n        let arr = this.parseUIElements(content);\n\n        for (let i = this.modifiers.length - 1; i >= 0; i -= 1) {\n            let modifier = this.modifiers[i];\n\n            arr = modifier.modify(arr, content);\n        }\n\n        for (let el of arr) {\n            if (el.isDummy) {\n                // just skip it\n            } else if (el.isString) {\n                result.push(content.substring(el.start, el.end));\n            } else {\n                result.push(el.content);\n            }\n        }\n        return result;\n    }\n\n    parseUIElements(content) {\n        let stream = new StringStream(content);\n\n        let result = [];\n        let textStart = 0;\n\n        while (!stream.done()) {\n            let char = stream.char();\n\n            if (char === \"<\" && (/[a-zA-Z]/).test(stream.at(0))) {\n                stream.pointer -= 1; //step back to beginning of ui element\n                let elementStart = stream.pointer;\n                let uiElement;\n                try {\n                    uiElement = this.parseUIElement(stream);\n                } catch (e) {\n                    // failed to parse jsx element\n                    continue;\n                }\n\n                if (this.uiElements.has(uiElement.tag)) {\n                    result.push({\n                        isString: true,\n                        start: textStart,\n                        end: elementStart,\n                    });\n\n                    result.push({\n                        content: uiElement,\n                        isJSX: true,\n                        start: elementStart,\n                        end: stream.pointer,\n                    });\n                    textStart = stream.pointer;\n                }\n            }\n        }\n\n        if (textStart < content.length) {\n            result.push({\n                isString: true,\n                start: textStart,\n                end: content.length,\n            });\n        }\n\n        return result;\n    }\n\n    parseUIElement(stream, delimiter=(/\\/?>/)) {\n        // content should be of type <ClassName option1=\"string\" option2={{jsonObject: true}} />\n        // TODO: support nested elements like <ClassName><NestedClass /></ClassName>\n\n        stream.whitespace();\n        if (stream.done()) {\n            return null;\n        }\n\n        if (stream.at(0) !== \"<\") {\n            throw Error(\"Invalid UIElement declaration.\");\n        }\n\n        let result = {};\n\n        stream.char(); // skip the '<'\n\n        result.tag = stream.word();\n        stream.whitespace();\n\n        Object.assign(result, this.parseOptions(stream, delimiter));\n        stream.line(delimiter);\n\n        return result;\n    }\n    \n    parseOptions(stream, optionsEnd) {\n        return this.constructor.parseOptions(stream, optionsEnd);\n    }\n\n    // optionsEnd cannot include whitespace or start with '='\n    static parseOptions(stream, optionsEnd) {\n        let options = {};\n\n        stream.whitespace();\n\n        while (!stream.done()) {\n            // argument name is anything that comes before whitespace or '='\n            stream.whitespace();\n\n            let validOptionName = /[\\w$]/;\n            let optionName;\n            if (validOptionName.test(stream.at(0))) {\n                optionName = stream.word(validOptionName);\n            }\n\n            stream.whitespace();\n\n            if (optionsEnd && stream.search(optionsEnd) === 0) {\n                options[optionName] = true;\n                break;\n            }\n            if (!optionName) {\n                throw Error(\"Invalid option name\");\n            }\n\n            if (stream.peek() === \"=\") {\n                stream.char();\n                stream.whitespace();\n\n                if (stream.done()) {\n                    throw Error(\"No argument given for option: \" + optionName);\n                }\n\n                if (stream.peek() === '\"') {\n                    // We have a string here\n                    let optionString = \"\";\n                    let foundStringEnd = false;\n\n                    stream.char();\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '\"') {\n                            foundStringEnd = true;\n                            break;\n                        }\n                        optionString += char;\n                    }\n\n                    if (!foundStringEnd) {\n                        // You did not close that string\n                        throw Error(\"Argument string not closed: \" + optionString);\n                    }\n                    options[optionName] = optionString;\n                } else if (stream.peek() === '{') {\n                    // Once you pop, the fun don't stop\n                    let bracketCount = 0;\n\n                    let validJSON = false;\n                    let jsonString = \"\";\n                    stream.char();\n\n                    while (!stream.done()) {\n                        let char = stream.char();\n                        if (char === '{') {\n                            bracketCount += 1;\n                        } else if (char === '}') {\n                            if (bracketCount > 0) {\n                                bracketCount -= 1;\n                            } else {\n                                // JSON ends here\n                                options[optionName] = jsonString.length > 0 ? this.parseJSON5(jsonString) : undefined;\n                                validJSON = true;\n                                break;\n                            }\n                        }\n                        jsonString += char;\n                    }\n                    if (!validJSON) {\n                        throw Error(\"Invalid JSON argument for option: \" + optionName + \". Input: \" + jsonString);\n                    }\n                } else {\n                    throw Error(\"Invalid argument for option: \" + optionName + \". Need string or JSON.\");\n                }\n            } else {\n                options[optionName] = true;\n            }\n            stream.whitespace();\n        }\n\n        return options;\n    }\n\n    parseTextLine(stream) {\n        let lastModifier = new Map();\n\n        let capturedContent = [];\n\n        // This will always be set to the last closed modifier\n        let capturedEnd = -1;\n\n        let textStart = stream.pointer;\n        let contentStart = stream.pointer;\n\n        while (!stream.done()) {\n            if (stream.startsWith(/\\s+\\r*\\n/)) {\n                // end of line, stop here\n                break;\n            }\n\n            if (stream.at(0) === \"<\") {\n                capturedContent.push({\n                    content: stream.string.substring(contentStart, stream.pointer),\n                    start: contentStart,\n                    end: stream.pointer\n                });\n                let uiElementStart = stream.pointer;\n                let uiElement = this.parseUIElement(stream, (/\\/*>/));\n                capturedContent.push({\n                    content: uiElement,\n                    start: uiElementStart,\n                    end: stream.pointer,\n                });\n                contentStart = stream.pointer;\n                continue;\n            }\n\n            let char = stream.char();\n\n            if (char === \"\\\\\") {\n                // escape next character\n                char += stream.char();\n            }\n        }\n\n        let remainingContent = stream.string.substring(textStart, stream.pointer);\n        if (remainingContent.length > 0) {\n            capturedContent.push(remainingContent);\n        }\n        stream.line(); // delete line endings\n\n        return capturedContent;\n    }\n}\n\nMarkupParser.modifiers = [\n    new BlockCodeModifier(),\n    new HeaderModifier(),\n    new HorizontalRuleModifier(),\n    new UnorderedListModifier(),\n    new OrderedListModifier(),\n    new ParagraphModifier(),\n    new InlineCodeModifier(),\n    new InlineLatexModifier(),\n    new InlineVarModifier(),\n    new StrongModifier(),\n    new ItalicModifier(),\n    new LinkModifier()\n];\n\n// json5.js\n// This file is based directly off of Douglas Crockford's json_parse.js:\n// https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\nMarkupParser.parseJSON5 = (function() {\n    // This is a function that can parse a JSON5 text, producing a JavaScript\n    // data structure. It is a simple, recursive descent parser. It does not use\n    // eval or regular expressions, so it can be used as a model for implementing\n    // a JSON5 parser in other languages.\n\n    // We are defining the function inside of another function to avoid creating\n    // global variables.\n\n    let at,           // The index of the current character\n        lineNumber,   // The current line number\n        columnNumber, // The current column number\n        ch;           // The current character\n    let escapee = {\n        \"'\": \"'\",\n        '\"': '\"',\n        '\\\\': '\\\\',\n        '/': '/',\n        '\\n': '',       // Replace escaped newlines in strings w/ empty string\n        b: '\\b',\n        f: '\\f',\n        n: '\\n',\n        r: '\\r',\n        t: '\\t'\n    };\n    let text;\n\n    let renderChar = (chr) => {\n        return chr === '' ? 'EOF' : \"'\" + chr + \"'\";\n    };\n\n    let error = (m) => {\n        // Call error when something is wrong.\n\n        let error = new SyntaxError();\n        // beginning of message suffix to agree with that provided by Gecko - see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\n        error.message = m + \" at line \" + lineNumber + \" column \" + columnNumber + \" of the JSON5 data. Still to read: \" + JSON.stringify(text.substring(at - 1, at + 19));\n        error.at = at;\n        // These two property names have been chosen to agree with the ones in Gecko, the only popular\n        // environment which seems to supply this info on JSON.parse\n        error.lineNumber = lineNumber;\n        error.columnNumber = columnNumber;\n        throw error;\n    };\n\n    let next = (c) => {\n        // If a c parameter is provided, verify that it matches the current character.\n\n        if (c && c !== ch) {\n            error(\"Expected \" + renderChar(c) + \" instead of \" + renderChar(ch));\n        }\n\n        // Get the next character. When there are no more characters,\n        // return the empty string.\n\n        ch = text.charAt(at);\n        at++;\n        columnNumber++;\n        if (ch === '\\n' || ch === '\\r' && peek() !== '\\n') {\n            lineNumber++;\n            columnNumber = 0;\n        }\n        return ch;\n    };\n\n    let peek = () => {\n        // Get the next character without consuming it or\n        // assigning it to the ch varaible.\n\n        return text.charAt(at);\n    };\n\n    let identifier = () => {\n        // Parse an identifier. Normally, reserved words are disallowed here, but we\n        // only use this for unquoted object keys, where reserved words are allowed,\n        // so we don't check for those here. References:\n        // - http://es5.github.com/#x7.6\n        // - https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Core_Language_Features#Variables\n        // - http://docstore.mik.ua/orelly/webprog/jscript/ch02_07.htm\n        // TODO Identifiers can have Unicode \"letters\" in them; add support for those.\n        let key = ch;\n\n        // Identifiers must start with a letter, _ or $.\n        if ((ch !== '_' && ch !== '$') &&\n            (ch < 'a' || ch > 'z') &&\n            (ch < 'A' || ch > 'Z')) {\n                error(\"Bad identifier as unquoted key\");\n        }\n\n        // Subsequent characters can contain digits.\n        while (next() && (\n            ch === '_' || ch === '$' ||\n            (ch >= 'a' && ch <= 'z') ||\n            (ch >= 'A' && ch <= 'Z') ||\n            (ch >= '0' && ch <= '9'))) {\n                key += ch;\n        }\n\n        return key;\n    };\n\n    let number = () => {\n        // Parse a number value.\n        var number, sign = '', string = '', base = 10;\n\n        if (ch === '-' || ch === '+') {\n            sign = ch;\n            next(ch);\n        }\n\n        // support for Infinity (could tweak to allow other words):\n        if (ch === 'I') {\n            number = word();\n            if (typeof number !== 'number' || isNaN(number)) {\n                error('Unexpected word for number');\n            }\n            return (sign === '-') ? -number : number;\n        }\n\n        // support for NaN\n        if (ch === 'N') {\n            number = word();\n            if (!isNaN(number)) {\n                error('expected word to be NaN');\n            }\n            // ignore sign as -NaN also is NaN\n            return number;\n        }\n\n        if (ch === '0') {\n            string += ch;\n            next();\n            if (ch === 'x' || ch === 'X') {\n                string += ch;\n                next();\n                base = 16;\n            } else if (ch >= '0' && ch <= '9') {\n                error('Octal literal');\n            }\n        }\n\n        switch (base) {\n            case 10:\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n                if (ch === '.') {\n                    string += '.';\n                    while (next() && ch >= '0' && ch <= '9') {\n                        string += ch;\n                    }\n                }\n                if (ch === 'e' || ch === 'E') {\n                    string += ch;\n                    next();\n                    if (ch === '-' || ch === '+') {\n                        string += ch;\n                        next();\n                    }\n                    while (ch >= '0' && ch <= '9') {\n                        string += ch;\n                        next();\n                    }\n                }\n                break;\n            case 16:\n                while (ch >= '0' && ch <= '9' || ch >= 'A' && ch <= 'F' || ch >= 'a' && ch <= 'f') {\n                    string += ch;\n                    next();\n                }\n                break;\n        }\n\n        if (sign === '-') {\n            number = -string;\n        } else {\n            number = +string;\n        }\n\n        if (!isFinite(number)) {\n            error(\"Bad number\");\n        } else {\n            return number;\n        }\n    };\n\n    let string = () => {\n        // Parse a string value.\n        let hex, i, string = '', uffff;\n        let delim; // double quote or single quote\n\n        // When parsing for string values, we must look for ' or \" and \\ characters.\n\n        if (ch === '\"' || ch === \"'\") {\n            delim = ch;\n            while (next()) {\n                if (ch === delim) {\n                    next();\n                    return string;\n                } else if (ch === '\\\\') {\n                    next();\n                    if (ch === 'u') {\n                        uffff = 0;\n                        for (i = 0; i < 4; i += 1) {\n                            hex = parseInt(next(), 16);\n                            if (!isFinite(hex)) {\n                                break;\n                            }\n                            uffff = uffff * 16 + hex;\n                        }\n                        string += String.fromCharCode(uffff);\n                    } else if (ch === '\\r') {\n                        if (peek() === '\\n') {\n                            next();\n                        }\n                    } else if (typeof escapee[ch] === 'string') {\n                        string += escapee[ch];\n                    } else {\n                        break;\n                    }\n                } else if (ch === '\\n') {\n                    // unescaped newlines are invalid; see:\n                    // https://github.com/aseemk/json5/issues/24\n                    // TODO this feels special-cased; are there other\n                    // invalid unescaped chars?\n                    break;\n                } else {\n                    string += ch;\n                }\n            }\n        }\n        error(\"Bad string\");\n    };\n\n    let inlineComment = () => {\n        // Skip an inline comment, assuming this is one. The current character should\n        // be the second / character in the // pair that begins this inline comment.\n        // To finish the inline comment, we look for a newline or the end of the text.\n\n        if (ch !== '/') {\n            error(\"Not an inline comment\");\n        }\n\n        do {\n            next();\n            if (ch === '\\n' || ch === '\\r') {\n                next();\n                return;\n            }\n        } while (ch);\n    };\n\n    let blockComment = () => {\n        // Skip a block comment, assuming this is one. The current character should be\n        // the * character in the /* pair that begins this block comment.\n        // To finish the block comment, we look for an ending */ pair of characters,\n        // but we also watch for the end of text before the comment is terminated.\n\n        if (ch !== '*') {\n            error(\"Not a block comment\");\n        }\n\n        do {\n            next();\n            while (ch === '*') {\n                next('*');\n                if (ch === '/') {\n                    next('/');\n                    return;\n                }\n            }\n        } while (ch);\n\n        error(\"Unterminated block comment\");\n    };\n\n    let comment = () => {\n        // Skip a comment, whether inline or block-level, assuming this is one.\n        // Comments always begin with a / character.\n\n        if (ch !== '/') {\n            error(\"Not a comment\");\n        }\n\n        next('/');\n\n        if (ch === '/') {\n            inlineComment();\n        } else if (ch === '*') {\n            blockComment();\n        } else {\n            error(\"Unrecognized comment\");\n        }\n    };\n\n    let white = () => {\n        // Skip whitespace and comments.\n        // Note that we're detecting comments by only a single / character.\n        // This works since regular expressions are not valid JSON(5), but this will\n        // break if there are other valid values that begin with a / character!\n\n        while (ch) {\n            if (ch === '/') {\n                comment();\n            } else if (/\\s/.test(ch)) {\n                next();\n            } else {\n                return;\n            }\n        }\n    };\n\n    let word = () => {\n        // true, false, or null.\n\n        switch (ch) {\n            case 't':\n                next('t');\n                next('r');\n                next('u');\n                next('e');\n                return true;\n            case 'f':\n                next('f');\n                next('a');\n                next('l');\n                next('s');\n                next('e');\n                return false;\n            case 'n':\n                next('n');\n                next('u');\n                next('l');\n                next('l');\n                return null;\n            case 'I':\n                next('I');\n                next('n');\n                next('f');\n                next('i');\n                next('n');\n                next('i');\n                next('t');\n                next('y');\n                return Infinity;\n            case 'N':\n                next('N');\n                next('a');\n                next('N');\n                return NaN;\n        }\n        error(\"Unexpected \" + renderChar(ch));\n    };\n\n    let value;\n\n    let array = () => {\n        // Parse an array value.\n        let array = [];\n\n        if (ch === '[') {\n            next('[');\n            white();\n            while (ch) {\n                if (ch === ']') {\n                    next(']');\n                    return array;   // Potentially empty array\n                }\n                // ES5 allows omitting elements in arrays, e.g. [,] and\n                // [,null]. We don't allow this in JSON5.\n                if (ch === ',') {\n                    error(\"Missing array element\");\n                } else {\n                    array.push(value());\n                }\n                white();\n                // If there's no comma after this value, this needs to\n                // be the end of the array.\n                if (ch !== ',') {\n                    next(']');\n                    return array;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad array\");\n    };\n\n    let object = () => {\n        // Parse an object value.\n\n        var key,\n            object = {};\n\n        if (ch === '{') {\n            next('{');\n            white();\n            while (ch) {\n                if (ch === '}') {\n                    next('}');\n                    return object;   // Potentially empty object\n                }\n\n                // Keys can be unquoted. If they are, they need to be\n                // valid JS identifiers.\n                if (ch === '\"' || ch === \"'\") {\n                    key = string();\n                } else {\n                    key = identifier();\n                }\n\n                white();\n                next(':');\n                object[key] = value();\n                white();\n                // If there's no comma after this pair, this needs to be\n                // the end of the object.\n                if (ch !== ',') {\n                    next('}');\n                    return object;\n                }\n                next(',');\n                white();\n            }\n        }\n        error(\"Bad object\");\n    };\n\n    value = () => {\n        // Parse a JSON value. It could be an object, an array, a string, a number,\n        // or a word.\n\n        white();\n        switch (ch) {\n        case '{':\n            return object();\n        case '[':\n            return array();\n        case '\"':\n        case \"'\":\n            return string();\n        case '-':\n        case '+':\n        case '.':\n            return number();\n        default:\n            return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the above\n    // functions and variables.\n\n    return function (source, reviver) {\n        var result;\n\n        text = String(source);\n        at = 0;\n        lineNumber = 1;\n        columnNumber = 1;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error(\"Syntax error\");\n        }\n\n        // If there is a reviver function, we recursively walk the new structure,\n        // passing each name/value pair to the reviver function for possible\n        // transformation, starting with a temporary root object that holds the result\n        // in an empty key. If there is not a reviver function, we simply return the\n        // result.\n\n        return typeof reviver === 'function' ? (function walk(holder, key) {\n            var k, v, value = holder[key];\n            if (value && typeof value === 'object') {\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = walk(value, k);\n                        if (v !== undefined) {\n                            value[k] = v;\n                        } else {\n                            delete value[k];\n                        }\n                    }\n                }\n            }\n            return reviver.call(holder, key, value);\n        }({'': result}, '')) : result;\n    };\n})();\n\nexport {MarkupParser};\n\n\n// TODO: these should be in a unit test file, not here\nexport function TestStringStream() {\n    let tests = [];\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.char();\n        if (temp !== \"A\") {\n            throw Error(\"char seems to fail. Expected: 'A' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"la\") {\n            throw Error(\"word seems to fail. Expected: 'la' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"bala\") {\n            throw Error(\"word seems to fail. Expected: 'bala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"portocala\") {\n            throw Error(\"word seems to fail. Expected: 'portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Ala bala    portocala\");\n\n        let temp;\n\n        temp = ss.word();\n        if (temp !== \"Ala\") {\n            throw Error(\"word seems to fail. Expected: 'Ala' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.char();\n        if (temp !== \" \") {\n            throw Error(\"word seems to fail. Expected: ' ' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line();\n        if (temp !== \"bala    portocala\") {\n            throw Error(\"line seems to fail. Expected: 'bala    portocala' , got '\" + temp + \"'\");\n        }\n    });\n\n    tests.push(() => {\n        let ss = new StringStream(\"Buna bate toba\\n Bunica bate tare\\nBunica bate tobaaa \\nCu maciuca-n casa mare!\");\n\n        let temp;\n\n        temp = ss.line();\n        if (temp !== \"Buna bate toba\") {\n            throw Error(\"line seems to fail. Expected: 'Buna bate toba' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"Bunica\") {\n            throw Error(\"word seems to fail. Expected: 'Bunica' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\");\n        if (temp !== \" bate tare\") {\n            throw Error(\"line seems to fail. Expected: ' bate tare' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line(\"\\n\", 11);\n        if (temp !== \"Bunica bate\") {\n            throw Error(\"line seems to fail. Expected: 'Bunica bate' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.word();\n        if (temp !== \"tobaaa\") {\n            throw Error(\"line seems to fail. Expected: 'tobaaa' , got '\" + temp + \"'\");\n        }\n\n        ss.char();\n        temp = ss.line();\n        if (temp !== \"\") {\n            throw Error(\"line seems to fail. Expected: '' , got '\" + temp + \"'\");\n        }\n\n        temp = ss.line('\\n', 100);\n        if (temp !== \"Cu maciuca-n casa mare!\") {\n            throw Error(\"line seems to fail. Expected: 'Cu maciuca-n casa mare!' , got '\" + temp + \"'\");\n        }\n    });\n\n\n\n    let numFailed = 0;\n    for (let i = 0; i < tests.length; i += 1) {\n        try {\n            tests[i]();\n            console.log(\"Test \", i, \" ran successfully.\");\n        } catch (e) {\n            numFailed += 1;\n            console.log(\"Failed StringStream test \", i, \"! Reason: \", e);\n        }\n    }\n\n    console.log(\"Finished running all tests. Failed: \", numFailed);\n}\n","import {UI} from \"../ui/UI\";\nimport {MarkupParser} from \"./MarkupParser\";\nimport {StaticCodeHighlighter, Panel, Link, Image} from \"../ui/UI\";\n\n// Class that for every markup tag returns the UI class to instantiate for that element\nclass MarkupClassMap {\n    constructor(fallback, extraClasses=[]) {\n        this.classMap = new Map();\n        this.fallback = fallback;\n        for (const extraClass of extraClasses) {\n            this.addClass(extraClass[0], extraClass[1]);\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.set(className, classObject);\n    }\n\n    registerDependencies(dependencies) {\n        for (let dependency of dependencies) {\n            if (dependency && dependency.registerMarkup) {\n                dependency.registerMarkup(this);\n            }\n        }\n    }\n\n    static addClass(className, classObject) {\n        this.GLOBAL.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        let classObject = this.classMap.get(className);\n        if (!classObject && this.fallback) {\n            classObject = this.fallback.getClass(className);\n        }\n        return classObject;\n    }\n\n    get(className) {\n        return this.getClass(className);\n    }\n\n    has(className) {\n        return this.getClass(className);\n    }\n};\n\nMarkupClassMap.GLOBAL = new MarkupClassMap();\n\nclass MarkupRenderer extends Panel {\n    setOptions(options) {\n        if (!options.classMap) {\n            options.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n        }\n        if (!options.parser) {\n            options.parser = new MarkupParser({\n                uiElements: options.classMap,\n            });\n        }\n        super.setOptions(options);\n\n        this.setValue(this.options.value || \"\");\n        if (this.options.classMap) {\n            this.classMap = this.options.classMap;\n        }\n    }\n\n    setValue(value) {\n        if (typeof value === \"string\") {\n            this.options.rawValue = value;\n            try {\n                value = this.options.parser.parse(value);\n            } catch (e) {\n                console.error(\"Can't parse \", value, e);\n                value = {\n                    tag: \"span\",\n                    children: [value]\n                };\n            }\n        }\n        this.options.value = value;\n    }\n\n    reparse() {\n        if (this.options.rawValue) {\n            this.setValue(this.options.rawValue);\n        }\n    }\n\n    registerDependencies(dependencies) {\n        if (dependencies.length > 0) {\n            this.classMap.registerDependencies(dependencies);\n            this.reparse();\n        }\n    }\n\n    addClass(className, classObject) {\n        this.classMap.addClass(className, classObject);\n    }\n\n    getClass(className) {\n        return this.classMap.getClass(className);\n    }\n\n    getValue() {\n        return this.options.value;\n    }\n\n    convertToUI(value) {\n        if (value instanceof UI.TextElement || value instanceof UI.Element) {\n            // TODO: investigate this!\n            return value;\n        }\n\n        if (typeof value === \"string\") {\n            return new UI.TextElement(value);\n        }\n        if (Array.isArray(value)) {\n            return value.map(x => this.convertToUI(x));\n        }\n        if (value.children) {\n            value.children = this.convertToUI(value.children);\n        }\n\n        let classObject = this.getClass(value.tag) || value.tag;\n\n        // TODO: maybe just copy to another object, not delete?\n        //delete value.tag;\n        return UI.createElement(classObject, value, ...(value.children || []));\n    }\n\n    render() {\n        return this.convertToUI(this.getValue());\n    }\n}\n\nMarkupClassMap.addClass(\"CodeSnippet\", StaticCodeHighlighter);\n\nconst SafeUriEnhancer = (BaseClass, attribute) => class SafeUriClass extends BaseClass {\n    setOptions(options) {\n        if (options.hasOwnProperty(attribute) && !this.constructor.isSafeUri(options[attribute])) {\n            return super.setOptions(Object.assign({}, options, {[attribute]: undefined}));\n        }\n        return super.setOptions(options);\n    }\n\n    static isSafeUri(uri) {\n        return uri.indexOf(\":\") === -1 ||\n               uri.startsWith(\"http:\") ||\n               uri.startsWith(\"https:\") ||\n               uri.startsWith(\"mailto:\");\n    }\n};\n\nMarkupClassMap.addClass(\"Link\", SafeUriEnhancer(Link, \"href\"));\nMarkupClassMap.addClass(\"Image\", SafeUriEnhancer(Image, \"src\"));\n\nexport {MarkupClassMap, MarkupRenderer};\n","import {MarkupRenderer} from \"markup/MarkupRenderer\";\n\nimport {UI, Panel, Button, SectionDivider, ButtonGroup, TextArea, Orientation, Level} from \"ui/UI\";\n\n\nclass MarkupEditor extends Panel {\n    getDefaultOptions() {\n        return {\n            showButtons: true\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"textAlign\", \"center\");\n    }\n\n    getMarkupRenderer() {\n        let rendererOptions = {};\n        if (this.options.classMap) {\n            rendererOptions.classMap = this.options.classMap;\n        }\n        return <MarkupRenderer ref={this.refLink(\"markupRenderer\")} value={this.options.value} style={{height:\"100%\", overflow: \"auto\"}} {...rendererOptions} />;\n    }\n\n    getEditor() {\n        return <TextArea ref=\"codeEditor\" style={{\n            width: \"100%\",\n            height: \"calc(100% - 3px)\",\n            resize: \"none\",\n            backgroundColor: \"#F9F9F9\"\n        }} value={this.options.value || \"\"}/>;\n    }\n\n    render() {\n        let buttons;\n        if (this.options.showButtons) {\n            buttons = <ButtonGroup>\n                <Button ref=\"toggleLeftButton\" label={UI.T(\"Editor\")} level={Level.SUCCESS}/>\n                <Button ref=\"toggleRightButton\" label={UI.T(\"Article\")} level={Level.SUCCESS}/>\n            </ButtonGroup>;\n        }\n\n        return [\n            buttons,\n            <SectionDivider ref=\"sectionDivider\" orientation={Orientation.HORIZONTAL}\n                            style={{textAlign: \"initial\", height: \"100%\", width: \"100%\", display:\"inline-block\",\n                                    overflow: \"hidden\"}}>\n                <Panel ref=\"editorPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"hidden\"}}>\n                    {this.getEditor()}\n                </Panel>\n                <Panel ref=\"rendererPanel\" style={{width: \"50%\", height: \"100%\", overflow: \"auto\", padding: \"10px\"}}>\n                    {this.getMarkupRenderer()}\n                </Panel>\n            </SectionDivider>\n        ]\n    }\n\n    updateValue(markup) {\n        this.markupRenderer.setValue(markup);\n        this.markupRenderer.redraw();\n    }\n\n    appendValue(markup, separator=\"\\n\") {\n        let value = this.getValue();\n        if (value && separator != null) {\n            value += separator;\n        }\n        value += markup;\n        this.setValue(value);\n        this.updateValue(value);\n    }\n\n    setEditorOptions() {\n        this.editorPanel.addListener(\"resize\", () => {\n            this.codeEditor.setWidth(this.editorPanel.getWidth() - 15);\n        });\n\n        this.codeEditor.addNodeListener(\"input\", () => {\n            let markup = this.codeEditor.getValue();\n            try {\n                this.updateValue(markup);\n            } catch (e) {\n                console.error(\"Exception in parsing markup: \", e);\n            }\n        });\n    }\n\n    onMount() {\n        if (this.options.showButtons) {\n            this.toggleLeftButton.addClickListener(() => {\n                if (this.editorPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(0);\n                    this.toggleLeftButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(0);\n                    this.toggleLeftButton.setLevel(Level.DANGER);\n                }\n            });\n            this.toggleRightButton.addClickListener(() => {\n                if (this.rendererPanel.getWidth() === 0) {\n                    this.sectionDivider.expandChild(1);\n                    this.toggleRightButton.setLevel(Level.SUCCESS);\n                } else {\n                    this.sectionDivider.collapseChild(1);\n                    this.toggleRightButton.setLevel(Level.DANGER);\n                }\n            });\n        }\n\n        this.setEditorOptions();\n    }\n\n    getValue() {\n        return this.codeEditor.getValue();\n    }\n\n    setValue(value) {\n        this.updateValue(value);\n        return this.codeEditor.setValue(value);\n    }\n}\n\nexport {MarkupEditor};\n","import {UI} from \"./UIBase\";\nimport {keyframesRule} from \"../decorators/Style\";\nimport {registerStyle} from \"./style/Theme\";\nimport {StyleSheet} from \"./Style\";\n\nfunction getCircleStyle(size, borderSize, color, animationName, animationDuration) {\n    return {\n        position: \"absolute\",\n\n        height: size + \"px\",\n        width: size + \"px\",\n\n        border: borderSize + \"px solid \" + color,\n        borderRadius: size + \"px\",\n        borderRight: borderSize + \"px transparent\",\n        borderBottom: borderSize + \"px transparent\",\n\n        rotate: \"0deg\",\n        transform: \"rotate(45deg)\",\n\n        animationName: animationName,\n        animationDuration: animationDuration,\n        animationIterationCount: \"infinite\",\n        animationTimingFunction: \"linear\",\n    };\n}\n\nfunction createCircle(size, borderSize, color, animationName, animationDuration) {\n    return <div style={getCircleStyle(size, borderSize, color, animationName, animationDuration)} />;\n}\n\nclass RotatingHelperStyle extends StyleSheet {\n    @keyframesRule\n    rotateClockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(360deg)\"\n        }\n    };\n\n    @keyframesRule\n    rotateCounterclockwise = {\n        \"0%\": {\n            transform: \"rotate(0deg)\"\n        },\n        \"100%\":  {\n            transform: \"rotate(-360deg)\"\n        }\n    }\n}\n\n@registerStyle(RotatingHelperStyle)\nclass ConcentricCirclesLoadingScreen extends UI.Element {\n    render() {\n        let centerConstant = 100;\n        return <div style={{\n            height: \"100%\",\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginTop: \"200px\",\n        }}>\n            {createCircle(225 - centerConstant, 5, \"#3a4859\", this.styleSheet.rotateClockwise, \"2.25s\")}\n            {createCircle(200 - centerConstant, 4, \"#666666\", this.styleSheet.rotateCounterclockwise, \"1.5s\")}\n            {createCircle(175 - centerConstant, 3, \"#aaaaaa\", this.styleSheet.rotateClockwise, \"1s\")}\n            {createCircle(150 - centerConstant, 2, \"#20232d\", this.styleSheet.rotateCounterclockwise, \"3s\")}\n        </div>;\n    }\n}\n\nexport {ConcentricCirclesLoadingScreen}\n","import {Dispatchable} from \"./Dispatcher\";\n\nclass ScriptResolver extends Dispatchable {\n    constructor(scriptPath) {\n        super();\n        this.loaded = false;\n        this.jobs = [];\n        // TODO: should be more thought out\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.async = true;\n        scriptElement.src = scriptPath;\n        scriptElement.onload = () => this.onLoad();\n        // TODO: what about error?\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoad() {\n        this.loaded = true;\n        for (let i = 0; i < this.jobs.length; i += 1) {\n            this.jobs[i](this);\n        }\n        this.jobs = [];\n    }\n\n    resolve(callback) {\n        if (this.loaded) {\n            callback(this);\n            return;\n        }\n        this.jobs.push(callback);\n    }\n}\n\nlet scriptResolveMap = new Map();\n\nfunction ensureSingle(script) {\n    let scriptResolver = scriptResolveMap.get(script);\n    if (!scriptResolver) {\n        scriptResolver = new ScriptResolver(script);\n        scriptResolveMap.set(script, scriptResolver);\n    }\n    return new Promise(function(resolve, reject) {\n        scriptResolver.resolve(resolve, reject);\n    });\n}\n\nfunction ensure(scripts, callback) {\n    if (!Array.isArray(scripts)) {\n        scripts = [scripts];\n    }\n    let promises = scripts.map(script => ensureSingle(script));\n    Promise.all(promises).then(function () {\n        callback(...arguments);\n    })\n}\n\nexport {ensure};\n","import {ensure} from \"../base/Require\";\n\nlet DelayedElement = (BaseClass) => class DelayedElement extends BaseClass {\n    applyNodeAttributesNotLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributesLoaded() {\n        super.applyNodeAttributes();\n    }\n\n    applyNodeAttributes() {\n        if (!this._loaded) {\n            return this.applyNodeAttributesNotLoaded();\n        } else {\n            return this.applyNodeAttributesLoaded();\n        }\n    }\n\n    renderNotLoaded() {\n        return \"Loading component...\";\n    }\n\n    renderLoaded() {\n        return super.render();\n    }\n\n    render() {\n        if (!this._loaded) {\n            return this.renderNotLoaded();\n        } else {\n            return this.renderLoaded();\n        }\n    }\n\n    setLoaded() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        if (!this.node) {\n            return;\n        }\n        super.redraw();\n        if (!this._executedMount) {\n            this._executedMount = true;\n            this.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        // Implement here anything you might need\n    }\n\n    redrawNotLoaded() {\n        this.beforeRedrawNotLoaded();\n        // The previous code might have triggered a redraw, skip if that was the case\n        if (!this._loaded) {\n            super.redraw();\n        }\n    }\n\n    redrawLoaded() {\n        super.redraw();\n    }\n\n    redraw() {\n        if (!this._loaded) {\n            return this.redrawNotLoaded();\n        }\n        return this.redrawLoaded();\n    }\n\n    onMount() {\n        // Nothing to be done here\n    }\n\n    onDelayedMount() {\n        super.onMount();\n    }\n};\n\nlet ScriptDelayedElement = (BaseClass, scripts) => class ScriptDelayedElement extends DelayedElement(BaseClass) {\n    beforeRedrawNotLoaded() {\n        // TODO: what happens if this gets destroyed before the load finishes? Should cancel this\n        ensure(scripts, () => {\n            this.setLoaded();\n        });\n    }\n};\n\nexport {DelayedElement, ScriptDelayedElement}\n","import {Dispatchable} from \"../base/Dispatcher\";\n\nclass State extends Dispatchable {\n    constructor() {\n        super();\n        this.stores = new Map();\n        // A version of applyEvent that's binded to this\n        // TODO: applyEvent should use the @bind decorator\n        this.applyEventWrapper = (event) => {\n            this.applyEvent(event);\n        }\n    }\n\n    getStore(objectType) {\n        objectType = objectType && objectType.toLowerCase();\n        return this.stores.get(objectType);\n    }\n\n    getStoreForEvent(event) {\n        const objectType = event.objectType || event.store;\n        return this.getStore(objectType);\n    }\n\n    addStore(store) {\n        let objectType = store.objectType.toLowerCase();\n        if (!this.stores.has(objectType)) {\n            this.stores.set(objectType, store);\n        } else {\n            throw Error(\"GlobalState: Adding a store for an existing object type: \" + store.objectType);\n        }\n    }\n\n    applyEvent(event) {\n        if (event == null) {\n            return;\n        }\n        if (Array.isArray(event)) {\n            for (let individualEvent of event) {\n                this.applyEvent(individualEvent);\n            }\n            return;\n        }\n        if (event.state) {\n            this.importState(event.state);\n            // We can have events that only have a state\n            if (!this.getStoreForEvent(event)) {\n                return;\n            }\n        }\n        let store = this.getStoreForEvent(event);\n        if (store) {\n            return store.applyEvent(event);\n        } else {\n            console.log(\"GlobalState: Missing store for event: \", event);\n        }\n    }\n\n    get(objectType, objectId) {\n        let store = this.getStore(objectType);\n        if (store) {\n            let args = Array.prototype.slice.call(arguments, 1);\n            return store.get(...args);\n        } else {\n            console.error(\"GlobalState: Can't find store \", objectType);\n            return null;\n        }\n    }\n\n    // Import the store for objectType and remove it from stateMap\n    importStateFromTempMap(objectType, stateMap) {\n        let storeState = stateMap.get(objectType);\n        stateMap.delete(objectType);\n\n        let store = this.getStore(objectType);\n\n        if (!store) {\n            console.error(\"Failed to import state, can't find store \", objectType);\n            return;\n        }\n        for (let dependency of store.getDependencies()) {\n            this.importStateFromTempMap(dependency.toLowerCase(), stateMap);\n        }\n        store.importState(storeState);\n    }\n\n    // Imports the state information from a plain object\n    importState(state) {\n        if (Array.isArray(state)) {\n            for (let obj of state) {\n                this.importState(obj);\n            }\n            return;\n        }\n        // Import everything in a map and then do an implicit topological sort by dependencies\n        let stateMap = new Map();\n        for (let objectType in state) {\n            stateMap.set(objectType.toLowerCase(), state[objectType]);\n        }\n        while (stateMap.size > 0) {\n            let allKeys = stateMap.keys();\n            let objectType = allKeys.next().value;\n            this.importStateFromTempMap(objectType, stateMap);\n        }\n    }\n}\n\nlet GlobalState = new State();\n\n// When creating a store without an explicit state, this value should be assumes\n// Change it to null for instance of you don't want stores to be added to any state by default\nlet DefaultState = GlobalState;\n\nself.GlobalState = GlobalState;\n\nexport {State, GlobalState, DefaultState};\n","import {UI} from \"./UIBase\";\nimport {ConcentricCirclesLoadingScreen} from \"./ConcentricCirclesLoadingScreen\";\nimport {DelayedElement} from \"./DelayedElement\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"../state/State\";\nimport {CardPanel} from \"./CardPanel\";\nimport {Level} from \"./Constants\";\n\n// You can configure the loading/error states by defining the \"renderLoading\" and \"renderError\" attributes of the\n// function somewhere globally in your app.\n// Example:\n// StateDependentElement.renderLoading = \"Loading...\";\n// or\n// StateDependentElement.renderLoading = () => <MyCustomLoadingAnimation />\n// StateDependentElement.renderError = (error) => <MyCustomErrorMessageClass error={error} />\n\nexport let StateDependentElement = (BaseClass) => class StateDependentElementClass extends DelayedElement(BaseClass) {\n    importState(data) {\n        GlobalState.importState(data.state || {});\n        for (let key of Object.keys(data)) {\n            if (key !== \"state\") {\n                this.options[key] = data[key];\n            }\n        }\n    }\n\n    getAjaxUrl() {\n        let url = location.pathname;\n        if (!url.endsWith(\"/\")) {\n            url += \"/\";\n        }\n        return url;\n    }\n\n    getAjaxRequest() {\n        return {};\n    }\n\n    renderNotLoaded() {\n        let renderLoading = StateDependentElement.renderLoading;\n        if (typeof renderLoading === \"function\") {\n            renderLoading = renderLoading();\n        }\n        return renderLoading;\n    }\n\n    setError(error) {\n        this.options.error = error;\n    }\n\n    renderError() {\n        let renderError = StateDependentElement.renderError;\n        if (typeof renderError === \"function\") {\n            renderError = renderError(this.options.error);\n        }\n        return renderError;\n    }\n\n    renderLoaded() {\n        if (this.options.error) {\n            return this.renderError();\n        }\n        return super.renderLoaded();\n    }\n\n    onDelayedMount() {\n        if (!this.options.error) {\n            super.onDelayedMount();\n        }\n    }\n\n    beforeRedrawNotLoaded() {\n        Ajax.getJSON(this.getAjaxUrl(), this.getAjaxRequest()).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            (error) => {\n                this.setError(error);\n                this.setLoaded();\n            }\n        );\n    }\n};\n\nStateDependentElement.renderLoading = () => <ConcentricCirclesLoadingScreen/>;\n\nStateDependentElement.renderError = (error, message) => {\n    return <div style={{maxWidth: \"300px\", margin: \"0 auto\", marginTop: \"30px\"}}>\n            <CardPanel title={UI.T(\"Error in opening the URL\")} level={Level.ERROR}>\n                <h3>{message || error.message}</h3>\n            </CardPanel>\n        </div>;\n};\n","// TODO: this file should be called StoreExtenders\nimport {unwrapArray, splitInChunks} from \"../base/Utils\";\nimport {Ajax} from \"../base/Ajax\";\nimport {GlobalState} from \"./State\";\n\nconst AjaxFetchMixin = (BaseStoreClass) => class AjaxFetchMixin extends BaseStoreClass {\n    fetch(id, successCallback, errorCallback, forceFetch=false) {\n        if (!forceFetch) {\n            let obj = this.get(id);\n            if (obj) {\n                successCallback(obj);\n                return;\n            }\n        }\n        if (!this.fetchJobs) {\n            this.fetchJobs = [];\n        }\n        this.fetchJobs.push({id: id, success: successCallback, error: errorCallback});\n        if (!this.fetchTimeout) {\n            this.fetchTimeout = setTimeout(() => {\n                this.executeAjaxFetch();\n            }, this.options.fetchTimeoutDuration || 0);\n        }\n    };\n\n    getFetchRequestData(ids, fetchJobs) {\n        return {\n            ids: ids,\n        };\n    }\n\n    getFetchRequestObject(ids, fetchJobs) {\n        let requestData = this.getFetchRequestData(ids, fetchJobs);\n\n        // TODO: options.fetchURL should also support a function(ids, fetchJobs), do it when needed\n        return {\n            url: this.options.fetchURL,\n            type: this.options.fetchType || \"GET\",\n            dataType: \"json\",\n            data: requestData,\n            cache: false,\n            success: (data) => {\n                GlobalState.importState(data.state || {});\n                for (let fetchJob of fetchJobs) {\n                    let obj = this.get(fetchJob.id);\n                    if (obj) {\n                        fetchJob.success(obj);\n                    } else {\n                        console.error(\"Failed to fetch object \", fetchJob.id, \" of type \", this.objectType);\n                        if (fetchJob.error) {\n                            fetchJob.error();\n                        }\n                    }\n                }\n            },\n            error: (error) => {\n                console.error(\"Failed to fetch objects of type \", this.objectType, \":\\n\", error);\n                for (let fetchJob of fetchJobs) {\n                    if (fetchJob.error) {\n                        fetchJob.error(error);\n                    }\n                }\n            }\n        }\n    }\n\n    //returns an array of ajax requests that have to be executed\n    getFetchRequests(fetchJobs) {\n        let idFetchJobs = new Map();\n\n        for (let fetchJob of fetchJobs) {\n            let objectId = fetchJob.id;\n            if (!idFetchJobs.has(objectId)) {\n                idFetchJobs.set(objectId, new Array());\n            }\n            idFetchJobs.get(objectId).push(fetchJob);\n        }\n\n        let maxChunkSize = this.options.maxFetchObjectCount || 256;\n\n        let idChunks = splitInChunks(Array.from(idFetchJobs.keys()), maxChunkSize);\n        let fetchJobsChunks = splitInChunks(Array.from(idFetchJobs.values()), maxChunkSize);\n\n        let requests = [];\n        for (let i = 0; i < idChunks.length; i += 1) {\n            requests.push(this.getFetchRequestObject(idChunks[i], unwrapArray(fetchJobsChunks[i])))\n        }\n\n        return requests;\n    }\n\n    executeAjaxFetch() {\n        let fetchJobs = this.fetchJobs;\n        this.fetchJobs = null;\n\n        let requests = this.getFetchRequests(fetchJobs);\n\n        for (let requestObject of requests) {\n            Ajax.fetch(requestObject);\n        }\n\n        clearTimeout(this.fetchTimeout);\n        this.fetchTimeout = null;\n    };\n\n};\n\nconst VirtualStoreObjectMixin = (BaseStoreObjectClass) => class VirtualStoreObjectMixin extends BaseStoreObjectClass {\n    hasTemporaryId() {\n        return (typeof this.id === \"string\" || this.id instanceof String) && this.id.startsWith(\"temp-\");\n    }\n\n    // Meant for updating temporary objects that need to exist before being properly created\n    updateId(newId) {\n            if (this.id == newId) {\n                return;\n            }\n            let oldId = this.id;\n            if (!this.hasTemporaryId()) {\n                console.error(\"This is only meant to replace temporary ids!\");\n            }\n            this.id = newId;\n            this.dispatch(\"updateId\", {oldId: oldId});\n        }\n};\n\n// TODO: there's still a bug in this class when not properly matching virtual obj sometimes I think\nconst VirtualStoreMixin = (BaseStoreClass) => class VirtualStoreMixin extends BaseStoreClass {\n    static generateVirtualId() {\n        if (!this.virtualIdCounter) {\n            this.virtualIdCounter = 0;\n        }\n        this.virtualIdCounter += 1;\n        return this.virtualIdCounter;\n    }\n\n    generateVirtualId() {\n        return this.constructor.generateVirtualId();\n    }\n\n    // TODO: we probably shouldn't have getVirtualObject take in an event\n    getVirtualObject(event) {\n        return this.objects.get(\"temp-\" + event.virtualId);\n    }\n\n    get(id) {\n        return this.objects.get(id);\n    }\n\n    applyUpdateObjectId(object, id) {\n        if (object.id === id) {\n            return;\n        }\n        let oldId = object.id;\n        object.updateId(id);\n        this.objects.delete(oldId);\n        this.objects.set(object.id, object);\n        this.dispatch(\"updateObjectId\", object, oldId);\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        if (event.virtualId) {\n            let existingVirtualObject = this.getVirtualObject(event);\n            if (existingVirtualObject) {\n                this.applyUpdateObjectId(existingVirtualObject, event.objectId);\n            }\n        }\n\n        return super.applyCreateEvent(...arguments);\n    }\n};\n\nexport {AjaxFetchMixin, VirtualStoreMixin, VirtualStoreObjectMixin};\n","import {Dispatchable, CleanupJobs} from \"../base/Dispatcher\";\nimport {DefaultState} from \"./State\";\n\n// The store information is kept in a symbol, to not interfere with serialization/deserialization\nexport const StoreSymbol = Symbol(\"Store\");\n\nclass StoreObject extends Dispatchable {\n    constructor(obj, event, store) {\n        super();\n        Object.assign(this, obj);\n        this.setStore(store);\n    };\n\n    static getStoreName() {\n        return this.name;\n    }\n\n    setStore(store) {\n        this[StoreSymbol] = store;\n    }\n\n    getStore() {\n        return this[StoreSymbol];\n    }\n\n    // By default, applying an event just shallow copies the fields from event.data\n    applyEvent(event) {\n        Object.assign(this, event.data);\n    };\n\n    // Add a listener for all updates, callback will receive the events after they were applied\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n\n    // Add a listener on updates from events with this specific type.\n    // Can accept an array as eventType\n    // Returns an object that implements the Cleanup interface.\n    addEventListener(eventType, callback) {\n        if (Array.isArray(eventType)) {\n            const handlers = eventType.map(e => this.addEventListener(e, callback));\n            return new CleanupJobs(handlers);\n        }\n        // Ensure the private event dispatcher exists\n        if (!this._eventDispatcher) {\n            this._eventDispatcher = new Dispatchable();\n            this.addUpdateListener((event) => {\n                this._eventDispatcher.dispatch(event.type, event, this);\n            });\n        }\n        return this._eventDispatcher.addListener(eventType, callback);\n    }\n\n    getStreamName() {\n        throw \"getStreamName not implemented\";\n    }\n\n    registerToStream() {\n        this.getStore().getState().registerStream(this.getStreamName());\n    }\n}\n\nclass BaseStore extends Dispatchable {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super();\n        this.options = options;\n        this.objectType = objectType.toLowerCase();\n        this.ObjectWrapper = ObjectWrapper;\n        this.attachToState();\n    }\n\n    attachToState() {\n        if (this.getState()) {\n            this.getState().addStore(this);\n        }\n    }\n\n    getState() {\n        // Allow explicit no state\n        if (this.options.hasOwnProperty(\"state\")) {\n            return this.options.state;\n        } else {\n            return DefaultState;\n        }\n    }\n\n    // Is used by the state object to see which stores need to be loaded first\n    getDependencies() {\n        return this.options.dependencies || [];\n    }\n}\n\n// Store type primarily intended to store objects that come from a server DB, and have a unique numeric .id field\nclass GenericObjectStore extends BaseStore {\n    constructor(objectType, ObjectWrapper=StoreObject, options={}) {\n        super(...arguments);\n        this.objects = new Map();\n    }\n\n    has(id) {\n        return !!this.get(id);\n    }\n\n    get(id) {\n        if (id == null) {\n            return null;\n        }\n        return this.objects.get(parseInt(id));\n    }\n\n    clear() {\n        this.objects.clear();\n        this.dispatch(\"update\", null, null);\n    }\n\n    getObjectIdForEvent(event) {\n        return event.objectId || event.data.id;\n    }\n\n    getObjectForEvent(event) {\n        let objectId = this.getObjectIdForEvent(event);\n        return this.get(objectId);\n    }\n\n    // TODO: should this default to iterable?\n    all(asIterable) {\n        let values = this.objects.values();\n        if (!asIterable) {\n            values = Array.from(values);\n        }\n        return values;\n    }\n\n    createObject(event) {\n        const obj = new this.ObjectWrapper(event.data, event, this);\n        obj.setStore(this);\n        return obj;\n    }\n\n    applyCreateEvent(event, sendDispatch=true) {\n        let existingObject = this.getObjectForEvent(event);\n\n        if (existingObject) {\n            let refreshEvent = Object.assign({}, event);\n            refreshEvent.type = \"refresh\";\n            existingObject.applyEvent(refreshEvent);\n            existingObject.dispatch(\"update\", event);\n            return existingObject;\n        } else {\n            let newObject = this.createObject(event);\n            this.objects.set(this.getObjectIdForEvent(event), newObject);\n\n            if (sendDispatch) {\n                this.dispatch(\"create\", newObject, event);\n            }\n            return newObject;\n        }\n    }\n\n    applyUpdateOrCreateEvent(event) {\n        var obj = this.getObjectForEvent(event);\n        if (!obj) {\n            obj = this.applyCreateEvent(event, false);\n            this.dispatch(\"create\", obj, event);\n        } else {\n            this.applyEventToObject(obj, event);\n        }\n        this.dispatch(\"updateOrCreate\", obj, event);\n        return obj;\n    }\n\n    applyDeleteEvent(event) {\n        let objDeleted = this.getObjectForEvent(event);\n        if (objDeleted) {\n            this.objects.delete(this.getObjectIdForEvent(event));\n            objDeleted.dispatch(\"delete\", event, objDeleted);\n            this.dispatch(\"delete\", objDeleted, event);\n        }\n        return objDeleted;\n    }\n\n    applyEventToObject(obj, event) {\n        obj.applyEvent(event);\n        obj.dispatch(\"update\", event);\n        this.dispatch(\"update\", obj, event);\n        return obj;\n    }\n\n    applyEvent(event) {\n        event.data = event.data || {};\n\n        if (event.type === \"create\") {\n            return this.applyCreateEvent(event);\n        } else if (event.type === \"delete\") {\n            return this.applyDeleteEvent(event);\n        } else if (event.type === \"updateOrCreate\") {\n            return this.applyUpdateOrCreateEvent(event);\n        } else {\n            var obj = this.getObjectForEvent(event);\n            if (!obj) {\n                console.error(\"I don't have object of type \", this.objectType, \" \", event.objectId);\n                return;\n            }\n            return this.applyEventToObject(obj, event);\n        }\n    }\n\n    importState(objects) {\n        objects = objects || [];\n        for (let obj of objects) {\n            this.fakeCreate(obj);\n        }\n    }\n\n    // Create a fake creation event, to insert the raw object\n    fakeCreate(obj, eventType=\"fakeCreate\") {\n        if (!obj) {\n            return;\n        }\n        var event = {\n            objectType: this.objectType,\n            objectId: obj.id,\n            type: eventType,\n            data: obj,\n        };\n        return this.applyCreateEvent(event);\n    }\n\n    // Add a listener on all object creation events\n    // If fakeExisting, will also pass existing objects to your callback\n    addCreateListener(callback, fakeExisting) {\n        if (fakeExisting) {\n            for (let object of this.objects.values()) {\n                let event = {\n                    objectType: this.objectType,\n                    objectId: object.id,\n                    type: \"fakeCreate\",\n                    data: object,\n                };\n                callback(object, event);\n            }\n        }\n\n        return this.addListener(\"create\", callback);\n    }\n\n    // Add a listener for any updates to objects in store\n    // The callback will receive the object and the event\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n\n    // Add a listener for any object deletions\n    addDeleteListener(callback) {\n        return this.addListener(\"delete\", callback);\n    }\n}\n\nclass SingletonStore extends BaseStore {\n    constructor(objectType, options={}) {\n        super(objectType, SingletonStore, options);\n    }\n\n    get() {\n        return this;\n    }\n\n    all() {\n        return [this];\n    }\n\n    applyEvent(event) {\n        Object.assign(this, event.data);\n        this.dispatch(\"update\", event, this);\n    }\n\n    importState(obj) {\n        Object.assign(this, obj);\n        this.dispatch(\"update\", event, this);\n    }\n\n    addUpdateListener(callback) {\n        return this.addListener(\"update\", callback);\n    }\n}\n\n// Use the same logic as StoreObject when listening to events\nSingletonStore.prototype.addEventListener = StoreObject.prototype.addEventListener;\n\nexport {StoreObject, BaseStore, GenericObjectStore, SingletonStore};\n","import {Ajax} from \"base/Ajax\";\nimport {AjaxFetchMixin} from \"state/StoreMixins\";\nimport {StoreObject, GenericObjectStore} from \"state/Store\";\n\nclass User extends StoreObject {\n    constructor(obj) {\n        super(obj);\n    }\n\n    getName() {\n    }\n\n    getCustomSetting(key, defaultValue) {\n        let keyChain = key.split(\":\");\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (key in currentDict) {\n                currentDict = currentDict[key];\n            } else {\n                return defaultValue;\n            }\n        }\n        return currentDict;\n    }\n\n    getParsedCustomSetting(key, defaultValue) {\n        return JSON.parse(this.getCustomSetting(key, defaultValue));\n    }\n\n    setCustomSetting(key, value) {\n        let keyChain = key.split(\":\");\n        let lastKey = keyChain.pop();\n        if (!this.customSettings) {\n            this.customSettings = {};\n        }\n        let currentDict = this.customSettings;\n        for (let key of keyChain) {\n            if (!(key in currentDict)) {\n                currentDict[key] = {};\n            }\n            currentDict = currentDict[key];\n        }\n        currentDict[lastKey] = value;\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: JSON.parse(value),\n            rawValue: value,\n            origin: \"set\",\n        });\n    }\n\n    saveCustomSetting(key, value) {\n        if (this.id != USER.id) {\n            console.error(\"Invalid user\");\n            return;\n        }\n\n        this.dispatch(\"updateCustomSetting\", {\n            key: key,\n            value: value,\n            origin: \"save\",\n        });\n\n        let request = {\n            customSettingsKey: key,\n            customSettingsValue: value,\n        };\n\n        if (!this.timeouts) {\n            this.timeouts = new Map();\n        }\n        if (this.timeouts.has(key)) {\n            clearTimeout(this.timeouts.get(key));\n        }\n        this.timeouts.set(key, setTimeout(() => {\n            Ajax.postJSON(\"/accounts/profile_changed/\", request).then(() => {}, () => {});\n        }));\n    }\n\n    applyEvent(event) {\n        if (event.type === \"setCustomSetting\") {\n            console.log(\"Updated custom settings: \", event);\n            this.setCustomSetting(event[\"data\"].key, event[\"data\"].value);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n}\n\nvar UserStore = new GenericObjectStore(\"user\", User);\n\nUserStore.getCurrentUser = function () {\n    return window.USER;\n};\n\nclass PublicUser extends StoreObject {\n    getDisplayHandle() {\n        let name;\n        if (this.displayName) {\n            name = this.name || this.username;\n        } else {\n            name = this.username || this.name;\n        }\n        return name || (\"user-\" + this.id);\n    }\n\n    getProfileUrl() {\n        if (this.username) {\n            return \"/user/\" + this.username;\n        } else {\n            return \"/userid/\" + this.id;\n        }\n    }\n}\n\n// TODO: extend AjaxFetchMixin, to put the options in the constructor\nvar PublicUserStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar PublicUserStore = new PublicUserStoreClass(\"publicuser\", PublicUser, {\n    fetchTimeoutDuration: 20,\n    maxFetchObjectCount: 512,\n    fetchURL: \"/accounts/public_user_profiles/\",\n});\n\nwindow.USER = Object.assign({\n    id: 0,\n    customSettings: {}\n}, window.USER || {});\n\nwindow.USER = UserStore.fakeCreate(window.USER);\n\nclass UserNotification extends StoreObject {\n    getUser() {\n        return UserStore.get(this.userId);\n    }\n\n    isRead() {\n        return (this.id <= this.getUser().lastReadNotificationId);\n    }\n}\n\nvar UserNotificationStore = new GenericObjectStore(\"UserNotification\", UserNotification, {dependencies: [\"user\"]});\n\nexport {UserStore, PublicUserStore, UserNotificationStore};\n","import {UI} from \"ui/UI\";\n\nimport {PublicUserStore} from \"state/UserStore\";\n\nclass UserHandle extends UI.Element {\n    setOptions(options) {\n        options.userId = options.userId || options.id;\n\n        super.setOptions(options);\n\n        this.options.color = this.options.color || \"#2089b5\";\n        this.setUser(PublicUserStore.get(this.options.userId));\n    }\n\n    setUser(user) {\n        this.user = user;\n    }\n\n    getNodeType() {\n        return \"span\";\n    }\n\n    setColor(color) {\n        this.options.color = color;\n        this.handle.setStyle(\"color\", color);\n    }\n\n    render() {\n        let handle;\n        if (!this.user) {\n            PublicUserStore.fetch(this.options.userId, (user) => {\n                this.setUser(user);\n                this.redraw();\n            });\n            handle = <b ref=\"handle\" style={{color: \"#BBB\"}}>{\"user-\" + this.options.userId}</b>;\n        } else {\n            handle = <span ref=\"handle\" style={{cursor: \"pointer\", color: this.options.color}}\n                      onClick={() => {window.open(this.user.getProfileUrl(), \"_blank\")}}><b>{this.user.getDisplayHandle()}</b></span>\n        }\n\n        //The purpose of the container is to simplify the usage of the popup.\n        return [\n            <span ref=\"container\" style={{position: \"relative\", overflow: \"hidden\"}}>\n                {handle}\n                {this.options.children}\n            </span>\n        ]\n    }\n}\n\nexport {UserHandle};\n","// A basic store that can be used to keep objects that map to ISO-code backed languages\nimport {StoreObject, GenericObjectStore} from \"state/Store\";\n\nclass LanguageObject extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.translationMap = new Map();\n    }\n\n    toString() {\n        let name = this.name;\n        if (this.localName && this.localName != this.name) {\n            name += \" (\" + this.localName + \")\";\n        }\n        return name;\n    }\n\n    buildTranslation(callback) {\n        Language.dispatch(\"buildTranslationMap\", this);\n        callback(this.translationMap);\n    }\n}\n\nclass LanguageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"Language\", LanguageObject);\n    }\n\n    getLanguageForCode(isoCode) {\n        for (let language of this.all()) {\n            if (language.isoCode === isoCode) {\n                return language;\n            }\n        }\n    }\n\n    setLocale(language) {\n        if (this.Locale == language) {\n            return;\n        }\n        this.Locale = language;\n        this.dispatch(\"localeChange\", language);\n    }\n\n    getLocale() {\n        return this.Locale;\n    }\n}\n\nvar Language = new LanguageStoreClass();\n\nexport {Language};\n","import {StoreObject, GenericObjectStore} from \"state/Store\";\nimport {AjaxFetchMixin} from \"state/StoreMixins\";\n\nimport {Language} from \"state/LanguageStore\";\n\nclass Article extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.edits = new Map();\n    }\n\n    canBeEditedByUser(user=USER) {\n        return user.isSuperUser || this.userCreatedId == user.id;\n    }\n\n    addEdit(articleEdit) {\n        this.edits.set(articleEdit.id, articleEdit);\n    }\n\n    getEdits() {\n        return Array.from(this.edits.values());\n    }\n\n    getTranslation(language=Language.Locale) {\n        for (let article of ArticleStore.all()) {\n            if (article.baseArticleId === this.id && article.languageId === language.id) {\n                return article;\n            }\n        }\n        return this;\n    }\n\n    getBaseArticle() {\n        return ArticleStore.get(this.baseArticleId) || this;\n    }\n}\n\nclass ArticleEdit extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass ArticleStoreClass extends AjaxFetchMixin(GenericObjectStore) {\n    getTranslation(id, language=Language.Locale) {\n        let baseArticle = this.get(id);\n        if (baseArticle) {\n            baseArticle = baseArticle.getTranslation(language);\n        }\n        return baseArticle;\n    }\n}\n\nvar ArticleStore = new ArticleStoreClass(\"article\", Article, {\n    fetchURL: \"/fetch_article/\",\n    maxFetchObjectCount: 32,\n});\n\nvar ArticleEditStore = new GenericObjectStore(\"articleedit\", ArticleEdit, {\n    dependencies: [\"article\"],\n});\n\nArticleEditStore.addCreateListener((articleEdit) => {\n    let article = articleEdit.getArticle();\n    article.addEdit(articleEdit);\n});\n\nexport {Article, ArticleStore, ArticleEditStore};\n","import {Ajax} from \"base/Ajax\";\nimport {StemDate} from \"time/Time\";\nimport {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    Select,\n    SortableTable,\n    TemporaryMessageArea,\n    TextInput,\n    Level,\n    UI,\n} from \"ui/UI\";\nimport {FAIcon} from \"ui/FontAwesome\";\nimport {GlobalStyle} from \"ui/GlobalStyle\";\n\nimport {PublicUserStore} from \"state/UserStore\";\nimport {Language} from \"state/LanguageStore\";\nimport {UserHandle} from \"UserHandle\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\n\n\nclass TransferOwnershipModal extends ActionModal {\n    getActionName() {\n        return \"Transfer ownership\";\n    }\n\n    getActionLevel() {\n        return Level.PRIMARY;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getBody() {\n        return [\n            <UI.TextElement ref=\"text\" value={\"Set owner for \" + this.getArticle().name + \":\"}/>,\n            <Form style={{marginTop: \"10px\"}}>\n                <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                    <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId} />\n                </FormField>\n            </Form>\n        ];\n    }\n\n    getFooter() {\n        return [\n            <TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"transferOwnershipButton\" level={this.getActionLevel()} onClick={() => this.action()}\n                               statusOptions={[this.getActionName(), {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"},\n                                               this.getActionName(), \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    action() {\n        let newOwner = this.ownerFormInput.getValue();\n        let request = {\n            newOwner: newOwner\n        };\n\n        this.messageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.transferOwnershipButton.postJSON(\"/article/\" + this.getArticle().id + \"/set_owner/\", request).then(\n            () => this.hide(),\n            (error) => this.messageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete article\";\n    }\n\n    getBody() {\n        return <UI.TextElement ref=\"text\" value={\"Delete \" + this.getArticle().name + \"?\"}/>;\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.getArticle().id + \"/delete/\", {}).then(\n            () => {\n                let table = this.options.parent.table;\n                table.options.articles.splice(table.getArticleIndex(this.getArticle().id), 1);\n                table.redraw();\n                this.hide();\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\nclass CreateArticleModal extends ActionModal {\n    getActionName() {\n        return \"Create article\";\n    }\n\n    getBody() {\n        return <Form style={{marginTop: \"10px\"}}>\n            <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                <TextInput ref=\"articleNameInput\"  value=\"\"/>\n            </FormField>\n            <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                <TextInput ref=\"dependencyInput\" value=\"\"/>\n            </FormField>\n            <FormField ref=\"languageFormField\" label=\"Language\">\n                <Select ref=\"languageSelect\" options={Language.all()}/>\n            </FormField>\n            <FormField ref=\"publicFormField\" label=\"Public\">\n                <CheckboxInput ref=\"publicCheckbox\" checked={false}/>\n            </FormField>\n        </Form>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY} onClick={() => {this.createArticle()}}\n                               statusOptions={[\"Create article\", {faIcon: \"spinner fa-spin\", label:\" creating article ...\"},\n                                               \"Create article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    createArticle(options) {\n        let name = this.articleNameInput.getValue();\n        let dependency = this.dependencyInput.getValue();\n        let languageId = this.languageSelect.get().id;\n        let isPublic = this.publicCheckbox.getValue();\n        let request = {\n            name: name,\n            dependency: dependency,\n            languageId: languageId,\n            isPublic: isPublic\n        };\n        if (options) {\n            Object.assign(request, options);\n        }\n        this.createArticleButton.postJSON(\"/create_article/\", request).then(\n            (data) => {\n                this.options.parent.table.addArticle(ArticleStore.get(data.article.id));\n                this.hide();\n            },\n            (error) => {\n                this.messageArea.showMessage(error.message, \"red\");\n            }\n        );\n    }\n\n    hide() {\n        this.messageArea.clear();\n        super.hide();\n    }\n}\n\n\nclass AddTranslationModal extends CreateArticleModal {\n    getActioName() {\n        return \"Add translation\";\n    }\n\n    getBody() {\n        const baseArticle = this.options.baseArticle;\n        return <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                        <TextInput ref=\"articleNameInput\"  value={\"Translation for \" + baseArticle.name}/>\n                    </FormField>\n                    <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                        <TextInput ref=\"dependencyInput\" value={baseArticle.dependency}/>\n                    </FormField>\n                    <FormField ref=\"languageFormField\" label=\"Language\">\n                        <Select ref=\"languageSelect\" options={Language.all()}/>\n                    </FormField>\n                    <FormField ref=\"publicFormField\" label=\"Public\">\n                        <CheckboxInput ref=\"publicCheckbox\" checked={baseArticle.isPublic}/>\n                    </FormField>\n                </Form>\n    }\n\n    getFooter() {\n        const baseArticle = this.options.baseArticle;\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"createArticleButton\" level={Level.PRIMARY}\n                               onClick={() => this.createArticle({\n                                   baseArticleId: baseArticle.id,\n                                   markup: baseArticle.markup\n                               })}\n                               statusOptions={[\"Add translation\", {faIcon: \"spinner fa-spin\", label:\" creating translation article ...\"},\n                                               \"Success\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n}\n\nclass ArticleOwnerSpan extends UI.Primitive(\"span\") {\n    getArticle() {\n        return this.options.article;\n    }\n\n    render() {\n        return <UserHandle id={this.getArticle().userCreatedId}/>;\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(), () => this.redraw());\n    }\n}\n\nclass ArticlePublicSpan extends FAIcon {\n    getDefaultOptions() {\n        return {\n            size: \"lg\"\n        };\n    }\n\n    getArticle() {\n        return this.options.article;\n    }\n\n    isPublic() {\n        return this.options.article.isPublic;\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle(\"color\", this.isPublic() ? \"green\" : \"red\");\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.icon = this.isPublic() ? \"check\" : \"times\";\n    }\n\n    onMount() {\n        this.attachUpdateListener(this.getArticle(),\n            () => this.updateOptions({icon: this.isPublic() ? \"check\" : \"times\"})\n        );\n    }\n}\n\nclass ArticleTable extends SortableTable {\n    setOptions(options) {\n        super.setOptions(options);\n        this.resetColumnSortingOrder();\n    }\n\n    resetColumnSortingOrder() {\n        this.columnSortingOrder = [this.columns[4], this.columns[5], this.columns[0],\n            this.columns[3], this.columns[2], this.columns[1]];\n    }\n\n    getArticleIndex(articleId) {\n        for (let i = 0; i < this.options.articles.length; i += 1) {\n            if (this.options.articles[i].id === articleId)\n                return i;\n        }\n        return -1;\n    }\n\n    addArticle(article) {\n        this.options.articles.push(article);\n        this.redraw();\n    }\n\n    setColumns() {\n        let cellStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let headerStyle = {\n            textAlign: \"left\",\n            verticalAlign: \"middle\"\n        };\n        let columns = [{\n            value: article => <Link href={\"/article/\" + article.id + \"/edit/\"} value={article.name} />,\n            rawValue: article => article.name,\n            headerName: \"Article\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticleOwnerSpan article={article} />,\n            rawValue: article => PublicUserStore.get(article.userCreatedId).username,\n            headerName: \"Author\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => <ArticlePublicSpan article={article} />,\n            rawValue: article => (article.isPublic ? \"Yes\" : \"No\"),\n            headerName: \"Public\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => Language.get(article.languageId).name,\n            rawValue: article => Language.get(article.languageId).name,\n            headerName: \"Language\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateCreated).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateCreated,\n            sortDescending: true,\n            headerName: \"Date created\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }, {\n            value: article => StemDate.unix(article.dateModified).locale(\"en\").format(\"DD/MM/YYYY HH:mm:ss\"),\n            rawValue: article => article.dateModified,\n            sortDescending: true,\n            headerName: \"Date modified\",\n            headerStyle: headerStyle,\n            cellStyle: cellStyle\n        }];\n        if (!this.options.parent.options.readOnly) {\n            if (USER.isSuperUser) {\n                columns.push({\n                    value: article => <Button level={Level.PRIMARY} label=\"Set owner\"\n                                              onClick={() => TransferOwnershipModal.show({ article })}/>,\n                    headerName: \"Set owner\",\n                    headerStyle: headerStyle,\n                    cellStyle: cellStyle\n                });\n            }\n            columns.push({\n                value: article => <Button level={Level.DANGER} label=\"Delete\"\n                                             onClick={() => {\n                                                 DeleteArticleModal.show({\n                                                     article,\n                                                     parent: this.options.parent\n                                                 });\n                                             }}/>,\n                headerName: \"Delete\",\n                headerStyle: headerStyle,\n                cellStyle: cellStyle\n            });\n        }\n        super.setColumns(columns);\n    }\n\n    getEntries() {\n        return this.sortEntries(this.options.articles);\n    }\n}\n\nclass ArticleManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Article manager\",\n            articles: [],\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(GlobalStyle.Container.SMALL);\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\">\n                <Button level={Level.PRIMARY} label=\"Create article\"\n                           onClick={() => CreateArticleModal.show({parent: this})}\n                           style={{marginTop: \"5px\", marginBottom: \"5px\"}}/>\n            </div>;\n        }\n\n        this.options.articles = ArticleStore.all();\n\n        return [\n            <div className=\"pull-left\">\n                <h4><strong>{this.options.title}</strong></h4>\n            </div>,\n            addButton,\n            <ArticleTable ref=\"table\" articles={this.options.articles} parent={this}/>,\n        ];\n    }\n}\n\nclass ArticleTranslationManager extends Panel {\n    getDefaultOptions() {\n        return {\n            title: \"Translation manager\"\n        };\n    }\n\n    setOptions(options) {\n        options = Object.assign(this.getDefaultOptions(), options);\n        super.setOptions(options);\n    }\n\n    render() {\n        this.table = <ArticleTable articles={[]} parent={this}/>;\n        let addButton = null;\n        if (!this.options.readOnly) {\n            addButton = <div className=\"pull-right\"><Button level={Level.PRIMARY} label=\"Add translation\"\n                                                            onClick={() => AddTranslationModal.show({\n                                                                parent: this,\n                                                                baseArticle: this.options.baseArticle\n                                                            })}\n                                                            style={{marginTop: \"5px\", marginBottom: \"5px\"}}/></div>;\n        }\n        return [<div className=\"pull-left\"><h4><strong>{this.options.title}</strong></h4></div>, addButton, this.table];\n    }\n\n    onMount() {\n        if (!this.options.baseArticle) {\n            return;\n        }\n\n        Ajax.getJSON(\"/article/\" + this.options.baseArticle.id + \"/get_translations/\", {}).then(\n            () => {\n                for (let article of ArticleStore.all()) {\n                    if (article.baseArticleId === this.options.baseArticle.id) {\n                        this.table.options.articles.push(article);\n                    }\n                }\n                this.table.redraw();\n            }\n        );\n    }\n}\n\nexport {ArticleManager, ArticleTranslationManager};\n","import {MarkupRenderer, MarkupClassMap} from \"markup/MarkupRenderer\";\nimport {UI, SVG, Switcher, Button} from \"ui/UI\";\n\nimport {Language} from \"state/LanguageStore\";\nimport {Article, ArticleStore} from \"./state/ArticleStore\";\n\n\nclass ArticleRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = options.classMap || this.constructor.markupClassMap;\n        super.setOptions(options);\n    }\n\n    getEditButton() {\n        if (this.options.showEditButton && this.options.article.canBeEditedByUser()) {\n            let url = this.options.editButtonUrl || (\"/article/\" + this.options.article.id + \"/edit/\");\n            return <div className=\"text-left\">\n                <a href={url} target=\"_blank\">\n                    <Button label={UI.T(\"Edit\")}\n                               style={{\"margin\": \"10px\"}}/></a>\n            </div>;\n        }\n    }\n\n    render() {\n        return [\n            this.getEditButton(),\n            super.render()\n        ];\n    }\n\n    setArticle(article) {\n        this.updateOptions({ article });\n    }\n\n    getValue() {\n        super.setValue(this.getArticleToRender().markup);\n        return super.getValue();\n    }\n\n    getArticleToRender() {\n        return this.options.article.getTranslation();\n    }\n\n    getArticleDependencies() {\n        const dependencies = this.options.article.dependency;\n        return dependencies && dependencies.split(\",\");\n    }\n\n    redraw() {\n        const dependencies = this.getArticleDependencies();\n        if (!dependencies) {\n            super.redraw();\n            return;\n        }\n\n        // Not using require directly to fool webpack\n        window[\"require\"](dependencies, (...args) => {\n            this.registerDependencies(args);\n            super.redraw();\n        });\n    }\n\n    onMount() {\n        if (this.options.liveLanguage) {\n            this.attachListener(Language, \"localeChange\", () => this.redraw());\n        }\n    }\n}\n\nclass RecursiveArticleRenderer extends ArticleRenderer {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.articleId = this.options.articleId || this.options.id;\n    }\n\n    redraw() {\n        if (this.options.article) {\n            return super.redraw();\n        } else {\n            ArticleStore.fetch(this.options.articleId, (article) => this.updateOptions({ article }));\n        }\n    }\n}\n\nclass ArticleSwitcher extends Switcher {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            fullHeight: true,\n        });\n    }\n\n    constructor() {\n        super(...arguments);\n        this.articleChildMap = new WeakMap();\n    }\n\n    setOptions(options) {\n        options = Object.assign({\n            lazyRender: true,\n        }, options);\n        super.setOptions(options);\n    }\n\n    getPageForArticle(article) {\n        if (!this.articleChildMap.has(article)) {\n            this.articleChildMap.set(article, <ArticleRenderer article={article} showEditButton={this.options.showEditButton} />);\n        }\n        return this.articleChildMap.get(article);\n    }\n\n    setActive(article) {\n        if (!(article instanceof Article)) {\n            super.setActive(article);\n            return;\n        }\n        super.setActive(this.getPageForArticle(article));\n    }\n\n    setActiveArticleId(articleId) {\n        ArticleStore.fetch(articleId, (article) => {\n            this.setActive(article);\n        });\n    }\n\n    onMount() {\n        super.onMount();\n        if (this.options.initialArticle) {\n            this.setActive(this.options.initialArticle);\n        }\n        if (this.options.initialArticleId) {\n            this.setActiveArticleId(this.options.initialArticleId);\n        }\n    }\n}\n\nArticleRenderer.markupClassMap = new MarkupClassMap(MarkupClassMap.GLOBAL, [\n    [\"Article\", RecursiveArticleRenderer],\n    [\"RawSVG\", SVG.RawSVG]\n]);\n\nexport {ArticleRenderer, RecursiveArticleRenderer, ArticleSwitcher};\n","import {\n    ActionModal,\n    AjaxButton,\n    Button,\n    ButtonGroup,\n    CheckboxInput,\n    Form,\n    FormField,\n    Link,\n    Panel,\n    Select,\n    TabArea,\n    TemporaryMessageArea,\n    TextInput,\n    Level,\n    UI,\n} from \"ui/UI\";\nimport {Language} from \"state/LanguageStore\";\n\nimport {ArticleStore} from \"./state/ArticleStore\";\nimport {ArticleTranslationManager} from \"./ArticleManager\";\nimport {ArticleRenderer} from \"./ArticleRenderer\";\nimport {MarkupEditor} from \"./markup/MarkupEditor\";\n\n\nconst deleteRedirectLink = \"/\";\n\nclass ArticleMarkupEditor extends MarkupEditor {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.value = this.options.article.markup;\n    }\n\n    getMarkupRenderer() {\n        return <ArticleRenderer ref={this.refLink(\"markupRenderer\")} article={this.options.article} style={{flex:\"1\", height: \"100%\", overflow: \"auto\"}} />\n    }\n\n    updateValue(markup) {\n        this.options.article.markup = markup;\n        super.updateValue(markup);\n    }\n}\n\n\nclass DeleteArticleModal extends ActionModal {\n    getActionName() {\n        return \"Delete Article\";\n    }\n\n    getBody() {\n        return <p>Delete {this.options.article.name}?</p>;\n    }\n\n    getFooter() {\n        return [<TemporaryMessageArea ref=\"messageArea\"/>,\n            <ButtonGroup>\n                <Button label=\"Close\" onClick={() => this.hide()}/>\n                <AjaxButton ref=\"deleteArticleButton\" level={Level.DANGER} onClick={() => {this.deleteArticle()}}\n                               statusOptions={[\"Delete article\", {faIcon: \"spinner fa-spin\", label:\" deleting article ...\"},\n                                               \"Delete article\", \"Failed\"]}/>\n            </ButtonGroup>\n        ];\n    }\n\n    deleteArticle() {\n        this.deleteArticleButton.postJSON(\"/article/\" + this.options.article.id + \"/delete/\", {}).then(\n            () => {\n                if (this.options.article.baseArticleId)\n                    window.location.replace(\"/article/\" + this.options.article.baseArticleId + \"/edit/\");\n                else\n                    window.location.replace(deleteRedirectLink);\n            },\n            (error) => this.messageArea.showMessage(error.message, \"red\")\n        );\n    }\n}\n\nclass ArticleEditor extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n\n    }\n\n    getArticle() {\n        return ArticleStore.get(this.options.articleId);\n    }\n\n    initializeVersioning() {\n        if (ArticleEditor.DiffWidgetClass) {\n            this.versions = [];\n            this.versionsLabels = [];\n            for (let article of this.getArticle().getEdits()) {\n                this.versions.push(article.content);\n                this.versionsLabels.push(\"Version \" + article.id);\n            }\n            this.versions.push(this.getArticle().markup);\n            this.versionsLabels.push(\"Edit version\");\n            this.versions.reverse();\n            this.versionsLabels.reverse();\n\n            this.leftEditable = true;\n            this.rightEditable = false;\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            height: \"100%\",\n        });\n    }\n\n    render() {\n        this.initializeVersioning();\n        let translationsPanel = null;\n        let baseArticleForm = null;\n        if (this.getArticle().baseArticleId) {\n            baseArticleForm = <FormField ref=\"baseArticleFormField\" label=\"Base article\">\n                <Link href={\"/article/\" + this.getArticle().baseArticleId + \"/edit/\"} value=\"Go to base article\" />\n            </FormField>;\n        } else {\n            translationsPanel = <Panel title=\"Translations\">\n                <ArticleTranslationManager title={\"Translations for \" + this.getArticle().name}\n                                    baseArticle={this.getArticle()}/>\n            </Panel>\n        }\n        let ownershipPanel = null;\n        if (USER.isSuperUser) {\n            ownershipPanel = <Panel title=\"Ownership\">\n                <Form style={{marginTop: \"10px\"}}>\n                    <FormField ref=\"ownerFormField\" label=\"Author ID\">\n                        <TextInput ref=\"ownerFormInput\"  value={this.getArticle().userCreatedId}/>\n                    </FormField>\n                </Form>\n                <AjaxButton ref=\"setOwnerButton\" level={Level.INFO} onClick={() => {\n                                let newOwner = this.ownerFormInput.getValue();\n                                this.setOwner(newOwner);\n                               }}\n                               statusOptions={[\"Transfer ownership\", {faIcon: \"spinner fa-spin\", label:\" transfering ownership ...\"}, \"Transfer ownership\", \"Failed\"]}\n                        />\n                <TemporaryMessageArea ref=\"setOwnerMessageArea\"/>\n            </Panel>\n        }\n\n        let revisionsPanel;\n        if (ArticleEditor.DiffWidgetClass) {\n            let DiffWidgetClass = ArticleEditor.DiffWidgetClass;\n                revisionsPanel = <Panel title=\"Revisions\" style={{height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel>\n                    <Select ref=\"leftTextSelector\" options={this.versionsLabels}/>\n                    <Select style={{float:\"right\", marginRight:\"25px\"}} ref=\"rightTextSelector\" options={this.versionsLabels}/>\n                </Panel>\n                <DiffWidgetClass ref=\"diffWidget\" leftEditable={this.leftEditable} rightEditable={this.rightEditable}\n                                 leftTextValue={this.versions[2]} arrows={this.arrows} rightTextValue={this.versions[1]}\n                                     style={{flex:\"1\", height: \"calc(100% - 100px)\", width: \"calc(100% - 100px)\"}} />\n            </Panel>;\n        }\n\n        return [\n            <h3>{this.getArticle().name + \" Id=\" + this.options.articleId}</h3>,\n                <TabArea ref=\"tabArea\" variableHeightPanels style={{flex: \"1\", height: \"100%\", display: \"flex\", flexDirection: \"column\"}}>\n                <Panel title=\"Edit\" active style={{height: \"100%\", overflow: \"hidden\"}}>\n                    <AjaxButton ref=\"saveMarkupButton\" level={Level.INFO} onClick={() => {\n                                    let content = this.markupEditor.getValue();\n                                    this.saveMarkup(content);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <TemporaryMessageArea ref=\"saveMarkupMessageArea\"/>\n                    <ArticleMarkupEditor style={{height: \"100%\", marginTop: \"-31px\", display: \"flex\", flexDirection: \"column\"}}\n                                         ref=\"markupEditor\" article={this.getArticle()} />\n                </Panel>\n                {revisionsPanel}\n                <Panel title=\"Summary\">\n                    <Form style={{marginTop: \"10px\"}}>\n                        <FormField ref=\"articleNameFormField\" label=\"Article name\">\n                            <TextInput ref=\"articleNameFormInput\"  value={this.getArticle().name}/>\n                        </FormField>\n                        <FormField ref=\"dependencyFormField\" label=\"Dependencies\">\n                            <TextInput ref=\"dependencyFormInput\" value={this.getArticle().dependency}/>\n                        </FormField>\n                        {baseArticleForm}\n                        <FormField ref=\"languageFormField\" label=\"Language\">\n                            <Select ref=\"languageSelect\" options={Language.all()}\n                                       selected={Language.get(this.getArticle().languageId)}/>\n                        </FormField>\n                        <FormField ref=\"publicFormField\" label=\"Public\">\n                            <CheckboxInput ref=\"publicCheckbox\" checked={this.getArticle().isPublic}/>\n                        </FormField>\n                    </Form>\n                    <AjaxButton ref=\"saveOptionsButton\" level={Level.INFO} onClick={() => {\n                                    let name = this.articleNameFormInput.getValue();\n                                   let dependency = this.dependencyFormInput.getValue();\n                                   let languageId = this.languageSelect.get().id;\n                                   let isPublic = this.publicCheckbox.getValue();\n                                   let options = {\n                                       name: name,\n                                       dependency: dependency,\n                                       languageId: languageId,\n                                       isPublic: isPublic\n                                   };\n                                   this.saveOptions(options);\n                                   }}\n                               statusOptions={[\"Save\", {faIcon: \"spinner fa-spin\", label:\" saveing ...\"}, \"Save\", \"Failed\"]}\n                        />\n                    <Button ref=\"deleteArticleButton\" level={Level.DANGER} label=\"Delete article\"\n                               style={{marginLeft: \"3px\"}}\n                               onClick={() => this.deleteArticleModal.show()}/>\n                    <TemporaryMessageArea ref=\"saveOptionsMessageArea\"/>\n                </Panel>\n                {translationsPanel}\n                {ownershipPanel}\n            </TabArea>\n        ];\n    }\n\n    saveMarkup(content) {\n        let request = {\n            markup: content\n        };\n\n        this.saveMarkupMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveMarkupButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => {\n                // Add a new version in the dropdown if the save is a success\n                if (ArticleEditor.DiffWidgetClass) {\n                    this.addNewVersion(content);\n                }\n                this.saveMarkupMessageArea.showMessage(\"Saved article\");\n            },\n            (error) => this.saveMarkupMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    saveOptions(options) {\n        let request = {};\n        Object.assign(request, options);\n\n        this.saveOptionsMessageArea.showMessage(\"Saving...\", \"black\", null);\n\n        this.saveOptionsButton.postJSON(\"/article/\" + this.options.articleId + \"/edit/\", request).then(\n            () => window.location.replace(\"/article/\" + this.options.articleId + \"/edit/\"),\n            (error) => this.saveOptionsMessageArea.showMessage(\"Error in saving the article: \" + error.message, \"red\")\n        );\n    }\n\n    setOwner(newOwner) {\n        this.setOwnerMessageArea.showMessage(\"Saving...\", \"black\", null);\n        this.setOwnerButton.postJSON(\"/article/\" + this.options.articleId + \"/set_owner/\", {\n            newOwner: newOwner\n        }).then(\n            () => this.setOwnerMessageArea.showMessage(\"Author successfully changed\"),\n            (error) => this.setOwnerMessageArea.showMessage(\"Error in changing owner \" + error.message, \"red\")\n        );\n    }\n\n    addNewVersion(content) {\n        this.versionsLabels[0] = (\"Version \" + this.versionsLabels.length);\n        this.versions[0] = content;\n\n        this.versions.unshift(this.markupEditor.getValue());\n        this.versionsLabels.unshift(\"Edit version\");\n\n        let leftIndex = this.leftTextSelector.getIndex();\n        let rightIndex = this.rightTextSelector.getIndex();\n\n        this.leftTextSelector.redraw();\n        this.rightTextSelector.redraw();\n\n        this.setLeftIndex(leftIndex);\n        this.setRightIndex(rightIndex);\n    }\n\n    setLeftIndex(index) {\n        this.leftTextSelector.setIndex(index);\n        this.diffWidget.setLeftText(this.versions[index]);\n    }\n\n    setRightIndex(index) {\n        this.rightTextSelector.setIndex(index);\n        this.diffWidget.setRightText(this.versions[index]);\n    }\n\n    onMount() {\n        this.deleteArticleModal = <DeleteArticleModal article={this.getArticle()}/>;\n\n        if (ArticleEditor.DiffWidgetClass) {\n            this.tabArea.titleArea.children[1].addClickListener(() => {\n                this.versions[0] = this.markupEditor.getValue();\n                this.setLeftIndex(this.leftTextSelector.getIndex());\n                this.setRightIndex(this.rightTextSelector.getIndex());\n                //this.diffWidget.diffGutterPanel.scroll();\n            });\n\n            let updateEditable = () => {\n                this.leftEditable = (this.leftTextSelector.getIndex() === 0);\n                this.rightEditable = (this.rightTextSelector.getIndex() === 0);\n                this.diffWidget.setLeftEditable(this.leftEditable);\n                this.diffWidget.setRightEditable(this.rightEditable);\n            };\n\n            this.leftTextSelector.addChangeListener(() => {\n                this.diffWidget.setLeftText(this.versions[this.leftTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.rightTextSelector.addChangeListener(() => {\n                this.diffWidget.setRightText(this.versions[this.rightTextSelector.getIndex()]);\n                updateEditable();\n            });\n\n            this.setLeftIndex(0);\n            this.setRightIndex(1);\n\n            //this.diffWidget.diffGutter.redraw();\n        }\n\n        window.onbeforeunload = () => {\n            // Are you sure you want to close the page?\n            return \"\";\n        }\n    }\n}\n\nexport {ArticleEditor};\n","import {StoreObject, GenericObjectStore} from \"state/Store\";\n\nexport class UserReactionCollection extends StoreObject {\n    getUserReactionStore() {\n        return this.getStore().getState().getStore(\"UserReaction\");\n    }\n\n    // TODO should be done as generator? Clearly needs to have indexed data!\n    getReactions() {\n        let reactions = [];\n        for (let reaction of this.getUserReactionStore().all()) {\n            if (reaction.collectionId == this.id) {\n                reactions.push(reaction);\n            }\n        }\n        return reactions;\n    }\n\n    getCurrentUserReaction() {\n        let currentUser = window.USER;\n        for (const userReaction of this.getReactions()) {\n            if (userReaction.userId == currentUser.id) {\n                return userReaction;\n            }\n        }\n        return null;\n    }\n\n    getCurrentUserReactionType() {\n        const currentUserReaction = this.getCurrentUserReaction();\n        return currentUserReaction && currentUserReaction.type;\n    }\n}\n\nexport class UserReaction extends StoreObject {\n}\n\nexport let UserReactionCollectionStore = new GenericObjectStore(\"UserReactionCollection\", UserReactionCollection);\nexport let UserReactionStore = new GenericObjectStore(\"UserReaction\", UserReaction);","import {Ajax} from \"base/Ajax\";\nimport {GlobalState} from \"state/State\";\nimport {NOOP_FUNCTION} from \"base/Utils\";\nimport {StoreObject, GenericObjectStore} from \"state/Store\";\nimport {AjaxFetchMixin, VirtualStoreObjectMixin, VirtualStoreMixin} from \"state/StoreMixins\";\nimport {ServerTime, StemDate} from \"time/Time\";\n\nimport {PublicUserStore} from \"state/UserStore\";\nimport {UserReactionCollectionStore} from \"state/UserReactionStore\";\n\nclass MessageInstance extends VirtualStoreObjectMixin(StoreObject) {\n    constructor(obj, event) {\n        super(obj, event);\n\n        PublicUserStore.fakeCreate(event.user);\n    }\n\n    getNormalizedId() {\n        // TODO: Pretty bad implementation, works though\n        let messageId = this.id + \"\";\n        if (messageId.startsWith(\"temp-\")) {\n            messageId = messageId.substr(5);\n        }\n        return parseInt(messageId);\n    }\n\n    getDate() {\n        return this.timeAdded;\n    }\n\n    getUser() {\n        let user = PublicUserStore.get(this.userId);\n        if (user) {\n            return user.username;\n        }\n        return \"user-\" + this.userId;\n    }\n\n    getContent() {\n        return this.content;\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getReactionCollection(fakeIfMissing=false) {\n        let reactionCollection = UserReactionCollectionStore.get(this.reactionCollectionId);\n        if (fakeIfMissing && !reactionCollection) {\n            return {\n                upvotesCount: 0,\n                downvotesCount: 0,\n                getCurrentUserReactionType() {},\n            };\n        }\n        return reactionCollection;\n    }\n\n    getNumLikes() {\n        return this.getReactionCollection(true).upvotesCount;\n    }\n\n    getNumDislikes() {\n        return this.getReactionCollection(true).downvotesCount;\n    }\n\n    getVotesBalance() {\n        return this.getNumLikes() - this.getNumDislikes();\n    }\n\n    getUserVote() {\n        return this.getReactionCollection(true).getCurrentUserReactionType();\n    }\n\n    getPreviousMessage() {\n        // TODO: this should be cached and kept by the message thread\n        let ans = null;\n        let currentId = this.getNormalizedId();\n        // If message has temporary id, then it is identical with the previous message id, so instead the\n        // previous previous message would be found instead.\n        if (this.hasTemporaryId()) {\n            currentId += 1;\n        }\n        for (let message of this.getMessageThread().getMessages()) {\n            if (message.id < currentId && (!ans || ans.id < message.id)) {\n                ans = message;\n            }\n        }\n        return ans;\n    }\n\n    getNextMessage() {\n        throw \"Implement me!\";\n    }\n\n    hasMarkupEnabled() {\n        return this.getMessageThread().hasMarkupEnabled();\n    }\n\n    getTimeOfDay() {\n        return StemDate.unix(this.timeAdded).format(\"HH:mm\");\n    }\n\n    edit(content, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            message: content,\n        }).then(onSuccess, onError);\n    }\n\n    react(reaction, onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            reaction: reaction,\n        }).then(onSuccess, onError);\n    }\n\n    like(onSuccess, onError) {\n        this.react(\"like\", onSuccess, onError);\n    }\n\n    dislike(onSuccess, onError) {\n        this.react(\"dislike\", onSuccess, onError);\n    }\n\n    resetReaction(onSuccess, onError) {\n        this.react(\"resetReaction\", onSuccess, onError);\n    }\n\n    deleteMessage(onSuccess, onError) {\n        Ajax.postJSON(\"/chat/edit_message/\", {\n            messageId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    applyEvent(event) {\n        if (event.type === \"messageEdit\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"edit\", event);\n        } else if (event.type === \"reaction\") {\n            Object.assign(this, event.data);\n            this.dispatch(\"reaction\", event);\n        } else if (event.type === \"messageDelete\") {\n            this.dispatch(\"delete\", event);\n            this.getMessageThread().deleteMessageInstance(this);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    updateId(newId) {\n        if (this.id == newId) {\n            return;\n        }\n        let oldId = this.id;\n        super.updateId(newId);\n        let messageThread = this.getMessageThread();\n        messageThread.messages.delete(oldId);\n        messageThread.messages.set(this.id, this);\n    }\n\n    setPostError(postError) {\n        this.postError = postError;\n        this.dispatch(\"postError\", postError);\n        console.log(\"Post error: \", postError);\n    }\n}\n\nclass MessageThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        this.messages = new Map();\n        // TODO: for now don't register for private chats, you get them as user events\n        // TODO: don't change the global here, you fool!\n        if (!this.streamName.startsWith(\"messagethread-privatechat-\")) {\n            GlobalState.registerStream(this.streamName);\n        }\n        this.online = new Set(this.online || []);\n        this.online.delete(0);\n    }\n\n    hasMarkupEnabled() {\n        return this.markupEnabled || false;\n    }\n\n    addMessageInstance(messageInstance, event) {\n        this.messages.set(messageInstance.id, messageInstance);\n        this.dispatch(\"newMessage\", event);\n    }\n\n    deleteMessageInstance(messageInstance) {\n        this.messages.delete(messageInstance.id);\n    }\n\n    applyEvent(event) {\n        if (event.data.online) {\n            this.online = event.data.online = new Set(event.data.online);\n            this.online.delete(0);\n        }\n        if (event.type === \"online\") {\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaJoined\") {\n            if (event.data.userId != 0) {\n                this.online.add(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else if (event.type === \"onlineDeltaLeft\") {\n            if (event.data.userId != 0) {\n                this.online.delete(event.data.userId);\n            }\n\n            this.dispatch(\"usersChanged\", event);\n        } else {\n            super.applyEvent(event);\n        }\n    }\n\n    getMessages(orderDescending=false) {\n        // TODO: should be also as iterable\n        let messages = Array.from(this.messages.values());\n        if (orderDescending) {\n            return messages.sort((a, b) => {return b.id - a.id});\n        }\n        return messages.sort((a, b) => {return a.id - b.id});\n    }\n\n    getNumMessages() {\n        return this.messages.size;\n    }\n\n    getMaxMessageId() {\n        let value = 0;\n        for (let messageInstance of this.messages.values()) {\n            if (!messageInstance.hasTemporaryId() && messageInstance.id > value) {\n                value = messageInstance.id;\n            }\n        }\n        return value;\n    }\n\n    // This method will return the last message of the message thread,\n    // regardless of whether it is virtual or real.\n    getLastMessage() {\n        let lastMessage = null;\n        for (let messageInstance of this.messages.values()) {\n            if (!lastMessage || lastMessage.getNormalizedId() < messageInstance.getNormalizedId() ||\n                    (lastMessage.getNormalizedId() === messageInstance.getNormalizedId() && messageInstance.hasTemporaryId())) {\n                lastMessage = messageInstance;\n            }\n        }\n        return lastMessage;\n    }\n}\n\nclass MessageInstanceStoreClass extends VirtualStoreMixin(GenericObjectStore) {\n    constructor() {\n        super(\"MessageInstance\", MessageInstance, {dependencies: [\"messagethread\", \"publicuser\"]});\n    }\n\n    createVirtualMessageInstance(messageContent, messageThread, temporaryId) {\n        let virtualMessageInstance = {\n            content: messageContent,\n            temporaryId: temporaryId,\n            id: \"temp-\" + temporaryId,\n            timeAdded: ServerTime.now().toUnix(),\n            userId: parseInt(USER.id),\n            messageThreadId: messageThread.id,\n            meta: {},\n        };\n\n        return this.fakeCreate(virtualMessageInstance, \"virtualMessage\");\n    };\n}\n\nvar MessageInstanceStore = new MessageInstanceStoreClass();\n\nMessageInstanceStore.addCreateListener((messageInstance, createEvent) => {\n    messageInstance.getMessageThread().addMessageInstance(messageInstance, createEvent);\n});\n\n\nvar MessageThreadStore = new GenericObjectStore(\"messagethread\", MessageThread);\n\nclass BaseChatObject extends StoreObject {\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getOnlineUserIds() {\n        return this.getMessageThread().online;\n    }\n}\n\nclass GroupChat extends BaseChatObject {\n}\n\nvar GroupChatStoreClass = AjaxFetchMixin(GenericObjectStore);\n\nvar GroupChatStore = new GroupChatStoreClass(\"groupChat\", GroupChat, {\n    fetchURL: \"/chat/group_chat_state/\",\n    maxFetchObjectCount: 1,\n});\n\nGroupChatStore.getFetchRequestData = function (ids, fetchJobs) {\n    return {\n        chatId: ids[0],\n    };\n};\n\nclass PrivateChat extends BaseChatObject {\n    getOtherUserId() {\n        return (USER.id === this.user1Id ? this.user2Id : this.user1Id);\n    }\n}\n\nvar PrivateChatStore = new GenericObjectStore(\"PrivateChat\", PrivateChat, {\n});\n\nPrivateChatStore.getChatWithUser = function(userId) {\n    let myUserId = USER.id;\n    if (myUserId === userId) {\n        for (let privateChat of this.all()) {\n            if (privateChat.user1Id === userId && privateChat.user2Id === userId) {\n                return privateChat;\n            }\n        }\n        return null;\n    }\n    for (let privateChat of this.all()) {\n        if (privateChat.user1Id === userId || privateChat.user2Id === userId) {\n            return privateChat;\n        }\n    }\n};\n\nPrivateChatStore.fetchForUser = function (userId, onSuccess, onError) {\n    Ajax.postJSON(\"/chat/private_chat_state/\", {\n        userId: userId,\n    }).then(\n        (data) => onSuccess(PrivateChatStore.get(data.privateChatId)),\n        onError\n    );\n};\n\nPrivateChatStore.addListener(\"update\", (obj, event) => {\n    if (event.type === \"privateMessage\") {\n        GlobalState.importState(event.state);\n    }\n});\n\nexport {MessageInstance, MessageInstanceStore, MessageThread, MessageThreadStore, PrivateChatStore, GroupChatStore};\n","// Plugins should be used to extends on runtime the functionality of a class, to easily split functionality\nimport {Dispatchable} from \"./Dispatcher\";\n\nclass Plugin extends Dispatchable {\n    constructor(parent) {\n        super();\n        this.linkToParent(parent);\n    }\n\n    linkToParent(parent) {\n        this.parent = parent;\n    }\n\n    name() {\n        return this.constructor.pluginName();\n    }\n\n    static pluginName() {\n        return this.name;\n    }\n}\n\n// TODO: rename this to use Mixin in title\nvar Pluginable = function (BaseClass) {\n    return class Pluginable extends BaseClass {\n        // TODO: this should probably take in a plugin instance also\n        registerPlugin(PluginClass) {\n            if (!this.hasOwnProperty(\"plugins\")) {\n                this.plugins = new Map();\n            }\n            // TODO: figure out plugin dependencies\n            let plugin = new PluginClass(this);\n            let pluginName = plugin.name();\n\n            if (this.plugins.has(pluginName)) {\n                console.error(\"You are overwriting an existing plugin: \", pluginName, \" for object \", this);\n            }\n\n            this.plugins.set(pluginName, plugin);\n        }\n\n        removePlugin(pluginName) {\n            let plugin = this.getPlugin(pluginName);\n            if (plugin) {\n                plugin.remove(this);\n                this.plugins.delete(plugin.name());\n            } else {\n                console.error(\"Can't remove plugin \", pluginName);\n            }\n        }\n\n        getPlugin(pluginName) {\n            if (!(typeof pluginName === \"string\")) {\n                pluginName = pluginName.pluginName();\n            }\n            if (this.plugins) {\n                return this.plugins.get(pluginName);\n            } else {\n                return null;\n            }\n        }\n    }\n};\n\nexport {Plugin, Pluginable};\n","import {Device} from \"base/Device\";\nimport {UI, FloatingWindow, Direction, Panel, Button} from \"ui/UI\";\n\nexport class BasePopup extends FloatingWindow {\n    static bodyPopups = new Set();\n\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.x = 0;\n        options.y = 0;\n        options.contentPadding = \"7px\";\n        options.contentStyle = {};\n        options.arrowDirection = Direction.UP;\n        options.arrowColor = \"white\";\n        options.backgroundColor = \"white\";\n        return options;\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.style = Object.assign({\n            boxShadow: \"0px 0px 4px rgba(0,0,0,0.5)\",\n            borderRadius: \"5px\",\n            display: \"table\",\n            maxWidth: \"350px\",\n            backgroundColor: this.options.backgroundColor,\n            position: \"absolute\",\n            left: (this.options.x) + \"px\",\n            top: (this.options.y) + \"px\",\n            zIndex: \"3\",\n            right: \"0px\"\n        }, this.options.style);\n        this.createArrowStyle();\n    }\n\n    setContent(content) {\n        this.options.children = content;\n        this.redraw();\n    }\n\n    getContent() {\n        return <div style={Object.assign({padding: this.options.contentPadding}, this.options.contentStyle)} ref=\"contentArea\">\n                {this.options.children}\n            </div>;\n    }\n\n    createArrowStyle() {\n        let baseArrowOutline = {\n            \"left\": \"50%\",\n            \"z-index\": \"-3\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n            marginLeft: \"-11px\"\n        };\n\n        this[\"arrow\" + Direction.UP + \"Outline\"] = Object.assign({\n            \"border-bottom\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"-10.8px\",\n            marginLeft: \"-11px\"\n        }, baseArrowOutline);\n\n        this[\"arrow\" + Direction.DOWN + \"Outline\"] = Object.assign({\n            \"border-top\": \"10px solid #C8C8C8\",\n            \"margin-top\": \"2px\"\n        }, baseArrowOutline);\n\n        let baseArrow = {\n            \"left\": \"50%\",\n            \"position\": \"absolute\",\n            \"width\": \"0\",\n            \"height\": \"0\",\n            \"border-left\": \"10px solid transparent\",\n            \"border-right\": \"10px solid transparent\",\n        };\n\n        this[\"arrow\" + Direction.UP] = Object.assign({\n            \"margin-top\": \"-10px\",\n            \"border-bottom\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n\n        this[\"arrow\" + Direction.DOWN] = Object.assign({\n            \"border-top\": \"10px solid \" + this.options.arrowColor\n        }, baseArrow);\n    }\n\n    getArrow() {\n        let direction = this.options.arrowDirection;\n        return [\n            <Panel ref=\"popupArrow\" style={this[\"arrow\" + direction]}/>,\n            <Panel ref=\"popupArrowOutline\" style={this[\"arrow\" + direction + \"Outline\"]} />\n        ];\n    }\n\n    render() {\n        return (this.options.arrowDirection === Direction.UP) ?\n            [this.getArrow(), this.getContent()] :\n            [this.getContent(), this.getArrow()];\n    }\n\n    bindInsideParent() {\n        if (this.target) {\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = (this.options.arrowDirection === Direction.UP ? this.target.offsetHeight : 0);\n        }\n        let left = parseFloat(this.options.x);\n        let top = parseFloat(this.options.y) + (this.options.arrowDirection === Direction.UP ? 11 : - this.getHeight() - 11);\n        let arrowMargin = -11;\n        left -= this.getWidth() / 2;\n        if (this.options.bodyPlaced && this.target) {\n            const rect = this.target.getBoundingClientRect();\n            left += rect.left;\n            top += rect.top;\n        }\n        if (this.target && !this.options.bodyPlaced) {\n            if (this.node.offsetParent && !this.options.bodyPlaced) {\n                let left2 = left + this.node.offsetParent.offsetLeft;\n                if (left2 < 0) {\n                    left -= left2 - 2;\n                    arrowMargin += left2 + 2;\n                } else if (left2 + this.getWidth() > this.node.offsetParent.offsetParent.offsetWidth) {\n                    let delta = this.node.offsetParent.offsetParent.offsetWidth - (left2 + this.getWidth());\n                    arrowMargin -= delta - 2;\n                    left += delta - 2;\n                }\n            }\n        } else {\n            if (left < 0) {\n                arrowMargin += left + 2;\n                left = 2;\n            } else if (left + this.getWidth() > this.parentNode.offsetWidth) {\n                let delta = left + this.getWidth() - this.parentNode.offsetWidth;\n                arrowMargin += delta;\n                left -= delta;\n            }\n        }\n        this.popupArrow.setStyle(\"margin-left\", arrowMargin + \"px\");\n        this.popupArrowOutline.setStyle(\"margin-left\", arrowMargin + \"px\");\n\n        this.setStyle(\"left\", left + \"px\");\n        this.setStyle(\"top\", top + \"px\");\n    }\n\n    setParent(parent) {\n        let newParent;\n        if (parent instanceof HTMLElement) {\n            newParent = parent;\n        } else {\n            newParent = parent.node;\n        }\n        if (newParent === this.parentNode) {\n            return;\n        }\n        if (this.isInDocument()) {\n            this.parentNode.removeChild(this.node);\n            newParent.appendChild(this.node);\n            this.setParentNode(newParent);\n        } else {\n            this.setParentNode(newParent);\n        }\n    }\n\n    setCenter(center, manual=false) {\n        this.options.x = center.x;\n        this.options.y = center.y;\n        if (manual) {\n            setTimeout(() => {\n                this.bindInsideParent();\n            }, 0);\n        } else {\n            this.bindInsideParent();\n        }\n    }\n\n    static clearBodyPopups() {\n        for (const popup of this.bodyPopups) {\n            popup.hide();\n        }\n        this.bodyPopups.clear();\n    }\n\n    onUnmount() {\n        super.onUnmount();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.delete(this);\n        }\n    }\n\n    onMount() {\n        if(this.options.target) {\n            if (this.options.target instanceof HTMLElement) {\n                this.target = this.options.target;\n            } else {\n                this.target = this.options.target.node;\n            }\n            this.options.x = this.target.offsetWidth / 2;\n            this.options.y = this.target.offsetHeight;\n        }\n        super.onMount();\n        // Set the Popup inside the parent\n        this.bindInsideParent();\n        if (this.options.bodyPlaced && this.target) {\n            this.constructor.bodyPopups.add(this);\n        }\n    }\n}\n\nexport class Popup extends BasePopup {\n    getDefaultOptions() {\n        let options = super.getDefaultOptions();\n        options.titleFontSize = \"12pt\";\n        options.contentFontSize = \"10pt\";\n        options.arrowColor = \"#F3F3F3\";\n        return options;\n    }\n\n    getContent() {\n        let contentArea = super.getContent();\n        contentArea.options.style = Object.assign({\n            fontSize: this.options.contentFontSize\n        }, contentArea.options.style || {});\n\n        return [<Panel ref=\"titleArea\" style={{backgroundColor: \"#F3F3F3\", paddingLeft: \"20px\", fontSize: this.options.titleFontSize,\n                fontWeight:\"bold\", paddingTop: \"6px\", paddingBottom: \"6px\", textAlign: \"center\",\n                borderBottom: \"1px solid #BEBEBE\"}}>\n                {this.getTitleAreaContent()}\n            </Panel>,\n            contentArea,\n        ];\n    }\n\n    setTitle(newTitle) {\n        this.options.title = newTitle;\n        this.redraw();\n    }\n\n    getTitleAreaContent() {\n        return [<Button className=\"pull-right\" ref=\"closeButton\" style={{backgroundColor:\"transparent\",border: \"none\", color: \"#888888\", fontSize:\"18pt\", padding:\"2px\", marginRight:\"3px\", marginTop:\"-12px\"}} label=\"×\"/>,\n            <div style={{marginRight: \"25px\"}}>{this.options.title}</div>\n        ];\n    }\n\n    bindWindowListeners() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n\n        let documentListener = () => {\n            this.hide();\n            if (!Device.supportsEvent(\"click\")) {\n                document.removeEventListener(\"touchstart\", documentListener);\n            } else {\n                document.removeEventListener(\"click\", documentListener);\n            }\n        };\n        if (!Device.supportsEvent(\"click\")) {\n            document.addEventListener(\"touchstart\", documentListener);\n        } else {\n            document.addEventListener(\"click\", documentListener);\n        }\n\n    }\n\n    show() {\n        super.show();\n        this.bindWindowListeners();\n    }\n\n    redraw() {\n        if (this.isInDocument()) {\n            this.bindInsideParent();\n        }\n        super.redraw();\n    }\n\n    onMount() {\n        super.onMount();\n\n        // fake a click event that will propagate to window and trigger\n        // the events of any other popup, closing them\n        let fakeClickEvent = document.createEvent(\"MouseEvents\");\n        fakeClickEvent.initEvent(\"click\", true, false);\n        document.body.dispatchEvent(fakeClickEvent);\n\n        // Make the popup close when something else is clicked\n        this.bindWindowListeners();\n\n        // Close button behavior\n        this.closeButton.addClickListener(() => {\n            this.hide();\n            this.closeButton.node.blur();\n        });\n        let closeButtonColor = this.closeButton.options.style.color;\n        this.closeButton.addNodeListener(\"mouseover\", () => {\n            this.closeButton.setStyle(\"color\", \"#0082AD\");\n        });\n        this.closeButton.addNodeListener(\"mouseout\", () => {\n            this.closeButton.setStyle(\"color\", closeButtonColor);\n        });\n    }\n}\n","import {UI, Button, Link, Modal, Level, Size, Direction} from \"ui/UI\";\n\nimport {MarkupEditor} from \"./MarkupEditor\";\nimport {BasePopup} from \"../Popup\";\n\nUI.Emoji = UI.Emoji || UI.Element;\n\nclass ClickableEmote extends UI.Emoji {\n    redraw() {\n        this.redrawTimeout = setTimeout(()=> super.redraw());\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            const textBox = this.options.textBox;\n            if (textBox) {\n                textBox.appendValue(this.getValueText(), \" \");\n            }\n            if (this.options.afterClick) {\n                this.options.afterClick();\n            }\n        });\n    }\n\n    onUnmount() {\n        clearTimeout(this.redrawTimeout);\n    }\n}\n\nclass ClickableEmoji extends ClickableEmote {\n    getValueText() {\n        return \":\" + this.options.value + \":\";\n    }\n}\n\nclass ClickableTwitchEmote extends ClickableEmote {\n    getValueText() {\n        return this.options.value;\n    }\n}\n\nclass EmojiButton extends Button {\n    getPopup() {\n        const textBox = this.options.getTextBox();\n        const afterClick = () => this.closePopup();\n        let emotesList = [];\n        for (let emoji in EmojiMini.EMOJI) {\n            emotesList.push(<ClickableEmoji textBox={textBox} afterClick={afterClick} value={emoji}/>);\n        }\n        for (let twitchEmoji in EmojiMini.TWITCH_EMOTICONS) {\n            emotesList.push(<ClickableTwitchEmote textBox={textBox} afterClick={afterClick} value={twitchEmoji}/>);\n        }\n        return BasePopup.create(this.parent, {\n                target: this,\n                children: emotesList,\n                arrowDirection: Direction.DOWN,\n                style: {\n                    display: \"flex\",\n                    overflow: \"auto\",\n                    height: \"300px\",\n                    width: \"300px\",\n                }\n            });\n    }\n\n    closePopup() {\n        if (this.emojiPopup) {\n            this.emojiPopup.destroyNode();\n            delete this.emojiPopup;\n        }\n    }\n\n    onMount() {\n        this.addClickListener(() => {\n            if (this.emojiPopup) {\n                this.closePopup();\n            } else {\n                this.emojiPopup = this.getPopup();\n            }\n        })\n    }\n\n    onUnmount() {\n        this.closePopup();\n    }\n}\n\nclass MarkupEditorModal extends Modal {\n    getDefaultOptions() {\n        return Object.assign(super.getDefaultOptions(), {\n            height: \"85%\",\n            width: \"80%\",\n            destroyOnHide: false\n        });\n    }\n\n    getMarkupEditorStyle() {\n        return {\n            height: \"85%\",\n            border: \"solid 5px #DDD\",\n            borderRadius: \"10px\"\n        };\n    }\n\n    getButtonStyle() {\n        return {\n            margin: \"5px\"\n        }\n    }\n\n    render() {\n        return [\n            <MarkupEditor ref={this.refLink(\"markupEditor\")} classMap={this.options.classMap} showButtons={false} style={this.getMarkupEditorStyle()}/>,\n            <div ref={this.refLink(\"buttonPanel\")} style={{\"text-align\": \"center\"}} >\n                <Button ref=\"graphExample\" label=\"Graph\"\n                           onClick={() => {this.appendGraphExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"submissionExample\" label=\"Submission\"\n                           onClick={() => {this.appendSubmissionExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"codeSnippetExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Code\"\n                           onClick={() => {this.appendCodeExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"linkExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Link\"\n                           onClick={() => {this.appendLinkExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref=\"latexExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"LaTeX\"\n                           onClick={() => {this.appendLatexExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n                <Button ref={this.refLink(\"doneButton\")} level={Level.PRIMARY} label=\"Done\"\n                           className=\"pull-right\" style={this.getButtonStyle()}/>\n            </div>,\n            //<span ref={this.refLink(\"emotesContainer\")} style={{float: \"left\", position: \"relative\", margin: \"5px\"}}>\n            //    <EmojiButton ref=\"emotes\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"Emoticons\" getTextBox={() => this.markupEditor}/>\n            //</span>\n            //<Button ref=\"userExample\" level={Level.DEFAULT} size={Size.DEFAULT} label=\"User\"\n            //           onClick={() => {this.appendUserExample()}} style={this.getButtonStyle()} className=\"pull-left\"/>\n            <div className=\"\" style={{\"position\":\"absolute\", \"width\":\"90%\", \"margin-top\":\"45px\"}}>\n                <Link href=\"/about/#markup\" value=\"More details here\" />\n            </div>\n        ];\n    }\n\n    appendLatexExample() {\n        this.markupEditor.appendValue(\"$$lim_{x\\\\to\\\\infty} f(x)$$\");\n    }\n\n    appendGraphExample() {\n        this.markupEditor.appendValue(\"<Graph nodes={[{}, {}, {}]} edges={[{source:1, target:2}]} directed />\");\n    }\n\n    appendSubmissionExample() {\n        this.markupEditor.appendValue(\"<Submission id={25717} />\");\n    }\n\n    appendCodeExample() {\n        this.markupEditor.appendValue(\n            \"```java\\n\" +\n            \"class Main {\\n\" +\n            \"    public static void main (String[] args) throws java.lang.Exception {\\n\" +\n            \"        System.out.println(\\\"42\\\");\\n\" +\n            \"    }\\n\" +\n            \"}\\n\" +\n            \"```\");\n    }\n\n    appendUserExample() {\n        this.markupEditor.appendValue(\"<User id={1} />\");\n    }\n\n    appendLinkExample() {\n        this.markupEditor.appendValue(\"<Link href=\\\"https://csacademy.com\\\" value=\\\"Cool website\\\" newTab/>\");\n    }\n\n    hide() {\n        super.hide();\n        if (this.options.hideCallback) {\n            this.options.hideCallback(this);\n        }\n    }\n\n    show() {\n        super.show();\n        if (this.options.showCallback) {\n            this.options.showCallback(this);\n        }\n    }\n\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport {MarkupEditorModal};\n","import {MarkupClassMap, MarkupRenderer} from \"markup/MarkupRenderer\";\n\nclass ChatMarkupRenderer extends MarkupRenderer {\n    setOptions(options) {\n        options.classMap = this.constructor.classMap;\n        super.setOptions(options);\n    }\n}\n\nChatMarkupRenderer.classMap = new MarkupClassMap(MarkupClassMap.GLOBAL);\n\nexport {ChatMarkupRenderer};\n","import {StoreObject, GenericObjectStore} from \"state/Store\";\n\nclass Country extends StoreObject {\n    toString() {\n        return this.name;\n    }\n\n    getIsoCode() {\n        return this.isoCode;\n    }\n\n    getEmojiName() {\n        return \"flag_\" + this.getIsoCode().toLowerCase()\n    }\n}\n\nconst ALL_COUNTRIES_PLACEHOLDER = (name) => ({id: 0, name: \"\", toString: () => name || \"All Countries\"});\nconst NO_COUNTRY_PLACEHOLDER = (name) => ({id: -1, name: \"\", toString: () => name || \"None\"});\n\nconst COUNTRY_COMPARATOR = (a, b) => {\n    if (a.name > b.name) {\n        return 1;\n    }\n    return -1;\n};\n\nclass CountryStoreClass extends GenericObjectStore {\n    allWithNone(noneName=\"None\") {\n         return [\n            NO_COUNTRY_PLACEHOLDER(noneName),\n            ...this.all().sort(COUNTRY_COMPARATOR)\n        ];\n    }\n\n    getCountriesFromIds(countriesIds, allCountries=true) {\n        let countries = [];\n        for (let countryId of countriesIds) {\n            countries.push(CountryStore.get(countryId));\n        }\n        let result = countries.sort(COUNTRY_COMPARATOR);\n        if (allCountries) {\n            result.unshift(ALL_COUNTRIES_PLACEHOLDER());\n        }\n        return result;\n    }\n}\n\nconst CountryStore = new CountryStoreClass(\"country\", Country);\n\n\nexport {Country, CountryStore, ALL_COUNTRIES_PLACEHOLDER};\n","import {StoreObject, GenericObjectStore} from \"state/Store\";\n\nexport class SocialApp extends StoreObject {\n    getClientId() {\n        return this.clientId;\n    }\n}\n\nclass SocialAppStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"SocialApp\", SocialApp);\n    }\n\n    getSocialApps() {\n        return this.all();\n    }\n\n    getSocialAppByName(name) {\n        return this.all().find(socialApp => socialApp.name === name);\n    }\n}\n\nexport const SocialAppStore = new SocialAppStoreClass();\n","import {Ajax} from \"state/Ajax\";\nimport {Dispatchable} from \"state/Dispatcher\";\n\nclass SocialAccountManager extends Dispatchable {\n    constructor(socialApp, options) {\n        super();\n        this.socialApp = socialApp;\n        this.options = options;\n    }\n\n    getSocialApp() {\n        return this.socialApp;\n    }\n\n    getClientId() {\n        return this.getSocialApp().getClientId();\n    }\n\n    setLoaded() {\n        this.loaded = true;\n        this.dispatch(\"loaded\");\n    }\n\n    static getInstance() {\n        if (!this._Global) {\n            this._Global = new this();\n        }\n        return this._Global;\n    }\n\n    // TODO: all managers should call the onError function (if one is passed in) to report issues\n    static login(callback, onError) {\n        this.getInstance().login(...arguments);\n    }\n\n    static connect(callback, onError) {\n        this.getInstance().connect(...arguments);\n    }\n}\n\nexport {SocialAccountManager};\n","import {Ajax} from \"base/Ajax\";\nimport {NOOP_FUNCTION} from \"base/Utils\";\n\nimport {SocialAppStore} from \"state/SocialAppStore\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\n\nclass GoogleManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Google\"), {\n            loginByTokenUrl: \"/accounts/google/login/token/\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data, onSuccess=NOOP_FUNCTION) {\n        Ajax.postJSON(url, data).then(onSuccess);\n    }\n\n    ensureScriptNodeExists() {\n        const id = \"google-jsapi\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.onload = () => {\n            gapi.load(\"auth2\", () => {\n                gapi.auth2.init({\n                    client_id: this.getClientId(),\n                }).then(() => {\n                    // Handle the initial sign-in state.\n                    // this.updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n                    this.updateSigninStatus(this.getGoogleAuth().isSignedIn.get());\n\n                    // Listen for sign-in state changes.\n                    // gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n                    this.getGoogleAuth().isSignedIn.listen(this.updateSigninStatus);\n\n                    this.setLoaded();\n                });\n            });\n        };\n        scriptElement.src = \"https://apis.google.com/js/platform.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    getGoogleAuth() {\n        return gapi.auth2.getAuthInstance();\n    }\n\n    getGoogleUser() {\n        return this.getGoogleAuth().currentUser.get();\n    }\n\n    getAuthResponse() {\n        return this.getGoogleUser().getAuthResponse();\n    }\n\n    updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n            console.log(\"Google user is signed in\");\n        }\n    }\n\n    handleProcess(process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n        this.getGoogleAuth().grantOfflineAccess({\n            redirect_uri: \"postmessage\",\n            immediate: false,\n        }).then((data) => {\n            Object.assign(data, {\n                process: process,\n            });\n            this.sendData(this.options.loginByTokenUrl, data, () => self.location.reload());\n        });\n    }\n\n    login() {\n        this.handleProcess(\"login\");\n    }\n\n    connect() {\n        this.handleProcess(\"connect\")\n    }\n}\n\nexport {GoogleManager};\n","import {Ajax} from \"base/Ajax\";\nimport {SocialAppStore} from \"state/SocialAppStore\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\n\nclass FacebookManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Facebook\"), {\n            version: \"v2.7\",\n            loginByTokenUrl: \"/accounts/facebook/login/token/\",\n            loginOptions: {\n                auth_type: \"rerequest\",\n                scope: \"email\"\n            },\n            logoutUrl: \"/accounts/logout/\",\n            // TODO: should probably look at https://www.facebook.com/translations/FacebookLocales.xml and Language.Locale\n            locale: \"en_US\",\n        });\n        this.ensureScriptNodeExists();\n    }\n\n    sendData(url, data) {\n        Ajax.postJSON(url, data).then(\n            (data) => {\n                if (data.next) {\n                    self.location.href = data.next;\n                } else {\n                    location.reload();\n                }\n            },\n            (error) => {\n                this.dispatch(\"loginError\", error);\n            }\n        );\n    }\n\n    ensureScriptNodeExists() {\n        self.fbAsyncInit = () => {\n            FB.init({\n                appId: this.getClientId(),\n                version: this.options.version,\n                status: true,\n                cookie: true,\n                xfbml: true\n            });\n\n            this.setLoaded();\n        };\n\n        const id = \"facebook-jssdk\";\n        if (document.getElementById(id)) {\n            return;\n        }\n        let scriptElement = document.createElement(\"script\");\n        scriptElement.id = id;\n        scriptElement.async = true;\n        scriptElement.src = \"//connect.facebook.net/\" + this.options.locale + \"/sdk.js\";\n        document.getElementsByTagName(\"head\")[0].appendChild(scriptElement);\n    }\n\n    onLoginCanceled(response) {\n    }\n\n    onLoginError(response) {\n    }\n\n    onLoginSuccess(response, nextUrl, process) {\n        let data = {\n            next: nextUrl || '',\n            process: process,\n            accessToken: response.authResponse.accessToken,\n            expiresIn: response.authResponse.expiresIn\n        };\n        this.sendData(this.options.loginByTokenUrl, data);\n    }\n\n    logout() {\n        if (!self.FB) {\n            return;\n        }\n        FB.logout((response) => {\n            this.onLogoutSuccess(response, nextUrl);\n        });\n    }\n\n    onLogoutSuccess(response) {\n        if (this.options.logoutUrl) {\n            this.sendData(this.options.logoutUrl, data);\n        }\n    }\n\n    handleProcess(nextUrl, action, process) {\n        if (!this.loaded) {\n            this.addListenerOnce(\"loaded\", () => this.handleProcess(process));\n            return;\n        }\n\n        if (action === \"reauthenticate\") {\n            this.options.loginOptions.auth_type = action;\n        }\n\n        FB.login((response) => {\n            if (response.authResponse) {\n                this.onLoginSuccess(response, nextUrl, process);\n            } else if (response && response.status && [\"not_authorized\", \"unknown\"].indexOf(response.status) > -1) {\n                this.onLoginCanceled(response);\n            } else {\n                this.onLoginError(response);\n            }\n        }, this.options.loginOptions);\n    }\n\n    login(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"login\");\n    }\n\n    connect(nextUrl, action, process) {\n        this.handleProcess(nextUrl=self.location.pathname, action=\"authenticate\", process=\"connect\");\n    }\n}\n\nexport {FacebookManager};\n","import {composeURL} from \"base/Fetch\";\nimport {SocialAppStore} from \"state/SocialAppStore\";\nimport {SocialAccountManager} from \"SocialAccountManager\";\n\nclass GithubManager extends SocialAccountManager {\n    constructor() {\n        super(SocialAppStore.getSocialAppByName(\"Github\"), {\n            loginWindowOptions: \"height=600,width=800,scrollbars=yes\",\n        });\n    }\n\n    login(callback) {\n        const githubUri = \"https://github.com/login/oauth/authorize\";\n\n        const rawParams = {\n            client_id: this.getClientId(),\n        };\n\n        const uri = composeURL(githubUri, rawParams);\n        const githubWindow = window.open(uri, \"githubWindow\", this.options.loginWindowOptions);\n\n        githubWindow.onbeforeunload = callback;\n    }\n}\n\nexport {GithubManager};\n","import {StyleSheet, styleRule} from \"ui/UI\";\nimport {Device} from \"base/Device\";\n\n\nlet loginHeight = 500;\nlet registerHeight = 500;\nlet width = 500;\nlet buttonHeight = 60;\nlet fontAwesomeIconHeight = 40;\nlet fontAwesomeIconWidth = 60;\nlet textColor = \"#252525\";\nlet signInButtonHeight = 50;\nlet signInButtonWidth = 120;\n\n\nclass LoginStyle extends StyleSheet {\n\n    @styleRule\n    loginRegisterSystem = () => {\n        if (Device.isTouchDevice()) {\n            console.log(\"Touch device mode on\");\n            return {\n                position: \"absolute\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                backgroundColor: \"#fff\",\n                maxHeight: \"100%\",\n                maxWidth: \"100%\",\n            };\n        } else {\n            return {\n                maxWidth: \"100%\",\n                height: loginHeight + \"px\",\n                width: width + \"px\",\n                margin: \"0 auto\",\n                backgroundColor: \"#fff\",\n            };\n        }\n    };\n\n    @styleRule\n    loginRegisterButtons = {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"100%\",\n        height: buttonHeight / loginHeight * 100 + \"%\",\n    };\n\n    @styleRule\n    loginSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderLeft: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    @styleRule\n    registerSystemButton = {\n        // height: buttonHeight + \"px\",\n        height: \"100%\",\n        // lineHeight: buttonHeight / loginHeight * 100 + \"%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        textAlign: \"center\",\n        fontSize: \"100%\",\n        width: \"50%\",\n        backgroundColor: \"#f6f6f6\",\n        color: textColor,\n        border: \"1px solid #d3d5d9\",\n        cursor: \"pointer\",\n        float: \"left\",\n        borderRight: \"0\",\n        borderTop: \"0\",\n        textTransform: \"uppercase\",\n        fontSize: \"1.1em\",\n    };\n\n    selectedLeft = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedLeftClass = {\n        borderBottom: \"0\",\n        borderRight: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    selectedRight = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    selectedRightClass = {\n        borderBottom: \"0\",\n        borderLeft: \"0\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    loginWidget = {\n        height: loginHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    @styleRule\n    registerWidget = {\n        height: registerHeight - buttonHeight + \"px\",\n        width: width + \"px\",\n        maxWidth: \"100%\",\n        padding: \"5% 10%\",\n        color: textColor,\n        borderTop: \"0px solid #d3d5d9\",\n    };\n\n    fontAwesomeIcon = {\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        width: \"15%\",\n        maxWidth: \"15%\",\n        textAlign: \"center\",\n        fontSize: \"150%\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderTopLeftRadius: \"5px\",\n        borderBottomLeftRadius: \"5px\",\n        borderRight: \"0px solid white\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    input = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        height: fontAwesomeIconHeight + \"px\",\n        lineHeight: fontAwesomeIconHeight + \"px\",\n        display: \"inline-block\",\n        float: \"left\",\n        borderRadius: \"0\",\n        borderTopRightRadius: \"5px\",\n        borderBottomRightRadius: \"5px\",\n        marginTop: \"20px\",\n        fontWeight: \"bold\",\n        color: textColor,\n        border: \"0px solid #d3d5d9\",\n        borderLeft: \"0px solid white\",\n        boxShadow: \"none\",\n        fontSize: \"85%\",\n        \":focus\": {\n            boxShadow: \"none\",\n            outline: \"none\",\n            border: \"0px solid #d3d5d9\",\n            borderLeft: \"0px solid white\",\n        }\n    };\n\n    @styleRule\n    countrySelect = {\n        width: \"85%\",\n        maxWidth: \"85%\",\n        lineHeight: \"30px\",\n        marginTop: \"30px\",\n        marginBottom: \"10px\",\n    };\n\n    @styleRule\n    badLogin = {\n        height: \"30px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: this.themeProperties.COLOR_DANGER,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    rememberMe = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"5px\",\n    };\n\n    @styleRule\n    rememberMeCheckbox = {\n        float: \"left\"\n    };\n\n    @styleRule\n    forgotPassword = {\n        display: \"inline-block\",\n        float: \"right\",\n        paddingRight: \"5px\",\n    };\n\n    @styleRule\n    signInButtonContainer = {\n        width: \"100%\",\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        margin: \"20px auto\"\n    };\n\n    @styleRule\n    signInButton = {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#f6f6f6\",\n        marginTop: \"20px\",\n        minWidth: signInButtonWidth + \"px\",\n        height: signInButtonHeight + \"px\",\n        textAlign: \"center\",\n        lineHeight: signInButtonHeight + \"px\",\n        border: \"0px solid #d3d5d9\",\n        fontSize: \"18px\",\n        color: \"#252525\",\n        \":hover\": {\n            border: \"0px solid #0b79a7\",\n            borderBottom: \"2px solid #0b79a7\",\n            color: \"#0b79a7\",\n        }\n    };\n\n    @styleRule\n    horizontalLine = {\n        borderBottom: \"1px solid #d3d5d9\",\n        width: \"100%\",\n        marginTop: \"20px\",\n    };\n\n    connectWith = {\n        width: \"100%\",\n        textAlign: \"center\",\n        marginTop: \"20px\",\n    };\n\n    connectIcons = {\n        width: \"60%\",\n        marginLeft: \"20%\",\n        marginRight: \"20%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        marginTop: \"20px\",\n    };\n\n    @styleRule\n    faLogo = {\n        height: \"40px\",\n        paddingLeft: \"15px\",\n        paddingRight: \"15px\",\n        borderRadius: \"3px\",\n        textAlign: \"center\",\n        fontSize: \"18px\",\n        marginLeft: \"5px\",\n        marginRight: \"5px\",\n        transition: \".2s\",\n        color: \"#fff\",\n        \":hover\": {\n            transition: \".2s\",\n            opacity: \".9\",\n        },\n        cursor: \"pointer\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    recaptchaContainer = {\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n        flexDirection: \"column\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    connectWithButtonsSpan = {\n        paddingLeft: \"15px\",\n        fontSize: \"15px\",\n    };\n\n    @styleRule\n    thirdPartyLoginContainer = {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flexWrap: \"wrap\",\n        margin: \"15px 0\",\n    };\n\n    socialConnectDimensions = \"35px\";\n\n    @styleRule\n    socialConnectButtonContainer = {\n        display: \"flex\",\n        alignItems: \"center\",\n        height: this.socialConnectDimensions,\n        color: \"#fff\",\n        paddingRight: \"10px\",\n        borderRadius: \"5px\",\n        margin: \"5px\",\n        outline: \"none\",\n        paddingTop: \"0\",\n        cursor: \"pointer\",\n        fontSize: \"13px\",\n        border: \"0\",\n        \":hover\": {\n            opacity: \".85\",\n        }\n    };\n\n    @styleRule\n    socialConnectButtonIcon = {\n        height: this.socialConnectDimensions,\n        width: this.socialConnectDimensions,\n        display: \"flex !important\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n}\n\n\nexport {LoginStyle}\n","import {ensure} from \"base/Require\";\nimport {Ajax} from \"base/Ajax\";\nimport {\n    UI,\n    BasicTabTitle,\n    CheckboxInput,\n    EmailInput,\n    TextInput,\n    Link,\n    PasswordInput,\n    SubmitInput,\n    Switcher,\n    Select,\n    registerStyle,\n    TemporaryMessageArea,\n    Theme\n} from \"ui/UI\";\nimport {FAIcon} from \"ui/FontAwesome\";\n\nimport {CountryStore} from \"state/CountryStore\";\nimport {SocialAppStore} from \"state/SocialAppStore\";\nimport {GoogleManager} from \"./GoogleManager\";\nimport {FacebookManager} from \"./FacebookManager\";\nimport {GithubManager} from \"./GithubManager\";\nimport {LoginStyle} from \"./LoginStyle\";\n\nconst ERROR_TIMEOUT = 6 * 1000;\n\nconst accountsConfig = {\n    username: true,\n    country: true,\n};\n\nconst socialLoginSpecificInfo = {\n    Google: {\n        name: \"Google\",\n        color: \"#de4b39\",\n        icon: \"google-plus\",\n        loginManager: GoogleManager,\n    },\n    Facebook: {\n        name: \"Facebook\",\n        color: \"#3b5998\",\n        icon: \"facebook\",\n        loginManager: FacebookManager,\n    },\n    Github: {\n        name: \"Github\",\n        color: \"#000\",\n        icon: \"github\",\n        loginManager: GithubManager,\n    },\n};\n\n\n@registerStyle(LoginStyle)\nclass SocialConnectButton extends UI.Primitive(\"button\") {\n    extraNodeAttributes(attr) {\n        let {specificInfo} = this.options;\n\n        attr.addClass(this.styleSheet.socialConnectButtonContainer);\n        attr.setStyle({\n            backgroundColor: specificInfo.color,\n        });\n    }\n\n    getLoginManager() {\n        return this.options.specificInfo.loginManager.getInstance();\n    }\n\n    render() {\n        let {specificInfo} = this.options;\n\n        return [\n            <FAIcon icon={specificInfo.icon} className={this.styleSheet.socialConnectButtonIcon} />,\n            <span> {specificInfo.name}</span>\n        ];\n    }\n\n    onMount() {\n        // Access the login manager, to load any scripts needed by the social provider\n        // TODO: try to find a way to not load all provider scripts on the login page\n        this.getLoginManager();\n        this.addClickListener(() => {\n            const loginElement = this.options.loginElement;\n            loginElement && loginElement.clearErrorMessage();\n            this.getLoginManager().login();\n        });\n    }\n}\n\n@registerStyle(LoginStyle)\nclass ThirdPartyLogin extends UI.Element {\n    getSocialApps() {\n        return SocialAppStore.all();\n    }\n\n    getConnectWith() {\n        return (\n            <div style={this.styleSheet.connectWith}>\n                {UI.T(\"or connect with\")}\n            </div>\n        );\n    }\n\n    getConnectWithButtons() {\n        return (\n            <div className={this.styleSheet.thirdPartyLoginContainer}>\n                {\n                    this.getSocialApps().map(\n                        socialApp => <SocialConnectButton specificInfo={socialLoginSpecificInfo[socialApp.name]}\n                                                          loginElement={this.options.loginElement} />\n                    )\n                }\n            </div>\n        );\n    }\n\n    render() {\n        return [\n            this.getConnectWith(),\n            this.getConnectWithButtons(),\n        ];\n    }\n}\n\n@registerStyle(LoginStyle)\nexport class LoginWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginWidget);\n    }\n\n    getEmailInput(emailIcon=\"user\") {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon\n                    icon={emailIcon}\n                    style={this.styleSheet.fontAwesomeIcon}\n                />\n                <EmailInput\n                    autofocus=\"autofocus\"\n                    placeholder=\"Email address\"\n                    name=\"email\"\n                    ref=\"emailInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getPasswordInput(passwordInputOptions={}) {\n        passwordInputOptions = Object.assign({\n            name: \"password\",\n            className: this.styleSheet.input,\n            ref: \"passwordInput\",\n            placeholder: \"Password\",\n            style: {marginBottom: \"20px\"}\n        }, passwordInputOptions);\n        return [\n            <div style={{width: \"80% !important\",}}>\n                <FAIcon icon=\"lock\"\n                        style={this.styleSheet.fontAwesomeIcon}\n                />\n                <PasswordInput {...passwordInputOptions} />\n            </div>\n        ];\n    }\n\n    getRememberMeCheckbox() {\n        return [\n            <CheckboxInput checked={true}\n                              ref=\"rememberInput\" className={this.styleSheet.rememberMeCheckbox} />,\n            <div className={this.styleSheet.rememberMe}>{UI.T(\"Remember me\")}</div>,\n        ];\n    }\n\n    getForgotPassword() {\n        return <Link className={this.styleSheet.forgotPassword} href=\"/accounts/password_reset\"\n                     value={UI.T(\"Forgot Password?\")} />;\n    }\n\n    getClearBothArea() {\n        return <div style={{clear: \"both\", height: \"20px\"}}/>;\n    }\n\n    getErrorArea() {\n        return <TemporaryMessageArea className={this.styleSheet.badLogin} ref=\"loginErrorMessage\"/>;\n    }\n\n    getSignInValue() {\n        return \"Sign In\";\n    }\n\n    getSignInButton() {\n        return <div className={this.styleSheet.signInButtonContainer}>\n            <SubmitInput className={this.styleSheet.signInButton} value={this.getSignInValue()} />\n        </div>;\n    }\n\n    getHorizontalLine() {\n        return <div className={this.styleSheet.horizontalLine}>\n        </div>;\n    }\n\n    getThirdPartyLogin() {\n        return SocialAppStore.all().length ? [\n            this.getHorizontalLine(),\n            <ThirdPartyLogin loginElement={this}/>,\n        ]: null;\n    }\n\n    render() {\n\n        return [\n            <form ref=\"form\">\n                {this.getEmailInput()}\n                {this.getPasswordInput()}\n                {this.getRememberMeCheckbox()}\n                {this.getForgotPassword()}\n                {this.getSignInButton()}\n                {this.getClearBothArea()}\n                {this.getErrorArea()}\n            </form>,\n            this.getThirdPartyLogin(),\n        ];\n    }\n\n    setErrorMessage(error, isError=true) {\n        this.loginErrorMessage.showMessage(error.message, isError? Theme.Global.getProperty(\"COLOR_DANGER\") : \"#000\", ERROR_TIMEOUT);\n    }\n\n    clearErrorMessage() {\n        this.loginErrorMessage.clear();\n    }\n\n    sendLogin() {\n        this.clearErrorMessage();\n        const data = {\n            email: this.emailInput.getValue(),\n            password: this.passwordInput.getValue(),\n            remember: this.rememberInput.getValue()\n        };\n        Ajax.postJSON(\"/accounts/login/\", data).then(\n            () => location.reload(),\n            (error) => this.setErrorMessage(error)\n        );\n    }\n\n    onMount() {\n        if (this.form) {\n            this.form.addNodeListener(\"submit\", (event) => {\n                this.sendLogin();\n                event.preventDefault();\n            });\n        }\n    }\n}\n\n\nclass RecaptchaWidget extends UI.Element {\n    render() {\n        return <div key={Math.random()} />;\n    }\n\n    redraw() {\n        super.redraw();\n\n        if (window.grecaptcha && window.GOOGLE_RECAPTCHA_PUBLIC_KEY) {\n            this.captchaId = grecaptcha.render(this.children[0].node, {\n                \"sitekey\": window.GOOGLE_RECAPTCHA_PUBLIC_KEY,\n            });\n        }\n    }\n\n    getResponse() {\n        return grecaptcha.getResponse(this.captchaId);\n    }\n\n    onMount() {\n        window.onRecaptchaCallback = () => this.redraw();\n\n        ensure(\"https://www.google.com/recaptcha/api.js?render=explicit&onload=onRecaptchaCallback\", () => {});\n    }\n}\n\n\n@registerStyle(LoginStyle)\nexport class RegisterWidget extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerWidget);\n    }\n\n    getSignUpButton() {\n        return  <div className={this.styleSheet.signInButtonContainer}>\n                    <SubmitInput className={this.styleSheet.signInButton} value=\"Sign Up\" ref=\"submitButton\"/>\n                </div>;\n    }\n\n    getUsernameInput() {\n        return [\n            <div style={{width: \"100%\",}}>\n                <FAIcon icon=\"user\"\n                        style={this.styleSheet.fontAwesomeIcon}/>\n                <TextInput\n                    placeholder=\"Username\"\n                    ref=\"usernameInput\"\n                    className={this.styleSheet.input}\n                />\n            </div>\n        ];\n    }\n\n    getCountryInput() {\n        return [\n            <div style={{width: \"100%\", marginBottom: \"20px\"}}>\n                <FAIcon icon=\"flag\" style={this.styleSheet.fontAwesomeIcon} />\n                <Select ref=\"countrySelect\" options={CountryStore.allWithNone(\"Don't set country\")}\n                        className={this.styleSheet.countrySelect} />\n                <div style={{clear: \"both\"}}/>\n            </div>\n        ];\n    }\n\n    render() {\n        let formFields = [\n            this.getEmailInput(),\n            this.getPasswordInput()\n        ];\n        if (accountsConfig.username) {\n            formFields.splice(1, 0, this.getUsernameInput());\n            formFields[0] = this.getEmailInput(\"envelope\");\n        }\n        if (accountsConfig.country) {\n            formFields[formFields.length - 1] = this.getPasswordInput({style: {}});\n            formFields.push(this.getCountryInput());\n        }\n        // TODO: This should be done in another way.\n        if (window.location.hostname !== \"localhost\") {\n            this.recaptchaWidget = <RecaptchaWidget />\n        }\n        return [\n            <form ref=\"form\">\n                {formFields}\n                <div className={this.styleSheet.recaptchaContainer}>\n                    {this.recaptchaWidget}\n                    {this.getSignUpButton()}\n                    <TemporaryMessageArea ref=\"errorArea\" />\n                </div>\n            </form>\n        ];\n    }\n\n    sendRegistration() {\n        this.submitButton.updateOptions({value: \"Signing up...\"});\n\n        const data = {\n            email: this.emailInput.getValue(),\n            recaptchaKey: this.recaptchaWidget && this.recaptchaWidget.getResponse(),\n            password: this.passwordInput.getValue(),\n        };\n        if (this.usernameInput) {\n            data.username = this.usernameInput.getValue();\n        }\n        if (this.countrySelect) {\n           data.countryId = this.countrySelect.get().id;\n        }\n        Ajax.postJSON(\"/accounts/signup_request/\", data).then(\n            () => {\n                this.recaptchaWidget && this.recaptchaWidget.hide();\n                this.submitButton.hide();\n                this.errorArea.showMessage(\"Done! Please check your email to continue\", \"black\", 26 * 60 * 60 * 1000);\n            },\n            (error) => {\n                this.errorArea.showMessage(\"Error in registration: \" + error.message, \"red\", 4000);\n                this.submitButton.updateOptions({value: \"Sign Up\"});\n                this.recaptchaWidget && this.recaptchaWidget.redraw();\n            }\n        );\n    }\n\n    onMount() {\n        this.form.addNodeListener(\"submit\", (event) => {\n            event.preventDefault();\n            this.sendRegistration();\n        })\n    }\n}\n\nRegisterWidget.prototype.getEmailInput = LoginWidget.prototype.getEmailInput;\nRegisterWidget.prototype.getPasswordInput = LoginWidget.prototype.getPasswordInput;\nRegisterWidget.prototype.getHorizontalLine = LoginWidget.prototype.getHorizontalLine;\n\n\n// original name: LoginRegisterSystem\n@registerStyle(LoginStyle)\nclass NormalLogin extends UI.Element {\n    constructor() {\n        super();\n\n        this.state = 0;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginRegisterSystem);\n    }\n\n    getLoginButton() {\n        let style = {};\n\n        if (this.state === 0) {\n            style = this.styleSheet.selectedLeft;\n        }\n\n        return <div className={this.styleSheet.loginSystemButton}\n                    style={style}\n                    ref=\"loginButton\">\n            {UI.T(\"Log In\")}\n        </div>\n    }\n\n    getRegisterButton() {\n        let style = {};\n\n        if (this.state === 1) {\n            style = this.styleSheet.selectedRight;\n        }\n\n        return <div className={this.styleSheet.registerSystemButton}\n                    style={style}\n                    ref=\"registerButton\">\n            {UI.T(\"Sign Up\")}\n        </div>\n    }\n\n    render() {\n        let result = [\n            <div className={this.styleSheet.loginRegisterButtons}>\n                {this.getLoginButton()}\n                {this.getRegisterButton()}\n            </div>,\n            <Switcher ref=\"switcher\">\n                <LoginWidget ref=\"loginWidget\" active={this.state === 0} />\n                <RegisterWidget ref=\"registerWidget\" active={this.state === 1} />\n            </Switcher>\n        ];\n\n        return result;\n    }\n\n    onMount() {\n        this.loginButton.addClickListener(() => {\n            this.state = 0;\n            this.switcher.setActive(this.loginWidget);\n            this.redraw();\n        });\n\n        this.registerButton.addClickListener(() => {\n            this.state = 1;\n            this.switcher.setActive(this.registerWidget);\n            this.redraw();\n        });\n    }\n}\n\n\n@registerStyle(LoginStyle)\nclass LoginTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Log In\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.loginSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedLeftClass);\n        }\n    }\n}\n\n@registerStyle(LoginStyle)\nclass RegisterTabButton extends UI.Primitive(BasicTabTitle, \"div\") {\n    getDefaultOptions() {\n        return {\n            children: [UI.T(\"Register\")]\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.registerSystemButton);\n        if (this.options.active) {\n            attr.addClass(this.styleSheet.selectedRightClass);\n        }\n    }\n}\n\n\nclass Login extends UI.Element {\n    render() {\n        return [\n            <NormalLogin/>,\n        ];\n    }\n}\n\nexport {Login};\n","import {UI, Modal} from \"ui/UI\";\nimport {Login} from \"Login\";\nimport {Device} from \"base/Device\";\n\nclass LoginModal extends Modal {\n    getModalWindowStyle() {\n        if (Device.isTouchDevice()) {\n            return {\n                position: \"relative\",\n                padding: \"0\",\n                boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n                // margin: \"60px auto\",\n                display: this.options.display || \"block\",\n                left: \"0\",\n                right: \"0\",\n                width: \"100vw\",\n                height: \"600px\",\n                background: \"white\",\n                overflow: this.options.overflow || \"auto\",\n                maxHeight: \"100%\",\n                maxWidth: \"500px\",\n                verticalAlign: \"center\",\n                margin: \"0 auto\",\n            }\n        }\n        return {\n            position: \"relative\",\n            padding: \"0\",\n            boxShadow: \"0 5px 15px rgba(0,0,0,0.5)\",\n            margin: \"60px auto\",\n            display: this.options.display || \"block\",\n            maxHeight: this.options.maxHeight || \"85%\",\n            left: \"0\",\n            right: \"0\",\n            width: \"500px\",\n            height: this.options.height || \"600px\",\n            background: \"white\",\n            overflow: this.options.overflow || \"auto\",\n        };\n    }\n\n    render() {\n        return <Login/>;\n    }\n\n    static requireLogin(func) {\n        if (USER.isAuthenticated) {\n            return func();\n        } else {\n            this.show();\n        }\n    }\n}\n\nexport {LoginModal};\n","import {StyleSheet, styleRule, Orientation} from \"ui/UI\";\n\nclass VotingWidgetStyle extends StyleSheet {\n    height = 40;\n    size = 1;\n    likeColor = this.options.likeColor || \"#1E8921\"; //            |\n    dislikeColor = this.options.dislikeColor || \"#C5302C\"; //      |- Triadic colors + Shades\n    notVoteColor = this.options.notVoteColor || \"#313534\";\n    balanceColor = this.options.balanceColor || \"#313534\";\n    orientation = Orientation.VERTICAL;\n\n    @styleRule\n    container = {\n        height: \"40px\",\n        width: \"100%\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    mainClass = {\n        height: \"40px\",\n        lineHeight: \"40px\",\n        fontSize: \"14px\",\n        color: \"#767676\",\n        display: \"inline-block\",\n        float: \"right\",\n        textAlign: \"right\",\n    };\n\n    thumbsStyle = {\n        fontSize: this.height / 2 + \"px\",\n        lineHeight: this.height + \"px\",\n    };\n\n    @styleRule\n    displayStyle = {\n        display: \"inline-block\",\n        float: \"left\",\n        paddingLeft: \"3px\",\n    };\n\n    counterStyle = {\n        fontSize: 18 * this.size + \"px\",\n        fontWeight: \"900\",\n        color: this.balanceColor,\n    };\n\n    @styleRule\n    thumbsUpHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.likeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    thumbsDownHoverStyle = {\n        transition: \".25s\",\n        \":hover\": {\n            color: this.dislikeColor,\n            opacity: \".8\",\n            transition: \".25s\",\n        }\n    };\n\n    @styleRule\n    padding = {\n        width: \"3px\",\n        float: \"left\",\n        display: \"inline-block\",\n        height: this.height + \"px\",\n    };\n}\n\nexport {VotingWidgetStyle}","import {UI, registerStyle, Orientation, VoteStatus} from \"ui/UI\";\n\nimport {LoginModal} from \"LoginModal\";\nimport {UserReactionCollection} from \"state/UserReactionStore\";\nimport {VotingWidgetStyle} from \"./VotingWidgetStyle\";\n\nclass VotingWidget extends UI.Element {\n    setOptions(options) {\n        options = Object.assign({\n            votesBalance: 0,\n            userVote: VoteStatus.NONE,\n            size: 1,\n            likeColor: this.options.likeColor || \"#1E8921\", //            |\n            dislikeColor: this.options.dislikeColor || \"#C5302C\", //      |- Triadic colors + Shades\n            notVoteColor: this.options.notVoteColor || \"#313534\",\n            balanceColor: this.options.balanceColor || \"#313534\",\n            orientation: Orientation.VERTICAL,\n        }, options);\n        super.setOptions(options);\n    }\n\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            textAlign: \"center\",\n            marginRight: \"10px\",\n        });\n    }\n\n    render() {\n        let buttonsStyle = {\n            paddingLeft: \"4px\",\n            paddingRight: \"4px\",\n            paddingTop: \"0px\",\n            paddingBottom: \"0px\",\n            lineHeight: \"0px\",\n            backgroundColor: \"transparent\",\n            borderColor: \"transparent\",\n            fontSize: 40 * this.options.size + \"px\",\n            marginTop: 8 * this.options.size + \"px\",\n            marginBottom: 8 * this.options.size + \"px\",\n            display: this.options.orientation === Orientation.VERTICAL ? \"block\" : \"inline-block\",\n            marginLeft: \"auto\",\n            marginRight: \"auto\",\n            opacity: 0.7,\n            cursor: \"pointer\",\n            color: this.options.notVoteColor,\n        };\n\n        let likeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = this.options.likeColor;\n        }\n\n        let dislikeButtonStyle = Object.assign({}, buttonsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = this.options.dislikeColor;\n        }\n\n        let counterStyle = {\n            fontSize: 18 * this.options.size + \"px\",\n            fontWeight: \"900\",\n            \"color\": this.options.balanceColor,\n        };\n\n        return [\n            <span className=\"fa fa-caret-up voteButton\" ref=\"likeButton\"\n                       faIcon=\"caret-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <span ref=\"counterContainer\" style={counterStyle}>\n                <UI.TextElement ref=\"counter\" value={this.getVotesBalance() + \"\"}/>\n            </span>,\n            <span className=\"fa fa-caret-down voteButton\" ref=\"dislikeButton\"\n                       faIcon=\"caret-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n\n    getVotesBalance() {\n        return this.options.votesBalance;\n    }\n\n    getUserVote() {\n        return this.options.userVote;\n    }\n}\n\nclass CommentVotingWidget extends VotingWidget {\n    getVotesBalance() {\n        return this.options.message.getVotesBalance();\n    }\n\n    getUserVote() {\n        return this.options.message.getUserVote();\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.updateTarget(this.options.message);\n    }\n\n    updateTarget(target) {\n        if (!target || target instanceof UserReactionCollection) {\n            this.options.target = target;\n            return;\n        }\n        const possibleTarget = target.getReactionCollection();\n        if (possibleTarget) {\n            this.options.target = possibleTarget;\n            return;\n        }\n        let tempListener = this.attachEventListener(target, \"createReactionCollection\", () => {\n            this.updateOptions({target: target.getReactionCollection()});\n            this.setupListener();\n            tempListener.remove();\n        });\n    }\n\n    setupListener() {\n        let target = this.options.target;\n        if (target) {\n            this.attachUpdateListener(target, () => {\n                this.redraw();\n            })\n        }\n    }\n\n\n    onMount() {\n        this.setupListener();\n        this.likeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.LIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.like();\n            }\n        });\n        this.dislikeButton.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (this.getUserVote() === VoteStatus.DISLIKE) {\n                this.options.message.resetReaction();\n            } else {\n                this.options.message.dislike();\n            }\n        });\n\n        this.options.message.addListener(\"reaction\", () => {\n            this.redraw();\n        });\n    }\n}\n\n// TODO: rewrite\n@registerStyle(VotingWidgetStyle)\nclass CommentVotingWidgetWithThumbs extends CommentVotingWidget {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.container);\n    }\n\n    getNumLikes() {\n        return this.options.message.getNumLikes();\n    }\n\n    getNumDislikes() {\n        return this.options.message.getNumDislikes();\n    }\n\n    render() {\n        let thumbsUpScoreStyle = {};\n        let thumbsDownScoreStyle = {};\n\n        // TODO: remove duplicate code\n        let likeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.LIKE) {\n            likeButtonStyle.color = thumbsUpScoreStyle.color = this.options.likeColor;\n            thumbsUpScoreStyle.fontWeight = \"bold\";\n        }\n\n        let dislikeButtonStyle = Object.assign({}, this.styleSheet.thumbsStyle);\n        if (this.getUserVote() === VoteStatus.DISLIKE) {\n            dislikeButtonStyle.color = thumbsDownScoreStyle.color = this.options.dislikeColor;\n            thumbsDownScoreStyle.fontWeight = \"bold\";\n        }\n\n        return [\n            <span className={this.styleSheet.displayStyle} style={thumbsUpScoreStyle}>{this.getNumLikes()}</span>,\n            <span className={\"fa fa-thumbs-up voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsUpHoverStyle} ref=\"likeButton\" faIcon=\"thumbs-up\" style={likeButtonStyle} HTMLtitle=\"Click to like\"/>,\n            <div className={this.styleSheet.padding} />,\n            <span className={this.styleSheet.displayStyle} style={thumbsDownScoreStyle}>{this.getNumDislikes()}</span>,\n            <span className={\"fa fa-thumbs-down voteButton \" + this.styleSheet.displayStyle + \" \" + this.styleSheet.thumbsDownHoverStyle} ref=\"dislikeButton\" faIcon=\"thumbs-down\" style={dislikeButtonStyle} HTMLtitle=\"Click to dislike\"/>,\n        ];\n    }\n}\n\nexport {VotingWidget, CommentVotingWidget, CommentVotingWidgetWithThumbs};","import {StyleSheet, styleRule} from \"ui/UI\";\n\n\nexport class ChatStyle extends StyleSheet {\n    navbarHeight = \"50px\";\n    renderMessageHeight = \"100px\";\n\n    userFontSize = \"1.1em\";\n    commentFontSize = \"1.1em\";\n\n    backgroundColor = \"#fff\";\n    hrBackgroundColor = \"#ddd\";\n    hoverBackgroundColor = \"#f8f8f8\";\n\n    @styleRule\n    renderMessageView = {\n        height: \"100%\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n        wordBreak: \"break-word\",\n    };\n\n    @styleRule\n    renderMessage = {\n        height: this.renderMessageHeight,\n        maxHeight: this.renderMessageHeight,\n        width: \"100%\",\n        borderTop: \"1px solid \" + this.hrBackgroundColor,\n        backgroundColor: this.backgroundColor,\n        position: \"relative\",\n    };\n\n    @styleRule\n    chatInput = {\n        height: \"100%\",\n        width: \"calc(100% - 50px)\",\n        // \"line-height\": \"30px\",\n        paddingTop: \"0\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        paddingLeft: \"8px\",\n        border: \"0px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"inline-block\",\n        float: \"left\",\n        outline: \"none\",\n        position: \"absolute\",\n        \":focus\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n        \":active\": {\n            outline: \"none\",\n            boxShadow: \"none\",\n        },\n    };\n\n    @styleRule\n    messageBoxButton = {\n        textAlign: \"center\",\n        flex: \"1\",\n        backgroundColor: \"#fff\",\n        border: \"0\",\n        fontSize: \"18px\",\n        transition: \".2s\",\n        color: \"#333\",\n        padding: \"0\",\n        \":hover\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n            transition: \".2s\",\n            outline: \"none\",\n        },\n        \":focus:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n        \":hover:active\": {\n            backgroundColor: \"transparent\",\n            color: \"#2089b5\",\n        },\n    };\n\n    previewButton = { // TODO: This is currently not restyled.\n        // We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"30px\",\n        borderRadius: \"100%\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n        textTransform: \"uppercase\",\n        marginTop: \"15px\",\n    };\n\n    @styleRule\n    messageTimeStampHr = {\n        height: \"1px\",\n        marginTop: \"1.5em\",\n        marginBottom: \"1.5em\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        backgroundColor: this.hrBackgroundColor,\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    messageTimeStamp = {\n        height: \"1.5em\",\n        width: \"auto\",\n        paddingLeft: \"10px\",\n        paddingRight: \"10px\",\n        backgroundColor: this.backgroundColor,\n        textAlign: \"center\",\n        color: \"#222\",\n        fontWeight: \"bold\",\n    };\n\n    @styleRule\n    groupChatMessage = {\n        width: \"100%\",\n        backgroundColor: \"#fff\",\n    };\n\n    @styleRule\n    comment = {\n        paddingLeft: \"12px\",\n        paddingRight: \"12px\",\n        paddingTop: \"12px\",\n        paddingBottom: \"12px\",\n        \":hover\": {\n            backgroundColor: this.hoverBackgroundColor,\n        },\n    };\n\n    @styleRule\n    userHandle = {\n        fontSize: this.userFontSize,\n    };\n\n    @styleRule\n    commentContent = {\n        \" p\": {\n            marginTop: \"0\",\n            marginBottom: \"0\",\n            fontSize: this.commentFontSize,\n            color: \"#454545\",\n            // textAlign: \"justify\",\n            wordWrap: \"break-word\",\n        },\n    };\n\n    @styleRule\n    timestamp = {\n        color: \"#262626\",\n        fontWeight: \"bold\",\n        margin: \"0 10px\",\n    };\n}\n","import {Ajax} from \"base/Ajax\";\nimport {Pluginable} from \"base/Plugin\";\nimport {GlobalState} from \"state/State\";\nimport {StemDate, isDifferentDay} from \"time/Time\";\nimport {UI, Switcher, AjaxButton, TextArea, Button, ButtonGroup, Panel, InfiniteScrollable, registerStyle, Level, Size} from \"ui/UI\";\nimport {ButtonStyle} from \"ui/button/ButtonStyle\";\nimport {InputStyle} from \"ui/input/Style\";\n\nimport {MessageThreadStore, MessageInstanceStore, GroupChatStore} from \"state/MessageThreadStore\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatStyle} from \"ChatStyle\";\n\nButtonStyle.getInstance().ensureFirstUpdate();\nInputStyle.getInstance().ensureFirstUpdate();\n\nclass PreviewMarkupButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            MarkupEditorModal.show({\n                classMap: ChatMarkupRenderer.classMap,\n                showCallback: (modal) => {modal.markupEditor.setValue(this.options.getValue());\n                                          modal.markupEditor.codeEditor.getAce().focus();},\n                hideCallback: (modal) => {this.options.setValue(modal.markupEditor.getValue());}\n            });\n        });\n    }\n}\n\nclass EditableMessage extends UI.Element {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: true,\n        });\n    }\n\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    render() {\n        return [<Button ref=\"editButton\" onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</Button>,\n            <Switcher ref=\"contentSwitcher\">\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>\n        ];\n    }\n\n    showEditMode() {\n        if (!this.editContent) {\n            let writingSectionStyle = {\n                \"margin-top\": \"5px\"\n            };\n            let chatInputStyle = {\n                overflow: \"auto\",\n                height: \"60px\",\n                width: \"100%\",\n            };\n\n            this.editContent = <div style={writingSectionStyle}>\n                <TextArea ref={this.refLink(\"messageInput\")} style={chatInputStyle} className=\"form-control\"\n                             value={this.message.getContent()}/>\n                <ButtonGroup>\n                    <Button label={UI.T(\"Cancel\")} level={Level.DEFAULT} size={Size.SMALL}\n                               onClick={() => {this.hideEditMode()}} />\n                    <PreviewMarkupButton size={Size.SMALL}\n                                         getValue={() => {return this.messageInput.getValue();}}\n                                         setValue={(value) => {this.messageInput.setValue(value);this.messageInput.node.focus();}}\n                    />\n                    <Button label={UI.T(\"Save changes\")} level={Level.PRIMARY}\n                               onClick={() => this.saveMessageChanges()} size={Size.SMALL} />\n                    {this.options.deletable ? <Button level={Level.DANGER} label={UI.T(\"Delete\")} size={Size.SMALL}\n                                                         onClick={() => this.deleteMessage()}/> : \"\"}\n                </ButtonGroup>\n            </div>;\n        } else {\n            this.messageInput.setValue(this.message.getContent());\n        }\n\n        if (!this.contentSwitcher.hasChild(this.editContent)) {\n            this.contentSwitcher.appendChild(this.editContent);\n        }\n        this.contentSwitcher.setActive(this.editContent);\n    }\n\n    hideEditMode() {\n        this.contentSwitcher.setActive(this.contentContainer);\n    }\n\n    toggleEditMode() {\n        if (this.contentSwitcher.getActive() === this.contentContainer) {\n            this.showEditMode();\n        } else {\n            this.hideEditMode();\n        }\n    }\n\n    saveMessageChanges() {\n        let content = this.messageInput.getValue();\n\n        if (content) {\n            this.message.edit(content, () => {\n                this.hideEditMode();\n            });\n        }\n    }\n\n    deleteMessage() {\n        if (this.options.deletable) {\n            this.message.deleteMessage();\n        }\n    }\n\n    onMount() {\n        this.message.addListener(\"edit\", () => {\n            this.content.setValue(this.message.getContent());\n            this.redraw();\n        });\n\n        this.message.addListener(\"delete\", () => {\n            // TODO: refactor this, should delete message, not hide\n            this.hide();\n        });\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass GroupChatMessage extends EditableMessage {\n    setOptions(options) {\n        super.setOptions(options);\n        if (this.message.hasTemporaryId()) {\n            // TODO: this can also happen when editing a message, another case for later\n            this.message.addListener(\"postError\", () => {\n                this.redraw();\n            });\n            this.message.addListener(\"updateId\", () => {\n                // TODO: we might need to updated our position here\n                this.options.key = this.message.id;\n            })\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.groupChatMessage);\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    render() {\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n        // if (USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\"}, this.styleSheet.timestamp)}\n                            onClick={() => this.toggleEditMode()}>{UI.T(\"Edit\")}</a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStampHr}>\n                <div className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        return [\n            date,\n            <div className={this.styleSheet.comment}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {editButton}\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n    }\n}\n\n\n@registerStyle(ChatStyle)\nclass PrivateChatMessage extends Panel {\n    setOptions(options) {\n        super.setOptions(options);\n        this.message = options.message;\n    }\n\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.groupChatMessage);\n        return attr;\n    }\n\n    shouldShowDayTimestamp() {\n        let lastMessage = this.options.message.getPreviousMessage();\n        return !lastMessage || isDifferentDay(lastMessage.timeAdded, this.options.message.timeAdded);\n    }\n\n    isOwnMessage() {\n        return this.message.userId === USER.id;\n    }\n\n    render() {\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <span ref=\"contentContainer\" style={{\"white-space\": \"pre-line\"}}>\n                    {this.message.hasMarkupEnabled() ?\n                        <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.message.getContent()}\n                                           style={{height:\"auto\"}} /> :\n                        <UI.TextElement ref=\"content\" value={this.message.getContent()}/>\n                    }\n                </span>\n            </Switcher>;\n        }\n\n        let date = null;\n        if (this.shouldShowDayTimestamp()) {\n            date = <div className={this.styleSheet.messageTimeStampHr}>\n                <div ref=\"dayTimestamp\" className={this.styleSheet.messageTimeStamp}>\n                    {StemDate.unix(this.message.timeAdded).format(\"dddd, MMMM Do\")}\n                </div>\n            </div>;\n        }\n\n        let errorElement = null;\n        if (this.message.postError) {\n            errorElement = <span ref=\"errorArea\" style={{marginLeft: \"1rem\"}} className=\"fa fa-warning\"\n                                 HTMLTitle={\"Error: \" + this.message.postError}/>;\n        }\n\n        let content = [\n            <div className={this.styleSheet.comment} style={{margin: \"8px 16px\", backgroundColor: \"#eee\",}}>\n                <UserHandle userId={this.message.userId} className={this.styleSheet.userHandle} />\n                <span className={this.styleSheet.timestamp}>{this.message.getTimeOfDay()}</span>\n                {errorElement}\n                <div className={this.styleSheet.commentContent}>\n                    {this.contentSwitcher}\n                </div>\n            </div>\n        ];\n\n        let paddingDiv = <div style={{flexGrow: \"1000000\"}} />;\n\n        let result;\n        if (this.isOwnMessage()) {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {paddingDiv}\n                    {content}\n                </div>\n            ];\n        } else {\n            result = [\n                date,\n                <div style={{\n                    display: \"flex\",\n                }}>\n                    {content}\n                    {paddingDiv}\n                </div>\n            ];\n        }\n\n        return result;\n    }\n}\n\n\nclass ChatMessageScrollSection extends InfiniteScrollable {\n    setOptions(options) {\n        options = Object.assign({\n            entryComparator: (a, b) => {\n                return a.getNormalizedId() - b.getNormalizedId();\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    getTopMessage() {\n        return this.children[1];\n    }\n}\n\n\nlet ChatWidget = (ChatMessageClass) => {\n    @registerStyle(ChatStyle)\n    class ChatWidgetClass extends Pluginable(Panel) {\n        getDefaultOptions(options) {\n            return {\n                dateTimestamps: true,\n                renderMessage: (messageInstance) => {\n                    return <ChatMessageClass key={messageInstance.getNormalizedId()} message={messageInstance} />;\n                }\n            };\n        }\n\n        get messageThread() {\n            return this.options.messageThread;\n        }\n\n        setOptions(options) {\n            super.setOptions(options);\n            this.initializeShowLoadMoreButton();\n        }\n\n        extraNodeAttributes(attr) {\n            super.extraNodeAttributes(attr);\n            attr.setStyle({\n                display: \"flex\",\n                flexDirection: \"column\",\n            });\n        }\n\n        canOverwrite() {\n            return false;\n        }\n\n        initializeShowLoadMoreButton() {\n            // TODO: this is a shitty way of knowing if there are more messages!\n            if (this.messageThread.getNumMessages() >= 20) {\n                this.showLoadMoreButton = true;\n            }\n        }\n\n        createVirtualMessage(request, message) {\n            let virtualId = this.messageThread.getMaxMessageId() + \"-\" + MessageInstanceStore.generateVirtualId() + \"-\" + Math.random();\n            let virtualMessageInstance = MessageInstanceStore.createVirtualMessageInstance(message, this.messageThread, virtualId);\n            request.virtualId = virtualId;\n            return virtualMessageInstance;\n        }\n\n        sendMessage(message) {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            let request = Object.assign({}, this.options.baseRequest || {});\n\n            message = message || this.chatInput.getValue();\n            message = message.trim();\n\n            if (!message) {\n                return;\n            }\n            request.message = message;\n\n            // Create a virtual message to be drawn temporarily\n            let virtualMessageInstance = this.createVirtualMessage(request, message);\n\n            let onSuccess = (data) => {\n                if (data.error) {\n                    virtualMessageInstance.setPostError(data.error);\n                    return;\n                }\n                if (virtualMessageInstance && virtualMessageInstance.hasTemporaryId()) {\n                    MessageInstanceStore.applyUpdateObjectId(virtualMessageInstance, data.messageId);\n                    GlobalState.importState(data.state);\n                }\n            };\n\n            let onError = (error) => {\n                if (virtualMessageInstance) {\n                    virtualMessageInstance.setPostError(42);\n                }\n                console.log(\"Error in sending chat message:\\n\" + error.message);\n                console.log(error.stack);\n            };\n\n            this.messageWindow.scrollToBottom();\n\n            this.chatInput.setValue(\"\");\n            this.chatInput.dispatch(\"messageSent\");\n\n            Ajax.postJSON(this.getPostURL(), request, {disableStateImport: true}).then(onSuccess, onError);\n        }\n\n        saveScrollPosition() {\n            this.scrollPosition = this.messageWindow.node.scrollTop;\n            this.scrollPercent = this.scrollPosition / (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n        }\n\n        applyScrollPosition() {\n            this.messageWindow.node.scrollTop = this.scrollPosition || this.messageWindow.node.scrollHeight;\n            this.chatInput.node.focus();\n        }\n\n        addResizeListeners() {\n            this.messageWindow.addNodeListener(\"scroll\", () => {\n                let scrollTop = this.messageWindow.node.scrollTop;\n                if (scrollTop < 20) {\n                    this.loadMoreMessages();\n                }\n            });\n\n            this.addListener(\"hide\", () => {this.saveScrollPosition();});\n            this.addListener(\"show\", () => {this.applyScrollPosition();});\n\n            window.addEventListener(\"resize\", () => {\n                this.saveScrollPosition();\n                this.setAdaptiveHeight();\n            });\n\n            this.addListener(\"resize\", () => {\n                this.setAdaptiveHeight();\n                this.messageWindow.node.scrollTop = this.scrollPercent * (this.messageWindow.node.scrollHeight - this.messageWindow.node.clientHeight);\n            });\n        }\n\n        getDesiredHeight() {\n            if (this.options.style && this.options.style.height) {\n                return this.options.style.height;\n            }\n            let viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            let navbarHeight = document.getElementById(\"navbar\").offsetHeight; // use offsetHeight to accommodate padding and margin\n\n            let availableHeight = viewportHeight - navbarHeight - (this.options.extraHeightOffset || 25);\n            return Math.max(availableHeight || 0, 100) + \"px\"; // it needs at least 100px\n        }\n\n        setAdaptiveHeight() {\n            this.setStyle(\"height\", this.getDesiredHeight());\n        }\n\n        setHeight(height) {\n            this.setStyle(\"height\", height);\n        }\n\n        renderMessageView() {\n            let loadMoreButton;\n\n\n            if (this.showLoadMoreButton) {\n                loadMoreButton = (\n                    <div className=\"text-center\">\n                        <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                       style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                        />\n                    </div>\n                );\n            }\n\n            return [\n                <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                          ref=\"messageWindow\"\n                                          entryRenderer={this.options.renderMessage}\n                                          entries={this.messageThread.getMessages()}\n                                          staticTop={loadMoreButton} />\n            ];\n        }\n\n        getGetType() {\n            return \"GET\";\n        }\n\n        loadMoreMessages() {\n            // TODO: wrap this in something\n            if (this.outstandingRequest) {\n                return;\n            }\n            this.outstandingRequest = true;\n\n            const topMessage = this.messageWindow.getTopMessage();\n\n            let messageInstances = this.messageThread.getMessages();\n            let lastMessageId = 999999999;\n            if (messageInstances.length) {\n                lastMessageId = messageInstances[0].id;\n            }\n\n            let request = Object.assign({\n                lastMessageId: lastMessageId\n            }, this.options.baseRequest || {});\n\n            const oldScrollHeight = this.messageWindow.node.scrollHeight;\n\n            if (this.loadMoreButton) {\n                this.loadMoreButton.ajaxCall({\n                    url: this.getGetURL(),\n                    type: this.getGetType(),\n                    dataType: \"json\",\n                    data: request,\n                    complete: () => {\n                        //TODO(@Rocky): find out why this doesn't work\n                        this.outstandingRequest = false;\n                    }\n                }).then((data) => {\n                    const emptyData = !data.state || !data.state.MessageInstance;\n                    if (emptyData || data.state.MessageInstance.length < 20) {\n                        if (this.loadMoreButton) {\n                            this.loadMoreButton.hide();\n                        }\n                        this.showLoadMoreButton = false;\n\n                        if (emptyData) {\n                            return;\n                        }\n                    }\n\n                    let scrollDelta = 0;\n                    if (!topMessage.shouldShowDayTimestamp()) {\n                        scrollDelta += topMessage.dayTimestamp.getHeight();\n                        topMessage.dayTimestamp.addClass(\"hidden\");\n                    }\n                    this.messageWindow.scrollToHeight(this.messageWindow.node.scrollHeight - oldScrollHeight - scrollDelta);\n\n                    this.outstandingRequest = false;\n                });\n            }\n        }\n\n        renderMessageBox() {\n            return <div ref=\"writingSection\" className={this.styleSheet.renderMessage}>\n                <TextArea readOnly={this.messageThread.muted}\n                             ref=\"chatInput\"\n                             placeholder=\"Type a message...\"\n                             className={this.styleSheet.chatInput} />\n                <div style={{display: \"flex\", flexDirection: \"column\", height: \"100%\", position: \"absolute\", right: \"0px\", width: \"50px\"}}>\n                    <Button ref=\"sendMessageButton\"\n                               faIcon=\"paper-plane\"\n                               disabled={this.messageThread.muted}\n                               onClick={() => this.sendMessage()}\n                               className={this.styleSheet.messageBoxButton} />\n                    <PreviewMarkupButton ref=\"previewMessageButton\"\n                                   getValue={() => {return this.chatInput.getValue();}}\n                                   setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                                   className={this.styleSheet.messageBoxButton}\n                                   faIcon=\"eye\" />\n                </div>\n            </div>;\n        }\n\n        renderStatus() {\n            if (this.messageThread.muted) {\n                return [\n                    <h4 style={{color: \"red\", textAlign: \"center\"}}>This chat is currently turned off.</h4>\n                ];\n            } else {\n                if (USER.isSuperUser) {\n                    let userData = [];\n                    for (let userId of this.messageThread.online) {\n                        userData.push([\n                            <UserHandle id={parseInt(userId)}/>\n                        ]);\n                    }\n                    return userData;\n                }\n            }\n        }\n\n        render() {\n            return [\n                this.renderMessageView(),\n                this.renderMessageBox(),\n            ];\n        }\n\n        getDefaultPlugins() {\n            return ChatWidget.defaultPlugins || [];\n        }\n\n        onMount() {\n            super.onMount();\n\n            for (let plugin of (this.options.plugins || this.getDefaultPlugins())) {\n                this.registerPlugin(plugin);\n            }\n\n            this.attachUpdateListener(this.messageThread, (event) => {\n                if (event.type === \"muted\") {\n                    this.redraw();\n                }\n            });\n\n            this.attachListener(this.messageThread, \"newMessage\", (event) => {\n                //console.log(\"Received chat message: \", event);\n                let messageInstance = MessageInstanceStore.get(event.data.id);\n\n                // We calculate before adding new message\n                let messageWindowScrollTop = this.messageWindow.node.scrollTop;\n                let messageWindowscrollMax = this.messageWindow.node.scrollHeight - this.messageWindow.node.offsetHeight;\n                this.messageWindow.insertEntry(messageInstance);\n\n                // If we were at the bottom before message was appended, scroll automatically\n                if (messageWindowScrollTop + 20 > messageWindowscrollMax) {\n                    setTimeout(() => {\n                        this.messageWindow.scrollToBottom();\n                    }, 0);\n                }\n            });\n\n            this.addResizeListeners();\n        }\n    }\n    return ChatWidgetClass;\n};\n\nclass GroupChatWidget extends ChatWidget(GroupChatMessage) {\n    setOptions(options) {\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            display: \"flex\",\n            flexDirection: \"column\",\n            overflowY: \"hidden\",\n        });\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                   style={this.styleSheet.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection className={this.styleSheet.renderMessageView}\n                                      ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages()}\n                                      staticTop={loadMoreButton}/>\n        ];\n    }\n}\n\nclass PrivateChatWidget extends ChatWidget(PrivateChatMessage) {\n    setOptions(options) {\n        options = Object.assign({\n            messageThread: options.privateChat.getMessageThread(),\n            baseRequest: {\n                userId: options.privateChat.getOtherUserId(),\n                privateChatId: options.privateChat.id\n            }\n        }, options);\n        super.setOptions(options);\n    }\n\n    setPrivateChat(privateChat) {\n        this.options.privateChat = privateChat;\n        this.setOptions(this.options);\n    }\n\n    getPostURL() {\n        return \"/chat/private_chat_post/\";\n    }\n\n    getGetType() {\n        return \"POST\"; // It might create a chat if it doesn't have one\n    }\n\n    getGetURL() {\n        return \"/chat/private_chat_state/\";\n    }\n}\n\nclass VotableChatMessage extends GroupChatMessage {\n    render() {\n        let result = super.render();\n        result[1].options.children.push(<CommentVotingWidgetWithThumbs style={{display: \"inline-block\"}} message={this.options.message} />);\n        return result;\n    }\n}\n\nclass VotableGroupChatWidget extends ChatWidget(VotableChatMessage) {\n    setOptions(options) {\n        options.messageThread = options.messageThread || MessageThreadStore.get(GroupChatStore.get(options.chatId).messageThreadId);\n        super.setOptions(options);\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    getGetURL() {\n        return \"/chat/group_chat_state/\";\n    }\n}\n\nexport {ChatWidget, EditableMessage,\n    GroupChatWidget, PrivateChatWidget, VotableGroupChatWidget,\n    GroupChatMessage, PrivateChatMessage, VotableChatMessage,\n    PreviewMarkupButton, ChatMessageScrollSection};\n","import {StyleSheet, styleRule} from \"ui/UI\";\n\nconst color = {\n    BLUE: \"#20232d\",\n    HOVER_BLUE: \"#364251\",\n    BLACK: \"#181a22\",\n    HOVER_BLACK: \"#323539\",\n    WHITE: \"#eee\",\n};\n\nlet CSAStyle = {\n    color: color,\n};\n\nclass BlogStyle extends StyleSheet {\n    titleFontSize = \"2em\";\n\n    @styleRule\n    commentsTitle = {\n        height: \"20px\",\n        color: \"#333\",\n        marginTop: \"10px\",\n        fontSize: \"1em\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    bottomSection = {\n        marginTop: \"5px\",\n        height: \"50px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    blogEntryView = {\n        \"margin\": \"0 auto\",\n        \"width\": \"900px\",\n        \"max-width\": \"100%\",\n        // \"padding-top\": \"50px\",\n        // \"padding-bottom\": \"50px\",\n    };\n\n    title = {\n        \"font-size\": this.titleFontSize,\n        \"padding-top\": \"20px\",\n        \"padding-bottom\": \"10px\",\n        \"text-decoration\": \"italic\",\n        \"width\": \"100%\",\n        \"text-align\": \"center\",\n        \"word-wrap\": \"normal\",\n        \"line-height\": \"60px\",\n    };\n\n    writtenBy = {\n        \"width\": \"100%\",\n        \"text-align\": \"left\",\n        \"padding-top\": \"20px\",\n        \"font-size\": \"1em\",\n        \"color\": \"#666\",\n    };\n\n    article = {\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n    };\n\n    link = {\n        textDecoration: \"none\",\n        textAlign: \"center\",\n        marginTop: \"-15pt\",\n        fontSize: \"1.1em\",\n    };\n\n    blogArticleRenderer = {\n        overflow: \"hidden\",\n        position: \"relative\",\n        maxHeight: \"180px\",\n        \"text-align\": \"justify\",\n        \"font-size\": \"17px\",\n        marginBottom: \"25px\",\n    };\n\n    @styleRule\n    whiteOverlay = {\n        height: \"100px\",\n        background: \"linear-gradient(rgba(255,255,255,0), #fff)\",\n        position: \"absolute\",\n        marginTop: \"-120px\",\n        pointerEvents: \"none\",\n        width: \"92%\",\n    };\n\n    @styleRule\n    loadMoreButton = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"40px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        borderColor: CSAStyle.color.BLUE,\n        fontSize: \"1em\",\n        transition: \".2s\",\n        textTransform: \"uppercase\",\n        opacity: \"1\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active:focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    sendMessageButtonStyle = {\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: CSAStyle.color.BLUE,\n        borderColor: \"#333\",\n        fontSize: \"13px\",\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus:active\": {\n            backgroundColor: CSAStyle.color.HOVER_BLUE,\n            borderColor: CSAStyle.color.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass BlogArticleRendererStyle extends StyleSheet {\n    hStyle = {\n        \"text-align\": \"center\",\n        \"margin-top\": \"30px\",\n        \"margin-bottom\": \"30px\",\n        \"width\": \"100%\",\n    };\n\n    @styleRule\n    blogArticleRenderer = {\n        \" h1\": this.hStyle,\n        \" h2\": this.hStyle,\n        \" h3\": this.hStyle,\n        \" h4\": this.hStyle,\n        \" h5\": this.hStyle,\n        \" h6\": this.hStyle,\n    };\n\n    @styleRule\n    quote = {\n        \"font-style\": \"italic\",\n        \"margin-top\": \"20px\",\n        \"margin-bottom\": \"20px\",\n        \"color\": \"#707070\",\n        \"float\": \"right\",\n        \"display\": \"flex\",\n        \"width\": \"100%\",\n    };\n}\n\n\nexport {BlogStyle, BlogArticleRendererStyle};\n","import {StyleSheet, styleRule} from \"ui/UI\";\n\nclass CommentWidgetStyle extends StyleSheet {\n    loadMoreButton = {\n        border: \"0px\",\n        color: \"#333\",\n        borderRadius: \"0\",\n        borderBottom: \"0\",\n        backgroundColor: \"#eee\",\n        padding: \"5px 10px\",\n    };\n\n    writingSectionStyle = {\n        height: \"auto\",\n        marginTop: \"10px\",\n    };\n\n    @styleRule\n    chatInputStyle = {\n        height: \"30px\",\n        width: \"100%\",\n        paddingBottom: \"0\",\n        fontSize: \"14px\",\n        borderRadius: \"0\",\n        outline: \"none\",\n        paddingLeft: \"8px\",\n        paddingTop: \"5px\",\n        resize: \"none\",\n        transition: \".2s\",\n        display: \"block\",\n        border: \"1px solid #aaa\",\n        \":focus\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n        \":active\": {\n            height: \"120px\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    chatInputMax = {\n        height: \"120px\",\n    };\n\n    previewButtonStyle = { // TODO: This is currently not restyled. We might not want to use it because previewButton is bad practice\n        height: \"30px\",\n        width: \"auto\",\n        fontSize: \"100%\",\n        marginLeft: \"5px\",\n    };\n}\n\nexport {CommentWidgetStyle}","import {UI, Level, TimePassedSpan, Switcher, AjaxButton, TextArea, Button, registerStyle} from \"ui/UI\";\nimport {MarkupRenderer} from \"markup/MarkupRenderer\";\n\nimport {GroupChatStore} from \"state/MessageThreadStore\";\nimport {ChatMessageScrollSection, ChatWidget, EditableMessage} from \"ChatWidget\";\nimport {UserHandle} from \"UserHandle\";\nimport {LoginModal} from \"LoginModal\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {BlogStyle} from \"BlogStyle\";\nimport {CommentWidgetStyle} from \"./CommentWidgetStyle\";\n\n\nclass ThreadMessage extends EditableMessage {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            deletable: false,\n        });\n    }\n\n    render() {\n        let messageDate = <TimePassedSpan timeStamp={this.message.getDate()} style={{color: \"#666 !important\", textTransform: \"uppercase\", fontSize: \".85em\",}} />\n\n        let editButton;\n        if (this.message.userId === USER.id || USER.isSuperUser) {\n            editButton = <a style={Object.assign({\"cursor\": \"pointer\", padding: \"0 10px\", fontSize: \"1.05em\", lineHeight: \"0px\",})} onClick={() => this.toggleEditMode()}>\n                edit\n            </a>;\n        }\n\n        if (!this.contentSwitcher) {\n            this.contentSwitcher = <Switcher>\n                <div ref=\"contentContainer\">\n                    <MarkupRenderer ref=\"content\" value={this.message.getContent()} />\n                </div>\n            </Switcher>;\n        }\n\n        let votes = <CommentVotingWidgetWithThumbs height={40} style={{float: \"left\"}} message={this.message} ref=\"commentVotingWidget\" />;\n\n        return [\n            <span style={{float: \"right\", display: \"inline-block\", height: \"40px\", lineHeight: \"40px\",}}>{messageDate}</span>,\n            <div style={{\n                height: \"40px\",\n                lineHeight: \"40px\",\n            }}>\n                <div style={{\n                    height: \"40px\",\n                    lineHeight: \"40px\",\n                    display: \"inline-block\",\n                    float: \"left\",\n                    fontSize: \".95em\",\n                    color: \"#333\",\n                }}>\n                    <UserHandle userId={this.message.userId} style={{fontSize: \"1.1em\",}}/>\n                </div>\n                {editButton}\n            </div>,\n            <div style={{\n                paddingTop: \"5px\",\n                fontSize: \"16px\",\n            }}>\n                {this.contentSwitcher}\n            </div>,\n            <div style={{\n                height: \"40px\",\n            }}>\n                {votes}\n            </div>,\n            <div style={{\n                height: \"1px\",\n                width: \"100%\",\n                backgroundColor: \"#ddd\",\n            }}></div>,\n        ];\n    }\n}\n\nclass ToggleLogin extends UI.Primitive(\"span\") {\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            LoginModal.show();\n            return;\n        });\n    }\n}\n\n\n@registerStyle(BlogStyle)\nclass BlogCommentWidget extends ChatWidget(ThreadMessage) {\n    getDefaultOptions() {\n        return Object.assign({}, super.getDefaultOptions(), {\n            entryComparator: (a, b) => {\n                return b.getNormalizedId() - a.getNormalizedId();\n            }\n        })\n    }\n\n    get commentWidgetStyle() {\n        return CommentWidgetStyle.getInstance();\n    }\n\n    renderMessageView() {\n        let loadMoreButton;\n\n        if (this.showLoadMoreButton) {\n            loadMoreButton = (\n                <div className=\"text-center\">\n                    <AjaxButton ref={this.refLink(\"loadMoreButton\")} level={Level.DEFAULT} onClick={() => {this.loadMoreMessages()}}\n                                style={this.commentWidgetStyle.loadMoreButton} statusOptions={[\"Load more messages\", {faIcon: \"spinner fa-spin\", label:\" loading messages...\"}, \"Load more messages\", \"Failed\"]}\n                    />\n                </div>\n            );\n        }\n\n        return [\n            <ChatMessageScrollSection ref=\"messageWindow\"\n                                      entryRenderer={this.options.renderMessage}\n                                      entries={this.messageThread.getMessages(true)}\n                                      entryComparator={this.options.entryComparator}\n                                      staticTop={loadMoreButton} />\n        ];\n    }\n\n    renderMessageBox() {\n        return [\n            <div ref=\"writingSection\" style={this.commentWidgetStyle.writingSectionStyle}>\n                <TextArea readOnly={this.messageThread.muted}\n                          ref=\"chatInput\"\n                          onChange={() => {\n                              if (this.chatInput.getValue()) {\n                                  this.chatInput.addClass(this.commentWidgetStyle.chatInputMax);\n                              } else {\n                                  this.chatInput.removeClass(this.commentWidgetStyle.chatInputMax);\n                              }\n                          }}\n                          className={this.commentWidgetStyle.chatInputStyle}\n                          placeholder=\"Leave a comment...\"/>\n                <Button disabled={this.messageThread.muted}\n                           label=\"SUBMIT\"\n                           ref=\"sendMessageButton\"\n                           className={this.styleSheet.sendMessageButtonStyle}\n                           level={Level.PRIMARY}\n                           onClick={() => this.sendMessage()} />\n                {/*{this.messageThread.hasMarkupEnabled() ?\n                        <PreviewMarkupButton disabled={this.messageThread.muted} ref=\"markupButton\" style={previewButtonStyle}\n                                         getValue={() => {return this.chatInput.getValue();}}\n                                         setValue={(value) => {this.chatInput.setValue(value);this.chatInput.node.focus();}}\n                        /> : null}*/ /* UNCOMMENT THIS !! */}\n            </div>\n        ];\n    }\n\n    render() {\n        return [\n            this.renderMessageBox(),\n            this.renderMessageView(),\n        ];\n    }\n\n    getDefaultPlugins() {\n        return CommentWidget.defaultPlugins || [];\n    }\n\n    createVirtualMessage(request, message) {\n        return null;\n    }\n}\n\n@registerStyle(BlogStyle)\nclass CommentWidget extends BlogCommentWidget {\n    setOptions(options) {\n        super.setOptions(options);\n\n        this.key = this.messageThread.id;\n\n        this.options.baseRequest = {\n            chatId: this.options.chatId,\n        };\n        this.options.dateTimestamps = false;\n    }\n\n    getPostURL() {\n        return \"/chat/group_chat_post/\";\n    }\n\n    renderMessageBox() {\n        if (USER.isAuthenticated) {\n            return super.renderMessageBox();\n        } else {\n            return <div style={{\n                color: \"#333\",\n                paddingTop: \"5px\",\n                paddingBottom: \"5px\",\n            }}>You need to&nbsp;\n                <ToggleLogin style={{\n                    backgroundColor: \"#eee\",\n                    cursor: \"pointer\",\n                    padding: \"5px 10px\",\n                }}>\n                    login\n                </ToggleLogin>\n                &nbsp;to send a comment.</div>;\n        }\n    }\n\n    render() {\n        let commentsCount = this.messageThread.getMessages().length;\n        let commentsTitle;\n\n        commentsTitle = <div className={this.styleSheet.commentsTitle}>\n            {commentsCount} {commentsCount != 1 ? \"comments\" : \"comment\"}\n        </div>;\n\n        return [commentsTitle, super.render()];\n    }\n}\n\nclass AsyncCommentThread extends UI.Element {\n    getMessageThread() {\n        let groupChat = GroupChatStore.get(this.options.chatId);\n        return groupChat && groupChat.getMessageThread();\n    }\n\n    render() {\n        let messageThread = this.getMessageThread();\n        let commentWidgetOptions = {\n            marginBottom: \"10px\",\n            paddingBottom: \"10px\",\n            height: \"auto\",\n            width: \"100%\",\n            marginTop: \"50px\",\n            marginLeft: \"0px\",\n            marginRight: \"0px\",\n            border: \"0px\",\n            maxWidth: \"900px\"\n        };\n\n        if (messageThread) {\n            return [<CommentWidget ref=\"commentsSection\" chatId={this.options.chatId} messageThread={messageThread}\n                                   style={commentWidgetOptions} />];\n        } else {\n            GroupChatStore.fetch(this.options.chatId, (groupChat) => {\n                this.redraw();\n            });\n            return [\n                <div style={{\n                    width: \"100%\",\n                    height: \"60px\",\n                    lineHeight: \"60px\",\n                    fontSize: \"1em\",\n                    textAlign: \"center\",\n                    textTransform: \"uppercase\",\n                    fontWeight: \"bold\",\n                }}>\n                    <span className=\"fa fa-spinner fa-spin\" style={{\n                        padding: \"0 8px\",\n                    }}/>\n                    Comments loading...\n                </div>\n            ];\n        }\n    }\n}\n\nexport {CommentWidget, AsyncCommentThread};\n","import {StoreObject, GenericObjectStore} from \"state/Store\";\n\nimport {ArticleStore} from \"state/ArticleStore\";\n\nclass BlogEntry extends StoreObject {\n    getArticle() {\n        return ArticleStore.get(this.articleId);\n    }\n}\n\nclass BlogEntryStoreClass extends GenericObjectStore {\n    constructor(objectType=\"BlogEntry\", ObjectWrapper=BlogEntry) {\n        super(objectType, ObjectWrapper, {\n            dependencies: [\"Article\"],\n        });\n    }\n\n    getEntryForURL(urlName) {\n        return this.all().find(blogEntry => blogEntry.urlName === urlName);\n    }\n}\n\nexport const BlogEntryStore = new BlogEntryStoreClass();\n","import {UI, registerStyle} from \"ui/UI\";\nimport {MarkupClassMap} from \"markup/MarkupRenderer\";\n\nimport {ArticleRenderer} from \"ArticleRenderer\";\nimport {BlogArticleRendererStyle} from \"./BlogStyle\";\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogArticleRenderer extends ArticleRenderer {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.blogArticleRenderer);\n    }\n}\n\n\n@registerStyle(BlogArticleRendererStyle)\nclass BlogQuote extends UI.Primitive(\"div\") {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.quote);\n    }\n\n    render() {\n        return [\n            <div style={{\n                \"flex-grow\": \"1000000\",\n                \"min-width\": \"10%\",\n                \"display\": \"inline-block\",\n            }}></div>,\n            <div style={{\n                \"flex-grow\": \"1\",\n                \"display\": \"inline-block\",\n            }}>\n                {this.options.value}\n            </div>\n        ];\n    }\n}\n\n\nBlogArticleRenderer.markupClassMap = new MarkupClassMap(ArticleRenderer.markupClassMap);\nBlogArticleRenderer.markupClassMap.addClass(\"Quote\", BlogQuote);\n\n\nexport {BlogArticleRenderer, BlogQuote};\n","import {Ajax} from \"base/Ajax\";\nimport {slugify} from \"base/Utils\";\nimport {MarkupEditor} from \"markup/MarkupEditor\";\nimport {StemDate} from \"time/Time\";\nimport {UI, Level, Route, Router, Button, Link, Modal, Form, FormField, TextInput, FormGroup, CheckboxInput, TemporaryMessageArea} from \"ui/UI\";\nimport {StateDependentElement} from \"ui/StateDependentElement\";\nimport {Theme} from \"ui/style/Theme\";\n\nimport {UserHandle} from \"UserHandle\";\nimport {ArticleEditor} from \"ArticleEditor\";\nimport {AsyncCommentThread} from \"CommentWidget\";\nimport {BlogEntryStore} from \"state/BlogStore\";\nimport {BlogArticleRenderer} from \"./BlogArticleRenderer\";\nimport {BlogStyle} from \"BlogStyle\";\n\n\nexport class BlogEntryEditModal extends Modal {\n    getModalWindowStyle() {\n        return Object.assign({}, super.getModalWindowStyle(), {\n            margin: \"0 auto\",\n            maxHeight: \"100%\",\n            overflow: \"initial\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            top: \"1vh\",\n            height: \"98vh\",\n        });\n    }\n\n    render() {\n        let entry = BlogEntryStore.get(this.options.entryId);\n        let article = entry.getArticle();\n\n        let discussionButton = null;\n        if (!entry.discussionId) {\n            discussionButton = <Button level={Level.WARNING} label=\"Create discussion\"\n                                       onClick={() => this.createDiscussion()} style={{marginLeft: \"5px\"}}/>;\n        }\n\n        return [\n            <h3>Edit Entry</h3>,\n            <Form>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" value={article.name} />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" value={entry.urlName} />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\" value={entry.visible} />\n                </FormField>\n                <Button level={Level.PRIMARY} label=\"Change settings\" onClick={() => this.changeSettings()} />\n                {discussionButton}\n                <TemporaryMessageArea ref=\"messageArea\"/>\n            </Form>,\n            <ArticleEditor ref=\"contentEditor\" articleId={article.id} style={{flex: \"1\"}} />\n        ];\n    }\n\n    changeSettings() {\n        let title = this.titleInput.getValue();\n        let urlName = this.urlInput.getValue();\n\n        let request = {\n            entryId: this.options.entryId,\n            isVisible: this.visibleCheckbox.getValue(),\n        };\n\n        if (title) {\n            request.title = title;\n        }\n\n        if (urlName) {\n            request.urlName = urlName;\n        }\n\n        Ajax.postJSON(\"/blog/change_entry_settings/\", request).then(\n            (data) => {\n                if (data.urlName) {\n                    Router.changeURL([\"blog\", data.urlName]);\n                }\n                this.hide();\n            }\n        );\n    }\n\n    createDiscussion() {\n        let request = {\n            entryId: this.options.entryId\n        };\n\n        Ajax.postJSON(\"/blog/create_entry_discussion/\", request).then(\n            () => this.hide()\n        );\n    }\n}\n\nexport class NewBlogEntryModal extends Modal {\n    render() {\n        return [\n            <h1>New Entry</h1>,\n            <FormGroup>\n                <FormField label=\"Title\">\n                    <TextInput ref=\"titleInput\" />\n                </FormField>\n                <FormField label=\"URL Name\">\n                    <TextInput ref=\"urlInput\" />\n                </FormField>\n                <FormField label=\"Visible\">\n                    <CheckboxInput ref=\"visibleCheckbox\"/>\n                </FormField>\n                <Button label=\"Add Entry\" level={Level.PRIMARY} onClick={() => {this.addEntry()}}/>\n                <MarkupEditor ref=\"postContentMarkup\" style={{height: \"450px\"}} />\n            </FormGroup>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.titleInput.onKeyUp(() => {\n            this.urlInput.setValue(slugify(this.titleInput.getValue()));\n        });\n    }\n\n    addEntry() {\n        let data = {};\n\n        let title = this.titleInput.getValue();\n        if (title) {\n            data.title = title;\n        }\n\n        let urlName = this.urlInput.getValue();\n        if (urlName) {\n            data.urlName = urlName;\n        }\n\n        data.isVisible = this.visibleCheckbox.getValue();\n\n        let content = this.postContentMarkup.getValue();\n        if (content) {\n            data.content = content;\n        }\n\n        Ajax.postJSON(\"/blog/add_entry/\", data).then(\n            (data) => {\n                let blogEntry = BlogEntryStore.get(data.blogEntryId);\n                Router.changeURL([\"blog\", blogEntry.urlName]);\n                this.hide();\n            }\n        );\n    }\n}\n\nclass BlogEntryPreview extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle({\n            position: \"relative\",\n            maxHeight: \"420px\",\n            marginTop: \"45px\",\n            marginBottom: \"45px\",\n        });\n    }\n\n    canOverwrite(obj) {\n        return super.canOverwrite(obj) && this.options.entryId === obj.options.entryId;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    getEntryURL() {\n        return \"/blog/\" + this.getBlogEntry().urlName + \"/\";\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n        const article = this.getBlogArticle();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            color: \"#777\",\n            fontSize: \"1em\",\n            margin: \"0\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>{UI.T(\"Last update on\")} {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        return [\n            <div style={{height: \"100%\",}}>\n                <div style={{\n                    boxShadow: \"0px 0px 10px rgb(160, 162, 168)\",\n                    \"background-color\": \"#fff\",\n                    \"padding\": \"1% 4% 10px 4%\",\n                    \"margin\": \"0 auto\",\n                    \"width\": \"900px\",\n                    \"max-width\": \"100%\",\n                    position: \"relative\"\n                }}>\n                    <div style={blogStyle.writtenBy}>\n                        {UI.T(\"Written by\")} <UserHandle\n                        userId={article.userCreatedId}/>, {publishedFormat}.{modifiedFormat}\n                    </div>\n                    <div style={blogStyle.title}>\n                        <Link href={this.getEntryURL()} value={article.name}\n                              style={{\"text-decoration\": \"none\", \"color\": \"inherit\"}}/>\n                    </div>\n                    <BlogArticleRenderer article={article} style={blogStyle.blogArticleRenderer}/>\n                    <div className={blogStyle.whiteOverlay}></div>\n                    <Link href={this.getEntryURL()} style={blogStyle.link} value={UI.T(\"Continue reading\")}/>\n                </div>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryView extends UI.Element {\n    get pageTitle() {\n        return this.getBlogArticle().name;\n    }\n\n    getBlogEntry() {\n        return BlogEntryStore.get(this.options.entryId);\n    }\n\n    getBlogArticle() {\n        return this.getBlogEntry().getArticle();\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.getStyleSheet().blogEntryView);\n    }\n\n    getComments() {\n        let chatId = this.getBlogEntry().discussionId;\n        if (!chatId) {\n            return null;\n        }\n        return (<div style={{marginBottom: \"20px\", marginTop: \"20px\"}}>\n            <AsyncCommentThread chatId={chatId}/>\n        </div>);\n    }\n\n    render() {\n        const article = this.getBlogArticle();\n        const blogStyle = this.getStyleSheet();\n\n        // TODO: not actually the published date\n        let publishedDate = article.dateCreated;\n        let publishedFormat = StemDate.unix(publishedDate).format(\"LL\");\n        let modifiedFormat;\n\n        let articleInfoStyle = {\n            margin: \"3px\",\n            color: \"#777\",\n            fontSize: \"1em\",\n            fontStyle: \"italic\",\n        };\n\n        if (article.dateModified > article.dateCreated) {\n            modifiedFormat = <p style={articleInfoStyle}>Last update on {StemDate.unix(article.dateModified).format(\"LL\")}.</p>\n        }\n\n        let blogEntryEditButton;\n        // TODO: should use proper rights\n        if (USER.isSuperUser) {\n            blogEntryEditButton = <Button level={Level.DEFAULT} label=\"Edit\" onClick={() => {\n                BlogEntryEditModal.show({entryId: this.getBlogEntry().id, fillScreen: true});\n            }}/>\n        }\n\n        return [\n            <div style={{\n                \"background-color\": \"#fff\",\n                \"padding\": \"2% 5%\",\n                \"box-shadow\": \"rgb(160, 160, 160) 0px 3px 15px\",\n            }}>\n                {blogEntryEditButton}\n                <div style={blogStyle.writtenBy}>\n                    Written by <UserHandle userId={article.userCreatedId}/> on {publishedFormat}.\n                    {modifiedFormat}\n                </div>\n                <div style={blogStyle.title}>{article.name}</div>\n                <BlogArticleRenderer style={blogStyle.article} article={article}/>\n                <div style={{\n                    \"margin-top\": \"30px\",\n                    \"margin-bottom\": \"10px\",\n                }}>\n                    <Link href=\"/blog/\" style={blogStyle.link} value=\"Back to the Main Blog\"/>\n                </div>\n                {this.getComments()}\n            </div>,\n            <div className={blogStyle.bottomSection}>\n            </div>\n        ];\n    }\n}\n\nclass BlogEntryList extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.setStyle(\"paddingTop\", \"10px\");\n    }\n\n    showNewBlogPostModal() {\n        let modal = <NewBlogEntryModal fillScreen/>;\n        modal.show();\n    }\n\n    render() {\n        const blogStyle = this.getStyleSheet();\n\n        let entries = [];\n\n        let blogEntries = BlogEntryStore.all().sort((a, b) => {\n            return b.getArticle().dateCreated - a.getArticle().dateCreated;\n        });\n\n        for (let entry of blogEntries) {\n            entries.push(<BlogEntryPreview key={entry.id} entryId={entry.id}/>);\n        }\n\n        return [\n            USER.isSuperUser ?\n                <Button label=\"New Entry\"\n                        level={Level.DEFAULT}\n                        onClick={() => this.showNewBlogPostModal()}\n                />\n                : null,\n            <div ref=\"entriesList\">\n                {entries}\n            </div>,\n            <Button label={this.options.finishedLoading ? UI.T(\"End of blog\") : UI.T(\"Load More\")}\n                    ref=\"loadMoreButton\"\n                    style={{margin: \"0px auto\", display: \"block\"}}\n                    className={blogStyle.loadMoreButton}\n                    disabled={this.options.finishedLoading} />,\n            <div style={{\n                height: \"45px\",\n                width: \"100%\",\n            }}/>\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n\n        this.loadMoreButton.addClickListener(() => {\n            if (!this.options.finishedLoading) {\n                Ajax.getJSON(\"/blog/\", {\n                    lastDate: Math.min.apply(null, BlogEntryStore.all().map(x => x.getArticle().dateCreated))\n                }).then(\n                    (data) => {\n                        this.options.finishedLoading = data.finishedLoading;\n                        if (this.options.finishedLoading) {\n                            this.loadMoreButton.options.label = UI.T(\"No more posts\");\n                            this.loadMoreButton.redraw();\n                            this.loadMoreButton.disable();\n                        }\n                        this.redraw();\n                    }\n                );\n            }\n        });\n\n        this.attachCreateListener(BlogEntryStore, () => {\n            this.redraw();\n        });\n    }\n}\n\nTheme.register(BlogEntryView, BlogStyle);\nTheme.register(BlogEntryPreview, BlogStyle);\nTheme.register(BlogEntryList, BlogStyle);\n\nclass DelayedBlogEntryList extends StateDependentElement(BlogEntryList) {\n}\n\nclass DelayedBlogEntryView extends StateDependentElement(BlogEntryView) {\n    getBlogEntry() {\n        return BlogEntryStore.getEntryForURL(this.options.entryURL);\n    }\n\n    get pageTitle() {\n        if (this.getBlogEntry()) {\n            return super.pageTitle;\n        } else {\n            return null;\n        }\n    }\n\n    set pageTitle(value) {\n    }\n\n    onDelayedMount() {\n        super.onDelayedMount();\n        Router.updateURL();\n    }\n\n    getAjaxUrl() {\n        return \"/blog/get_blog_post/\";\n    }\n\n    getAjaxRequest() {\n        return {\n            entryUrlName: this.options.entryURL,\n        }\n    }\n}\n\nclass BlogRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route(\"%s\", (options) => {\n                let entryURL = options.args[options.args.length - 1];\n\n                let blogEntry = BlogEntryStore.getEntryForURL(entryURL);\n\n                if (blogEntry) {\n                    return <BlogEntryView entryId={blogEntry.id} />;\n                } else {\n                    return <DelayedBlogEntryView entryURL={entryURL} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"blog\", options={}) {\n        options.title = options.title || \"Blog\";\n        super(expr, DelayedBlogEntryList, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n\nexport {BlogEntryPreview, DelayedBlogEntryList, DelayedBlogEntryView, BlogEntryView, BlogRoute};\n","import {Ajax} from \"base/Ajax\";\nimport {NOOP_FUNCTION} from \"base/Utils\";\nimport {StoreObject, GenericObjectStore} from \"state/Store\";\n\nimport {PublicUserStore} from \"state/UserStore\";\nimport {MessageThreadStore, MessageInstanceStore} from \"state/MessageThreadStore\";\n\nclass Forum extends StoreObject {\n    constructor() {\n        super(...arguments);\n        this.forumThreads = new Map();\n        // TODO: not appropriate to register to streams here\n        this.registerToStream();\n        ForumThreadStore.addDeleteListener((forumThread) => {\n            if (forumThread.parentId === this.id && this.forumThreads.has(forumThread.id)) {\n                this.deleteForumThread(forumThread);\n            }\n        });\n    }\n\n    getStreamName() {\n        return \"forum-\" + this.id;\n    }\n\n    getForumThreads() {\n        let forumThreads = Array.from(this.forumThreads.values());\n        // Filter out hidden forum threads\n        forumThreads = forumThreads.filter(forumThread => forumThread.isVisible());\n        forumThreads.sort((a, b) => {return b.id - a.id});\n        return forumThreads;\n    }\n\n    addForumThread(forumThread, event) {\n        this.forumThreads.set(forumThread.id, forumThread);\n        this.dispatch(\"newForumThread\", event);\n    }\n\n    deleteForumThread(forumThread) {\n        this.forumThreads.delete(forumThread.id);\n        this.dispatch(\"deleteForumThread\", forumThread);\n    }\n}\n\nvar ForumStore = new GenericObjectStore(\"forum\", Forum);\n\nclass ForumThread extends StoreObject {\n    constructor(obj) {\n        super(obj);\n        let parent = this.getParent();\n        parent && parent.addForumThread(this);\n    }\n\n    getAuthor() {\n        return PublicUserStore.get(this.authorId);\n    }\n\n    isPinned() {\n        return this.pinnedIndex != null;\n    }\n\n    getPinIndex() {\n        return this.pinnedIndex;\n    }\n\n    getTitle() {\n        return this.title;\n    }\n\n    getContentMessage() {\n        return MessageInstanceStore.get(this.contentMessageId);\n    }\n\n    getVotesBalance() {\n        let message = this.getContentMessage();\n        if (message) {\n            return message.getVotesBalance();\n        }\n        return this.votesBalance;\n    }\n\n    getParent() {\n        return ForumStore.get(this.parentId);\n    }\n\n    getMessageThread() {\n        return MessageThreadStore.get(this.messageThreadId);\n    }\n\n    getTimeAdded() {\n        // TODO: maybe return formatted time\n        return this.timeAdded;\n    }\n\n    getLastActive() {\n        return this.lastActive;\n    }\n\n    getNumReplies() {\n        return this.getNumMessages() - 1;\n    }\n\n    deleteThread(onSuccess=NOOP_FUNCTION, onError=NOOP_FUNCTION) {\n        Ajax.postJSON(\"/forum/edit_forum_thread/\", {\n            forumThreadId: this.id,\n            hidden: true,\n        }).then(onSuccess, onError);\n    }\n\n    getNumMessages() {\n        return this.numMessages;\n    }\n\n    isVisible() {\n        return !this.hidden;\n    }\n\n    isLoaded() {\n        // TODO: this needs to be fixed to support dynamic loading\n        // console.warn(this.getNumReplies(), this.getMessageThread().getNumMessages());\n        return this.getMessageThread() != null && this.getNumReplies() === this.getMessageThread().getNumMessages() - 1;\n    }\n}\n\nconst ForumThreadStore = new GenericObjectStore(\"forumthread\", ForumThread, {\n    dependencies: [\"forum\", \"messageinstance\"]\n});\n\n\nexport {ForumStore, ForumThreadStore};","import {UI, Button, Level} from \"ui/UI\";\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\n\n\nclass EditThreadReplyButton extends Button {\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        super.setOptions(options);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            EditThreadReplyModal.show({\n                messageInstance: this.options.messageInstance,\n                classMap: ChatMarkupRenderer.classMap\n            });\n        });\n    }\n}\n\nclass EditThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.markupEditor.setValue(this.options.messageInstance.getContent());\n        // this.markupEditor.codeEditor.getAce().focus();\n        this.doneButton.addClickListener(() => {\n            this.options.messageInstance.edit(this.markupEditor.getValue());\n        });\n    }\n}\n\nexport {EditThreadReplyButton};\n","import {UI, ActionModal, ActionModalButton} from \"ui/UI\";\n\nclass DeleteThreadReplyModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete message\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>{UI.T(\"Are you sure you want to delete the message?\")}</p>;\n    }\n\n    action() {\n        this.options.messageInstance.deleteMessage();\n        this.hide();\n    }\n}\n\nlet DeleteThreadReplyButton = ActionModalButton(DeleteThreadReplyModal);\n\nexport {DeleteThreadReplyButton};","import {StyleSheet, styleRule} from \"ui/UI\";\n\nconst colors = {\n    // BLUE: \"#20232d\",\n    BLUE: \"#202e3e\",\n    HOVER_BLUE: \"#364251\",\n    // BLACK: \"#181a22\",\n    BLACK: \"#1c2937\",\n    // HOVER_BLACK: \"#323539\",\n    HOVER_BLACK: \"#364251\",\n    WHITE: \"#eee\",\n};\n\n\nclass ForumThreadReplyStyle extends StyleSheet {\n\n    @styleRule\n    mainClass = {\n        width: \"90%\",\n        margin: \"0 auto\",\n        maxWidth: \"1200px\",\n    }\n\n    @styleRule\n    repliesUserAndDate = {\n        height: \"40px\",\n        width: \"100%\",\n        lineHeight: \"40px\",\n        fontSize: \"15px\",\n        marginTop: \"8px\",\n        marginBottom: \"8px\",\n    };\n\n    @styleRule\n    repliesUser = {\n        display: \"inline-block\",\n        float: \"left\",\n        color: \"#444\",\n        fontSize: \"14px\",\n    };\n\n    @styleRule\n    repliesDate = {\n        display: \"inline-block\",\n        float: \"right\",\n    };\n\n    @styleRule\n    repliesContent = {\n        marginBottom: \"15px\",\n        fontSize: \"16px\",\n    };\n}\n\n\nlet height = 70;\n\nclass ForumThreadPanelStyle extends StyleSheet {\n    fontSize = \"0.9em\";\n    numRepliesFontSize = \"1.03em\";\n    messageFontSize = \"1.2em\";\n    buttonFontSize = \"1em\";\n\n    @styleRule\n    mainClass = {\n        margin: \"0 auto\",\n        marginBottom: \"20px\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: \"2em\",\n        color: \"#333\",\n        minHeight: \"50px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    backButton = {\n        color: \"#444\",\n        fontSize: this.fontsize,\n        textDecoration: \"none\",\n        transition: \".15s\",\n        opacity: \"1\",\n        \":hover\": {\n            opacity: \"1\",\n            color: \"#337ab7\",\n            transition: \".15s\",\n        },\n    };\n\n    @styleRule\n    replyButtonDiv = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        height: \"50px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        margin: \"0 auto\",\n    };\n\n    @styleRule\n    replyButton = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    fullPost = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        fontSize: this.fontSize,\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n    };\n\n    @styleRule\n    dislikeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"16px\",\n    };\n\n    @styleRule\n    likeButton = {\n        display: \"inline-block\",\n        float: \"right\",\n        marginRight: \"8px\",\n    };\n\n    @styleRule\n    author = {\n        color: \"#262626\",\n        fontSize: this.fontSize,\n        height: \"50px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        paddingLeft: \"0\",\n        // justifyContent: \"center\",\n        textTransform: \"uppercase\",\n        // fontWeight: \"bold\",\n    };\n\n    @styleRule\n    header = {\n    };\n\n    @styleRule\n    message = {\n        padding: \"5px 12px\",\n        fontSize: this.messageFontSize,\n        color: colors.BLUE,\n        \" p\": {\n            marginBottom: \"0\",\n            padding: \"5px 0\",\n        },\n    };\n\n    @styleRule\n    buttons = {\n        height: \"50px\",\n        width: \"100%\",\n        paddingTop: \"12px\",\n    };\n\n    @styleRule\n    bottomPanel = {\n        height: \"50px\",\n        width: \"100%\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    };\n\n    @styleRule\n    voting = {\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    numReplies = {\n        height: \"50px\",\n        fontSize: this.numRepliesFontSize,\n        paddingLeft: \"12px\",\n        color: \"#767676\",\n        display: \"flex\",\n        alignItems: \"center\",\n        fontWeight: \"bold\",\n        textTransform: \"uppercase\",\n    };\n\n    @styleRule\n    replies = {\n        width: \"100%\",\n        color: \"#444\",\n    };\n\n    @styleRule\n    editDeleteButtons = {\n        width: \"100%\",\n        height: \"50px\",\n        padding: \"0 7px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"flex-start\",\n    };\n\n    @styleRule\n    editButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n\n    @styleRule\n    deleteButton = {\n        height: \"35px\",\n        width: \"35px\",\n        margin: \"0 4px\",\n        border: \"0\",\n        borderRadius: \"0\",\n        color: \"#fff\",\n        backgroundColor: \"#333\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        fontSize: this.buttonFontSize,\n        transition: \".2s\",\n        \":hover\": {\n            backgroundColor: \"#454545\",\n            transition: \".2s\",\n        },\n    };\n}\n\n\nclass ButtonStyle extends StyleSheet {\n    @styleRule\n    button = {\n        marginLeft: \"16px\",\n        color: \"#fff\",\n        height: \"30px\",\n        marginTop: \"10px\",\n        marginBottom: \"20px\",\n        width: \"auto\",\n        borderRadius: \"0px\",\n        backgroundColor: colors.BLUE,\n        border: \"0\",\n        padding: \"5px 10px\",\n        marginBottom: \"0\",\n        borderColor: colors.BLUE,\n        fontSize: \"13px\",\n        transition: \".2s\",\n        outline: \"none\",\n        \":hover\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":active\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n        \":focus\": {\n            backgroundColor: colors.HOVER_BLUE,\n            borderColor: colors.HOVER_BLUE,\n            transition: \".2s\",\n        },\n    };\n\n}\n\n\nclass ForumThreadHeaderStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"0.85em\";\n    widthLimit = 800;\n\n    tagsHeight = 50;\n    // borderTopColor = \"rgb(232, 189, 35)\";\n    borderTopColor = \"#333\";\n\n    baseStyleObject = {\n        height: this.tagsHeight + \"px\",\n        // display: \"inline-block\",\n        // float: \"left\",\n        color: \"#262626\",\n        // letterSpacing: \"-0.3px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textTransform: \"uppercase\",\n        fontWeight: \"bold\",\n    };\n    \n    @styleRule\n    mainClass = {\n        height: \"40px\",\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        // borderBottom: \"2px solid #333\",// + this.borderTopColor,\n        color: \"#aaa\",\n        display: \"flex\",\n\n\n        boxSizing: \"content-box\",\n        backgroundColor: \"#eaeaea\",\n        height: this.tagsHeight + \"px\",\n        borderTop: \"3px solid \" + this.borderTopColor,\n    };\n\n    @styleRule\n    tagsTitle = [this.baseStyleObject, {\n        // marginLeft: \"1%\",\n        // width: \"40%\",\n        paddingLeft: \"12px\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        justifyContent: \"initial\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".7\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsReplies = [this.baseStyleObject, {\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n\n    @styleRule\n    tagsViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            console.log(window.innerWidth);\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    tagsActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontSize: this.fontSize,\n    }];\n}\n\n\nclass ForumThreadPreviewStyle extends StyleSheet {\n    // functionality\n    maxHeight = 50;\n    lines = 2;\n    lineHeight = this.maxHeight / this.lines;\n\n    // design\n    fontSize = \".88em\";\n    color = \"#aaa\";\n\n    @styleRule\n    forumThreadPreview = {\n        maxHeight: this.maxHeight + \"px\",\n        lineHeight: this.lineHeight + \"px\",\n        overflow: \"hidden\",\n        fontSize: this.fontSize,\n        color: this.color,\n        \" *\": {\n            marginBottom: \"0\",\n        },\n    };\n}\n\n\nclass ForumThreadBubbleStyle extends StyleSheet {\n    constructor() {\n        super({\n            updateOnResize: true,\n        });\n    }\n\n    fontSize = \"1em\";\n    titlePaddingBottom = \"10px\";\n    widthLimit = 800;\n\n    baseStyleObject = {\n        display: \"inline-block\",\n        verticalAlign: \"top\",\n        fontSize: this.fontSize,\n    };\n\n    @styleRule\n    backgroundColorOddInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorPinnedInstances = {\n        backgroundColor: \"#f4f6f7\",\n        \":hover\": {\n            backgroundColor: \"#eff1f2\",\n        },\n    };\n\n    @styleRule\n    backgroundColorEvenInstances = {\n        backgroundColor: \"#fff\",\n        \":hover\": {\n            backgroundColor: \"#fafafa\",\n        }\n    };\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n        maxWidth: \"1200px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#555\",\n        border: \"1px solid #ddd\",\n        borderTop: \"0\",\n        display: \"flex\",\n    };\n\n    @styleRule\n    threadTitleAndPreview = {\n        flexDirection: \"column\",\n        flex: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"1.5\";\n            }\n            return \"3\";\n        },\n        paddingTop: \"25px\",\n        paddingBottom: \"25px\",\n        paddingLeft: \"12px\",\n    }\n\n    @styleRule\n    threadTitle = [this.baseStyleObject, {\n        // width: \"40%\",\n        // maxWidth: \"50%\",\n        // flex: \"1.5\",\n        flexDirection: \"column\",\n        textAlign: \"justify\",\n        // paddingRight: \"8px\",\n        verticalAlign: \"middle\",\n        wordWrap: \"break-word\",\n        color: \"#252628\",\n        paddingBottom: this.titlePaddingBottom,\n    }];\n\n    @styleRule\n    pinnedIcon = {\n        textAlign: \"center\",\n        display: \"inline-block\",\n        float: \"left\",\n        height: \"60px\",\n        paddingTop: \"25px\",\n        paddingRight: \"12px\",\n    };\n\n    @styleRule\n    threadTitleSpan = {\n        display: \"inline-block\",\n        verticalAlign: \"middle\",\n        lineHeight: \"20px\",\n        // maxWidth: \"95%\",\n        transition: \"0.2s\",\n        fontSize: \"1.2em\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadAuthor = [this.baseStyleObject, {\n        // width: \"14%\",\n        // maxWidth: \"14%\",\n        flex: \".7\",\n        // paddingLeft: \"8px\",\n        textAlign: \"center\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadReplies = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n    }];\n\n    @styleRule\n    threadRepliesSpan = {\n        transition: \"0.2s\",\n        \":hover\": {\n            color: \"#337ab7\",\n            transition: \"0.2s\",\n        }\n    };\n\n    @styleRule\n    threadViews = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadVotes = [this.baseStyleObject, {\n        // width: \"8%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"4px\",\n        display: () => {\n            if (window.innerWidth < this.widthLimit) {\n                return \"none\";\n            }\n            return \"inherit\";\n        },\n    }];\n\n    @styleRule\n    threadActivity = [this.baseStyleObject, {\n        // width: \"20%\",\n        flex: \".5\",\n        textAlign: \"center\",\n        color: \"#767676\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        paddingLeft: \"4px\",\n        paddingRight: \"12px\",\n        fontSize: \".85em\",\n    }];\n}\n\n\nclass ForumPanelStyle extends StyleSheet {\n    textColor = \"#333\";\n    headerItemHeight = 50;\n\n    @styleRule\n    mainClass = {\n        width: \"100%\",\n    };\n\n    @styleRule\n    title = {\n        width: \"100%\",\n        // textAlign: \"center\",\n        fontSize: \"2em\",\n        color: this.textColor,\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    buttonParent = {\n        width: \"90%\",\n        maxWidth: \"1200px\",\n        margin: \"0 auto\",\n        height: this.headerItemHeight + \"px\",\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n    };\n\n    @styleRule\n    button = {\n        margin: \"0\",\n    };\n\n    @styleRule\n    header = {\n        height: 2 * this.headerItemHeight + \"px\",\n        width: \"100%\",\n    };\n}\n\n\nexport {\n    ForumThreadReplyStyle, \n    ForumThreadPanelStyle, \n    ButtonStyle, \n    ForumThreadHeaderStyle, \n    ForumThreadPreviewStyle,\n    ForumThreadBubbleStyle, \n    ForumPanelStyle\n};\n","import {Ajax} from \"base/Ajax\";\nimport {UI, Button, registerStyle, Level, Size} from \"ui/UI\";\n\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ButtonStyle} from \"ForumStyle\";\n\n@registerStyle(ButtonStyle)\nclass CreateThreadReplyButton extends Button {\n    getDefaultOptions() {\n        return {\n            level: Level.PRIMARY,\n            size: Size.LARGE,\n            label: UI.T(\"Preview\")\n        };\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            if (!this.markupEditorModal) {\n                this.markupEditorModal = <CreateThreadReplyModal forumThreadId={this.options.forumThreadId}\n                    classMap={ChatMarkupRenderer.classMap}\n                />;\n            }\n            this.markupEditorModal.show();\n        });\n    }\n}\n\nclass CreateThreadReplyModal extends MarkupEditorModal {\n    onMount() {\n        super.onMount();\n        this.doneButton.addClickListener(() => {\n            this.createThreadReply();\n        });\n    }\n\n    createThreadReply() {\n        // TODO: should be a dispatch: it should jump and highlight your post\n        Ajax.postJSON(\"/forum/forum_thread_post/\", {\n            forumThreadId: this.options.forumThreadId,\n            message: this.markupEditor.getValue(),\n        });\n    }\n}\n\nexport {CreateThreadReplyButton};\n","import {StoreObject, GenericObjectStore} from \"state/Store\";\n\nimport {Language} from \"./LanguageStore\";\n\n\nclass TranslationKey extends StoreObject {\n}\n\nexport const TranslationKeyStore = new GenericObjectStore(\"TranslationKey\", TranslationKey);\n\nclass TranslationEntry extends StoreObject {\n    getLanguage() {\n        return Language.get(this.languageId);\n    }\n\n    getTranslationKey() {\n        return TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nexport const TranslationEntryStore = new GenericObjectStore(\"TranslationEntry\", TranslationEntry);\n\nLanguage.addListener(\"buildTranslationMap\", (language) => {\n    for (let translationEntry of TranslationEntryStore.all()) {\n        if (translationEntry.languageId === language.id) {\n            language.translationMap.set(translationEntry.getTranslationKey().value, translationEntry.value);\n        }\n    }\n});\n","import {GenericObjectStore, StoreObject} from \"state/Store\";\n\nimport {TranslationKeyStore} from \"state/TranslationStore\";\n\nexport class ErrorMessage extends StoreObject {\n    getTranslation() {\n        let translationKey = TranslationKeyStore.get(this.translationKeyId);\n    }\n}\n\nclass ErrorMessageStoreClass extends GenericObjectStore {\n    constructor() {\n        super(\"ErrorMessage\", ErrorMessage);\n    }\n}\n\nexport const ErrorMessageStore = new ErrorMessageStoreClass();\n","import {StoreObject} from \"state/Store\";\nimport {UI, ErrorModal} from \"ui/UI\";\n\nimport {ErrorMessageStore, ErrorMessage} from \"state/ErrorMessageStore\";\n\nconst ErrorHandlers = {};\n\nErrorHandlers.wrapError = (error) => {\n    if (error instanceof StoreObject) {\n        return error;\n    }\n\n    if (error.id) {\n        return ErrorMessageStore.fakeCreate(error);\n    } else {\n        if (typeof error === \"string\" || error instanceof String) {\n            error = {message: error};\n        } else if (error instanceof Error) {\n            error = {\n                name: error.name,\n                message: error.message\n            };\n        }\n        return new ErrorMessage(error);\n    }\n};\n\nErrorHandlers.showErrorAlert = (error) => {\n    ErrorModal.show({\n        error: ErrorHandlers.wrapError(error)\n    });\n};\n\nErrorHandlers.PAGE_NOT_FOUND = ErrorHandlers.wrapError(\"Page not found.\");\n\nexport {ErrorHandlers};\n","import {Ajax} from \"base/Ajax\";\nimport {NOOP_FUNCTION} from \"base/Utils\";\nimport {\n    ActionModal,\n    ActionModalButton,\n    Button,\n    Input,\n    Link,\n    Panel,\n    Router,\n    TimePassedSpan,\n    UI,\n    registerStyle,\n    Level,\n    Size\n} from \"ui/UI\";\nimport {ConcentricCirclesLoadingScreen} from \"ui/ConcentricCirclesLoadingScreen\";\n\nimport {MarkupEditorModal} from \"markup/MarkupEditorModal\";\nimport {LoginModal} from \"LoginModal\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {UserHandle} from \"UserHandle\";\nimport {EditThreadReplyButton} from \"EditThreadReplyButton\";\nimport {DeleteThreadReplyButton} from \"DeleteThreadReplyButton\";\nimport {CreateThreadReplyButton} from \"CreateThreadReplyButton\";\nimport {CommentVotingWidgetWithThumbs} from \"VotingWidget\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {ForumThreadPanelStyle} from \"ForumStyle\";\nimport {ButtonStyle} from \"ForumStyle\";\n\nlet forumThreadPanelStyle = ForumThreadPanelStyle.getInstance();\nButtonStyle.getInstance();\n\n\nclass CreateForumThreadModal extends MarkupEditorModal {\n    render() {\n        let inputStyle = {\n            \"margin-bottom\": \"4px\",\n            \"border\": \"0\",\n            //\"border-radius\": \"4px\",\n            //\"border\": \"2px solid #dcdcdc\",\n            \"outline\": \"none\",\n            \"color\": \"#333\",\n            \"font-size\": \"14px\",\n            \"padding-left\": \"8px\",\n            \"width\": \"100%\",\n            \"text-align\": \"center\",\n            \"font-weight\": \"bold\",\n        };\n\n        return [\n            <Input label={UI.T(\"Title\")} ref=\"titleInput\" style={inputStyle} placeholder=\"Click here to edit the title (max. 160 characters).\" />,\n            ...super.render(),\n        ];\n    }\n\n    onMount() {\n        this.doneButton.addClickListener(() => {\n            this.createForumThread();\n        });\n    }\n\n    routeToThread(forumThreadId) {\n        // TODO: add the temp forum title\n        Router.changeURL([\"forum\", forumThreadId, \"title\"])\n    }\n\n    createForumThread() {\n        let request = {\n            forumId: this.options.forumId,\n            title: this.titleInput.getValue(),\n            message: this.markupEditor.getValue(),\n        };\n\n        Ajax.postJSON(\"/forum/create_forum_thread/\", request).then(\n            (data) => {\n                this.routeToThread(data.forumThreadId);\n                this.titleInput.setValue(\"\");\n                this.markupEditor.setValue(\"\");\n                this.markupEditor.redraw();\n                this.hide();\n            }\n        );\n    }\n}\n\n@registerStyle(ButtonStyle)\nclass CreateForumThreadButton extends Button {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.button);\n    }\n\n    setOptions(options) {\n        if (!options.faIcon) {\n            options.label = options.label || UI.T(\"Preview\");\n        }\n        options.level = options.level || Level.PRIMARY;\n        options.size = options.size || Size.LARGE;\n        super.setOptions(options);\n    }\n\n    getModalClass() {\n        return CreateForumThreadModal;\n    }\n\n    onMount() {\n        super.onMount();\n        this.addClickListener(() => {\n            if (!USER.isAuthenticated) {\n                LoginModal.show();\n                return;\n            }\n            this.getModalClass().show({\n                forumId: this.options.forumId,\n                classMap: ChatMarkupRenderer.classMap,\n            });\n        });\n    }\n}\n\nclass DeleteForumThreadModal extends ActionModal {\n    getTitle() {\n        return UI.T(\"Delete forum thread\");\n    }\n\n    getActionName() {\n        return UI.T(\"Delete\");\n    }\n\n    getBody() {\n        return <p>\n            {UI.T(\"Are you sure you want to delete thread\")}\n            {\" \\\"\" + this.options.forumThread.title + \"\\\"?\"}\n        </p>;\n    }\n\n    action() {\n        this.options.forumThread.deleteThread();\n        this.hide();\n    }\n}\n\nlet DeleteForumThreadButton = ActionModalButton(DeleteForumThreadModal);\n\nclass ForumThreadReply extends UI.Element {\n    extraNodeAttributes(attr) {\n        // attr.addClass(forumThreadReplyStyle.mainClass);\n    }\n\n    getMessageInstance() {\n        return this.options.messageInstance;\n    }\n\n    render() {\n        let messageInstance = this.getMessageInstance();\n        let deleteMessage;\n        let editMessage;\n        let editAndDeleteButtons = <span/>;\n\n        if (USER.isSuperUser || USER.id === messageInstance.userId) {\n            deleteMessage = <DeleteThreadReplyButton\n                faIcon=\"trash\"\n                level={Level.DANGER}\n                className={forumThreadPanelStyle.deleteButton}\n                modalOptions={{messageInstance: messageInstance}} />;\n            editMessage = <EditThreadReplyButton\n                faIcon={\"pencil\"}\n                level={Level.INFO}\n                messageInstance={messageInstance}\n                forumThreadPanel={this}\n                className={forumThreadPanelStyle.editButton} />;\n            editAndDeleteButtons = <div className={forumThreadPanelStyle.editDeleteButtons} style={{width: \"auto\",}}>\n                {editMessage}\n                {deleteMessage}\n            </div>;\n        }\n\n        return [\n            <div className={forumThreadPanelStyle.fullPost}>\n                <div className={forumThreadPanelStyle.author}\n                    style={{\n                        fontSize: \"1em\",\n                        paddingLeft: \"12px\",\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                    }}>\n                    <UserHandle id={messageInstance.userId} style={{\n                        textTransform: \"initial\",\n                        fontSize: \"1.1em\",\n                    }}/>\n                    <TimePassedSpan timeStamp={messageInstance.getDate()} style={{\n                        color: \"#262626 !important\",\n                        paddingRight: \"12px\",\n                    }}/>\n                </div>\n                <ChatMarkupRenderer ref={this.refLink(\"postContent\" + messageInstance.id)} value={messageInstance.getContent()} className={forumThreadPanelStyle.message}/>\n                <div className={forumThreadPanelStyle.bottomPanel}>\n                    {editAndDeleteButtons}\n                    <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={messageInstance} className={forumThreadPanelStyle.voting}/>\n                </div>\n            </div>\n        ];\n    }\n\n    onMount() {\n        this.attachEventListener(this.getMessageInstance(), \"messageDelete\", () => {\n            this.hide();\n        });\n        this.attachEventListener(this.getMessageInstance(), \"messageEdit\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumThreadPanelStyle)\nclass ForumThreadPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    returnToMainForum() {\n        Router.changeURL(this.getMainForumURL());\n    }\n\n    getMainForumURL() {\n        return \"/forum/\";\n    }\n\n    getForumThreadState(callback=NOOP_FUNCTION) {\n        let request = {\n            forumThreadId: this.options.forumThread.id,\n        };\n\n        Ajax.postJSON(\"/forum/forum_thread_state/\", request).then(\n            callback,\n            (error) => {\n                this.returnToMainForum();\n                ErrorHandlers.showErrorAlert(error);\n            }\n        );\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getTitle() {\n        return [\n            <div className={this.styleSheet.title}>\n                <Link href={this.getMainForumURL()} className={this.styleSheet.backButton}\n                    value={<span className=\"fa fa-arrow-left\" style={{\n                        paddingRight: \"10px\",\n                        fontSize: \".8em\",\n                        color: \"#333\",\n                    }} />} />\n                {this.getForumThread().getTitle()}\n            </div>\n        ];\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.author}>\n            {UI.T(\"written by\")}&nbsp;\n            <UserHandle id={this.getForumThread().authorId} style={{\n                textTransform: \"initial\",\n            }}/>\n            &nbsp;\n            <TimePassedSpan timeStamp={this.getForumThread().getTimeAdded()} style={{color: \"#262626 !important\",}}/>\n        </div>;\n    }\n\n    getMessage() {\n        return <div className={this.styleSheet.message}>\n                 <ChatMarkupRenderer ref={this.refLink(\"content\")} value={this.getForumThread().getContentMessage().getContent()} style={{height:\"auto\"}}/>\n            </div>;\n    }\n\n    getNumReplies(postsLength) {\n        return [\n            <div className={this.styleSheet.numReplies}>\n                <span style={{\"font-weight\": \"bold\", }}>{postsLength}</span>\n                &nbsp;{\"replies in this thread\" + (postsLength == 0 ? \", be the first one to comment\" : \"\")}\n            </div>\n        ];\n    }\n\n    getVoting() {\n        return <div className={this.styleSheet.voting}>\n            <CommentVotingWidgetWithThumbs height={40} balanceColor={\"#313534\"} notVoteColor={\"#313534\"} message={this.getForumThread().getContentMessage()} style={{\"margin-left\": \"0\", }} />\n        </div>;\n    }\n\n    render() {\n        if (!this.options.forumThread.isLoaded()) {\n            this.getForumThreadState(() => {\n                this.redraw();\n                this.initializeListeners();\n            });\n            return <ConcentricCirclesLoadingScreen />;\n        }\n\n        let replies = [];\n        let spaceBetween;\n        let forumThread = this.options.forumThread;\n\n        // sort the forum replies by the activity date\n        let forumThreadMessages = Array.from(forumThread.getMessageThread().getMessages());\n        forumThreadMessages.sort((a, b) => {\n            return a.getDate() - b.getDate();\n        });\n\n        for (let messageInstance of forumThreadMessages) {\n            if (messageInstance !== forumThread.getContentMessage()) {\n                replies.push(<ForumThreadReply className={this.styleSheet.replies} messageInstance={messageInstance} />);\n            }\n        }\n\n        if (replies.length) {\n            spaceBetween = <div style={{\n                height: \"60px\",\n                borderBottom: \"1px solid #ddd\",\n                width: \"90%\",\n                maxWidth: \"1200px\",\n                margin: \"0 auto\",\n            }}></div>;\n        }\n\n        let deleteButton;\n        let editButton;\n        let editAndDeleteButtons;\n\n        if (USER.isSuperUser || USER.id === this.getForumThread().authorId) {\n            deleteButton = <DeleteForumThreadButton faIcon=\"trash\"\n                                                    level={Level.DANGER}\n                                                    className={this.styleSheet.deleteButton}\n                                                    modalOptions = {{\n                                                        forumThread: this.getForumThread()\n                                                    }}/>;\n            editButton = <EditThreadReplyButton faIcon=\"pencil\"\n                                                level={Level.INFO}\n                                                className={this.styleSheet.editButton}\n                                                messageInstance={this.getForumThread().getContentMessage()}/>;\n            editAndDeleteButtons = <div className={this.styleSheet.editDeleteButtons}>\n                {editButton}\n                {deleteButton}\n            </div>;\n        }\n\n        return [\n            <div style={{marginBottom: \"60px\",}}>\n                <div className={this.styleSheet.header}>\n                    {this.getTitle()}\n                    <div className={this.styleSheet.replyButtonDiv}>\n                        {this.getAuthor()}\n                        <CreateThreadReplyButton\n                            label={UI.T(\"REPLY\")}\n                            className={this.styleSheet.replyButton}\n                            size={Size.DEFAULT}\n                            forumThreadId={forumThread.id}\n                            forumThread={this.getForumThread()}\n                            classMap={ChatMarkupRenderer.classMap}\n                        />\n                    </div>\n                </div>\n                <div style={{width: \"90%\", maxWidth: \"1200px\", margin: \"0 auto\", height: \"3px\", backgroundColor: \"#333\", marginTop: \"10px\",}}></div>\n                <div className={this.styleSheet.fullPost}>\n                    {this.getMessage()}\n                    <div className={this.styleSheet.bottomPanel}>\n                        {this.getNumReplies(replies.length)}\n                        {this.getVoting()}\n                    </div>\n                    {editAndDeleteButtons}\n                </div>\n                {spaceBetween}\n                {replies}\n            </div>\n        ];\n    }\n\n    deleteThread() {\n        this.getForumThread().deleteThread();\n    }\n\n    initializeListeners() {\n        // These listeners need to be attached after the ForumThread is loaded in the js state\n        this.getForumThread().getMessageThread().addListener(\"newMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getMessageThread().addListener(\"deleteMessage\", () => {\n            this.redraw();\n        });\n        this.getForumThread().getContentMessage().addEventListener(\"messageEdit\", () => {\n            this.content.setValue(this.getForumThread().getContentMessage().getContent());\n            this.content.redraw();\n        });\n    }\n\n    onMount() {\n        // This applies only for a newly created forum thread, since the listeners from\n        // render do not get attached when the thread is already in the state.\n\n        if (this.options.forumThread.isLoaded()) {\n            this.initializeListeners();\n        }\n\n        this.getForumThread().addDeleteListener(() => {\n            this.returnToMainForum();\n        });\n    }\n}\n\nexport {CreateForumThreadButton, ForumThreadPanel};\n","import {Ajax} from \"base/Ajax\";\nimport {slugify} from \"base/Utils\";\nimport {UI, Size, Panel, Link, Route, TimePassedSpan, registerStyle} from \"ui/UI\";\nimport {StateDependentElement} from \"ui/StateDependentElement\";\n\nimport {UserHandle} from \"UserHandle\";\nimport {ChatMarkupRenderer} from \"ChatMarkupRenderer\";\nimport {ForumStore, ForumThreadStore} from \"./state/ForumStore\";\nimport {ForumThreadPanel, CreateForumThreadButton} from \"./ForumThread\";\nimport {ForumThreadHeaderStyle, ForumThreadPreviewStyle, ForumThreadBubbleStyle, ForumPanelStyle} from \"./ForumStyle\";\n\n\n@registerStyle(ForumThreadHeaderStyle)\nexport class ForumThreadHeader extends UI.Element {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.tagsTitle}>\n            {UI.T(\"Title\")}\n        </div>;\n    }\n\n    getAuthor() {\n        return <div className={this.styleSheet.tagsAuthor}>\n            {UI.T(\"Author\")}\n        </div>;\n    }\n\n    getReplies() {\n        return <div className={this.styleSheet.tagsReplies}>\n            {UI.T(\"Replies\")}\n        </div>;\n    }\n\n    getViews() {\n        return <div className={this.styleSheet.tagsViews}>\n            {UI.T(\"Views\")}\n        </div>;\n    }\n\n    getVotes() {\n        return <div className={this.styleSheet.tagsVotes}>\n            {UI.T(\"Score\")}\n        </div>;\n    }\n\n    getActivity() {\n        return <div className={this.styleSheet.tagsActivity}>\n            {UI.T(\"Active\")}\n        </div>;\n    }\n\n    render() {\n        return [\n            this.getTitle(),\n            this.getAuthor(),\n            this.getReplies(),\n            this.getViews(),\n            this.getVotes(),\n            this.getActivity(),\n        ];\n    }\n}\n\n@registerStyle(ForumThreadPreviewStyle)\nexport class ForumThreadPreview extends ChatMarkupRenderer {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.forumThreadPreview);\n    }\n}\n\n@registerStyle(ForumThreadBubbleStyle)\nexport class ForumThreadBubble extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.addClass(this.styleSheet.mainClass);\n        // couldn't figure out how to solve this easier and better\n        // if (this.options.isPinned) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorPinnedInstances));\n        // } else if (this.options.color == 0) {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorOddInstances));\n        // } else {\n        //     attr.addClass(String(forumThreadBubbleStyle.backgroundColorEvenInstances));\n        // }\n        return attr;\n    }\n\n    getHref() {\n        return \"/forum/\" + this.getForumThread().id + \"/\" + slugify(this.getForumThread().getTitle());\n    }\n\n    getForumThread() {\n        return this.options.forumThread;\n    }\n\n    getThreadTitle() {\n        let pinned = \"\";\n        if (this.getForumThread().isPinned()) {\n            pinned = <span className={\"fa fa-thumb-tack \" + this.styleSheet.pinnedIcon} aria-hidden=\"true\" style={{paddingTop: \"0\", lineHeight: \"20px\", height: \"20px\",}}/>;\n        }\n        let forumThread = this.getForumThread();\n        return [\n            <div className={this.styleSheet.threadTitleAndPreview}>\n                <div className={this.styleSheet.threadTitle}\n                    style={{paddingBottom: () => {\n                        if (forumThread.getContentMessage().content) {\n                            return this.styleSheet.titlePaddingBottom;\n                        }\n                        return \"0\";\n                    }}}>\n                    {pinned}\n                    <Link style={{\"text-decoration\": \"none\", \"color\": \"inherit\", \"font-size\": \"14px\", \"text-align\": \"justify\"}} href={this.getHref()}\n                        value={<span className={this.styleSheet.threadTitleSpan}>\n                                {this.getForumThread().getTitle()}\n                                </span>} />\n                </div>\n                <ForumThreadPreview value={this.getForumThread().getContentMessage().content} />\n            </div>\n        ];\n    }\n\n    getThreadAuthor() {\n        return [\n            <span className={this.styleSheet.threadAuthor}>\n                <UserHandle id={this.getForumThread().authorId} style={{\n                    \"line-height\": \"normal\",\n                    wordBreak: \"break-word\",\n                }} />\n            </span>\n        ];\n    }\n\n    getThreadReplies() {\n        return [\n            <div className={this.styleSheet.threadReplies}>\n                <Link style={{\n                    \"text-decoration\": \"none\",\n                    \"color\": \"inherit\",\n                }} href={this.getHref()} value={\n                    <span className={this.styleSheet.threadRepliesSpan}>\n                        {this.getForumThread().getNumReplies()}\n                    </span>\n                } />\n            </div>\n        ];\n    }\n\n    getThreadViews() {\n        return [\n            <div className={this.styleSheet.threadViews}>\n                {this.getForumThread().numViews}\n            </div>\n        ];\n    }\n\n    getThreadVotes() {\n        return [\n            <div className={this.styleSheet.threadVotes}>\n                {this.getForumThread().getVotesBalance()}\n            </div>\n        ];\n    }\n\n    getThreadActivity() {\n        let threadActivity = this.getForumThread().getLastActive();\n        /* TODO @mihaic, this should support custom color option (but I didn't want to change stem files on my own). check UIPrimitives.jsx line 400 */\n        return [\n            <div className={this.styleSheet.threadActivity}>\n                <TimePassedSpan timeStamp={threadActivity} />\n            </div>\n        ]\n    }\n\n    render() {\n        return [\n            this.getThreadTitle(),\n            this.getThreadAuthor(),\n            this.getThreadReplies(),\n            this.getThreadViews(),\n            this.getThreadVotes(),\n            this.getThreadActivity(),\n        ];\n    }\n\n    onMount() {\n        super.onMount();\n        this.getForumThread().addUpdateListener(() => {\n            this.redraw();\n        });\n        this.getForumThread().addDeleteListener(() => {\n            this.hide();\n        });\n    }\n}\n\nexport class ForumThreadList extends UI.Element {\n    getNodeAttributes() {\n        let attr = super.getNodeAttributes();\n        attr.setStyle({\n            width: \"90%\",\n            margin: \"0 auto\",\n            marginTop: \"10px\",\n            marginBottom: \"60px\",\n            // boxShadow: \"0px 0px 10px #ddd\", // TODO: Do we want this?\n        });\n        return attr;\n    }\n\n    getBubbleClass() {\n        return ForumThreadBubble;\n    }\n\n    render() {\n        let forumThreads = Array.from(this.options.forum.getForumThreads());\n\n        forumThreads.sort((a, b) => {\n            if (a.isPinned() && b.isPinned()) {\n                return b.getPinIndex() - a.getPinIndex();\n            }\n            if (a.isPinned()) {\n                return -1;\n            }\n            if (b.isPinned()) {\n                return 1;\n            }\n            return b.lastActive - a.lastActive;\n        });\n\n        let result = [];\n        let color = 1;\n        result.push(<ForumThreadHeader/>);\n        let Bubble = this.getBubbleClass();\n        for (let forumThread of forumThreads) {\n            result.push(<Bubble forumThread={forumThread} color={color} isPinned={forumThread.isPinned()}/>);\n            if (!forumThread.isPinned()) {\n                color = !color;\n            }\n        }\n        return result;\n    }\n\n    onMount() {\n        super.onMount();\n        this.options.forum.addListener(\"newForumThread\", () => {\n            this.redraw();\n        });\n    }\n}\n\n@registerStyle(ForumPanelStyle)\nexport class ForumPanel extends Panel {\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.mainClass);\n    }\n\n    getTitle() {\n        return <div className={this.styleSheet.title}>\n                {this.options.forum.name}\n            </div>;\n    }\n\n    getButton() {\n        return <div className={this.styleSheet.buttonParent}>\n            <CreateForumThreadButton\n                label=\"NEW POST\"\n                className={this.styleSheet.button}\n                size={Size.DEFAULT}\n                forumId={this.options.forum.id}\n            />\n        </div>;\n    }\n\n    getForumThreadList() {\n        return <ForumThreadList forum={this.options.forum}/>;\n    }\n\n    render() {\n        return [\n            <div className={this.styleSheet.header}>\n                {this.getTitle()}\n                {this.getButton()}\n            </div>,\n            this.getForumThreadList(),\n        ];\n    }\n\n    onMount() {\n        this.attachListener(ForumThreadStore, \"create\", () => this.redraw());\n        this.attachListener(ForumThreadStore, \"delete\", () => this.redraw());\n    }\n}\n\nexport class DelayedForumPanel extends StateDependentElement(ForumPanel) {\n    importState(data) {\n        super.importState(data);\n        this.options.forum = ForumStore.get(this.options.forumId);\n    }\n}\n\nexport class DelayedForumThreadPanel extends StateDependentElement(ForumThreadPanel) {\n    // TODO: must be able to specify if URL is POST or GET in StateDependentElement\n    beforeRedrawNotLoaded() {\n        Ajax.postJSON(\"/forum/forum_thread_state/\", {\n            forumThreadId: this.options.forumThreadId,\n        }).then(\n            (data) => {\n                this.importState(data);\n                this.setLoaded();\n            },\n            () => {}\n        );\n    }\n\n    importState(data) {\n        super.importState(data);\n        this.options.forumThread = ForumThreadStore.get(this.options.forumThreadId);\n    }\n}\n\nexport class ForumRoute extends Route {\n    getSubroutes() {\n        return [\n            new Route([\"%s\", \"%s\"], (options) => {\n                const forumThreadId = options.args[options.args.length - 2];\n\n                const forumThread = ForumThreadStore.get(forumThreadId);\n\n                if (forumThread) {\n                    return <ForumThreadPanel forumThread={forumThread} />;\n                } else {\n                    return <DelayedForumThreadPanel forumThreadId={forumThreadId} />;\n                }\n            }),\n        ]\n    }\n\n    constructor(expr=\"forum\", options={}) {\n        super(expr, DelayedForumPanel, [], options);\n        this.subroutes = this.getSubroutes();\n    }\n}\n","import {UI, Route} from \"UI\";\nimport {IndexPage} from \"./IndexPage\";\nimport {BlogRoute} from \"BlogPanel\";\nimport {ForumRoute} from \"ForumPanel\";\n\nexport const MAIN_ROUTE = new Route(null, IndexPage, [\n    new BlogRoute(),\n    new ForumRoute(),\n]);","import {StyleSheet, styleRule} from \"../Style\";\nimport {enhance} from \"../Color\";\n\n\nclass NavStyle extends StyleSheet {\n    // Custom variables\n    getColors() {\n        const themeProperties = this.themeProperties;\n\n        const navManagerColor = themeProperties.COLOR_PRIMARY;\n        const navBarColor = themeProperties.NAV_MANAGER_COLOR_NAV_BAR || navManagerColor;\n        const sidePanelColor = themeProperties.NAV_MANAGER_COLOR_SIDE_PANEL || enhance(navManagerColor, 0.05);\n\n        this.colors = {\n            boxShadowNavManager: themeProperties.NAV_MANAGER_BOX_SHADOW_NAVBAR,\n            boxShadowSidePanel: themeProperties.NAV_MANAGER_BOX_SHADOW_SIDE_PANEL,\n            sidepanelBackground: themeProperties.NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR || sidePanelColor,\n            sidepanelHover: themeProperties.NAV_MANAGER_SIDE_PANEL_HOVER_COLOR || enhance(sidePanelColor, 0.1),\n            navbarBackground: themeProperties.NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR || navBarColor,\n            navbarHover: themeProperties.NAV_MANAGER_NAV_BAR_HOVER_COLOR || enhance(navBarColor, 0.1),\n            hr: themeProperties.NAV_MANAGER_HR_COLOR || enhance(sidePanelColor, 0.15),\n            text: themeProperties.NAV_MANAGER_TEXT_COLOR || enhance(navManagerColor, 1),\n        };\n\n        return this.colors;\n    }\n\n    dimensions = {\n        collapseArrowWidth: \"20px\",\n        navbarHeight: \"50px\",\n        sidepanelElementHeight: \"30px\",\n        sidepanelWidthLeft: \"250px\",\n        sidepanelWidth: \"330px\",\n        sidepanelHideWidth: \"335px\",\n        sidepanelTransitionDuration: \".15s\",\n        boxShadowWidth: \"5px\",\n        backgroundTransitionDuration: \".2s\",\n    };\n\n    // Icons\n    @styleRule\n    icon = {\n        color: this.getColors().text,\n        lineHeight: this.dimensions.navbarHeight,\n        height: this.dimensions.navbarHeight,\n        width: this.dimensions.navbarHeight,\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        textAlign: \"center\",\n        \":hover\": {\n            backgroundColor: this.getColors().navbarHover,\n        }\n    };\n\n    @styleRule\n    sideIcon = {\n        fontSize: \"120%\",\n    };\n\n    @styleRule\n    wrappedIcon = {\n        fontSize: \"100%\",\n        flex: \"1\",\n    };\n\n    // Nav manager elements\n    navElement = {\n        transition: `background-color ${this.dimensions.backgroundTransitionDuration}`,\n    };\n\n    @styleRule\n    navLinkElement = {\n        display: \"block\",\n        color: this.getColors().text,\n        textDecoration: \"none\",\n        listStyleType: \"none\",\n        \":hover\": {\n            backgroundColor: this.getColors().sidepanelHover,\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":focus\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":active\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n        \":visited\": {\n            color: this.getColors().text,\n            textDecoration: \"none\",\n        },\n    };\n\n\n    // Navbar\n    @styleRule\n    navManager = {\n        display: \"flex\",\n        height: this.dimensions.navbarHeight,\n        lineHeight: this.dimensions.navbarHeight,\n        width: \"100%\",\n        backgroundColor: this.getColors().navbarBackground,\n        boxShadow: this.getColors().boxShadowNavManager,\n        zIndex: \"9999\",\n        position: \"fixed\",\n    };\n\n\n    // Navbar elements\n    @styleRule\n    navElementHorizontal = {\n        color: this.getColors().text,\n        backgroundColor: this.getColors().navbarBackground,\n        listStyleType: \"none\",\n        cursor: \"pointer\",\n        \">:nth-child(2)\": {\n            position: \"absolute\",\n        }\n    };\n\n    @styleRule\n    navElementHorizontalArrow = {\n        paddingLeft: \".1em\",\n        verticalAlign: \"middle\",\n    };\n\n    @styleRule\n    navElementValueHorizontal = [\n        this.navElement, {\n            padding: \"0 0.7em\",\n            color: this.getColors().text,\n            width: \"100%\",\n            \":hover\": {\n                backgroundColor: this.getColors().navbarHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionHorizontal = {\n        display: \"inline-block\",\n        paddingLeft: \"0\",\n        height: this.dimensions.navbarHeight,\n        marginBottom: \"0\",\n    };\n\n\n    // Sidepanel\n    sidePanel = {\n        top: \"0\",\n        bottom: \"0\",\n        height: \"100%\",\n        backgroundColor: () => this.getColors().sidepanelBackground,\n        overflow: \"hidden\",\n        position: \"fixed\",\n        zIndex: \"3000\",\n        boxShadow: () => this.getColors().boxShadowSidePanel,\n        width: () => this.dimensions.sidepanelWidth,\n        transitionDuration: () => this.dimensions.sidepanelTransitionDuration,\n    };\n\n    @styleRule\n    leftSidePanel = [\n        this.sidePanel, {\n            overflowY: \"scroll\",\n            width: this.dimensions.sidepanelWidthLeft,\n            \"-ms-overflow-style\": \"none\",\n            overflow: \"-moz-scrollbars-none\",\n            \"::-webkit-scrollbar\": {\n                display: \"none\"\n            }\n        }\n    ];\n\n    @styleRule\n    rightSidePanel = this.sidePanel;\n\n\n    // Sidepanel elements\n    @styleRule\n    navElementVertical = {\n        color: this.getColors().text,\n        cursor: \"pointer\",\n        listStyleType: \"none\",\n        minHeight: this.dimensions.sidepanelElementHeight,\n        overflow: \"hidden\",\n        position: \"relative\",\n        \">*\": {\n            paddingLeft: this.dimensions.collapseArrowWidth,\n        },\n    };\n\n    @styleRule\n    navElementVerticalArrow = {\n        width: this.dimensions.collapseArrowWidth,\n        textAlign: \"center\",\n    };\n\n    @styleRule\n    navElementValueVertical = [\n        this.navElement, {\n            color: this.getColors().text,\n            zIndex: \"1\",\n            position: \"relative\",\n            width: \"100%\",\n            height: this.dimensions.sidepanelElementHeight,\n            lineHeight: this.dimensions.sidepanelElementHeight,\n            \":hover\": {\n                backgroundColor: this.getColors().sidepanelHover,\n            },\n        }\n    ];\n\n    @styleRule\n    navSectionVertical = {\n        paddingLeft: \"0\",\n        marginBottom: \"0\",\n        width: \"100%\",\n    };\n\n    @styleRule\n    navCollapseElement = {\n        color: this.getColors().text,\n        textAlign: \"initial\",\n        lineHeight: this.dimensions.sidepanelElementHeight,\n    };\n\n    @styleRule\n    sidePanelGroup = {\n        paddingTop: this.dimensions.navbarHeight,\n        height: \"inherit\",\n        width: this.dimensions.sidepanelWidth,\n        position: \"absolute\",\n        zIndex: \"3\",\n    };\n\n    @styleRule\n    hrStyle = {\n        margin: \"10px 5%\",\n        borderTop: () => \"2px solid \" + this.getColors().hr,\n    };\n\n\n    // Sidepanel transitions\n    @styleRule\n    navVerticalLeftHide = {\n        marginLeft: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n\n    @styleRule\n    navVerticalRightHide = {\n        marginRight: \"-\" + this.dimensions.sidepanelHideWidth,\n        overflow: \"hidden\",\n    };\n}\n\n\nexport {NavStyle};\n","import {Dispatchable} from \"./Dispatcher\";\n\n// Class for working with the Window.localStorage and Window.sessionStorage objects\n// All keys are prefixed with our custom name, so we don't have to worry about polluting the global storage namespace\n// Keys must be strings, and values are modified by the serialize/deserialize methods,\n// which by default involve JSON conversion\nclass StorageMap extends Dispatchable {\n    static SEPARATOR = \"-@#%-\";\n\n    constructor(storage, name=\"\") {\n        super();\n        this.storage = storage;\n        this.name = name;\n        this.prefix = name + this.constructor.SEPARATOR;\n    }\n\n    getPrefix() {\n        return this.prefix;\n    }\n\n    getRawKey(key) {\n        return this.getPrefix() + key;\n    }\n\n    // Method to serialize the values\n    serialize(value) {\n        return JSON.stringify(value);\n    }\n\n    // Method to deserialize the value (which can be null if there is no value)\n    deserialize(value) {\n        return value && JSON.parse(value);\n    }\n\n    set(key, value) {\n        try {\n            this.storage.setItem(this.getRawKey(key), this.serialize(value));\n        }\n        catch(e) {\n            return false;\n        }\n        return true;\n    }\n\n    delete(key) {\n        this.storage.removeItem(this.getRawKey(key));\n    }\n\n    getRaw(key) {\n        return this.storage.getItem(this.getRawKey(key));\n    }\n\n    get(key, defaultValue = null) {\n        const value = this.getRaw(key);\n        if (value == null) {\n            return defaultValue;\n        }\n        return this.deserialize(value);\n    }\n\n    has(key) {\n        return (this.getRaw(key) != null);\n    }\n\n    keys() {\n        let result = [];\n        const totalStorageKeys = this.storage.length;\n        const prefixLenth = this.getPrefix().length;\n        for (let i = 0; i < totalStorageKeys; i++) {\n            const key = this.storage.key(i);\n            if (key.startsWith(this.getPrefix())) {\n                result.push(key.substr(prefixLenth));\n            }\n        }\n        return result;\n    }\n\n    values() {\n        return this.keys().map(key => this.get(key));\n    }\n\n    entries() {\n        return this.keys().map(key => [key, this.get(key)]);\n    }\n\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n\n    // Remove all of the keys that start with out prefix\n    clear() {\n        for (let key of this.keys()) {\n            this.delete(key);\n        }\n    }\n}\n\n// SessionStorageMap can be used to preserve data on tab refreshes\nexport class SessionStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.sessionStorage, name);\n    }\n}\n\n// LocalStorageMap can be used to store data across all our tabs\nexport class LocalStorageMap extends StorageMap {\n    constructor(name=\"\") {\n        super(window.localStorage, name);\n    }\n\n    // Since we don't want a listener attached to window storage event for each map, we create a global one\n    // Any raw key that contains our separator has its original map identified and gets dispatched only for that map\n    static getChangeDispatchable() {\n        if (!this.CHANGE_DISPATCHABLE) {\n            this.CHANGE_DISPATCHABLE = new Dispatchable();\n            window.addEventListener(\"storage\", (event) => {\n                let separatorIndex = event.key.indexOf(this.SEPARATOR);\n                if (separatorIndex === -1) {\n                    // This is not an event associated with a storage map\n                    return;\n                }\n                const name = event.key.substr(0, separatorIndex);\n                const actualKey = event.key.substr(separatorIndex + this.SEPARATOR.length);\n                let newEvent = {\n                    originalEvent: event,\n                    key: actualKey,\n                    oldValue: event.oldValue,\n                    newValue: event.newValue,\n                };\n                this.CHANGE_DISPATCHABLE.dispatch(name, newEvent);\n            });\n        }\n        return this.CHANGE_DISPATCHABLE;\n    }\n\n    // Add a listener for all change event on the current map\n    // Only works if we're being backed by Window.localStorage and only received events from other tabs (not the current tab)\n    // The event has the following fields: key, oldValue, newValue, url, storageArea, originalEvent\n    // The key is modified to be the same the one you used in the map\n    addChangeListener(callback, doDeserialization=true) {\n        let realCallback = callback;\n        if (doDeserialization) {\n            realCallback = (event) => {\n                event.oldValue = this.deserialize(event.oldValue);\n                event.newValue = this.deserialize(event.newValue);\n                callback(event);\n            }\n        }\n\n        return this.constructor.getChangeDispatchable().addListener(this.name, realCallback);\n    }\n}\n","import {UI, Link, Switcher} from \"../UI\";\nimport {FACollapseIcon} from \"../FontAwesome\"; //TODO: more flexibility, do not require FAIcons in NavElements\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {unwrapArray} from \"../../base/Utils\";\nimport {Orientation, Direction} from \"../Constants\";\n\nlet navSessionManager = new SessionStorageMap(\"navManager\");\n\nconst BasicOrientedElementInterface = (BaseClass) => class BasicOrientedElement extends BaseClass {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    getOrientation() {\n        if (this.options.orientation) {\n            return this.options.orientation;\n        }\n        if (this.parent && typeof this.parent.getOrientation === \"function\") {\n            return this.parent.getOrientation();\n        }\n        return Orientation.HORIZONTAL;\n    }\n};\n\nconst BasicOrientedElement = BasicOrientedElementInterface(UI.Element);\nconst BasicOrientedLinkElement = BasicOrientedElementInterface(Link);\n\n\n// NavElements should know if they are in vertical or horizontal mode, so they can behave differently\nconst NavElementInterface = (BaseClass) => class NavElement extends BaseClass {\n    constructor() {\n        super(...arguments);\n        this.isToggled = this.getToggledState();\n    }\n\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.styleSheet.navElementHorizontal);\n\n            if (this.parent instanceof NavSection) {\n                attr.setStyle(\"float\", \"left\");\n            } else {\n                // it is an element in a dropdown\n                attr.addClass(this.styleSheet.navCollapseElement);\n            }\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.styleSheet.navElementVertical);\n        }\n    }\n\n    getSelf() {\n        const style = (this.getOrientation() === Orientation.HORIZONTAL ?\n                        this.styleSheet.navElementValueHorizontal : this.styleSheet.navElementValueVertical);\n        const marginLeft = this.getOrientation() === Orientation.VERTICAL && unwrapArray(this.render()).length ? \"-20px\" : \"0\";\n\n        return <BasicOrientedElement className={style} style={{marginLeft: marginLeft}}>\n            {this.getValue()}\n        </BasicOrientedElement>;\n    }\n\n    getSubElements() {\n        let childrenToRender = unwrapArray(this.render());\n        if (childrenToRender.length) {\n            let subElementsClass;\n            if (!this.isToggled) {\n                subElementsClass = \"hidden\";\n            }\n            return <BasicOrientedElement ref=\"contentArea\" className={subElementsClass}>\n                {childrenToRender}\n            </BasicOrientedElement>;\n        }\n        return null;\n    }\n\n    getValue() {\n        let result;\n        if (unwrapArray(this.render()).length) {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                // is in the sidebar\n                result = [\n                    <FACollapseIcon ref=\"collapseIcon\" collapsed={!this.isToggled} className={this.styleSheet.navElementVerticalArrow} />,\n                    this.options.value\n                ];\n            } else if (this.getOrientation() === Orientation.HORIZONTAL) {\n                // is in the navbar\n                result = [\n                    this.options.value,\n                    <FACollapseIcon collapsed={false} className={this.styleSheet.navElementHorizontalArrow} />,\n                ];\n            }\n        } else {\n            result = this.options.value;\n        }\n        return result;\n    }\n\n    getChildrenToRender() {\n        return [\n            this.getSelf(),\n            this.getSubElements(),\n        ];\n    }\n\n    showChildren() {\n        this.contentArea.removeClass(\"hidden\");\n    }\n\n    hideChildren() {\n        this.contentArea.addClass(\"hidden\");\n    }\n\n    toggleChildren() {\n        if (!unwrapArray(this.render()).length) {\n            return;\n        }\n\n        if (!this.isToggled) {\n            this.showChildren();\n        } else {\n            this.hideChildren();\n        }\n\n        if (this.collapseIcon) {\n            this.collapseIcon.setCollapsed(this.isToggled);\n        }\n        this.isToggled = !this.isToggled;\n\n        this.saveToggledState();\n    }\n\n    getSessionKeyName() {\n        let sessionKeyName = this.options.sessionKey || this.options.href;\n        if (!sessionKeyName) {\n            throw Error(\"Persistent nav element needs a unique session key!\");\n        }\n        return sessionKeyName;\n    }\n\n    getLocalToggledState() {\n        if (this.hasOwnProperty(\"isToggled\")) {\n            return !!this.isToggled;\n        }\n        return !!this.options.defaultToggled;\n    }\n\n    getToggledState() {\n        if (!this.options.persistent) {\n            return this.getLocalToggledState();\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        return navSessionManager.get(sessionKeyName, this.getLocalToggledState());\n    }\n\n    saveToggledState() {\n        if (!this.options.persistent) {\n            return;\n        }\n        let sessionKeyName = this.getSessionKeyName();\n        navSessionManager.set(sessionKeyName, this.getLocalToggledState());\n    }\n\n    onMount() {\n        super.onMount();\n        this.addNodeListener(\"mouseenter\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && unwrapArray(this.render()).length) {\n                this.showChildren();\n            }\n        });\n        this.addNodeListener(\"mouseleave\", () => {\n            if (this.getOrientation() === Orientation.HORIZONTAL && unwrapArray(this.render()).length) {\n                this.hideChildren();\n            }\n        });\n        this.addClickListener((event) => {\n            if (this.getOrientation() === Orientation.VERTICAL) {\n                event.stopPropagation();\n                this.toggleChildren();\n            }\n        });\n    }\n};\n\nconst NavElement = NavElementInterface(UI.Primitive(BasicOrientedElement, \"li\"));\nclass NavLinkElement extends NavElementInterface(BasicOrientedLinkElement) {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.navLinkElement);\n    }\n\n    render() {\n        return this.options.children;\n    }\n}\n\n\nclass NavSection extends UI.Primitive(\"ul\") {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.getOrientation() === Orientation.HORIZONTAL) {\n            // it is in the navbar\n            attr.addClass(this.styleSheet.navSectionHorizontal);\n            // this is functionality, should be isolated from the actual design\n            attr.setStyle(\"float\", this.getAnchor());\n        } else {\n            // it is in the sidebar\n            attr.addClass(this.styleSheet.navSectionVertical);\n        }\n    }\n\n    getAnchor() {\n        return this.options.anchor || Direction.LEFT;\n    }\n\n    getOrientation() {\n        return this.parent.getOrientation();\n    }\n}\n\n\nclass NavAnchoredNotifications extends NavSection {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.setStyle({\n            position: \"relative\",\n        });\n    }\n\n    getSwitcherStyle() {\n        return {\n            position: \"absolute\",\n            maxWidth: \"calc(100vw - 76px)\",\n            top: \"50px\",\n            right: \"0\",\n            height: \"300px\",\n            width: \"400px\",\n            boxShadow: \"0px 0px 10px #666\",\n            zIndex: \"-1\",\n        };\n    }\n\n    render() {\n        return [\n            this.options.children,\n            <Switcher ref=\"switcher\" style={this.getSwitcherStyle()} className=\"hidden\" />\n        ];\n    }\n\n    show(content, child) {\n        this.activeChild = child;\n        this.switcher.removeClass(\"hidden\");\n        this.switcher.setActive(content, child);\n        this.bodyListener = document.body.addEventListener(\"click\", () => this.hide());\n    }\n\n    hide() {\n        this.switcher.addClass(\"hidden\");\n        this.activeChild = null;\n        document.body.removeEventListener(\"click\", this.bodyListener);\n    }\n\n    onMount() {\n        this.addListener(\"changeSwitcher\", (content, child) => {\n            if (this.activeChild == child) {\n                this.hide();\n            } else {\n                this.show(content, child);\n            }\n        });\n\n        this.switcher.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport {BasicOrientedElement, NavElement, NavLinkElement, NavSection, NavAnchoredNotifications, navSessionManager};\n","import {UI} from \"../UIBase\";\nimport {NavElement} from \"./NavElement\";\nimport {FAIcon} from \"../FontAwesome\";\nimport {Size} from \"../Constants\";\n\nexport class NavIcon extends NavElement {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.icon);\n    }\n\n    getValue() {\n        return [\n            this.getIcon(),\n            this.getContent()\n        ];\n    }\n\n    getContent() {\n        return null;\n    }\n\n    getIcon() {\n        return null;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nexport class LeftSideNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"bars\" size={Size.LARGE}/>;\n    }\n}\n\n\nexport class RightSideNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.sideIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-v\" size={Size.LARGE}/>;\n    }\n}\n\n\nexport class WrappedNavIcon extends NavIcon {\n    extraNodeAttributes(attr) {\n        super.extraNodeAttributes(attr);\n        attr.addClass(this.styleSheet.wrappedIcon);\n    }\n\n    getIcon() {\n        return <FAIcon icon=\"ellipsis-h\" size={Size.LARGE}/>;\n    }\n}\n","import {Device} from \"../../base/Device\";\nimport {Dispatcher} from \"../../base/Dispatcher\";\nimport {StemDate} from \"../../time/Time\";\n\nlet maxDistanceFromSide = 25; // Pixels\nlet minSwipeDistance = 60;    // Pixels\nlet minSwipeSpeed = 0.5;      // Pixels per millisecond\n\nfunction touchEventHandler(ignoreCondition, successCondition, onSuccess, xType=\"client\") {\n    return (event) => {\n        if (ignoreCondition(event.targetTouches[0][xType + \"X\"])) {\n            return;\n        }\n        let startX = event.targetTouches[0][xType + \"X\"];\n        let panelToggler = new Dispatcher();\n        let startTime = StemDate.now();\n\n        let touchCallback = (event) => {\n            if (successCondition(event.targetTouches[0][xType + \"X\"], startX, StemDate.now() - startTime)) {\n                panelToggler.dispatch(true);\n            }\n        };\n        let touchendCallback = () => {\n            panelToggler.dispatch(false);\n        };\n        document.addEventListener(\"touchmove\", touchCallback);\n        document.addEventListener(\"touchend\", touchendCallback);\n\n        panelToggler.addListener((success) => {\n            if (success) {\n                onSuccess();\n            }\n            document.removeEventListener(\"touchmove\", touchCallback);\n            document.removeEventListener(\"touchend\", touchendCallback);\n        });\n    }\n}\n\nfunction initializeSwipeRight(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.leftSidePanel.visible ||\n                        window.pageXOffset !== 0 ||\n                            touchX > maxDistance),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n    navManager.leftSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.leftSidePanel.visible),\n        (touchX, startX) => (startX - touchX >= minDistance && (startX - touchX) >= minSpeed),\n        () => navManager.toggleLeftSidePanel()\n    ));\n}\n\nfunction initializeSwipeLeft(navManager, maxDistance=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    document.addEventListener(\"touchstart\", touchEventHandler(\n        (touchX) => (navManager.rightSidePanel.visible || window.innerWidth - touchX > maxDistance),\n        (touchX, startX, duration) => (startX - touchX >= minDistance && (startX - touchX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n    navManager.rightSidePanel.addNodeListener(\"touchstart\", touchEventHandler(\n        () => (!navManager.rightSidePanel.visible),\n        (touchX, startX, duration) => (touchX - startX >= minDistance && (touchX - startX) / duration >= minSpeed),\n        () => navManager.toggleRightSidePanel()\n    ));\n}\n\nfunction initializeSwipeEvents(navManager, maxDistanceFromSide=maxDistanceFromSide, minDistance=minSwipeDistance, minSpeed=minSwipeSpeed) {\n    if (!Device.isTouchDevice()) {\n        return;\n    }\n    if (navManager.leftSidePanel) {\n        initializeSwipeRight(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n    if (navManager.rightSidePanel) {\n        initializeSwipeLeft(navManager, maxDistanceFromSide, minDistance, minSpeed);\n    }\n}\n\nexport {maxDistanceFromSide, initializeSwipeRight, initializeSwipeLeft, initializeSwipeEvents};","import {UI, changeParent, registerStyle} from \"../UI\";\nimport {NavStyle} from \"./NavStyle\";\nimport {Carousel, CarouselStyle} from \"../Carousel\";\nimport {LeftSideNavIcon, RightSideNavIcon, WrappedNavIcon} from \"./NavIcon\";\nimport {BasicOrientedElement, NavSection} from \"./NavElement\";\nimport {initializeSwipeEvents} from \"./NavSwipeDetection\";\nimport {SessionStorageMap} from \"../../base/StorageMap\";\nimport {Orientation, Direction} from \"../Constants\";\n\n\nclass SidePanelGroup extends UI.Element {\n    get styleSheet() {\n        return this.options.styleSheet || this.parent.styleSheet;\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.sidePanelGroup);\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.setStyle(\"right\", 0);\n        } else {\n            attr.setStyle(\"width\", \"250px\");\n        }\n    }\n\n    getOrientation() {\n        return Orientation.VERTICAL;\n    }\n\n}\n\n\n@registerStyle(NavStyle)\nclass SidePanel extends UI.Element {\n    constructor() {\n        super(...arguments);\n        this.initNode();\n        this.applyVisibility();\n    }\n\n    initNode() {\n        if (!this.node) {\n            this.mount(document.body);\n        }\n    }\n\n    applyVisibility() {\n        if (this.options.name) {\n            this.storageSerializer = new SessionStorageMap(\"sidePanel\" + this.options.name);\n            this.visible = this.storageSerializer.get(\"visible\");\n        }\n        if (this.visible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    extraNodeAttributes(attr) {\n        if (this.options.anchor === Direction.RIGHT) {\n            attr.addClass(this.styleSheet.rightSidePanel);\n            attr.setStyle(\"right\", \"0\");\n        } else {\n            attr.addClass(this.styleSheet.leftSidePanel);\n        }\n    }\n\n    setVisible(value) {\n        this.visible = value;\n        if (this.storageSerializer) {\n            this.storageSerializer.set(\"visible\", value);\n        }\n    }\n\n    show() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.removeClass(this.styleSheet.navVerticalRightHide);\n        } else {\n            this.removeClass(this.styleSheet.navVerticalLeftHide);\n        }\n\n        this.setVisible(true);\n    }\n\n    hide() {\n        if (this.options.anchor === Direction.RIGHT) {\n            this.addClass(this.styleSheet.navVerticalRightHide);\n        } else {\n            this.addClass(this.styleSheet.navVerticalLeftHide);\n        }\n\n        this.setVisible(false);\n    }\n\n    toggle() {\n        if (this.visible) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    }\n\n    getChildrenToRender() {\n        return <SidePanelGroup ref=\"this.wrappedPanel\" anchor={this.options.anchor}>\n            {this.render()}\n        </SidePanelGroup>;\n    }\n\n    onMount() {\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nclass NavCarouselStyle extends CarouselStyle {\n    hoverColor = () => NavStyle.getInstance().getColors().sidepanelHover;\n    textColor = () => NavStyle.getInstance().getColors().text;\n    navigatorTransitionTime = () => NavStyle.getInstance().dimensions.backgroundTransitionDuration;\n}\n\n\n@registerStyle(NavStyle)\nclass NavManager extends UI.Primitive(\"nav\") {\n    getCarouselStyleSheet() {\n        return this.options.carouselStyleSheet || NavCarouselStyle.getInstance();\n    }\n\n    getDefaultOptions() {\n        return {\n            persistentLeftSidePanel: true,\n            persistentRightSidePanel: true,\n        };\n    }\n\n    initLeftSidePanel() {\n        this.leftSidePanel = <SidePanel anchor={Direction.LEFT} name=\"left\" persistent={this.options.persistentLeftSidePanel}>\n            <Carousel ref={this.refLink(\"carousel\")} styleSheet={this.getCarouselStyleSheet()}>\n                <BasicOrientedElement orientation={Orientation.VERTICAL} ref={this.refLink(\"navigationPanel\")}\n                                      styleSheet={this.styleSheet}>\n                    {this.getLeftSidePanelChildren()}\n                </BasicOrientedElement>\n            </Carousel>\n        </SidePanel>;\n    }\n\n    initRightSidePanel() {\n        this.rightSidePanel = <SidePanel anchor={Direction.RIGHT} name=\"right\" persistent={this.options.persistentRightSidePanel}>\n            {this.getRightSidePanelChildren()}\n        </SidePanel>;\n    }\n\n    constructor(options) {\n        super(options);\n\n        this.initLeftSidePanel();\n        this.initRightSidePanel();\n    }\n\n    getLeftSidePanelChildren() {\n        return [];\n    }\n\n    getRightSidePanelChildren() {\n        return [];\n    }\n\n    getLeftConditionedChildren() {\n        return [];\n    }\n\n    getRightConditionedChildren() {\n        return [];\n    }\n\n    extraNodeAttributes(attr) {\n        attr.addClass(this.styleSheet.navManager);\n    }\n\n    getOrientation() {\n        return Orientation.HORIZONTAL;\n    }\n\n    leftSideIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.navigationPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.navigationPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    // TODO: lots of duplicate code here, with left/right stuff\n    getLeftSideIcon() {\n        if (!this.leftSidePanel) {\n            return null;\n        }\n\n        if (!this.leftPanelToggler) {\n            this.leftPanelToggler = <LeftSideNavIcon onClick={() => this.leftSideIconAction()} />;\n        }\n        return this.leftPanelToggler;\n    }\n\n    rightSideIconAction() {\n        this.toggleRightSidePanel();\n    }\n\n    getRightSideIcon() {\n        if (!this.rightSidePanel) {\n            return null;\n        }\n        if (!this.rightPanelToggler) {\n            this.rightPanelToggler = <RightSideNavIcon onClick={() => this.rightSideIconAction()} />;\n        }\n        return this.rightPanelToggler;\n    }\n\n    getFixedWidth() {\n        let width = 10;\n        for (let child of this.children) {\n            width += child.getWidth();\n        }\n        width -= this.getLeftConditioned().getWidth();\n        width -= this.getRightConditioned().getWidth();\n        return width;\n    }\n\n    wrappedIconAction() {\n        if (this.wrapped) {\n            if (this.carousel.getActive() === this.wrappedPanel) {\n                this.toggleLeftSidePanel();\n            } else {\n                this.carousel.setActive(this.wrappedPanel);\n                if (!this.leftSidePanel.visible) {\n                    this.toggleLeftSidePanel();\n                }\n            }\n        } else {\n            this.toggleLeftSidePanel();\n        }\n    }\n\n    getWrappedIcon() {\n        if (!this.wrappedToggler) {\n            this.wrappedToggler = <WrappedNavIcon onClick={() => this.wrappedIconAction()}\n                                               className={this.wrapped ? \"\" : \"hidden\"} />;\n        }\n        return this.wrappedToggler;\n    }\n\n    getLeftFixed() {\n        return [];\n    }\n\n    getRightFixed() {\n        return [];\n    }\n\n    getLeftConditionedWrapper() {\n        if (!this.leftConditionedWrapper) {\n            this.leftConditionedWrapper = <NavSection anchor={Direction.LEFT}>\n                {this.getLeftConditioned()}\n            </NavSection>;\n        }\n        return this.leftConditionedWrapper;\n    }\n\n    getRightConditionedWrapper() {\n        if (!this.rightConditionedWrapper) {\n            this.rightConditionedWrapper = <NavSection anchor={Direction.RIGHT}>\n                {this.getRightConditioned()}\n            </NavSection>;\n        }\n        return this.rightConditionedWrapper;\n    }\n\n    getLeftConditioned() {\n        if (!this.leftConditioned) {\n            this.leftConditioned = <NavSection>{this.getLeftConditionedChildren()}</NavSection>;\n        }\n        return this.leftConditioned;\n    }\n\n    getRightConditioned() {\n        if (!this.rightConditioned) {\n            this.rightConditioned =  <NavSection>{this.getRightConditionedChildren()}</NavSection>;\n        }\n        return this.rightConditioned;\n    }\n\n    toggleSidePanel(mainPanel, toggleEvent) {\n        let secondaryPanel = (mainPanel == this.leftSidePanel ? this.rightSidePanel : this.leftSidePanel);\n        mainPanel.toggle();\n        this.dispatch(toggleEvent, mainPanel.visible);\n        if (secondaryPanel && mainPanel.visible && secondaryPanel.visible) {\n            mainPanel.setStyle(\"z-index\", 3001);\n            secondaryPanel.setStyle(\"z-index\", 3000);\n        }\n    }\n\n    toggleLeftSidePanel() {\n        this.toggleSidePanel(this.leftSidePanel, \"toggledLeftSide\");\n    }\n\n    toggleRightSidePanel() {\n        this.toggleSidePanel(this.rightSidePanel, \"toggledRightSide\");\n    }\n\n    render() {\n        return [\n            this.getLeftSideIcon(),\n            this.getLeftFixed(),\n            this.getLeftConditionedWrapper(),\n            this.getWrappedIcon(),\n            <NavSection style={{marginLeft: \"auto\"}}>\n              {this.getRightConditionedWrapper()}\n            </NavSection>,\n            this.getRightFixed(),\n            this.getRightSideIcon(),\n        ];\n    }\n\n    bindToNode() {\n        super.bindToNode(...arguments);\n        this.onMount();\n    }\n\n    // This method enforces the wrapping to be skipped. It is useful when navbar elements change.\n    skipWrap() {\n        this.wrapSkip = true;\n        this.wrapScheduled = false;\n    }\n\n    unskipWrap() {\n        this.wrapSkip = false;\n        if (this.wrapScheduled) {\n            this.checkForWrap();\n        }\n    }\n\n    checkForWrap() {\n        if (this.wrapSkip) {\n            this.wrapScheduled = true;\n            return;\n        }\n        const wrapNavElements = () => {\n            this.wrapped = true;\n            this.wrappedPanel = <BasicOrientedElement orientation={Orientation.VERTICAL} styleSheet={this.styleSheet}/>;\n            this.carousel.appendChild(this.wrappedPanel);\n\n            changeParent(this.getRightConditioned(), this.wrappedPanel);\n            changeParent(this.getLeftConditioned(), this.wrappedPanel);\n            this.getRightConditioned().redraw();\n            this.getLeftConditioned().redraw();\n            this.getWrappedIcon().removeClass(\"hidden\");\n        };\n\n        const unwrapNavElements = () => {\n            this.wrapped = false;\n            this.getWrappedIcon().addClass(\"hidden\");\n            changeParent(this.getLeftConditioned(), this.getLeftConditionedWrapper());\n            changeParent(this.getRightConditioned(), this.getRightConditionedWrapper());\n            this.carousel.eraseChild(this.wrappedPanel);\n            this.getLeftConditioned().redraw();\n            this.getRightConditioned().redraw();\n        };\n\n        if (this.getLeftConditioned().children.length || this.getRightConditioned().children.length) {\n            if (!this.wrapped) {\n                this.unwrappedTotalWidth = 10;\n                for (let child of this.children) {\n                    this.unwrappedTotalWidth += child.getWidth();\n                }\n            }\n            if (window.innerWidth < this.unwrappedTotalWidth && !this.wrapped) {\n                wrapNavElements();\n                this.dispatch(\"wrapped\", true);\n            } else if (window.innerWidth >= this.unwrappedTotalWidth && this.wrapped) {\n                unwrapNavElements();\n                this.dispatch(\"wrapped\", false);\n            }\n        } else if (this.wrapped) {\n            unwrapNavElements();\n        }\n    }\n\n    onMount() {\n        NavManager.Global = this;\n        initializeSwipeEvents(this);\n        setTimeout(() => this.checkForWrap());\n        window.addEventListener(\"resize\", () => this.checkForWrap());\n        this.addListener(\"maybeWrap\", () => this.checkForWrap());\n        this.addClickListener((event) => {\n            event.stopPropagation();\n        });\n    }\n}\n\n\nlet initializeNavbar = () => {\n    NavManager.Global = NavManager.Global || new NavManager();\n    return NavManager.Global;\n};\n\n\nexport {NavManager, initializeNavbar, NavCarouselStyle, SidePanel}\n","import {Ajax} from \"base/Ajax\";\nimport {Dispatcher} from \"base/Dispatcher\";\n\nexport function logout() {\n    Dispatcher.Global.dispatch(\"logout\");\n    Ajax.postJSON(\"/accounts/logout/\", {}).then(\n            () => {\n                Dispatcher.Global.dispatch(\"logoutSuccess\");\n                location.reload();\n            }\n        );\n}\n","import {UI} from \"UI\";\nimport {NavManager} from \"navmanager/NavManager\";\nimport {\n    BasicOrientedElement,\n    NavAnchoredNotifications,\n    NavElement,\n    NavLinkElement,\n    NavSection,\n    navSessionManager,\n} from \"navmanager/NavElement\";\nimport {Direction, Orientation} from \"UI\";\nimport {LoginModal} from \"LoginModal\";\nimport {logout} from \"Logout\";\nimport {FAIcon} from \"ui/FontAwesome\";\n\n/*\n * This is the NavManager file of your app.\n *\n * Note that the whole app is a single page app.\n * Follow the instructions below in order to customize your application.\n */\n\nclass AppNavManager extends NavManager {\n    leftSidePanel = null;\n    rightSidePanel = null;\n\n    getLeftFixed() {\n        return [\n            <NavSection anchor={Direction.LEFT} style={{margin: 0}}>\n                <NavLinkElement value=\"Home\" href=\"/\" />\n                <NavLinkElement value=\"Blog\" href=\"/blog\" />\n            </NavSection>\n        ];\n    }\n\n    getUserElement() {\n        if (USER.isAuthenticated) {\n            return <NavElement value={[<FAIcon icon=\"user\" style={{marginRight: \"0.3rem\"}} />, USER.email]}>\n                <NavElement value={UI.T(\"Settings\")} />\n                <NavElement value={UI.T(\"Logout\")} onClick={() => logout()}/>\n            </NavElement>;\n        } else {\n            return <NavElement value={UI.T(\"Login/Signup\")} onClick={() => LoginModal.show()} />;\n        }\n    }\n\n    getRightFixed() {\n        return [\n            <NavSection anchor={Direction.RIGHT} style={{margin: 0}}>\n                {this.getUserElement()}\n            </NavSection>\n        ];\n    }\n}\n\n\nexport {AppNavManager};","import {UI, Link, Router, GlobalContainer} from \"../ui/UI\";\nimport {isLocalUrl, trimLocalUrl} from \"../base/Utils\";\nimport {Dispatcher} from \"../base/Dispatcher\";\n\n\nexport function singlePageLinkOnMount() {\n    this.addClickListener((event) => {\n        if (event.shiftKey || event.ctrlKey || event.metaKey || !this.options.href || !isLocalUrl(this.options.href)\n            || this.options.newTab || (this.options.target && this.options.target !== \"_self\")) {\n            // Leave it to the browser\n            return;\n        }\n        event.preventDefault();\n        event.stopPropagation();\n        Router.changeURL(trimLocalUrl(this.options.href));\n    });\n}\n\nexport class StemApp extends UI.Element {\n    static init() {\n        Link.prototype.onMount = singlePageLinkOnMount;\n        return self.appInstance = this.create(document.body);\n    }\n\n    getRoutes() {\n        return this.options.routes;\n    }\n\n    getBeforeContainer() {\n        return null;\n    }\n\n    getRouterOptions() {\n        return {\n            style: {\n                height: \"100%\",\n            }\n        }\n    }\n\n    getRouter() {\n        return <Router routes={this.getRoutes()} ref=\"router\" {...this.getRouterOptions()}/>;\n    }\n\n    getContainer() {\n        return <GlobalContainer>\n            {this.getRouter()}\n            </GlobalContainer>;\n    }\n\n    getAfterContainer() {\n        return null;\n    }\n\n    render() {\n        return [\n            this.getBeforeContainer(),\n            this.getContainer(),\n            this.getAfterContainer(),\n        ]\n    }\n\n    onMount() {\n        this.router && this.router.addListener(\"change\", () => {\n            document.body.click();\n            Dispatcher.Global.dispatch(\"closeAllModals\");\n        });\n    }\n}\n","import {Dispatcher} from \"base/Dispatcher\";\n\nclass WebsocketStreamHandler extends Dispatcher {\n    static NONE = Symbol();\n    static SUBSCRIBING = Symbol();\n    static SUBSCRIBED = Symbol();\n    static UNSUBSCRIBED = Symbol();\n\n    static MISSING_MESSAGE = \"INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW\";\n\n    constructor(websocketSubscriber, streamName, options={}) {\n        super();\n        this.websocketSubscriber = websocketSubscriber;\n        this.streamName = streamName;\n        this.options = options;\n        this.bytesReceived = 0;\n        this.isIndexed = false;\n        this.lastMessageIndex = -1;\n        this.messageBuffer = new Map();\n        this.missedPackets = 0;\n        this.status = this.constructor.NONE;\n        this.tryCount = 0; // TODO: rename to resubscribesubscribeTryCount\n    }\n\n    sendSubscribe() {\n        const websocketSubscriber = this.websocketSubscriber;\n\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBING;\n\n        if (this.haveIndex()) {\n            websocketSubscriber.sendResubscribe(this.streamName, this.getLastIndex());\n        } else {\n            websocketSubscriber.sendSubscribe(this.streamName);\n        }\n\n        this.subscribeTryCount++;\n\n        const subscribeTimeout = websocketSubscriber.constructor.STREAM_SUBSCRIBE_TIMEOUT || 3000;\n        const subscribeTimeoutMax = websocketSubscriber.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT || 30000;\n        const timeoutDuration = Math.min(subscribeTimeout * this.subscribeTryCount, subscribeTimeoutMax);\n\n        this.resendSubscribeTimeout = setTimeout(() => {\n            console.log(\"WebsocketSubscriber: stream subscribe timeout for #\" + streamName + \" reached! Trying to resubscribe again!\");\n            this.sendSubscribe();\n        }, timeoutDuration);\n    }\n\n    clearResubscribeTimeout() {\n        if (this.resendSubscribeTimeout) {\n            clearTimeout(this.resendSubscribeTimeout);\n            this.resendSubscribeTimeout = undefined;\n        }\n    }\n\n    setStatusSubscribed() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.SUBSCRIBED;\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    resetStatus() {\n        this.clearResubscribeTimeout();\n        this.status = this.constructor.NONE;\n        this.subscribeTryCount = 0;\n    }\n\n    processPacket(packet) {\n        this.bytesReceived += packet.length;\n\n        let type, payload;\n        if (packet[0] === \"{\") {\n            type = \"v\";\n            payload = packet;\n        } else {\n            let firstSpace = packet.indexOf(\" \");\n            if (firstSpace > 0) {\n                type = packet.substr(0, firstSpace).trim();\n                payload = packet.substr(firstSpace + 1).trim();\n            } else {\n                console.error(\"WebsocketStreamHandler: Could not process stream packet: \" + packet);\n                return;\n            }\n        }\n\n        if (type === \"i\") {\n            this.processIndexedPacket(payload);\n        } else if (type === \"v\") {\n            this.processVanillaPacket(payload);\n        } else if (type === \"n\") {\n            this.processMissedPacket(payload);\n        } else {\n            console.error(\"WebsocketStreamHandler: invalid packet type \" + type);\n        }\n    }\n\n    processIndexedMessage(index, message) {\n        this.isIndexed = true;\n        if (this.lastMessageIndex == -1) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n        } else if (this.lastMessageIndex + 1 == index) {\n            this.lastMessageIndex = index;\n            this.processVanillaPacket(message);\n            ++index;\n            while (this.messageBuffer.has(index)) {\n                message = this.messageBuffer.get(index);\n                this.messageBuffer.delete(index);\n                this.lastMessageIndex = index;\n                this.processVanillaPacket(message);\n                ++index;\n            }\n        } else {\n            this.messageBuffer.set(index, message);\n        }\n    }\n\n    processMissedPacket(packet) {\n        this.processIndexedMessage(parseInt(packet), WebsocketStreamHandler.MISSING_MESSAGE);\n    }\n\n    processVanillaPacket(packet) {\n        if (packet == WebsocketStreamHandler.MISSING_MESSAGE) {\n            this.missedPackets++;\n        }\n\n        if (!this.options.rawMessage) {\n            try {\n                packet = JSON.parse(packet);\n            } catch (exception) {\n                if (!this.options.parseMayFail) {\n                    console.error(\"WebsocketStreamHandler: Failed to parse \", packet, \" on stream \", this.streamName,\n                                  \" Exception:\", exception.message);\n                    return;\n                }\n            }\n        }\n        this.dispatch(packet);\n    }\n\n    processIndexedPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let message, index;\n        if (firstSpace > 0) {\n            index = parseInt(packet.substr(0, firstSpace).trim());\n            message = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketStreamHandler: Could not process indexed stream packet: \" + packet);\n            return;\n        }\n\n        this.processIndexedMessage(index, message);\n    }\n\n    haveIndex() {\n        return this.isIndexed;\n    }\n\n    getLastIndex() {\n        return this.lastMessageIndex;\n    }\n}\n\nexport {WebsocketStreamHandler};\n","import {Dispatchable} from \"base/Dispatcher\";\n\nimport {WebsocketStreamHandler} from \"./WebsocketStreamHandler\";\n\nclass WebsocketSubscriber extends Dispatchable {\n    static ConnectionStatus = {\n        NONE: 0,\n        CONNECTING: 1,\n        CONNECTED: 2,\n        DISCONNECTED: 3\n    };\n\n    static STREAM_SUBSCRIBE_TIMEOUT = 3000;\n    static STREAM_SUBSCRIBE_MAX_TIMEOUT = 30000;\n\n    static CONNECT_RETRY_TIMEOUT = 3000;\n    static CONNECT_RETRY_MAX_TIMEOUT = 30000;\n\n    static HEARTBEAT_MESSAGE = \"-hrtbt-\";\n\n    constructor(urls=self.WEBSOCKET_URL) {\n        super();\n        if (!Array.isArray(urls)) {\n            urls = [urls]\n        }\n        this.urls = urls;\n        this.streamHandlers = new Map();\n        this.attemptedConnect = false;\n        this.connectionStatus = WebsocketSubscriber.ConnectionStatus.NONE;\n        this.websocket = null;\n        this.failedReconnectAttempts = 0;\n        this.numConnectionAttempts = 0;\n        //TODO: should probably try to connect right now?\n    }\n\n    setConnectionStatus(connectionStatus) {\n        this.connectionStatus = connectionStatus;\n        this.dispatch(\"connectionStatus\", connectionStatus);\n    }\n\n    getNextUrl() {\n        const currentURLIndex = (this.numConnectionAttempts++) % this.urls.length;\n        return this.urls[currentURLIndex];\n    }\n\n    newConnection(url) {\n        return new WebSocket(url);\n    }\n\n    connect() {\n        const url = this.getNextUrl();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);\n        try {\n            console.log(\"WebsocketSubscriber: Connecting to \" + url + \" ...\");\n            this.websocket = this.newConnection(url);\n            this.websocket.onopen = () => {\n                this.onWebsocketOpen();\n            };\n            this.websocket.onmessage = (event) => {\n                this.onWebsocketMessage(event);\n            };\n            this.websocket.onerror = (event) => {\n                this.onWebsocketError(event);\n            };\n            this.websocket.onclose = (event) => {\n                this.onWebsocketClose(event);\n            };\n\n        } catch (e) {\n            this.tryReconnect();\n            console.error(\"WebsocketSubscriber: Failed to connect to \", url, \"\\nError: \", e.message);\n        }\n    }\n\n    tryReconnect() {\n        let reconnectWait = Math.min(WebsocketSubscriber.CONNECT_RETRY_TIMEOUT * this.failedReconnectAttempts,\n                                     WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT);\n\n        this.failedReconnectAttempts++;\n\n        if (!this.reconnectTimeout) {\n            this.reconnectTimeout = setTimeout(() => {\n                this.reconnectTimeout = null;\n                console.log(\"WebsocketSubscriber: Trying to reconnect websocket connection\");\n                this.connect();\n            }, reconnectWait);\n        }\n    }\n\n    getStreamStatus(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        return streamHandler && streamHandler.status;\n    }\n\n    subscribe(streamName) {\n        // TODO: make sure to not explicitly support streams with spaces in the name\n        console.log(\"WebsocketSubscriber: Subscribing to stream \", streamName);\n\n        if (!this.attemptedConnect) {\n            this.connect();\n            this.attemptedConnect = true;\n        }\n\n        if (this.streamHandlers.has(streamName)) {\n            console.warning(\"WebsocketSubscriber: Already subscribed to stream \", streamName);\n            return;\n        }\n\n        let streamHandler = new WebsocketStreamHandler(this, streamName);\n        this.streamHandlers.set(streamName, streamHandler);\n\n        // Check if the websocket connection is open, to see if we can send the subscription now\n        if (this.isOpen()) {\n            this.sendSubscribe(streamName);\n        }\n\n        return streamHandler;\n    }\n\n    isOpen() {\n        return this.websocket && this.websocket.readyState === 1;\n    }\n\n    sendSubscribe(streamName) {\n        if (this.isOpen()) {\n            this.send(\"s \" + streamName);\n        }\n    }\n\n    sendResubscribe(streamName, index) {\n        if (this.isOpen(streamName)) {\n            this.send(\"r \" + index + \" \" + streamName);\n        }\n    }\n\n    resubscribe() {\n        // Iterate over all streams and resubscribe to them\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.sendSubscribe();\n        }\n    }\n\n    onStreamSubscribe(streamName) {\n        const streamHandler = this.getStreamHandler(streamName);\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: received subscribe success response for unrequested stream #\" + streamName);\n            return;\n        }\n        streamHandler.setStatusSubscribed();\n    }\n\n    onWebsocketOpen() {\n        this.previousFailedReconnectAttempts = this.failedReconnectAttempts;\n        this.failedReconnectAttempts = 0;\n        console.log(\"WebsocketSubscriber: Websocket connection established!\");\n\n        this.reset();\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED);\n        this.resubscribe();\n    }\n\n    processStreamPacket(packet) {\n        let firstSpace = packet.indexOf(\" \");\n        let streamName, afterStreamName;\n        if (firstSpace > 0) {\n            streamName = packet.substr(0, firstSpace).trim();\n            afterStreamName = packet.substr(firstSpace + 1).trim();\n        } else {\n            console.error(\"WebsocketSubscriber: Could not process stream packet: \" + packet);\n            return;\n        }\n\n        let streamHandler = this.streamHandlers.get(streamName);\n        // TODO: have a special mode if no handler is registered\n        if (!streamHandler) {\n            console.error(\"WebsocketSubscriber: No handler for websocket stream \", streamName);\n            return;\n        }\n        streamHandler.processPacket(afterStreamName);\n    }\n\n    fatalErrorClose(data) {\n        this.failedReconnectAttempts = this.previousFailedReconnectAttempts;\n        console.error(\"WebsocketSubscriber: server fatal error close: \", data);\n        this.onWebsocketError(data);\n    }\n\n    onWebsocketMessage(event) {\n        if (event.data === WebsocketSubscriber.HEARTBEAT_MESSAGE) {\n            // TODO: keep track of the last heartbeat timestamp\n        } else {\n            let firstSpace = event.data.indexOf(\" \");\n            let type, payload;\n\n            if (firstSpace > 0) {\n                type = event.data.substr(0, firstSpace).trim();\n                payload = event.data.substr(firstSpace + 1).trim();\n            } else {\n                type = event.data;\n                payload = \"\";\n            }\n\n            if (type === \"e\" || type === \"error\") { // error\n                console.error(\"WebsocketSubscriber: Websocket error: \", payload);\n                payload = payload.split(\" \")\n                const errorType = payload[0];\n                if (errorType === \"invalidSubscription\") {\n                    // Stop trying to resubscribe to a stream that's been rejected by the server\n                    const streamName = payload[1];\n                    const streamHandler = this.getStreamHandler(streamName);\n                    if (streamHandler) {\n                        // TODO: set permission denied explicitly?\n                        streamHandler.clearResubscribeTimeout();\n                    }\n                }\n            } else if (type === \"s\") { // subscribed\n                console.log(\"WebsocketSubscriber: Successfully subscribed to stream \", payload);\n                this.onStreamSubscribe(payload);\n            } else if (type === \"m\") { // stream message\n                this.processStreamPacket(payload);\n            } else if (type  === \"c\") { // command\n                this.dispatch(\"serverCommand\", payload);\n            } else if (type == \"efc\") { // error - fatal - close\n                this.fatalErrorClose(payload);\n            } else {\n                console.error(\"WebsocketSubscriber: Can't process \" + event.data);\n            }\n        }\n    }\n\n    reset() {\n        this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);\n        for (let streamHandler of this.streamHandlers.values()) {\n            streamHandler.resetStatus();\n        }\n    }\n\n    onWebsocketError(event) {\n        console.error(\"WebsocketSubscriber: Websocket connection is broken!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    onWebsocketClose(event) {\n        console.log(\"WebsocketSubscriber: Connection closed!\");\n        this.reset();\n        this.tryReconnect();\n    }\n\n    send(message) {\n        // TODO: if the websocket is not open, enqueue WebsocketSubscriber message to be sent on open or just fail?\n        this.websocket.send(message);\n    }\n\n    getStreamHandler(streamName) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (!streamHandler) {\n            streamHandler = this.subscribe(streamName);\n        }\n        return streamHandler;\n    }\n\n    // this should be pretty much the only external function\n    addStreamListener(streamName, callback) {\n        let streamHandler = this.getStreamHandler(streamName);\n        if (streamHandler.callbackExists(callback)) {\n            return;\n        }\n        streamHandler.addListener(callback);\n    }\n\n    removeStreamListener(streamName, callback) {\n        let streamHandler = this.streamHandlers.get(streamName);\n        if (streamHandler) {\n            streamHandler.removeListener(callback);\n        }\n    }\n\n    static addListener(streamName, callback) {\n        return this.Global.addStreamListener(streamName, callback);\n    };\n}\n\nWebsocketSubscriber.Global = new WebsocketSubscriber();\n\nexport {WebsocketSubscriber};\n","import {StyleSheet, styleRule, styleRuleCustom} from \"ui/UI\";\n\nexport class GlobalStyleSheet extends StyleSheet {\n    @styleRuleCustom({selector: \"body\"})\n    body = {\n        margin: 0,\n        fontSize: this.themeProperties.FONT_SIZE_DEFAULT,\n        fontFamily: this.themeProperties.FONT_FAMILY_DEFAULT,\n    };\n\n    @styleRuleCustom({selector: \".hidden\"})\n    hidden = {\n        display: \"none !important\"\n    };\n\n    @styleRuleCustom({selector: \"*\"})\n    everything = {\n        boxSizing: \"border-box\"\n    };\n\n    @styleRuleCustom({selector: \"a\"})\n    a = {\n        textDecoration: \"none\",\n        color: this.themeProperties.COLOR_LINK\n    };\n\n    @styleRuleCustom({selector: \"hr\"})\n    hr = {\n        height: 0,\n        marginTop: \"20px\",\n        marginBottom: \"20px\",\n        border: 0,\n        borderTop: \"1px solid #eee\",\n        boxSizing: \"content-box\",\n    };\n\n    @styleRuleCustom({selector: \"code, pre\"})\n    codeAndPre = {\n        fontFamily: this.themeProperties.FONT_FAMILY_MONOSPACE,\n    };\n\n    @styleRuleCustom({selector: \"code\"})\n    code ={\n        padding: \"2px 4px\", // TODO: should be in rem\n        fontSize: \"90%\",\n        color: \"#345 !important\", // TODO: take colors from theme\n        backgroundColor: \"#f8f2f4 !important\",\n        borderRadius: this.themeProperties.BUTTON_BORDER_RADIUS,\n    };\n\n    @styleRuleCustom({selector: \"pre\"})\n    pre = {\n        overflow: \"auto\",\n        display: \"block\",\n        padding: this.themeProperties.BUTTON_BORDER_RADIUS,\n        margin: \"0 0 10px\",\n        fontSize: \"13px\",\n        lineHeight: \"1.42857143\",\n        color: \"#333\",\n        wordBreak: \"break-all\",\n        wordWrap: \"break-word\",\n        backgroundColor: \"#f5f5f5\",\n        border: \"1px solid #ccc\",\n    };\n\n    @styleRuleCustom({selector: \"pre code\"})\n    preInCode = {\n        padding: 0,\n        fontSize: \"inherit\",\n        color: \"inherit\",\n        whiteSpace: \"pre-wrap\",\n        backgroundColor: \"transparent\",\n        borderRadius: 0,\n    };\n}\n","import {StemApp} from \"app/StemApp\";\nimport {Ajax} from \"base/Ajax\";\nimport {getCookie} from \"base/Utils\";\nimport {GlobalState} from \"state/State\";\nimport {StemDate, ServerTime} from \"time/Time\";\nimport {ViewportMeta} from \"ui/UIPrimitives\";\n\nimport {WebsocketSubscriber} from \"websocket/WebsocketSubscriber\";\nimport {ErrorHandlers} from \"ErrorHandlers\";\nimport {GlobalStyleSheet} from \"./GlobalStyleSheet\";\n\nexport class EstablishmentApp extends StemApp {\n    static MIN_VIEWPORT_META_WIDTH = 375; // Iphone 6\n\n    static init() {\n        this.loadPublicState();\n        this.addAjaxProcessors();\n        this.registerWebsocketStreams();\n        this.initializeViewportMeta();\n        this.configureTheme();\n        this.initializeGlobalStyle();\n        return super.init();\n    }\n\n    static loadPublicState() {\n        GlobalState.importState(self.PUBLIC_STATE || {});\n    }\n\n    static addAjaxProcessors() {\n        // Add the csrf cookie and credential for all requests\n        Ajax.addPreprocessor((options) => {\n            if (!options.disableCredentials) {\n                options.credentials = options.credentials || \"include\";\n                options.headers.set(\"X-CSRFToken\", getCookie(\"csrftoken\"));\n            }\n        });\n\n        // Add a postprocessor to load any state received from an Ajax response\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            if (payload.state && !xhrPromise.options.disableStateImport) {\n                GlobalState.importState(payload.state);\n            }\n        });\n\n        // Sync server time\n        Ajax.addPostprocessor((payload, xhrPromise) => {\n            const responseHeaders = xhrPromise.getResponseHeaders();\n            const responseDate = responseHeaders.get(\"date\");\n            if (responseDate) {\n                // Estimate server time, with 500ms rounding and 100 ms latency\n                const estimatedServerTime = new StemDate(responseDate).add(600);\n                ServerTime.set(estimatedServerTime, true);\n            }\n        });\n\n        // Raise any error, to be handled by the error processor\n        Ajax.addPostprocessor((payload) => {\n            if (payload.error) {\n                throw payload.error;\n            }\n        });\n\n        // Prettify any error, so it's in a standardized format\n        Ajax.addErrorPostprocessor((error) => {\n            return ErrorHandlers.wrapError(error);\n        });\n\n        // Add a default error handler\n        Ajax.errorHandler = (error) => ErrorHandlers.showErrorAlert(error);\n    }\n\n    static registerWebsocketStreams() {\n        // TODO: first check if websockets are enabled\n        GlobalState.registerStream = function (streamName) {\n            WebsocketSubscriber.addListener(streamName, GlobalState.applyEventWrapper);\n        };\n\n        //Register on the global event stream\n        GlobalState.registerStream(\"global-events\");\n\n        //Register on the user event stream\n        if (self.USER && self.USER.id) {\n            GlobalState.registerStream(\"user-\" + self.USER.id + \"-events\");\n        }\n    }\n\n    static initializeViewportMeta() {\n        return this.viewportMeta = ViewportMeta.create(document.head);\n    }\n\n    static configureTheme() {\n        // Nothing to do by default\n    }\n\n    static initializeGlobalStyle() {\n        GlobalStyleSheet.initialize();\n    }\n}\n","import {UI} from \"ui/UI\";\nimport {MAIN_ROUTE} from \"./Routes\"\nimport {AppNavManager} from \"./AppNavManager.jsx\";\nimport {EstablishmentApp} from \"EstablishmentApp\";\n\nexport class AppClass extends EstablishmentApp {\n    getBeforeContainer() {\n        return <AppNavManager ref=\"navManager\"/>;\n    }\n\n    getRoutes() {\n        return MAIN_ROUTE;\n    }\n}"],"names":["PageTitleManager","prefix","updatePageTitle","defaultTitle","title","getPrefix","getTitle","document","getFullPageTitle","Error","setDefaultTitle","mapIterator","filterIterator","unwrapArray","elements","Array","isArray","Symbol","iterator","from","allProperElements","i","length","result","unwrappedElement","j","push","isLocalUrl","url","host","self","location","origin","startsWith","r","RegExp","test","trimLocalUrl","slice","splitInChunks","array","maxChunkSize","chunks","splice","defaultComparator","a","b","isNumber","aStr","toString","bStr","slugify","string","trim","replace","toLowerCase","suffixNumber","value","suffix","Number","setObjectPrototype","obj","Class","__proto__","prototype","isPlainObject","nodeType","constructor","Object","deepCopy","target","arguments","entries","key","clone","src","dashCase","str","rez","getCookie","name","cookies","cookie","split","decodeURIComponent","substring","uniqueId","objectWeakMap","WeakMap","constructorWeakMap","totalObjectCount","has","objConstructor","objIndex","get","set","objUniqueId","padNumber","num","minLength","strNum","String","getOrdinalSuffix","suffixes","lastDigit","isTeen","Math","floor","suffixWithOrdinal","instantiateNative","BaseClass","NewClass","args","extendsNative","targetClass","includes","allKeys","getOwnPropertySymbols","concat","getOwnPropertyNames","newClass","create","property","getOwnPropertyDescriptor","defineProperty","NOOP_FUNCTION","undefined","iter","func","CallModifier","wrap","UnorderedCallDropper","index","lastExecuted","callback","currentIndex","CallThrottler","options","lastCallTime","pendingCall","pendingCallArgs","pendingCallExpectedTime","numCalls","totalCallDuration","assign","throttle","ON_ANIMATION_FRAME","cancel","clearPendingCall","flush","timeNow","executionDelay","max","debounce","min","wrappedFunc","funcCall","funcCallArgs","isThrottleOnAnimationFrame","cancelHandler","requestAnimationFrame","cancelAnimationFrame","Date","now","computeExecutionDelay","dropThrottled","setTimeout","clearTimeout","replacePendingCall","originalFunc","updatePendingCall","AUTOMATIC","DispatcherHandle","dispatcher","console","warn","removeListener","remove","Dispatcher","listeners","error","callbackExists","handler","addListener","payload","listener","DispatchersSymbol","Dispatchable","dispatchers","getDispatcher","dispatch","call","CleanupJobs","map","x","addListenerOnce","runCleanupJobs","cleanupJob","hasOwnProperty","_cleanupJobs","add","cleanup","dispatcherHandle","Map","getAttachCleanupJobMethod","methodName","addCleanupJob","attachListener","attachEventListener","attachCreateListener","attachUpdateListener","attachDeleteListener","Global","RunOnce","timeout","jobs","job","indexOf","SingleActiveElementDispatcher","element","addChangeListener","forceDispatch","_active","newElement","defaultToPixelsAttributes","Set","CreateNodeAttributesMap","oldAttributesMap","allowedAttributesArray","allowedAttributesMap","attribute","reverseNameMap","domName","ClassNameSet","join","className","NodeAttributes","style","node","attributesMap","defaultAttributesMap","whitelistedAttributes","applyAttribute","keys","styleKey","setStyle","removeStyle","applyStyleToNode","classes","getClassArray","cls","getClassNameSet","classList","delete","attributeOptions","noValue","setAttribute","removeAttribute","addedAttributes","nodeAttributes","attributes","attr","attributeName","applyClassName","applyDebugFlags","STEM_DEBUG","stemElement","UI","renderingStack","BaseUIElement","existingChild","getNodeType","ref","parent","onUnmount","removeRef","TextElement","nextSibling","createNode","applyRef","redraw","insertBefore","onMount","Node","TEXT_NODE","createTextNode","getValue","newValue","nodeValue","UIElement","children","setOptions","defaultOptions","getDefaultOptions","updateOptions","preservedOptions","getPreservedOptions","addListenersFromOptions","createElement","child","destroyNode","clearNode","newChild","copyState","childrenKeyMap","childKey","render","getChildrenToRender","pop","newChildren","getChildrenForRedraw","applyNodeAttributes","domNode","getElementKeyMap","prevChildNode","currentChildNode","firstChild","newChildKey","canOverwrite","overwriteChild","mount","newChildrenSet","returnCopy","getOptionsAsNodeAttributes","extraNodeAttributes","getNodeAttributes","apply","domAttributesMap","addClass","removeClass","hasClass","eventType","addListenerMethodName","handlerMethodName","event","arrayName","doRedraw","nextSiblingNode","Element","bindToNode","insertChildNodeBefore","position","nextChildNode","destroy","eraseChildAtIndex","erasedChild","removeChild","childElement","lastChild","body","contains","parameter","parseFloat","offsetWidth","offsetHeight","getWidthOrHeight","addEventListener","removeNodeListener","removeEventListener","addNodeListener","getStyleSheet","styleSheet","parentNode","uiElement","tag","primitiveMap","Primitive","baseClassPrimitiveMap","resultClass","Orientation","HORIZONTAL","VERTICAL","Direction","UP","LEFT","DOWN","RIGHT","Level","NONE","DEFAULT","INFO","PRIMARY","SECONDARY","SUCCESS","WARNING","DANGER","ERROR","Size","EXTRA_SMALL","SMALL","MEDIUM","LARGE","EXTRA_LARGE","VoteStatus","LIKE","DISLIKE","ActionStatus","RUNNING","FAILED","getOffset","left","top","nodePosition","nodeStyle","offsetLeft","offsetTop","offsetParent","getComputedStyle","computedStyle","window","getPropertyValue","changeParent","newParent","currentParent","eraseChild","appendChild","StyleInstance","selector","StyleElement","ALLOWED_SELECTOR_STARTS","DynamicStyleElement","getClassName","instanceCounter","selectorName","ownStyle","haveOwnStyle","isProperValue","firstChar","charAt","subStyle","getStyleInstances","unshift","getSelector","KeyframeElement","getKeyframeName","keyframeName","keyframe","getKeyframeInstance","isDescriptor","desc","decorate","handleDescriptor","entryArgs","createDefaultSetter","configurable","writable","enumerable","descriptor","initializer","ret","lazyInitialize","lazyInit","evaluateStyleRuleObject","getStyleRuleKey","getKeyframesRuleKey","styleRuleWithOptions","targetMethodName","styleRuleDecorator","objInitializer","inherit","parentDesc","getPrototypeOf","parentStyle","getKey","styleRule","styleRuleInherit","styleRuleCustom","keyframesRule","keyframesRuleInherit","StyleSheet","head","getElementName","delayedMount","ensureMounted","getTheme","addStyleSheet","styleElement","styleElementOptions","theme","defaultValue","getProperty","_firstUpdate","ensureFirstUpdate","elementOptions","nameKey","styleInstances","styleInstance","keyframes","styleElements","getProperties","singletonInstance","getInstance","log","elementNameCounter","ExclusiveClassSet","classInstance","Device","_isTouchDevice","navigator","MaxTouchPoints","msMaxTouchPoints","mobileDevices","_isMobileDevice","device","userAgent","touches","touch","identifier","getEventTouchIdentifier","find","axis","reference","coordName","getEventTouch","originalEvent","getEventCoord","opr","addons","opera","InstallTrigger","HTMLElement","documentMode","StyleMedia","chrome","webstore","eventName","cachedSupportedValues","onEventName","isSupported","Draggable","_clickCallbacks","_clickDragListeners","callbackWrapper","_okForClick","clickDragListener","onStart","dragForClickStarted","onDrag","dragForClick","addDragListener","removeDragListener","listenerWrapper","onWrapperDrag","eventX","getEventX","eventY","getEventY","deltaX","_lastX","deltaY","_lastY","onWrapperStart","onWrapperEnd","onEnd","touchEventIdentifier","preventDefault","createDragListenerWrapper","touchListenerWrapper","createTouchDragListenerWrapper","_dragListeners","COLORS_BY_NAME","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Color","color","setColor","parseColor","rgba","getRgba","values","hex3","match","parseInt","hex6","substr","rgb","firstColor","secondColor","t","firstColorArray","secondColorArray","convertToRgba","opacity","colorArray","lighten","amount","interpolate","darken","root","pow","enhance","isLight","buildColors","dark","colors","darkenPercents","ColorGenerator","FIRST_COLORS","cache","getRandomColor","allowed","random","getInstanceForObject","Theme","styleSheetSymbol","classSet","styleSheetSet","properties","updateThrottler","updateThrottled","updateStyleSheets","update","getAllStyleSheets","register","setProperties","styleSheetGetter","registerStyle","styleClass","GlobalStyle","getTextColor","backgroundColor","COLOR_BACKGROUND","COLOR_BACKGROUND_ALTERNATIVE","COLOR_BACKGROUND_BODY","COLOR_FOREGROUND_BODY","COLOR_BACKGROUND_BADGE","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_SUCCESS","COLOR_INFO","COLOR_WARNING","COLOR_DANGER","COLOR_LINK","FONT_SIZE_EXTRA_SMALL","FONT_SIZE_SMALL","FONT_SIZE_DEFAULT","FONT_SIZE_LARGE","FONT_SIZE_EXTRA_LARGE","BASE_BORDER_RADIUS","BASE_BOX_SHADOW","BASE_BORDER_WIDTH","BASE_BORDER_STYLE","BASE_BORDER_COLOR","BUTTON_BORDER_RADIUS","CARD_PANEL_HEADER_HEIGHT","CARD_PANEL_HEADER_HEIGHT_LARGE","CARD_PANEL_HEADING_PADDING","CARD_PANEL_HEADING_PADDING_LARGE","CARD_PANEL_TEXT_TRANSFORM","DARK_BOX_SHADOW","ROW_LIST_ROW_HEIGHT","ROW_LIST_ROW_HEIGHT_LARGE","ROW_LIST_ROW_PADDING","ROW_LIST_ROW_PADDING_LARGE","ROW_LIST_ROW_BORDER_WIDTH","FONT_FAMILY_SANS_SERIF","FONT_FAMILY_SERIF","FONT_FAMILY_MONOSPACE","FONT_FAMILY_DEFAULT","NAV_MANAGER_NAVBAR_HEIGHT","NAV_MANAGER_BOX_SHADOW_NAVBAR","NAV_MANAGER_BOX_SHADOW_SIDE_PANEL","MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP","MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE","FLAT_TAB_AREA_COLOR_BACKGROUND","FLAT_TAB_AREA_LINE_HEIGHT","FLAT_TAB_AREA_PADDING_SIDES","BasicLevelSizeStyleSheet","level","type","size","BasicLevelStyleSheet","colorToStyleFunction","textColor","colorStyleRule","themeProperties","FlexContainerStyle","orientation","display","marginLeft","flex","flexDirection","marginTop","ContainerStyle","mobilePixels","desktopPercent","margin","isMobileDevice","getSizeStyle","Utils","extraTop","height","width","FlexContainer","Container","SimpleStyledElement","getLevel","getSize","IconableInterface","beforeChildren","getLabel","label","faIcon","getFaIcon","iconOptions","marginRight","labelColorToStyle","darker","textDecoration","regular","borderColor","LabelStyle","fontWeight","border","padding","borderRadius","textAlign","whiteSpace","verticalAlign","lineHeight","touchAction","cursor","fontSize","borderWidth","Label","badgeColorToStyle","BadgeStyle","Badge","progressBarColorToStyle","ProgressBarStyle","marginBottom","overflow","boxShadow","float","transition","fontColor","backgroundImage","backgroundSize","animation","ProgressBar","container","valueInPercent","barStyle","barOptions","disableTransition","striped","active","Panel","SlideBar","barSize","getOrientation","getProgressBarStyle","getSliderStyle","progressBar","slider","getOrientationAttribute","getSliderValue","getDragConfig","HorizontalSlideBar","barWidth","setValue","VerticalSlideBar","barHeight","Link","newTab","Image","RawHTML","innerHTML","__innerHTML","getInnerHTML","ViewportMeta","scale","getDesiredScale","initialScale","maximumScale","MIN_WIDTH","minDeviceWidth","screen","availWidth","getContent","desiredScale","maybeUpdate","TemporaryMessageArea","textElement","message","displayDuration","clear","clearValueTimeout","ScrollableMixin","scrollHeight","clientHeight","scrollTop","getExcessTop","getDesiredExcessHeightTop","getExcessBottom","getDesiredExcessHeightBottom","haveExcessTop","popChildTop","haveExcessBottom","popChildBottom","removeExcessBottom","insertChild","removeExcessTop","maxScrollTop","scrollInfo","scrollAtTop","scrollAtBottom","scrollToHeight","InfiniteScrollable","entryComparator","id","firstRenderedEntry","lastRenderedEntry","staticTop","entry","renderEntry","entryRenderer","insertEntry","TimePassedSpan","getTimeDeltaDisplay","timeStamp","timeDelta","timeUnitsInSeconds","timeUnits","_updateListener","addIntervalListener","updateFunction","TIME_DISPATCHER","setInterval","InputStyle","outline","InputableElement","inputElement","Input","getInputType","SubmitInput","TextInput","NumberInput","val","EmailInput","PasswordInput","FileInput","files","getFiles","formData","FormData","file","append","CheckboxInput","checkboxInput","checked","RadioInput","TextArea","readOnly","Select","givenOptions","selectOptions","selected","select","selectedIndex","getIndex","setIndex","FormStyle","separatedLineInputStyle","maxWidth","paddingRight","Form","form","FormGroup","formGroup","errorMessage","errorField","textContent","hasError","getErrorField","FormField","inline","formField","sameLine","separatedLine","contentFirst","MozStyleElements","SVGNodeAttributes","transform","translate","fixMozAttributes","SVG","createElementNS","point","svgNode","ownerSVGElement","createSVGPoint","svgPoint","y","matrixTransform","getScreenCTM","inverse","rect","getBoundingClientRect","clientLeft","clientTop","getScreenCoordinatedForPoint","state","scrollLeft","pos","bottom","right","getBBox","parentElement","newOpacity","getSvg","Text","text","dy","textAnchor","selectable","setX","setY","fillOnly","EPS","isZero","epsilon","abs","equal","val1","val2","crossProduct","p1","p2","p0","polarToCartesian","angle","radius","orig","cos","sin","SVGRoot","RawSVG","Group","Defs","ClipPath","Path","d","getPath","newPath","getTotalLength","len","getPointAtLength","totalLength","getLength","p3","alpha","atan2","PI","Circle","center","cx","cy","pathString","Stop","RadialGradient","LinearGradient","Ellipse","CircleArc","startAngle","endAngle","angleDiff","startPoint","math","endPoint","sweepFlag","largeArcFlag","Rect","Line","fill","stroke","x1","y1","x2","y2","Polygon","points","getPolygonPath","setPath","Transition","context","duration","startTime","dependsOn","speedFactor","isStopped","stopped","setStartTime","functionWrapper","pauseTime","nextStep","getEndTime","time","ratio","restart","stop","lastT","getFraction","Modifier","reverseFunc","TransitionList","transitions","forceFinish","pause","resume","onNewFrame","finished","stk","canAdvance","setSpeedFactor","sortByEndTime","endTime","transitionEndTime","sort","hasDependencyOn","sortByStartTime","forceStart","startPercent","animationFrameId","paused","AnimatedSVG","animationWrapper","repeat","blinkTransition","config","times","executeLastStep","interval","changeOpacityTransition","setOpacity","changeColorTransition","getColor","moveTransition","coords","setPosition","changeFillTransition","Switcher","childMap","numRedraws","fullHeight","preserveScroll","overwriteElements","activeChild","existingElements","newElements","keyMap","lazyRender","getChildProperties","isUpToDate","updateChild","updateActiveChild","isMounted","redrawIndex","doMount","setActive","childProperties","deactivateChild","activateChild","isInDocument","Router","getRoutes","clearCache","routes","pageTitle","urlParts","getPage","getPageNotFound","page","getPageToRender","activePage","getActive","setTitle","setGlobalRouter","path","pathname","filter","replaceHistory","joinURLParts","historyArgs","history","replaceState","pushState","updateURL","setURL","parseURL","router","onpopstate","Route","expr","pageGenerator","subroutes","cachedPages","subroute","isArg","ARG_KEY","argsArray","serializedArgs","generatorArgs","myPageTitle","getPageTitle","matchesOwnNode","generatePage","matches","TerminalRoute","translationMap","TranslationElements","TranslationTextElement","strings","evaluateSprintf","evaluate","T","HorizontalOverflowStyle","baseColor","arrowColor","arrowBackground","arrowHoverColor","arrowHoverBackground","transitionTime","arrow","zIndex","alignItems","borderRight","borderLeft","BaseTabAreaStyle","userSelect","listStyle","DefaultTabAreaStyle","paddingLeft","borderBottomColor","borderBottom","MinimalistTabAreaStyle","paddingTop","paddingBottom","FlatTabAreaStyle","letterSpacing","FlatTabAreaHorizontalOverflowStyle","BasicTabTitle","tab","activeTab","existingElement","babelHelpers.get","panel","activeTabDispatcher","getPanel","addClickListener","TabTitleArea","TabArea","autoActive","panelClass","titleAreaClass","tabArea","tabHref","createTabPanel","tabTitle","tabPanel","titleArea","switcherArea","tabTitles","nav","tabPanels","switcherClass","switcher","activePanel","getTitleArea","getSwitcher","onSetActive","FAIcon","icon","getIcon","FACollapseIcon","collapsed","setCollapsed","FASortIcon","direction","HorizontalOverflow","swipePercent","horizontalOverflow","leftArrow","hiddenArrow","childrenContainer","pusherContainer","rightArrow","shouldOverflowRight","shouldOverflowLeft","elementRect","childRect","leftArrowHidden","getWidth","rightArrowHidden","containerNode","scrollWidth","swipeHelperChild","setWidth","swipeAnimation","checkForOverflow","scrollContent","handleEventAndHandlePositionChange","scrollContentRight","scrollContentLeft","FlatTabTitle","activeTabTitleDispatcher","FlatTabTitleArea","barLeft","activeOnRender","activeBar","tabWidth","bar","setActiveBar","activeBarAnimated","FlatTabArea","MultiMap","nKey","normalizeKey","nValue","normalizeValue","items","Headers","TypeError","polyfill","polyfillHeaders","global","URLSearchParams","decode","query","encode","encodeURIComponent","polyfillURLSearchParams","fileReaderReady","reader","Promise","resolve","reject","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","Body","bodyUsed","bodyInit","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","_bodyFormData","DataView","_bodyArrayBuffer","cloneBuffer","buffer","ArrayBuffer","isView","headers","rejected","setBodyUsed","then","view","Uint8Array","chars","fromCharCode","readArrayBufferAsText","JSON","parse","bytes","shift","byteLength","Request","input","method","normalizeMethod","headerArgs","referrer","referrerPolicy","mode","credentials","initialize","upcased","toUpperCase","methods","polyfillRequest","Response","status","ok","statusText","response","redirectStatuses","RangeError","polyfillResponse","parseHeaders","xhr","rawHeader","getAllResponseHeaders","rawHeaderLines","line","parts","getURLSearchParams","data","urlSearchParams","instance","composeURL","params","XHRPromise","request","XMLHttpRequest","promiseResolve","promiseReject","getResponseHeaders","responseText","responseInit","responseURL","dataType","ontimeout","open","withCredentials","responseType","forEach","setRequestHeader","send","getXHR","postprocessors","fetch","defaultPostprocessors","errorPostprocessors","defaultErrorPostprocessors","getPostprocessors","postprocessor","exception","onSuccess","onComplete","getErrorPostprocessors","onError","_chained","errorHandler","onResolve","onReject","getPromise","catch","abort","addXHRListener","jQueryCompatibilityPreprocessor","contentType","urlParams","arrayValue","preprocessors","defaultPreprocessors","preprocessor","success","complete","AjaxHandler","ajaxHandler","Ajax","parentHandler","baseOptions","getPreprocessors","getErrorHandler","post","inherited","FixedURLAjaxHandler","buttonColorToStyle","darker1","darker2","darker3","hoverDisabled","ButtonStyle","base","ButtonGroupStyle","pointerEvents","RadioButtonGroupStyle","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","Button","disabled","enabled","StateButton","statusOptions","statusLabel","enable","disable","stateOptions","AjaxButton","resetToDefaultTimeout","stateResetTimeout","clearResetTimeout","setState","ajaxPromise","getAjaxHandler","scheduleStateReset","ajax","ButtonGroup","RadioButtonGroup","buttons","oldIndex","oldValue","cardPanelColorToStyle","CardPanelStyle","minHeight","textTransform","cardPanelHeaderColorToStyle","borderStyle","justifyContent","CardPanelHeaderStyle","CardPanel","headingCentered","bodyCentered","headingClasses","getHeaderStyleSheet","headingLevel","centered","bodyClasses","getHeadingClasses","getBodyClasses","bodyStyle","RowListStyle","borderTopWidth","borderTopStyle","borderTopColor","RowList","rowList","alternateColors","rowClasses","alternativeColorsOddRow","noAlternativeColors","rows","rowParser","row","getRowClasses","CollapsibleStyle","transitionDuration","transitionTimingFunction","transitionProperty","transitionDelay","CollapsiblePanelStyle","fontFamily","content","CollapsibleMixin","CollapsibleClass","CollapsibleElement","collapsibleStyleSheet","collapsibleStyle","getCollapsibleStyleSheet","collapsing","transitionEndFunction","CollapsiblePanel","expand","collapse","contentArea","toggleButton","collapsedButton","setChildren","collapsedPanelClass","collapsedHeadingClass","hiddenClass","contentStyle","noPadding","heading","button","toggle","DelayedCollapsiblePanel","_haveExpanded","getDelayedChildren","FloatingWindowStyle","visibility","ModalStyle","background","borderTop","FloatingWindow","visibleAnimated","hiddenAnimated","fadeIn","fadeOut","VolatileFloatingWindow","hideListener","hide","show","bindWindowListeners","notVisible","stopPropagation","Modal","closeButton","destroyOnHide","visible","getModalWindow","getModalWindowStyle","fillScreen","maxHeight","isVisible","modalWindow","behindPanel","modalContainer","detachListener","closeListenerHandler","modal","ActionModal","actionName","closeName","header","getHeader","getBody","getFooter","footer","getActionName","getActionLevel","action","getCloseName","getActionButton","ActionModalButton","modalOptions","getModalOptions","ErrorModal","GlobalContainerStyle","updateOnResize","innerHeight","GlobalContainer","default","isTouchDevice","Divider","dragMousedown","divider","domEvent","dragMousemoveFunction","dragMousemove","dragMouseupFunction","dragMouseup","touchDeviceTriggered","dividerMousedownFunction","DividerStyle","AccordionStyle","flexGrow","flexShrink","flexBasis","SectionDividerStyle","barThickness","barPadding","dividerColor","backgroundClip","TitledDividerStyle","dividerStyle","DividerBar","noTextSelection","verticalDivider","horizontalDivider","SectionDivider","autoCollapse","uncollapsedSizes","verticalSection","horizontalSection","getHeight","setHeight","minWidth","getDimension","panels","dividers","parentSize","childSize","unCollapsedCount","fixed","getVisibleDivider","setDimension","recalculateDimensions","getHiddenDivider","isCollapsed","expandChild","collapseChild","fixedTotalSize","unfixedTotalSize","dividerEvent","previousEvent","previousPanel","getPreviousUnfixedChild","nextPanel","getNextUnfixedChild","panelsSize","deltaFunction","mouseMoveListener","delta","nextSize","previousSize","getMinDimension","mouseUpListener","clearListeners","dividerMouseDownFunction","leftChildVisible","DividerBarClass","getDividerBarClass","TitledSectionDividerBar","verticalDots","arrowButton","horizontalDots","leftButton","rightButton","BarCollapsePanel","panelChild","getGivenChildren","barCollapsePanel","panelSize","hiddenContent","collapsedSize","isFirst","isLast","firstCaret","lastCaret","collapsedBarTitle","TitledSectionDivider","paddingRemoved","animatedSectionDivider","wrappedChild","AccordionDivider","grabbing","grab","collapseIcon","toggleCollapsed","Accordion","accordion","dragTriggered","panelsHeight","totalFlex","getPreviousVisibleChild","getNextVisibleChild","sign","toggleChild","toggleClass","childrenStatus","CarouselStyle","navigatorHeight","hoverColor","navigatorTransitionTime","CarouselNavigator","navigatorIcon","Carousel","carousel","setActiveIndex","activeIndex","pusher","RangePanelStyle","rowHeight","overflowY","EntriesManager","rawEntries","cacheEntries","cachedEntries","sortEntries","filterEntries","getRawEntries","low","high","getComparator","getFilter","comparator","TableStyle","cellStyle","theadCellStyle","borderSpacing","borderCollapse","SortableTableStyle","sortIcon","TableRow","rowCells","columns","column","renderEntryCell","Table","setColumns","table","renderTableHead","renderTableBody","renderHeaderCell","getEntries","RowClass","getRowClass","getEntryKey","getRowOptions","headerStyle","renderColumnHeader","headerName","columnDefaults","TableRowInCollapsibleTable","CollapsibleTableStyle","collapsibleTableStyle","CollapsibleTableRow","renderCollapsible","getInitialCollapsedContent","DelayedCollapsibleTableRow","redrawCollapsible","CollapsibleTableInterface","BaseTableClass","toggleColumn","rowClass","CollapsibleTable","SortableTableInterface","SortIconClass","SortableTable","columnSortingOrder","sortByColumn","sortBy","sortDescending","colCmp","col","keyA","rawValue","keyB","cmp","cmpRes","sortedEntries","TimeUnit","baseUnit","multiplier","pluralName","milliseconds","getMilliseconds","variableMultiplier","variableDuration","isVariable","date","timeUnit","CANONICAL","ALL","FIXED_DURATION","VARIABLE_DURATION","MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","TRIMESTER","SEMESTER","YEAR","dateMethodSuffix","Duration","relativeDuration","toDuration","increm","negate","toMilliseconds","toSeconds","toMinutes","toHours","locale","addCanonicalTimeUnit","timeUnitsName","addCanonicalTimeUnits","MAX_AUTO_UNIX_TIME","BaseDate","StemDate","toDate","setTime","getTime","toUnix","toTimeUnit","getDateValue","equals","diff","isBefore","isAfter","isSameOrAfter","isSameOrBefore","getDay","count","currentValue","roundDown","addUnit","roundUp","isAbsolute","loc","token","tokenFormattersMap","tokens","splitToTokens","evalToken","fromUnixMilliseconds","getTimezoneOffset","year","getFullYear","lastDayInMonth","getMonth","getDate","months","isLeapYear","month","totalDays","getDaysCountPerMonth","getDayInYear","getWeekDay","unixMilliseconds","unixSecons","highResTimestamp","performance","timing","navigationStart","unixTime","fromUnixSeconds","candidate","lastIsLetter","escapeByCurlyBracket","escapeBySquareBracket","charCode","charCodeAt","isLetter","format","pattern","utc","miniWeekDays","shortWeekDays","longWeekdays","shortMonths","longMonths","DateLocale","formats","longDate","toISOString","getHours","getMinutes","getSeconds","ServerTime","subtract","offset","onlyIfMissing","setPageLoadTime","serverPageLoad","responseStart","DAY_IN_MILLISECONDS","isDifferentDay","timeA","timeB","DatePickerTable","TimePickerWidget","hours","minutes","seconds","textSpanStyle","changeCallback","hourSlider","minuteSlider","secondSlider","DateTimeWindow","computeInitial","initialDateTime","formatISO","currentDate","toTimeString","output","datePicker","timePicker","DateTimePicker","setDate","integerTokens","number","isNaN","years","days","textInput","parseDateFromString","dateString","enqueueIfNotLoaded","isLoaded","enqueueMethodCall","EnqueueableMethodMixin","methodCallQueue","methodCall","CodeEditor","getAce","aceMode","aceTheme","aceKeyboardHandler","tabSize","showLineNumber","showPrintMargin","printMarginSize","applyAceOptions","aceResize","ace","requireAce","onDelayedMount","edit","$blockScrolling","Infinity","resolveQueuedMethods","renderer","$textLayer","setAceMode","setAceKeyboardHandler","setAceTheme","setAceFontSize","setAceTabSize","setAceLineNumberVisible","setAcePrintMarginVisible","setAcePrintMarginSize","setReadOnly","setUseWrapMode","lineWrapping","numLines","maxLines","minLines","setAceOptions","langTools","require","setBasicAutocompletion","enableBasicAutocompletion","setLiveAutocompletion","enableLiveAutocompletion","setSnippets","enableSnippets","resize","sourceCode","fakeUserChange","apiChange","getSession","setMode","$keybindingId","keyboardHandler","aceName","setKeyboardHandler","getMode","setTheme","getFontSize","getOption","setShowGutter","getShowGutter","setShowPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","annotations","setAnnotations","setOption","foldStyle","setFoldStyle","setHighlightActiveLine","setHighlightGutterLine","getScrollTop","setScrollTop","startLine","startCol","endLine","endCol","Range","AceRange","addMarker","marker","removeMarker","doc","getTextRange","getDocument","session","getLine","gotoLine","insert","addAceSessionEventListener","on","focus","editor","editorRow","editorColumn","undoManager","setUndoManager","lastRow","lastRowLength","scrolledToBottom","isRowFullyVisible","scrollToLine","selectAll","execCommand","StaticCodeHighlighterStyle","StaticCodeHighlighter","hideActive","TileStyle","perspective","transformStyle","backfaceVisibility","Tile","tile","hiddenTile","hidden","oldColor","flip","flipAmount","swap","styleFace","styleBack","board","BoardStyle","COLORS","Board","colorIndex","matrixChildren","tiles","rowChildren","colorsIndex","pairs","pair","m","visibleTiles","tilesColors","pairIndex","findIndex","tileColor","lastTile","flipTiles","GameStyle","Game","game","cells","generatePairs","IndexPageStyle","IndexPage","StringStream","pointer","steps","ch","whitespaceChar","whitespaceStart","done","at","validChars","skipWhitespace","whitespace","wordStart","nanString","advance","NaN","char","infinityString","isDigit","isHexDigit","numberStart","peek","delimiter","maxLength","delimiterMatch","delimiterIndex","delimiterLength","search","newStream","kmp","prefixLength","ModifierAutomation","startNode","lastNode","startPatternNode","patternPrefix","patternNode","leftWhitespace","whitespaceNode","next","newNode","backNode","patternLastNode","captureContent","capture","captureNode","endPattern","endCaptureNode","endPatternPrefix","endPatternNodes","endPatternLastNode","endNode","patternStep","endPatternStep","currentArray","originalString","matcher","arrayLocation","currentElement","newArray","end","isJSX","nextState","modifierStart","modifierEnd","modifierCapture","start","isString","reverse","processChildren","processChild","isDummy","InlineModifierMixin","BaseModifierClass","lastElement","lastIndexOf","LineStartModifierMixin","groupConsecutive","isValidElement","wrapItem","patternIndex","patternEnd","itemTag","RawContentModifierMixin","BlockCodeModifier","codeOptions","codeBlock","firstLineEnd","firstLine","lineStream","word","MarkupParser","parseOptions","codeHighlighter","getElement","HeaderModifier","hashtagIndex","hashtagEnd","headerLevel","nextChar","HorizontalRuleModifier","UnorderedListModifier","OrderedListModifier","ParagraphModifier","capturedContent","lineStart","StrongModifier","ItalicModifier","InlineCodeModifier","InlineVarModifier","InlineLatexModifier","LinkModifier","checkAndAddUrl","isCorrectUrl","href","trimProtocol","modifiers","uiElements","arr","parseUIElements","modifier","modify","el","stream","textStart","elementStart","parseUIElement","e","optionsEnd","contentStart","uiElementStart","remainingContent","validOptionName","optionName","optionString","foundStringEnd","bracketCount","validJSON","jsonString","parseJSON5","lineNumber","columnNumber","escapee","f","n","renderChar","chr","SyntaxError","stringify","c","isFinite","hex","uffff","delim","inlineComment","blockComment","comment","object","source","reviver","walk","holder","k","v","MarkupClassMap","fallback","extraClasses","classMap","extraClass","classObject","dependencies","dependency","registerMarkup","getClass","GLOBAL","MarkupRenderer","parser","registerDependencies","reparse","convertToUI","SafeUriEnhancer","isSafeUri","uri","MarkupEditor","showButtons","rendererOptions","refLink","getEditor","getMarkupRenderer","markup","markupRenderer","separator","updateValue","editorPanel","codeEditor","toggleLeftButton","sectionDivider","setLevel","toggleRightButton","rendererPanel","setEditorOptions","getCircleStyle","borderSize","animationName","animationDuration","rotate","animationIterationCount","animationTimingFunction","createCircle","RotatingHelperStyle","ConcentricCirclesLoadingScreen","centerConstant","rotateClockwise","rotateCounterclockwise","ScriptResolver","scriptPath","loaded","scriptElement","async","onLoad","getElementsByTagName","scriptResolveMap","ensureSingle","script","scriptResolver","ensure","scripts","promises","all","DelayedElement","_loaded","applyNodeAttributesNotLoaded","applyNodeAttributesLoaded","renderNotLoaded","renderLoaded","_executedMount","beforeRedrawNotLoaded","redrawNotLoaded","redrawLoaded","State","stores","applyEventWrapper","applyEvent","objectType","store","getStore","individualEvent","importState","getStoreForEvent","objectId","stateMap","storeState","getDependencies","importStateFromTempMap","GlobalState","DefaultState","StateDependentElement","endsWith","renderLoading","renderError","getJSON","getAjaxUrl","getAjaxRequest","setLoaded","setError","AjaxFetchMixin","BaseStoreClass","successCallback","errorCallback","forceFetch","fetchJobs","fetchTimeout","executeAjaxFetch","fetchTimeoutDuration","ids","requestData","getFetchRequestData","fetchURL","fetchType","fetchJob","idFetchJobs","maxFetchObjectCount","idChunks","fetchJobsChunks","requests","getFetchRequestObject","getFetchRequests","requestObject","VirtualStoreObjectMixin","BaseStoreObjectClass","newId","oldId","hasTemporaryId","VirtualStoreMixin","generateVirtualId","objects","virtualId","updateId","existingVirtualObject","getVirtualObject","applyUpdateObjectId","virtualIdCounter","StoreSymbol","StoreObject","setStore","handlers","_eventDispatcher","addUpdateListener","getState","registerStream","getStreamName","BaseStore","ObjectWrapper","attachToState","addStore","GenericObjectStore","getObjectIdForEvent","asIterable","sendDispatch","existingObject","getObjectForEvent","refreshEvent","newObject","createObject","applyCreateEvent","applyEventToObject","objDeleted","applyDeleteEvent","applyUpdateOrCreateEvent","fakeCreate","fakeExisting","SingletonStore","User","keyChain","currentDict","customSettings","getCustomSetting","lastKey","USER","customSettingsKey","customSettingsValue","timeouts","postJSON","setCustomSetting","UserStore","getCurrentUser","PublicUser","displayName","username","PublicUserStoreClass","PublicUserStore","UserNotification","userId","getUser","lastReadNotificationId","UserNotificationStore","UserHandle","setUser","user","handle","getProfileUrl","getDisplayHandle","LanguageObject","localName","Language","LanguageStoreClass","isoCode","language","Locale","Article","edits","isSuperUser","userCreatedId","articleEdit","ArticleStore","article","baseArticleId","languageId","ArticleEdit","articleId","ArticleStoreClass","baseArticle","getTranslation","ArticleEditStore","addCreateListener","getArticle","addEdit","TransferOwnershipModal","newOwner","ownerFormInput","messageArea","showMessage","transferOwnershipButton","DeleteArticleModal","deleteArticle","deleteArticleButton","articles","getArticleIndex","CreateArticleModal","createArticle","articleNameInput","dependencyInput","languageSelect","isPublic","publicCheckbox","createArticleButton","addArticle","AddTranslationModal","ArticleOwnerSpan","ArticlePublicSpan","ArticleTable","resetColumnSortingOrder","unix","dateCreated","dateModified","ArticleManager","addButton","ArticleTranslationManager","ArticleRenderer","markupClassMap","showEditButton","canBeEditedByUser","editButtonUrl","getEditButton","getArticleToRender","getArticleDependencies","liveLanguage","RecursiveArticleRenderer","ArticleSwitcher","articleChildMap","getPageForArticle","initialArticle","initialArticleId","setActiveArticleId","deleteRedirectLink","ArticleMarkupEditor","ArticleEditor","DiffWidgetClass","versions","versionsLabels","getEdits","leftEditable","rightEditable","initializeVersioning","translationsPanel","baseArticleForm","ownershipPanel","setOwner","revisionsPanel","arrows","markupEditor","saveMarkup","articleNameFormInput","dependencyFormInput","saveOptions","deleteArticleModal","saveMarkupMessageArea","saveMarkupButton","addNewVersion","saveOptionsMessageArea","saveOptionsButton","setOwnerMessageArea","setOwnerButton","leftIndex","leftTextSelector","rightIndex","rightTextSelector","setLeftIndex","setRightIndex","diffWidget","setLeftText","setRightText","updateEditable","setLeftEditable","setRightEditable","onbeforeunload","UserReactionCollection","reactions","getUserReactionStore","reaction","collectionId","currentUser","getReactions","userReaction","currentUserReaction","getCurrentUserReaction","UserReaction","UserReactionCollectionStore","UserReactionStore","MessageInstance","messageId","timeAdded","MessageThreadStore","messageThreadId","fakeIfMissing","reactionCollection","reactionCollectionId","upvotesCount","downvotesCount","getCurrentUserReactionType","getReactionCollection","getNumLikes","getNumDislikes","ans","currentId","getNormalizedId","getMessageThread","getMessages","hasMarkupEnabled","react","deleteMessageInstance","messageThread","messages","postError","MessageThread","streamName","online","markupEnabled","messageInstance","orderDescending","lastMessage","MessageInstanceStoreClass","messageContent","temporaryId","virtualMessageInstance","meta","MessageInstanceStore","createEvent","addMessageInstance","BaseChatObject","GroupChat","GroupChatStoreClass","GroupChatStore","chatId","PrivateChat","user1Id","user2Id","PrivateChatStore","getChatWithUser","myUserId","privateChat","fetchForUser","privateChatId","Plugin","linkToParent","pluginName","Pluginable","PluginClass","plugins","plugin","getPlugin","BasePopup","contentPadding","arrowDirection","createArrowStyle","baseArrowOutline","baseArrow","getArrow","arrowMargin","bodyPlaced","left2","popupArrow","popupArrowOutline","setParentNode","manual","bindInsideParent","bodyPopups","popup","Popup","titleFontSize","contentFontSize","getTitleAreaContent","newTitle","documentListener","supportsEvent","fakeClickEvent","initEvent","dispatchEvent","blur","closeButtonColor","Emoji","ClickableEmote","redrawTimeout","textBox","appendValue","getValueText","afterClick","ClickableEmoji","ClickableTwitchEmote","EmojiButton","getTextBox","closePopup","emotesList","emoji","EmojiMini","EMOJI","twitchEmoji","TWITCH_EMOTICONS","emojiPopup","getPopup","MarkupEditorModal","getMarkupEditorStyle","appendGraphExample","getButtonStyle","appendSubmissionExample","appendCodeExample","appendLinkExample","appendLatexExample","hideCallback","showCallback","doneButton","ChatMarkupRenderer","Country","getIsoCode","ALL_COUNTRIES_PLACEHOLDER","NO_COUNTRY_PLACEHOLDER","COUNTRY_COMPARATOR","CountryStoreClass","noneName","countriesIds","allCountries","countries","countryId","CountryStore","SocialApp","clientId","SocialAppStoreClass","socialApp","SocialAppStore","SocialAccountManager","getSocialApp","getClientId","_Global","login","connect","GoogleManager","getSocialAppByName","loginByTokenUrl","ensureScriptNodeExists","getElementById","gapi","load","auth2","init","client_id","updateSigninStatus","getGoogleAuth","isSignedIn","listen","getAuthInstance","getGoogleUser","getAuthResponse","process","handleProcess","grantOfflineAccess","redirect_uri","immediate","sendData","reload","FacebookManager","version","loginOptions","auth_type","scope","logoutUrl","fbAsyncInit","FB","appId","xfbml","nextUrl","accessToken","authResponse","expiresIn","logout","onLogoutSuccess","onLoginSuccess","onLoginCanceled","onLoginError","GithubManager","loginWindowOptions","githubUri","rawParams","githubWindow","loginHeight","registerHeight","buttonHeight","fontAwesomeIconHeight","signInButtonHeight","signInButtonWidth","LoginStyle","selectedLeft","selectedRight","fontAwesomeIcon","connectWith","connectIcons","socialConnectDimensions","flexWrap","ERROR_TIMEOUT","socialLoginSpecificInfo","Google","loginManager","Facebook","Github","SocialConnectButton","specificInfo","socialConnectButtonContainer","socialConnectButtonIcon","getLoginManager","loginElement","clearErrorMessage","ThirdPartyLogin","thirdPartyLoginContainer","getSocialApps","getConnectWith","getConnectWithButtons","LoginWidget","loginWidget","emailIcon","passwordInputOptions","placeholder","rememberMeCheckbox","rememberMe","forgotPassword","badLogin","signInButtonContainer","signInButton","getSignInValue","horizontalLine","getHorizontalLine","getEmailInput","getPasswordInput","getRememberMeCheckbox","getForgotPassword","getSignInButton","getClearBothArea","getErrorArea","getThirdPartyLogin","isError","loginErrorMessage","email","emailInput","password","passwordInput","remember","rememberInput","setErrorMessage","sendLogin","RecaptchaWidget","grecaptcha","GOOGLE_RECAPTCHA_PUBLIC_KEY","captchaId","getResponse","onRecaptchaCallback","RegisterWidget","registerWidget","allWithNone","countrySelect","formFields","getUsernameInput","getCountryInput","hostname","recaptchaWidget","recaptchaContainer","getSignUpButton","submitButton","recaptchaKey","usernameInput","errorArea","sendRegistration","NormalLogin","loginRegisterSystem","loginSystemButton","registerSystemButton","loginRegisterButtons","getLoginButton","getRegisterButton","loginButton","registerButton","LoginTabButton","selectedLeftClass","RegisterTabButton","selectedRightClass","Login","LoginModal","isAuthenticated","VotingWidgetStyle","likeColor","dislikeColor","notVoteColor","balanceColor","mainClass","thumbsStyle","counterStyle","VotingWidget","votesBalance","userVote","buttonsStyle","likeButtonStyle","getUserVote","dislikeButtonStyle","getVotesBalance","CommentVotingWidget","updateTarget","possibleTarget","tempListener","setupListener","likeButton","resetReaction","like","dislikeButton","dislike","CommentVotingWidgetWithThumbs","thumbsUpScoreStyle","thumbsDownScoreStyle","displayStyle","thumbsUpHoverStyle","thumbsDownHoverStyle","ChatStyle","navbarHeight","renderMessageHeight","userFontSize","commentFontSize","hrBackgroundColor","hoverBackgroundColor","previewButton","loadMoreButton","overflowX","wordBreak","wordWrap","PreviewMarkupButton","EditableMessage","deletable","toggleEditMode","editContent","writingSectionStyle","chatInputStyle","hideEditMode","messageInput","saveMessageChanges","deleteMessage","contentSwitcher","hasChild","contentContainer","showEditMode","GroupChatMessage","groupChatMessage","getPreviousMessage","editButton","timestamp","shouldShowDayTimestamp","messageTimeStampHr","messageTimeStamp","errorElement","userHandle","getTimeOfDay","commentContent","PrivateChatMessage","paddingDiv","isOwnMessage","ChatMessageScrollSection","ChatWidget","ChatMessageClass","ChatWidgetClass","dateTimestamps","renderMessage","initializeShowLoadMoreButton","getNumMessages","showLoadMoreButton","getMaxMessageId","createVirtualMessageInstance","baseRequest","chatInput","createVirtualMessage","setPostError","stack","messageWindow","scrollToBottom","getPostURL","disableStateImport","scrollPosition","scrollPercent","loadMoreMessages","saveScrollPosition","applyScrollPosition","setAdaptiveHeight","viewportHeight","documentElement","availableHeight","extraHeightOffset","getDesiredHeight","renderMessageView","outstandingRequest","topMessage","getTopMessage","messageInstances","lastMessageId","oldScrollHeight","ajaxCall","getGetURL","getGetType","emptyData","scrollDelta","dayTimestamp","muted","sendMessage","messageBoxButton","userData","renderMessageBox","defaultPlugins","getDefaultPlugins","registerPlugin","messageWindowScrollTop","messageWindowscrollMax","addResizeListeners","GroupChatWidget","PrivateChatWidget","getOtherUserId","VotableChatMessage","VotableGroupChatWidget","BLUE","HOVER_BLUE","BLACK","HOVER_BLACK","WHITE","CSAStyle","BlogStyle","writtenBy","link","blogArticleRenderer","BlogArticleRendererStyle","hStyle","CommentWidgetStyle","previewButtonStyle","ThreadMessage","messageDate","votes","ToggleLogin","BlogCommentWidget","commentWidgetStyle","chatInputMax","sendMessageButtonStyle","CommentWidget","commentsCount","commentsTitle","AsyncCommentThread","groupChat","commentWidgetOptions","BlogEntry","BlogEntryStoreClass","urlName","blogEntry","BlogEntryStore","BlogArticleRenderer","BlogQuote","quote","BlogEntryEditModal","entryId","discussionButton","discussionId","createDiscussion","changeSettings","titleInput","urlInput","visibleCheckbox","changeURL","NewBlogEntryModal","addEntry","onKeyUp","postContentMarkup","blogEntryId","BlogEntryPreview","getBlogEntry","blogStyle","getBlogArticle","publishedDate","publishedFormat","modifiedFormat","articleInfoStyle","fontStyle","getEntryURL","whiteOverlay","BlogEntryView","blogEntryView","blogEntryEditButton","getComments","bottomSection","BlogEntryList","blogEntries","showNewBlogPostModal","finishedLoading","lastDate","DelayedBlogEntryList","DelayedBlogEntryView","getEntryForURL","entryURL","entryUrlName","BlogRoute","getSubroutes","Forum","forumThreads","registerToStream","ForumThreadStore","addDeleteListener","forumThread","parentId","deleteForumThread","ForumStore","ForumThread","getParent","addForumThread","authorId","pinnedIndex","contentMessageId","getContentMessage","lastActive","forumThreadId","numMessages","getNumReplies","EditThreadReplyButton","EditThreadReplyModal","DeleteThreadReplyModal","DeleteThreadReplyButton","ForumThreadReplyStyle","ForumThreadPanelStyle","numRepliesFontSize","messageFontSize","buttonFontSize","fontsize","ForumThreadHeaderStyle","widthLimit","tagsHeight","baseStyleObject","boxSizing","innerWidth","ForumThreadPreviewStyle","lines","ForumThreadBubbleStyle","titlePaddingBottom","ForumPanelStyle","headerItemHeight","CreateThreadReplyButton","markupEditorModal","CreateThreadReplyModal","createThreadReply","TranslationKey","TranslationKeyStore","TranslationEntry","translationKeyId","TranslationEntryStore","translationEntry","getTranslationKey","ErrorMessage","translationKey","ErrorMessageStoreClass","ErrorMessageStore","ErrorHandlers","wrapError","showErrorAlert","PAGE_NOT_FOUND","forumThreadPanelStyle","CreateForumThreadModal","inputStyle","createForumThread","forumId","routeToThread","CreateForumThreadButton","getModalClass","DeleteForumThreadModal","deleteThread","DeleteForumThreadButton","ForumThreadReply","getMessageInstance","editMessage","editAndDeleteButtons","deleteButton","editDeleteButtons","fullPost","author","bottomPanel","voting","ForumThreadPanel","getMainForumURL","returnToMainForum","backButton","getForumThread","getTimeAdded","postsLength","numReplies","getForumThreadState","initializeListeners","replies","spaceBetween","forumThreadMessages","replyButtonDiv","getAuthor","replyButton","getMessage","getVoting","ForumThreadHeader","tagsTitle","tagsAuthor","tagsReplies","tagsViews","tagsVotes","tagsActivity","getReplies","getViews","getVotes","getActivity","ForumThreadPreview","forumThreadPreview","ForumThreadBubble","pinned","isPinned","pinnedIcon","threadTitleAndPreview","threadTitle","getHref","threadTitleSpan","threadAuthor","threadReplies","threadRepliesSpan","threadViews","numViews","threadVotes","threadActivity","getLastActive","getThreadTitle","getThreadAuthor","getThreadReplies","getThreadViews","getThreadVotes","getThreadActivity","ForumThreadList","forum","getForumThreads","getPinIndex","Bubble","getBubbleClass","ForumPanel","buttonParent","getButton","getForumThreadList","DelayedForumPanel","DelayedForumThreadPanel","ForumRoute","MAIN_ROUTE","NavStyle","dimensions","collapseArrowWidth","sidepanelElementHeight","sidepanelWidthLeft","sidepanelWidth","sidepanelHideWidth","sidepanelTransitionDuration","boxShadowWidth","backgroundTransitionDuration","navElement","sidePanel","getColors","sidepanelBackground","boxShadowSidePanel","navManagerColor","navBarColor","NAV_MANAGER_COLOR_NAV_BAR","sidePanelColor","NAV_MANAGER_COLOR_SIDE_PANEL","boxShadowNavManager","NAV_MANAGER_SIDE_PANEL_BACKGROUND_COLOR","sidepanelHover","NAV_MANAGER_SIDE_PANEL_HOVER_COLOR","navbarBackground","NAV_MANAGER_NAV_BAR_BACKGROUND_COLOR","navbarHover","NAV_MANAGER_NAV_BAR_HOVER_COLOR","hr","NAV_MANAGER_HR_COLOR","NAV_MANAGER_TEXT_COLOR","listStyleType","StorageMap","storage","SEPARATOR","setItem","getRawKey","serialize","removeItem","getItem","getRaw","deserialize","totalStorageKeys","prefixLenth","SessionStorageMap","sessionStorage","LocalStorageMap","localStorage","doDeserialization","realCallback","getChangeDispatchable","CHANGE_DISPATCHABLE","separatorIndex","actualKey","newEvent","navSessionManager","BasicOrientedElementInterface","BasicOrientedElement","BasicOrientedLinkElement","NavElementInterface","isToggled","getToggledState","navElementHorizontal","NavSection","navCollapseElement","navElementVertical","navElementValueHorizontal","navElementValueVertical","childrenToRender","subElementsClass","navElementVerticalArrow","navElementHorizontalArrow","getSelf","getSubElements","showChildren","hideChildren","saveToggledState","sessionKeyName","sessionKey","defaultToggled","persistent","getLocalToggledState","getSessionKeyName","toggleChildren","NavElement","NavLinkElement","navLinkElement","navSectionHorizontal","getAnchor","navSectionVertical","anchor","NavAnchoredNotifications","getSwitcherStyle","bodyListener","NavIcon","LeftSideNavIcon","sideIcon","RightSideNavIcon","WrappedNavIcon","wrappedIcon","maxDistanceFromSide","minSwipeDistance","minSwipeSpeed","touchEventHandler","ignoreCondition","successCondition","xType","targetTouches","startX","panelToggler","touchCallback","touchendCallback","initializeSwipeRight","navManager","maxDistance","minDistance","minSpeed","touchX","leftSidePanel","pageXOffset","toggleLeftSidePanel","initializeSwipeLeft","rightSidePanel","toggleRightSidePanel","initializeSwipeEvents","SidePanelGroup","sidePanelGroup","SidePanel","initNode","applyVisibility","storageSerializer","navVerticalRightHide","navVerticalLeftHide","setVisible","NavCarouselStyle","NavManager","carouselStyleSheet","persistentLeftSidePanel","persistentRightSidePanel","getCarouselStyleSheet","getLeftSidePanelChildren","getRightSidePanelChildren","initLeftSidePanel","initRightSidePanel","wrapped","navigationPanel","leftPanelToggler","leftSideIconAction","rightPanelToggler","rightSideIconAction","getLeftConditioned","getRightConditioned","wrappedPanel","wrappedToggler","wrappedIconAction","leftConditionedWrapper","rightConditionedWrapper","leftConditioned","getLeftConditionedChildren","rightConditioned","getRightConditionedChildren","mainPanel","toggleEvent","secondaryPanel","toggleSidePanel","getLeftSideIcon","getLeftFixed","getLeftConditionedWrapper","getWrappedIcon","getRightConditionedWrapper","getRightFixed","getRightSideIcon","wrapSkip","wrapScheduled","checkForWrap","wrapNavElements","unwrapNavElements","unwrappedTotalWidth","AppNavManager","getUserElement","singlePageLinkOnMount","shiftKey","ctrlKey","metaKey","StemApp","getRouterOptions","getRouter","getBeforeContainer","getContainer","getAfterContainer","click","appInstance","WebsocketStreamHandler","websocketSubscriber","bytesReceived","isIndexed","lastMessageIndex","messageBuffer","missedPackets","tryCount","clearResubscribeTimeout","SUBSCRIBING","haveIndex","sendResubscribe","getLastIndex","sendSubscribe","subscribeTryCount","subscribeTimeout","STREAM_SUBSCRIBE_TIMEOUT","subscribeTimeoutMax","STREAM_SUBSCRIBE_MAX_TIMEOUT","timeoutDuration","resendSubscribeTimeout","SUBSCRIBED","packet","firstSpace","processIndexedPacket","processVanillaPacket","processMissedPacket","processIndexedMessage","MISSING_MESSAGE","rawMessage","parseMayFail","UNSUBSCRIBED","WebsocketSubscriber","urls","WEBSOCKET_URL","streamHandlers","attemptedConnect","connectionStatus","ConnectionStatus","websocket","failedReconnectAttempts","numConnectionAttempts","currentURLIndex","WebSocket","getNextUrl","setConnectionStatus","CONNECTING","newConnection","onopen","onWebsocketOpen","onmessage","onWebsocketMessage","onWebsocketError","onclose","onWebsocketClose","tryReconnect","reconnectWait","CONNECT_RETRY_TIMEOUT","CONNECT_RETRY_MAX_TIMEOUT","reconnectTimeout","streamHandler","getStreamHandler","warning","isOpen","readyState","setStatusSubscribed","previousFailedReconnectAttempts","reset","CONNECTED","resubscribe","afterStreamName","processPacket","HEARTBEAT_MESSAGE","errorType","onStreamSubscribe","processStreamPacket","fatalErrorClose","DISCONNECTED","resetStatus","subscribe","addStreamListener","GlobalStyleSheet","EstablishmentApp","loadPublicState","addAjaxProcessors","registerWebsocketStreams","initializeViewportMeta","configureTheme","initializeGlobalStyle","PUBLIC_STATE","addPreprocessor","disableCredentials","addPostprocessor","xhrPromise","responseHeaders","responseDate","estimatedServerTime","addErrorPostprocessor","viewportMeta","MIN_VIEWPORT_META_WIDTH","AppClass"],"mappings":"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"}